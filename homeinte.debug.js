/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// identity function for calling harmony imports with the correct context
/******/ 	__webpack_require__.i = function(value) { return value; };
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 68);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_cutpic__ = __webpack_require__(38);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_wifi__ = __webpack_require__(17);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_sina_log__ = __webpack_require__(14);
var _sinaUtils;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

//jshint esversion:6




var sinaUtils = (_sinaUtils = {
  https: 'not set',
  isHTTPS: function isHTTPS() {
    var protocol = window.location.protocol;

    // console.log(this.https);
    // console.log(protocol);

    if (typeof this.https != 'boolean') {
      if (parseInt(this.getUrlString('ssl')) || protocol == 'https:') {
        this.https = true;
      } else {
        this.https = false;
      }
    }
    return this.https == 'not set' ? false : this.https;
  },
  huidu: {
    add: function add(name, abtest, option) {
      if (this.list.indexOf(name) == -1) {
        this.list.push(name);
        var grayid = '';
        for (var i in option.fn) {
          if (abtest.indexOf(i) != -1 || abtest.indexOf(parseInt(i)) != -1) {
            grayid = i;
          }
        }
        grayid = grayid || option.default;
        this[name] = option.fn[grayid];
      }
    },
    list: []
  },
  huiduArr: function huiduArr() {
    var numArr = [];
    if (SM && SM.ABT && SM.ABT.HIT && Array.isArray(SM.ABT.HIT) && SM.ABT.HIT.length != 0) {
      SM.ABT.HIT.forEach(function (val) {
        numArr.push(parseInt(val));
      });
    }
    return numArr;
  },
  isDebug: function isDebug() {
    if (location.href.indexOf("debug=1") != -1) {
      return true;
    }
    return false;
  },
  // 使用方法
  // huidu.add('aaa', [78,90,1230,1203,1230,023023,123102,102031892,790],{
  //   default : '79',
  //   fn : {
  //     78 : function(){
  //       alert('我是灰度策略78');
  //     },
  //     79 : function(){
  //       alert('我是灰度策略79');
  //     }
  //   }

  // })
  // huidu.aaa();
  getPicType: function getPicType() {
    if (sinaUtils.cookie.get('SMART') == 1) {
      return true;
    }
    return sinaUtils.cookie.get('NPIC') === null || sinaUtils.cookie.get('NPIC') == 0 ? true : false;
  },
  prefixInteger: function prefixInteger(num, n) {
    return (Array(n).join(0) + num).slice(-n);
  },
  getURLBeforeQuestionMark: function getURLBeforeQuestionMark(url) {
    var parts = url.split('?');

    return parts[0];
  },
  getTrulyURL: function getTrulyURL(url) {
    var truly = '';

    function filter(url, by) {
      var parts = url.split(by);
      var i = 0;
      var len = parts.length;
      var trulyURL = '';
      var part = '';
      var trulyParts = [];

      for (i = 0; i < len; i++) {
        part = parts[i];

        if (part.indexOf('vt=') == 0 || part.indexOf('pos=') == 0 || part.indexOf('wm=') == 0) {
          continue;
        }

        trulyParts[i] = part;
      }

      trulyURL = trulyParts.join(by);

      return trulyURL;
    }

    // 去掉vt=4&pos=108的情况
    truly = filter(url, '&');

    // 去掉html?vt=4的情况
    truly = filter(truly, '?');

    return truly;
  },
  getCuttedImg: function getCuttedImg(baseURL, size, isCrop, isExecute) {

    if (!baseURL || !size) {
      return baseURL;
    }
    if (baseURL.indexOf('sinaimg') != -1 && !isCrop && !isExecute || baseURL.indexOf('leju.com') != -1 || baseURL.indexOf('bsyimg3.cdn.krcom.cn') != -1) {
      if (this.isHTTPS() && baseURL.indexOf("https") == -1) {
        baseURL = baseURL.replace('http:', 'https:');
      }
      return baseURL;
    }

    // if (baseURL.indexOf('"') != -1) {

    //   console.log('已经替' + baseURL + '去掉引号');
    //   baseURL = encodeURIComponent(JSON.parse(baseURL));
    //   // baseURL=baseURL.replace(/"/g,'');
    // }

    // var picMode = 'resize';
    // var cutImgDomain = this.isHTTPS() ? ('https://z' + Math.floor(Math.random() * 10) + '.sinaimg.cn') : 'http://s.img.mix.sina.com.cn';
    // var protocol = location.protocol
    // if (baseURL.indexOf("http") == -1) {
    //   baseURL = protocol + baseURL;
    // }
    // if (isCrop) {
    //   picMode = 'crop'
    // }

    if (baseURL.indexOf("k.sinaimg.cn") != -1 || baseURL.indexOf("ks.sinaimg.cn") != -1) {
      var arrDom = baseURL.split('/');
      baseURL = baseURL.replace(arrDom[arrDom.length - 1], 'original.jpg');
    }
    var cutPicStr = __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_cutpic__["a" /* default */].init(baseURL, {
      width: size.split('_')[0], //必传，裁图宽度
      height: size.split('_')[1], //必传，裁图高度
      top: 10, //裁切距顶部百分比 10%
      left: 50, //裁切距左边百分比  50% 目前认为顶部10%左边50%可能是最合适的距离
      code: 'c55', //后缀标识符，固定，可不传
      cut: isCrop, //是否裁切图，默认为true，若要人脸识别一定裁切请置为true
      server: true
    });

    return cutPicStr;
  },
  getUrlString: function getUrlString(paraName) {
    var reg = new RegExp("(^|&)" + paraName + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    if (r != null) return r[2];
    return null;
  },
  cloneObj: function (_cloneObj) {
    function cloneObj(_x) {
      return _cloneObj.apply(this, arguments);
    }

    cloneObj.toString = function () {
      return _cloneObj.toString();
    };

    return cloneObj;
  }(function (obj) {
    var str,
        newobj = obj.constructor === Array ? [] : {};
    if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') {
      return;
    } else if (window.JSON) {
      str = JSON.stringify(obj), //系列化对象
      newobj = JSON.parse(str); //还原
    } else {
      for (var i in obj) {
        newobj[i] = _typeof(obj[i]) === 'object' ? cloneObj(obj[i]) : obj[i];
      }
    }
    return newobj;
  }),
  hasClass: function hasClass(el, value) {
    var ret = false;

    if (el.classList.contains(value)) {
      ret = true;
    }

    return ret;
  },
  removeClass: function removeClass(el, value) {
    if (el.classList.contains(value)) {
      el.classList.remove(value);
    }
  },
  addClass: function addClass(el, value) {
    el.classList.add(value);
  },
  toggleClass: function toggleClass(el, value) {
    if (el.classList.contains(value)) {
      el.classList.remove(value);
    } else {
      el.classList.add(value);
    }
  },
  creatElement: function creatElement(tag, option) {
    var el = doc.createElement(tag);
    for (var i in option) {
      el.setAttribute(i, option[i]);
    }
    return el;
  },
  getDOM: function getDOM(str) {
    var ctn = doc.createElement('div');

    ctn.innerHTML = str;

    return ctn.childNodes;
  },
  outerHTML: function outerHTML(obj) {
    var tpl = sinaUtils.creatElement('div', {});
    tpl.appendChild(obj);
    return tpl.innerHTML;
  },
  //DOM没有提供insertAfter()方法
  insertAfter: function insertAfter(newElement, targetElement) {
    var parent = targetElement.parentNode;

    if (parent.lastChild == targetElement) {
      // 如果最后的节点是目标元素，则直接添加。因为默认是最后
      parent.appendChild(newElement);
    } else {
      //如果不是，则插入在目标元素的下一个兄弟节点 的前面。也就是目标元素的后面
      parent.insertBefore(newElement, targetElement.nextSibling);
    }
  },
  getWinWidth: function getWinWidth() {
    return win.innerWidth || doc.docElement.clientWidth || doc.body.clientWidth || 0;
  },
  getWinHeight: function getWinHeight() {
    return win.innerHeight || doc.docElement.clientHeight || doc.body.clientHeight || 0;
  },
  isEmptyObj: function isEmptyObj(obj) {
    for (var prop in obj) {
      if (obj.hasOwnProperty(prop)) return false;
    }
    return true;
  },
  parentA: function parentA(from, to) {
    if (!from) return false;
    if (from.nodeName == 'A') {
      return from;
    } else if (from == to) {
      return false;
    } else {
      return this.parentA(from.parentNode, to);
    }
  },
  index: function index(ele) {
    if (!ele) {
      return;
    }
    var children = ele.parentNode.children;
    for (var i = 0; i < children.length; i++) {
      if (ele == children[i]) {
        return i;
      }
    }
  },
  hasData: function hasData(val) {
    return !val || Object.prototype.toString.call(val) === "[object Array]" && !val.length || Object.prototype.toString.call(val) === "[object Object]" && this.isEmptyObj(val) ? false : true;
  },
  ajax: function ajax(url, callback, type, timeout) {
    //先声明一个异步请求对象
    var xmlHttpReg = null;
    var timer = -1;

    if (window.ActiveXObject) {
      //如果是IE
      xmlHttpReg = new ActiveXObject("Microsoft.XMLHTTP");
    } else if (window.XMLHttpRequest) {
      xmlHttpReg = new XMLHttpRequest(); //实例化一个xmlHttpReg
    }

    //如果实例化成功,就调用open()方法,就开始准备向服务器发送请求
    if (xmlHttpReg != null) {
      xmlHttpReg.open("get", url, true);
      xmlHttpReg.send(null);
      xmlHttpReg.onreadystatechange = doResult; //设置回调函数
    }

    timer = setTimeout(function () {
      xmlHttpReg.onreadystatechange = null;
      callback && callback(null, type);
    }, timeout || 3000);

    //回调函数
    //一旦readyState的值改变,将会调用这个函数,readyState=4表示完成相应

    //设定函数doResult()
    function doResult() {
      if (xmlHttpReg.readyState == 4) {
        //4代表执行完成
        if (xmlHttpReg.status == 200) {
          //200代表执行成功
          clearTimeout(timer);
          callback && callback(JSON.parse(xmlHttpReg.responseText), type);
        }
      }
    }
  },
  //可靠的jsonp
  jsonp: function jsonp(url, func, type, error) {
    var data = {
      timestamp: Date.now()
    };
    var localCookie = sinaUtils.cookie.get('dfz_location') || 'bj';
    //缓存逻辑
    var storage = this.storage.get('jsonp_' + type);
    if (storage && storage.time && storage.data && storage.local) {
      if (data.timestamp - storage.time < 1 * 60 * 1000 && storage.local == localCookie) {
        if (sinaUtils.isDebug()) console.log('走缓存', type);
        func && func(storage.data, type, url, func);
        sinaUtils.trigger('afterJSONP');
        return;
      }
    }
    //参数

    var callback = 'callback';
    var timeout = 5000;
    //jsonp
    var fnName = 'jsonp_' + Math.random();

    fnName = fnName.replace('.', '');

    window[fnName] = function (result) {
      clearTimeout(jsonp_timer);
      func && func(result, type, url, func, function () {
        sinaUtils.storage.setJsonp('jsonp_' + type, result);
      });
      oHead.removeChild(oS);
      window[fnName] = null;
      sinaUtils.trigger('afterJSONP');
    };
    data[callback] = fnName;

    if (url.indexOf('?') == -1) {
      url = url + '?';
    }

    var arr = [];
    for (var i in data) {
      if (i == callback) {
        arr.splice(0, 0, i + '=' + encodeURIComponent(data[i]));
      } else {
        arr.push(i + '=' + encodeURIComponent(data[i]));
      }
    }

    var sData = arr.join('&');
    var urlArr = [];
    var oS = document.createElement('script');
    urlArr = url.split("?");

    if (urlArr[1] != "") {
      sData += "&";
    }

    oS.src = urlArr[0] + "?" + sData + urlArr[1];
    if (this.isDebug()) {
      console.log(oS.src, "请求的链接地址");
    }
    var oHead = document.getElementsByTagName('head')[0];

    oHead.appendChild(oS);

    if (timeout) {

      var jsonp_timer = setTimeout(function () {
        if (storage && storage.time && storage.data) {
          if (data.timestamp - storage.time < 24 * 60 * 60 * 1000) {
            if (sinaUtils.isDebug()) console.log('走打底', type);
            func && func(storage.data, type, url, func);
            oHead.removeChild(oS);
            window[fnName] = null;
            sinaUtils.trigger('afterJSONP');
            return;
          }
        }
        // error && error({}, type, url, error);

        oHead.removeChild(oS);

        window[fnName] = null;

        // sinaUtils.trigger('afterJSONP');
        sinaUtils.jsonp2(url, func, type, error);
      }, timeout);
    }
  },
  jsonp2: function jsonp2(url, func, type, error) {
    if (this.isDebug()) console.log("jsonp2 called....");
    //参数
    var data = {
      timestamp: Date.now()
    };
    var callback = 'callback';
    var timeout = 5000;
    //jsonp
    var fnName = 'jsonp_' + Math.random();

    fnName = fnName.replace('.', '');

    window[fnName] = function (result) {
      clearTimeout(jsonp_timer);
      func && func(result, type, url, func, function () {
        sinaUtils.storage.setJsonp('jsonp_' + type, result);
      });
      oHead.removeChild(oS);
      window[fnName] = null;
      sinaUtils.trigger('afterJSONP');
    };

    data[callback] = fnName;

    if (url.indexOf('?') == -1) {
      url = url + '?';
    }

    var arr = [];
    for (var i in data) {
      if (i == callback) {
        arr.splice(0, 0, i + '=' + encodeURIComponent(data[i]));
      } else {
        arr.push(i + '=' + encodeURIComponent(data[i]));
      }
    }
    var sData = arr.join('&');
    var urlArr = [];
    var oS = document.createElement('script');
    urlArr = url.split("?");

    if (urlArr[1] != "") {
      sData += "&";
    }

    oS.src = urlArr[0] + "?" + sData + urlArr[1];
    if (this.isDebug()) {
      console.log(oS.src, "第二次请求的链接地址");
    }

    var oHead = document.getElementsByTagName('head')[0];

    oHead.appendChild(oS);

    if (timeout) {

      var jsonp_timer = setTimeout(function () {
        // func && func({}, type, url);
        error && error({}, type, url, error);
        oHead.removeChild(oS);
        window[fnName] = function () {};
        sinaUtils.trigger('afterJSONP');
      }, timeout);
    }
  },
  onloaded: false,
  onload: function onload(fn) {
    if (this.onloaded) {
      fn();
      console.log('afterLoad');
      return;
    }
    var _this = this;
    var f = function f() {
      if (_this.isDebug()) console.log('load');
      _this.onloaded = true;
      fn && fn();
      clearTimeout(t);
      t = null;
    };
    var t = setTimeout(function () {
      _this.onloaded = true;
      fn && fn();
      window.removeEventListener('load', f, false);
      t = null;
    }, 20000);
    window.addEventListener('load', f, false);
  },
  storage: {
    fastmode: 1,
    checkfastmode: function checkfastmode() {
      try {
        localStorage.setItem('checkfastmode', 1);
        this.fastmode = 0;
      } catch (e) {}
    },
    isfastmode: function isfastmode() {
      return function () {
        var isfastmode = 1;
        try {
          localStorage.setItem('checkfastmode', 1);
          isfastmode = 0;
        } catch (e) {}
        return isfastmode;
      }();
    },
    set: function set(key, value) {
      if (this.isfastmode()) return '';
      localStorage.setItem(key, JSON.stringify(value));
    },
    get: function get(key) {
      if (this.isfastmode()) return '';
      return JSON.parse(localStorage.getItem(key));
    },
    setJsonp: function setJsonp(key, value) {
      if (this.isfastmode()) return '';
      var localCookie = sinaUtils.cookie.get('dfz_location') || 'bj';
      var data = {
        time: new Date().getTime(),
        local: localCookie,
        data: value
      };
      this.set(key, data);
    },
    remove: function remove(key) {
      if (this.isfastmode()) return '';
      localStorage.removeItem(key);
    },
    setSession: function setSession(key, value) {
      if (this.isfastmode()) return '';
      sessionStorage.setItem(key, JSON.stringify(value));
    },
    getSession: function getSession(key) {
      if (this.isfastmode()) return '';
      return JSON.parse(sessionStorage.getItem(key));
    },
    removeSession: function removeSession(key) {
      if (this.isfastmode()) return '';
      sessionStorage.removeItem(key);
    }
  },
  cookie: {
    //设置cookie
    set: function set(cname, cvalue, expiresSeconds, domain, path) {
      var expires = -1;
      var exp = new Date();

      if (Number(expiresSeconds)) {
        exp.setTime(exp.getTime() + expiresSeconds * 1000);
        expires = exp.toUTCString();
      }

      var cookieStr = cname + "=" + cvalue + "; expires=" + expires;

      if (domain) {
        cookieStr += "; domain=" + domain;
      }

      if (path) {
        cookieStr += "; path=" + path;
      }

      document.cookie = cookieStr;
    },
    //获取cookie
    get: function get(cname) {
      var arr,
          reg = new RegExp("(^| )" + cname + "=([^;]*)(;|$)");
      if (arr = document.cookie.match(reg)) {
        return unescape(arr[2]);
      } else {
        return '';
      }
    }
  },
  exchange: function exchange(el1, el2) {
    var ep1 = el1.parentNode,
        ep2 = el2.parentNode,
        index1 = Array.prototype.indexOf.call(ep1.children, el1),
        index2 = Array.prototype.indexOf.call(ep2.children, el2);
    ep2.insertBefore(el1, ep2.children[index2]);
    ep1.insertBefore(el2, ep1.children[index1]);
  },
  event: {},
  on: function on(event, func) {
    if (!this.event.hasOwnProperty(event)) {
      this.event[event] = [];
    }
    this.event[event].push(func);
  },
  trigger: function trigger(event, args) {
    if (this.event.hasOwnProperty(event)) {
      for (var i = 0, len = this.event[event].length; i < len; i++) {
        this.event[event][i].apply(this, args);
      }
    }
  },
  getSearchValue: function getSearchValue(key) {
    var localSearch = location.search.substr(1),
        itemArr = localSearch.split("&"),
        value = "";
    for (var i = 0, len = itemArr.length; i < len; i++) {
      var listArr = itemArr[i].split("=");
      if (listArr[0] == key) {
        value = listArr[1];
      }
    }
    return value;
  },
  readabilityNum: function readabilityNum(num) {
    return typeof num === 'number' && num > 0 ? num > 9999999 ? '999万+' : num > 9999 ? parseInt(num / 10000) + '万' : num : null;
  },
  cardName: {},
  hasRepeatData: function hasRepeatData(key, val) {
    if (!val) return false;
    if (this.cardName[key] && this.cardName[key].indexOf(val) != -1) {
      return true;
    } else {
      if (!this.cardName[key]) {
        this.cardName[key] = [val];
      } else {
        this.cardName[key].push(val);
      }
      return false;
    }
  },
  getRollNum: function getRollNum(from, to) {
    var rollNum = Math.floor(Math.random() * (to - from) + from);

    return rollNum;
  },
  scrollListener: function scrollListener(target, option) {
    //校验参数
    if (!target || (typeof option === 'undefined' ? 'undefined' : _typeof(option)) != 'object') {
      throw new Error('scrollListener needs a object parameter.');
    }

    //滚动开始、滚动中、滚动结束、判断滚动结束及两次不同滚动的时间依据
    var alowList = ['scrollStart', 'scrolling', 'scrollEnd', 'threshold'];

    var _opt = {};

    for (var i = 0; i < 3; i++) {
      _opt[alowList[i]] = option[alowList[i]] || null;
    }

    _opt['threshold'] = option['threshold'] || 500;

    target.addEventListener('scroll', callback, false);

    var lastScrollingTime = new Date(1970, 0, 1, 0, 0, 0);
    var timer = 0;

    function callback() {
      clearTimeout(timer);

      var currentTime = new Date();

      if (currentTime - lastScrollingTime > _opt.threshold) {
        _opt.scrollStart && _opt.scrollStart();
      }

      lastScrollingTime = currentTime;

      _opt.scrolling && _opt.scrolling();

      timer = setTimeout(function () {
        _opt.scrollEnd && _opt.scrollEnd();
      }, _opt.threshold);
    }
  }
}, _defineProperty(_sinaUtils, 'cardName', {}), _defineProperty(_sinaUtils, 'hasRepeatData', function hasRepeatData(key, val) {
  if (!val) return false;
  if (this.cardName[key] && this.cardName[key].indexOf(val) != -1) {
    return true;
  } else {
    if (!this.cardName[key]) {
      this.cardName[key] = [val];
    } else {
      this.cardName[key].push(val);
    }
    return false;
  }
}), _defineProperty(_sinaUtils, 'adDate', function () {
  return Date.parse(new Date());
}()), _defineProperty(_sinaUtils, 'tyAdData', function tyAdData(configObj) {
  var self = this;
  var randomNum = self.storage.getSession('randomNum') || 0;
  if (self.storage.getSession('randomNum') && randomNum != 0) {
    randomNum = parseInt(self.storage.getSession('randomNum')) + 1;
    self.storage.setSession("randomNum", randomNum);
  } else {
    randomNum = Math.floor(Math.random() * 10000);
    try {
      self.storage.setSession("randomNum", randomNum);
    } catch (e) {}
  }
  var iswifi = null;
  __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_wifi__["a" /* default */].wifi(function (data) {
    iswifi = data.result;
    if (data.result) {
      iswifi = data.result.toString().toLowerCase();
    } else if (data.ori) {
      iswifi = data.ori.toString().toLowerCase();
    } else {
      iswifi = null;
    }
  });
  var addCofig = {
    "rotate_count": randomNum,
    "page_url": encodeURIComponent(location.href),
    "platform": "wap",
    "timestamp": this.adDate,
    "net": iswifi
  };
  if (configObj) {
    for (var i in configObj) {
      addCofig[i] = configObj[i];
    }
  }
  return JSON.stringify(addCofig);
}), _defineProperty(_sinaUtils, 'sendSinaLog', function sendSinaLog(obj) {
  var sendObj = {
    pk: 'tianyi',
    ek: 'interface',
    method: 'jsonp',
    data: [{
      message: obj.message || '',
      cre: obj.url && this.getUrlParam(obj.url, "cre") || '',
      mod: obj.url && this.getUrlParam(obj.url, "mod") || '',
      type: obj.type || ''
    }]
  };
  if (obj.config) {
    var _config = config,
        duplicate = _config.duplicate,
        length = _config.length;


    if (duplicate) {
      sendObj.data[0].duplicate = duplicate;
    }

    if (length) {
      sendObj.data[0].length = length;
    }
  }
  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_sina_log__["a" /* default */])(sendObj);
}), _defineProperty(_sinaUtils, 'getUrlParam', function getUrlParam() {
  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  var name = arguments[1];

  var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)');
  var urlStr = url.split("?")[1] || url.split("?")[0] || url;
  var value = urlStr.match(reg);
  return value === null ? null : decodeURI(value[2]);
}), _sinaUtils);
if (document.location.href.match(/debug\=1/ig)) {
  window._sinaUtils = sinaUtils;
}

/* harmony default export */ __webpack_exports__["a"] = (sinaUtils);

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_lazyload__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_url2callupId__ = __webpack_require__(16);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_tianyi_template__ = __webpack_require__(44);
// jshint esversion:6





var win = window;
var doc = document;

var isHTTPS = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isHTTPS();
var mode = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getPicType();

// window.leftArt = true;
var lazyLoadImgConfig = {
  lz1X1: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=',
  lz2X1: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=',
  lz3X2: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=',
  lz16X9: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJAQMAAAAB5D5xAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjwA0AABsAAQrj5HwAAAAASUVORK5CYII=',
  lz7X10: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAKAQMAAABCAtZOAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjwAIAABQAAfDpEZQAAAAASUVORK5CYII='
};
var likeTagTypeSetted = {
  0: false,
  2: false,
  4: false,
  7: false
};
var template = {
  isLeftArt: function isLeftArt() {
    if (SM && SM.ABT && SM.ABT.ALL && SM.ABT.ALL.ltxt && SM.ABT.ALL.ltxt == 1) {
      return true;
    }
    if (location.href.indexOf("leftArt=1") != -1) {
      return true;
    }
    return false;
  },
  Ztemplate: { //智能版模板
    selectFnTem: function selectFnTem(dataObj) {
      if (dataObj.info.imgs && dataObj.info.imgs.length >= 3) {
        return template.Ztemplate.threePicFnTem(dataObj);
      } else {
        return template.Ztemplate.picTxtFnTem(dataObj);
      }
    },
    picTxtFnTem: function picTxtFnTem(dataObj) {
      if (template.isLeftArt()) {
        return template.Ztemplate.txtPicFnTem(dataObj);
      }
      var htmlStr = '';
      if (dataObj.type == "feeduc") {
        htmlStr = '<a href="javascript:;" data-style="client" data-type="ucnews" data-adid="' + dataObj.info.adid + '" title="' + dataObj.info.title + '">';
      } else if (dataObj.type == "feediqiyi") {
        htmlStr = '<a href="javascript:;" data-style="client" data-type="iqiyinews" title="' + dataObj.info.title + '">';
      } else {
        htmlStr = '<a href="' + dataObj.info.link + '" title="' + dataObj.info.title + '" data-info="' + dataObj.info.info + '" data-pclink="' + dataObj.info.link + '" data-label="' + dataObj.info.labels + '" data-docid="' + dataObj.info.docid + '">';
      }
      htmlStr += __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_tianyi_template__["a" /* tyPicTxtFn */])(dataObj.info);
      htmlStr += '</a>';
      return htmlStr;
    },
    txtPicFnTem: function txtPicFnTem(dataObj) {
      var htmlStr = '';
      if (dataObj.type == "feeduc") {
        htmlStr = '<a href="javascript:;" data-style="client" data-type="ucnews" data-adid="' + dataObj.info.adid + '" title="' + dataObj.info.title + '">';
      } else if (dataObj.type == "feediqiyi") {
        htmlStr = '<a href="javascript:;" data-style="client" data-type="iqiyinews" title="' + dataObj.info.title + '">';
      } else {
        htmlStr = '<a href="' + dataObj.info.link + '" title="' + dataObj.info.title + '" data-info="' + dataObj.info.info + '" data-pclink="' + dataObj.info.link + '" data-label="' + dataObj.info.labels + '" data-docid="' + dataObj.info.docid + '">';
      }
      htmlStr += __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_tianyi_template__["b" /* tyTxtPicFn */])(dataObj.info);
      htmlStr += '</a>';
      return htmlStr;
    },
    threePicFnTem: function threePicFnTem(dataObj) {
      var htmlStr = '';
      if (dataObj.type == "feeduc") {
        htmlStr = '<a class="m_f_a show" href="javascript:;" data-style="client" data-type="ucnews" data-adid="' + dataObj.info.adid + '" title="' + dataObj.info.title + '">';
      } else if (dataObj.type == "feediqiyi") {
        htmlStr = '<a class="m_f_a show" href="javascript:;" data-style="client" data-type="iqiyinews" title="' + dataObj.info.title + '">';
      } else {
        htmlStr = '<a class="m_f_a show" href="' + dataObj.info.link + '" title="' + dataObj.info.title + '" data-info="' + dataObj.info.info + '" data-pclink="' + dataObj.info.link + '" data-label="' + dataObj.info.labels + '" data-docid="' + dataObj.info.docid + '">';
      }
      htmlStr += __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_tianyi_template__["c" /* tyThreePicFn */])(dataObj.info);
      htmlStr += '</a>';
      return htmlStr;
    },
    bigVideoPicFnTem: function bigVideoPicFnTem(dataObj) {
      var htmlStr = '';
      htmlStr += '<a class="m_video_box show" href="' + dataObj.info.link + '" title="' + dataObj.info.title + '" data-info="' + dataObj.info.info + '" data-pclink="' + dataObj.info.link + '" data-label="' + dataObj.info.labels + '" data-docid="' + dataObj.info.docid + '">';
      htmlStr += __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_tianyi_template__["d" /* tyBigVideoPicFn */])(dataObj.info);
      htmlStr += '</a>';
      return htmlStr;
    },
    bigPicFnTem: function bigPicFnTem(dataObj) {
      var htmlStr = '';
      htmlStr = '<a class="show m_f_a" href="' + dataObj.info.link + '" title="' + dataObj.info.title + '" data-info="' + dataObj.info.info + '" data-pclink="' + dataObj.info.link + '" data-label="' + dataObj.info.labels + '" data-docid="' + dataObj.info.docid + '">';
      htmlStr += __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_tianyi_template__["e" /* tyBigPicFn */])(dataObj.info);
      htmlStr += '</a>';
      return htmlStr;
    },
    wdBigPicFnTem: function wdBigPicFnTem(dataObj) {
      var htmlStr = '';
      var callstr = ' callupid="" docid="" data-app="news" data-kid="260" data-calluptype="SN_0174"';
      htmlStr = '<a class="show m_f_a j_call_native weidong_card hasWdDom" data-sudaclick="wdBigPic" href="javascript:void(0);" title="' + dataObj.info.title + '"' + callstr + '>';
      htmlStr += __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_tianyi_template__["f" /* tyWdBigPicFn */])(dataObj.info);
      htmlStr += '</a>';
      return htmlStr;
    },
    loadingFnTem: function loadingFnTem() {
      var htmlStr = '<section class="loading hide" id="j_loading_more"><span class="loading_ic icon_s_refresh"></span>加载中...</section>';
      return htmlStr;
    },
    tagFnTem: function tagFnTem(tagName) {
      var htmlStr = '<mark class="cm_mark cm_mark_r">' + tagName + '</mark>';
      return htmlStr;
    },
    reloadDataBtn: function reloadDataBtn() {
      var htmlStr = '<section class="btn_reload_data" id="j_reloadDataBtn"><a data-sudaclick="reloadDataBtn" class="btn_reload_data_link" href="javascript:;">上次阅读到这里，点击刷新<span class="icon_refresh"></span></a></section>';
      return htmlStr;
    }
  },
  appendToYaowen: function appendToYaowen(str, pos) {
    this.appendToCard(str, pos, "#j_card_yaowen");
  },
  appendToCard: function appendToCard(str, pos, selector) {

    var yaowenCard = doc.querySelector(selector);

    if (yaowenCard.length == 0) {
      return;
    }
    var yaowenfeed = yaowenCard.children[pos];
    var dom = doc.createElement('div');
    dom.innerHTML = str;
    yaowenCard.insertBefore(dom.children[0], yaowenfeed);
    __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_lazyload__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_lazyload__["a" /* default */].currentLazy();
  },
  getFeedStr: function getFeedStr(cardType, info, str, isLiteCell, feedmove) {
    if (info.bthumb) {
      str += this.getBigPicFeedStr(cardType, info, isLiteCell, feedmove);
    } else if (info.imgNum && info.imgNum >= 3 || info.thumbStyle == 3) {
      str += this.get3PicsFeedStr(cardType, info, isLiteCell, feedmove);
    } else if (cardType == 'video' || info.type == 3 || info.type == 10) {
      str += this.getVideoFeedStr(cardType, info, isLiteCell, feedmove);
    } else {
      str += this.getCommonFeedStr(cardType, info, isLiteCell, feedmove);
    }
    return str;
  },
  getVideoFeedStr: function getVideoFeedStr(cardType, info, isLiteCell, feedmove) {
    if (template.isLeftArt()) {
      return this.getLeftArtVideoFeedStr(cardType, info, isLiteCell, feedmove);
    }
    var str = "";
    var intro = "";
    var target = this.getTarget(cardType);
    var otherArgs = this.getOtherArgs(cardType);
    var pclink = '';
    if (feedmove && feedmove == "feedmove") {
      pclink = 'data-pclink=' + info.link;
    }
    if (mode) {
      // if (this.isOutsidePicUrl(info.img)) {
      //   //图片不可用直接不输出
      //   info.img = '';
      //   return '';//如果是视频而且图不符合要求直接不输出
      // }
      if (isLiteCell && cardType == 'yaowen') {
        var callupid = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_url2callupId__["a" /* default */])(info.link);
        var chName = info.link.split("//")[1].split(".")[0];
        var pushUpName = this.isAndroidNoQQ() ? 'j_nativeLiteCell' : 'j_call_native';
        var link = this.isAndroidNoQQ() ? info.link : 'javascript:void(0)';
        var kid = this.isAndroidNoQQ() ? '' : 'data-kid="203"';
        str += "<a class='m_f_a " + pushUpName + "' " + pclink + " href='" + link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "' data-position='17' data-app='news' data-domain='" + chName + "' " + kid + " data-channel='" + chName + "'  data-callupid='" + callupid + "' data-type='wm_" + chName + "_" + callupid + "' data-calluptype='SN_0161'>";
      } else {
        str += "<a class='m_f_a ' " + pclink + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + "title='" + info.title + "'>";
      }

      str += info.img ? "<figure class='m_f_div'><img class='img_width' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJAQMAAAAB5D5xAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjwA0AABsAAQrj5HwAAAAASUVORK5CYII=' data-src='" + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, "200_134", true) + "' alt='" + info.title + "'><aside class='btn_play_box'><span class='btn_play  icon_s_video'></span></aside></figure>" : "";
      str += "<aside class='m_f_con'>";

      str += "<h2 class='m_video_tit cm_tit'>" + info.title + "</h2>";
      intro = info.intro ? info.intro : info.title;

      str += this.getTagStr(cardType, info, isLiteCell);
      str += "</aside>";
      str += "</a>";
    } else {
      str = "<a class='m_f_a_no cn' " + pclink + " " + target + otherArgs + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + ">";
      str += "<h2 class='m_video_tit cm_tit'>" + info.title + "</h2>";
      str += this.getTagStr(cardType, info);
      str += "</a>";
    }

    return str;
  },
  getWeiDongFeedStr: function getWeiDongFeedStr(cardType, info, isLiteCell, feedmove) {
    var str = "";
    var intro = "";
    var target = this.getTarget(cardType);
    var otherArgs = this.getOtherArgs(cardType);
    var pclink = '';
    if (feedmove && feedmove == "feedmove") {
      pclink = 'data-pclink=' + info.link;
    }
    if (mode) {

      var callupid = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_url2callupId__["a" /* default */])(info.link);
      var chName = info.link.split("//")[1].split(".")[0];
      var pushUpName = 'j_call_native';
      var link = 'javascript:void(0)';
      var kid = 'data-kid="203"';
      str += "<a class='show m_f_a weidong_card" + pushUpName + "' " + pclink + " href='" + link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "' data-position='17' data-app='news' data-domain='" + chName + "' " + kid + " data-channel='" + chName + "'  data-callupid='" + callupid + "' data-type='wm_" + chName + "_" + callupid + "' data-calluptype='SN_0174'>";

      str += "<h3 class='cm_tit'>" + info.title + "</h3>";
      str += '<aside class="i_gx3_img_box">';
      str += info.bthumb ? '<figure class="i_gx3_img_div i_gx3_img_div_solo i_bg weidong_warp" style="height:3rem;"><img class="img_width weidong_img" data-src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.bthumb, "710_400", true) + '" alt="' + info.title + '" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII="></figure>' : '';
      str += '</aside>';
      str += this.getTagStr(cardType, info, isLiteCell);
      str += "</a>";
    } else {
      str = "<a class='m_f_a_no cn' " + pclink + " " + target + otherArgs + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + ">";
      str += "<h2 class='m_video_tit cm_tit'>" + info.title + "</h2>";
      str += this.getTagStr(cardType, info);
      str += "</a>";
    }

    return str;
  },
  getBigPicFeedStr: function getBigPicFeedStr(cardType, info, isLiteCell, feedmove) {
    var str = "";
    var intro = "";
    var target = this.getTarget(cardType);
    var otherArgs = this.getOtherArgs(cardType);
    var pclink = '';
    if (feedmove && feedmove == "feedmove") {
      pclink = 'data-pclink=' + info.link;
    }
    if (mode) {
      if (isLiteCell && cardType == 'yaowen') {
        var callupid = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_url2callupId__["a" /* default */])(info.link);
        var chName = info.link.split("//")[1].split(".")[0];
        var pushUpName = this.isAndroidNoQQ() ? 'j_nativeLiteCell' : 'j_call_native';
        var link = this.isAndroidNoQQ() ? info.link : 'javascript:void(0)';
        var kid = this.isAndroidNoQQ() ? '' : 'data-kid="203"';
        str += "<a class='show m_f_a " + pushUpName + "' " + pclink + " href='" + link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "' data-position='17' data-app='news' data-domain='" + chName + "' " + kid + " data-channel='" + chName + "'  data-callupid='" + callupid + "' data-type='wm_" + chName + "_" + callupid + "' data-calluptype='SN_0161'>";
      } else {
        str += "<a class='show m_f_a ' " + pclink + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + "title='" + info.title + "'>";
      }

      str += "<h3 class='cm_tit'>" + info.title + "</h3>";
      str += '<aside class="i_gx3_img_box">';
      str += info.bthumb ? '<figure class="i_gx3_img_div i_gx3_img_div_solo i_bg"><img class="img_width" data-src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.bthumb, "710_400", true) + '" alt="' + info.title + '" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII="></figure>' : '';
      str += '</aside>';
      str += this.getTagStr(cardType, info, isLiteCell);
      str += "</a>";
    } else {
      str = "<a class='m_f_a_no cn' " + pclink + " " + target + otherArgs + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + ">";
      str += "<h2 class='m_video_tit cm_tit'>" + info.title + "</h2>";
      str += this.getTagStr(cardType, info);
      str += "</a>";
    }

    return str;
  },
  getLeftArtVideoFeedStr: function getLeftArtVideoFeedStr(cardType, info, isLiteCell, feedmove) {
    var str = "";
    var intro = "";
    var target = this.getTarget(cardType);
    var otherArgs = this.getOtherArgs(cardType);
    var pclink = '';
    if (feedmove && feedmove == "feedmove") {
      pclink = 'data-pclink=' + info.link;
    }
    if (mode) {
      if (this.isOutsidePicUrl(info.img)) {
        //图片不可用直接不输出
        info.img = '';
        return ''; //如果是视频而且图不符合要求直接不输出
      }
      if (isLiteCell && cardType == 'yaowen') {
        var callupid = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_url2callupId__["a" /* default */])(info.link);
        var chName = info.link.split("//")[1].split(".")[0];
        var pushUpName = this.isAndroidNoQQ() ? 'j_nativeLiteCell' : 'j_call_native';
        var link = this.isAndroidNoQQ() ? info.link : 'javascript:void(0)';
        var kid = this.isAndroidNoQQ() ? '' : 'data-kid="203"';
        str += "<a class='m_f_a_r " + pushUpName + "' " + pclink + " href='" + link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "' data-position='17' data-app='news' data-domain='" + chName + "' " + kid + " data-channel='" + chName + "'  data-callupid='" + callupid + "' data-type='wm_" + chName + "_" + callupid + "' data-calluptype='SN_0161'>";
      } else {
        str += "<a class='m_f_a_r ' " + pclink + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + "title='" + info.title + "'>";
      }

      str += "<aside class='m_f_con'>";

      str += "<h2 class='m_video_tit cm_tit'>" + info.title + "</h2>";
      intro = info.intro ? info.intro : info.title;
      str += this.getLeftArtTagStr(cardType, info, isLiteCell);
      str += "</aside>";
      str += info.img ? "<figure class='m_f_div i_bg'><img class='img_width' src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJAQMAAAAB5D5xAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjwA0AABsAAQrj5HwAAAAASUVORK5CYII=' data-src='" + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, "200_134", true) + "' alt='" + info.title + "'><aside class='btn_play_box'><span class='btn_play  icon_s_video'></span></aside></figure>" : "";
      str += "</a>";
    } else {
      str = "<a class='m_f_a_no cn' " + pclink + " " + target + otherArgs + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + ">";
      str += "<h2 class='m_video_tit cm_tit'>" + info.title + "</h2>";
      str += this.getTagStr(cardType, info);
      str += "</a>";
    }

    return str;
  },
  isURLAvailable: function isURLAvailable(url) {
    var ret = url && (url.indexOf('https://') == 0 || url.substring(0, 2) == '//') && url.indexOf('esfimg.com') == -1;

    if (isHTTPS) {
      return ret;
    } else {
      return true;
    }
  },
  isOutsidePicUrl: function isOutsidePicUrl(picurl) {
    return false;
    // if(picurl && picurl.indexOf("sina") == -1 && picurl.indexOf("leju") == -1 && picurl.indexOf("miaopai") == -1){
    //   console.log(picurl,"过滤站外图片");
    //   return true;
    // }else{
    //   return false;
    // }
  },
  get2PicsFeedStr: function get2PicsFeedStr(cardType, info) {
    var str = "";
    var i = 0;
    var target = this.getTarget(cardType);
    // for (i = 0; i < 2; i++) {
    //   if (this.isOutsidePicUrl(info[i].img)) {
    //       return '';
    //   }
    // }
    if (mode) {
      str += "<figure class='i_gx2'>";

      for (i = 0; i < 2; i++) {
        var imgSrc = cardType != 'cardgroup' ? __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info[i].img, '350_234', true) : __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info[i].img, '350_234');
        str += "<a " + target + " href='" + info[i].url + "' title='" + info[i].title + "' class='i_gx2_a cn'>";
        str += "<img src='" + lazyLoadImgConfig.lz3X2 + "' data-src='" + imgSrc + "' alt='" + info[i].title + "' class='img_width'>";
        str += "<h2 class='i_gx2_str'>" + info[i].title + "</h2>";
        str += "</a>";
      }

      str += "</figure>";
    } else {
      for (i = 0; i < 2; i++) {
        str += "<a class='m_f_a_no cn' " + target + " href='" + info[i].url + "' title='" + info[i].title + "'>";
        str += "<h2 class='cm_tit'>" + info[i].title + "</h2>";
        str += "<blockquote class='cm_f_ic'>";
        str += "<em class='m_f_con_n'><span class='m_f_con_ic m_f_con_ic_pict icon_pictures'></span></em>";
        str += "</blockquote>";
        str += "</a>";
      }
    }

    return str;
  },
  getSwiperStr: function getSwiperStr(cardType, info, index) {
    var str = "";
    var titleReplace = info.title.replace(/"/g, '');
    // if(!info.img || this.isOutsidePicUrl(info.img)){
    //   return '';
    // }
    str += '<li class="swiper-slide">';
    str += '<a href="' + info.link + '" title="' + info.title + '" data-info="' + info.info + '">';
    if (index != 0) {
      str += '<img class="img_width swiper-lazy nolzload" src="' + lazyLoadImgConfig.lz2X1 + '" alt="' + titleReplace + '" data-src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, '710_400', true) + '">';
    } else {
      str += '<img class="img_width swiper-lazy" src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, '710_400', true) + '" alt="' + titleReplace + '">';
    }
    str += '<h2 class="swiper-slide_cite"><em class="swiper-slide_tit">' + info.title + '</em></h2>';
    str += '</a></li>';
    return str;
  },
  get3PicsFeedStr: function get3PicsFeedStr(cardType, info, isLiteCell, feedmove, ucFeed, iqiyi) {
    var str = "";
    var target = this.getTarget(cardType);
    var i = 0;
    var len = 3;
    // var isLiteCell = isLiteCell;
    // var liteCellName = isLiteCell ? 'j_nativeLiteCell' : '';
    var pclink = '';
    if (feedmove && feedmove == "feedmove") {
      pclink = 'data-pclink=' + info.link;
    }
    if (cardType == 'wbstick') {
      str += "<a " + target + otherArgs + " data-scheme='" + info.scheme + "' data-href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " href='javascript:void(0);' title='" + info.title + "' class='m_f_a cn " + liteCellName + "'>";
    } else if (isLiteCell && cardType == 'yaowen') {
      var callupid = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_url2callupId__["a" /* default */])(info.link);
      var chName = info.link.split("//")[1].split(".")[0];
      var pushUpName = this.isAndroidNoQQ() ? 'j_nativeLiteCell' : 'j_call_native';
      var link = this.isAndroidNoQQ() ? info.link : 'javascript:void(0)';
      var kid = this.isAndroidNoQQ() ? '' : 'data-kid="203"';
      str += '<a href="' + link + '" ' + pclink + ' class="m_f_a show cn ' + pushUpName + '" ' + (info.info ? " data-info='" + info.info + "'" : "") + ' data-position="17" data-app="news" data-domain="' + chName + '" data-channel="' + chName + '" data-type="wm_' + chName + '_' + callupid + '" ' + kid + ' data-callupid="' + callupid + '" data-calluptype="SN_0161">';
    } else if (iqiyi) {
      str += "<a data-type='iqiyinews' data-style='client' href='javascript:;' title='" + info.title + "' class='m_f_a show cn'>";
    } else if (ucFeed) {
      str += '<a class="m_f_a show cn" data-style="client" data-type="ucnews" data-adid="' + info.adid + '" href="javascript:;">';
    } else {
      str += "<a " + target + " class=\"m_f_a show cn\" " + pclink + " href=\"" + info.link + "\"" + (info.info ? " data-info='" + info.info + "'" : "") + " title=\"" + info.title + "\">";
    }
    if (mode) {
      str += "<h3 class=\"cm_tit\">";
      str += info.title;
      str += "</h3>";
      str += "<aside class=\"i_gx3_img_box\">";

      for (i = 0; i < len; i++) {
        // if (this.isOutsidePicUrl(info.imgs[i])) {
        //     return '';
        // }
        var img = cardType != 'cardgroup' ? __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.imgs[i], "230_154", true) : __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.imgs[i], "230_154");
        str += "<figure class=\"i_gx3_img_div\">";
        str += "<img class=\"img_width\" src=\"" + lazyLoadImgConfig.lz3X2 + "\" data-src=\"" + img + "\">";
        str += "</figure>";
      }

      str += "</aside>";
      str += this.getTagStr(cardType, info, isLiteCell);
      str += "</a>";
    } else {
      str = "<a class='m_f_a_no cn' " + pclink + " " + target + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "'>";
      str += "<h2 class='cm_tit'>" + info.title + "</h2>";
      str += "<blockquote class='cm_f_ic'>";
      str += "<em class='m_f_con_n'>" + info.imgNum + "<span class='m_f_con_ic m_f_con_ic_pict icon_pictures'></span></em>";
      str += "</blockquote>";
      str += "</a>";
    }

    return str;
  },
  get3VerticalPicStr: function get3VerticalPicStr(cardType, info) {
    var str = "";
    var target = this.getTarget(cardType);
    var i = 0;
    var len = 3;
    if (mode) {
      str += '<section class="i_gx3_7x10">';
      for (var i = 0; i < len; i++) {
        str += '<a href="' + info[i].url + '" title="' + info[i].title + '" data-docid="' + info[i].docID + '">';
        str += '<figure class="i_gx3_7x10_d"><aside class="i_gx3_7x10_as">';
        str += '<img class="img_width finpic" src="' + lazyLoadImgConfig.lz7X10 + '" data-src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info[i].img, "180_252") + '" alt="">';
        str += '</aside>';
        str += '<strong class="i_gx3_7x10_str">' + info[i].title + '</strong>';
        str += '</figure>';
      }
      str += "</section>";
    }
    return str;
  },
  get5PicsFeedStr: function get5PicsFeedStr(cardType, info) {
    var str = "";
    var target = this.getTarget(cardType);
    var i = 0;
    var len = info.length;
    if (mode) {
      str += '<nav class="thir_nav_sp">';
      for (var i = 0; i < len; i++) {
        str += '<a class="thir_nav_sp_a" href="' + info[i].url + '" title="' + info[i].title + '" data-docid="' + info[i].docID + '">';
        str += '<figure class="thir_nav_h_div">';
        str += '<img class="img_width finpic" src="' + lazyLoadImgConfig.lz1X1 + '" data-src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info[i].img, "90_90") + '" alt="' + info[i].title + '">';
        str += '</figure>';
        str += '<em class="thir_nav_sp_e">' + info[i].title + '</em>';
      }
      str += '</nav>';
    }
    return str;
  },
  get4PicsFeedStr: function get4PicsFeedStr(cardType, info) {
    var str = "";
    var target = this.getTarget(cardType);
    var i = 0;
    var len = info.length;
    str += '<nav class="thir_nav_oth">';
    for (var i = 0; i < len; i++) {
      str += '<a class="thir_nav_oth_a" href="' + info[i].url + '" title="' + info[i].title + '" data-docid="' + info[i].docID + '">';
      str += '<figure class="thir_nav_oth_d">';
      str += '<img class="img_width finpic" src="' + lazyLoadImgConfig.lz1X1 + '" data-src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info[i].img, "90_90") + '" alt="' + info[i].title + '">';
      str += '</figure>';
      str += '<strong class="thir_nav_oth_e">' + info[i].title + '</strong>';
    }
    str += '</nav>';
    return str;
  },
  getCommonTitleStr: function getCommonTitleStr(cardType, info) {
    var str = "";
    var subTitleLen = info.subTitle && info.subTitle.length;
    var i = 0;
    var target = this.getTarget(cardType);

    str += "<nav class='two_nav' data-sudaclick='nav_tap_" + cardType + "'>";
    str += "<a class='two_nav_a active' href='" + info.title.url + (info.title.urlMore ? "' data-href='" + info.title.urlMore : "") + "' title='" + info.title.title + "'>" + info.title.title + "</a>";
    if (cardType == "local") {
      str += "<a class='two_nav_a_c' title='切换城市' href='" + ("http://" + location.host + "/Index/location") + "'>点击切换城市<span class='icon_location two_nav_a_ic'></span></a>";
    }

    if (subTitleLen > 0 && cardType != "local") {
      for (i = 0; i < subTitleLen; i++) {
        str += '<a ' + target + ' class="two_nav_a" href="' + info.subTitle[i].url + '" title="' + info.subTitle[i].title + '">' + info.subTitle[i].title + '</a>';
      }
    }
    // str += '<a class="two_nav_a_h" href="javaScript:void(0)" title="换一换"><span class="icon_b_refresh two_nav_a_ic"></span>换一换</a>';
    str += '<aside class="two_nav_a_p"></aside>';
    str += "</nav>";

    return str;
  },
  getTarget: function getTarget(cardType) {
    // var targetBlankCard = ['blog', 'auto', 'miaoche', 'house', 'local', 'toutiao'];
    var targetBlankCard = [];

    var i = 0;
    var len = targetBlankCard.length;

    for (i = 0; i < len; i++) {
      if (cardType == targetBlankCard[i]) {
        return 'target="_blank"';
      }
    }

    return '';
  },
  getTagStr: function getTagStr(cardType, info, isLiteCell) {
    var reason = {
      0: {
        title: '兴趣',
        dom: '<mark class="cm_mark cm_mark_r">兴趣</mark>'
      },
      2: {
        title: '微博',
        dom: '<mark class="cm_mark cm_mark_r">微博</mark>'
      },
      4: {
        title: '热门',
        dom: '<mark class="cm_mark cm_mark_r">热门</mark>'
      },
      7: {
        title: '本地',
        dom: '<mark class="cm_mark cm_mark_r">本地</mark>'
      }
    };

    var str = "";

    str += "<blockquote class='cm_f_ic'>";

    if (info.tag !== undefined && info.tag !== "" && !isLiteCell) {
      str += "<mark class='cm_mark cm_mark_r'>" + info.tag + "</mark>";
    } else if (info.reason in reason && !likeTagTypeSetted[info.reason] && !isLiteCell) {
      str += reason[info.reason].dom;

      if (info.reason == 2) {
        str = str.replace("微博", info.uid);
      }

      likeTagTypeSetted[info.reason] = true;
    } else {
      // 微博来源
      if (cardType == 'hotweibo' && info.source && mode && !isLiteCell) {
        str += '<cite class="m_f_con_c">@' + info.source + '</cite>';
      }
      // 视频标签
      if ((cardType == 'video' || info.type == 3 || info.type == 10) && mode && !isLiteCell) {
        str += '<mark class="cm_mark cm_mark_b">视频</mark>';
      }
      if (isLiteCell) {
        if (this.isAndroidNoQQ()) {
          str += '<mark class="cm_mark cm_mark_b">极速版专享</mark>';
        } else {
          str += '<mark class="cm_mark cm_mark_r">APP专享</mark>';
        }
      }
      // 评论
      str += "<em class=\"m_f_con_n fr\">";
      str += parseInt(info.comment) ? info.comment + "<span class=\"m_f_con_ic icon_com\"></span>" : "<span class=\"m_f_con_ic icon_com\"></span>";
      str += "</em>";
    }

    str += "</blockquote>";

    return str;
  },
  getLeftArtTagStr: function getLeftArtTagStr(cardType, info, isLiteCell) {
    var reason = {
      0: {
        title: '兴趣',
        dom: '<mark class="cm_mark cm_mark_r">兴趣</mark>'
      },
      2: {
        title: '微博',
        dom: '<mark class="cm_mark cm_mark_r">微博</mark>'
      },
      4: {
        title: '热门',
        dom: '<mark class="cm_mark cm_mark_r">热门</mark>'
      },
      7: {
        title: '本地',
        dom: '<mark class="cm_mark cm_mark_r">本地</mark>'
      }
    };

    var str = "";

    str += "<blockquote class='cm_f_ic'>";

    if (info.tag !== undefined && info.tag !== "" && !isLiteCell) {
      str += "<mark class='cm_mark cm_mark_r'>" + info.tag + "</mark>";
    } else if (info.reason in reason && !likeTagTypeSetted[info.reason] && !isLiteCell) {
      str += reason[info.reason].dom;
      if (info.reason == 2) {
        str = str.replace("微博", info.uid);
      }
      likeTagTypeSetted[info.reason] = true;
    } else {
      // 评论
      str += "<em class=\"m_f_con_n\">";
      str += parseInt(info.comment) ? "<span class=\"m_f_con_ic icon_com\"></span><span class=\"m_f_con_com_n\">" + info.comment + "</span>" : "<span class=\"m_f_con_ic icon_com\"></span>";
      str += "</em>";
      // 微博来源
      if (cardType == 'hotweibo' && info.source && mode && !isLiteCell) {
        str += '<cite class="m_f_con_add">@' + info.source + '</cite>';
      }
      // 视频标签
      if ((cardType == 'video' || info.type == 3 || info.type == 10) && mode && !isLiteCell) {
        str += '<mark class="cm_mark cm_mark_b">视频</mark>';
      }
      if (isLiteCell) {
        if (this.isAndroidNoQQ()) {
          str += '<mark class="cm_mark cm_mark_b">极速版专享</mark>';
        } else {
          str += '<mark class="cm_mark cm_mark_r">APP专享</mark>';
        }
      }
    }

    str += "</blockquote>";

    return str;
  },
  isAndroidNoQQ: function isAndroidNoQQ() {
    var ua = navigator.userAgent.toLowerCase();
    if (ua.indexOf("Android") != -1 || ua.indexOf("android") != -1) {
      if (ua.indexOf("qq") != -1 || ua.indexOf("QQ") != -1) {
        return false;
      } else {
        return true;
      }
    } else {
      return false;
    }
  },
  getCommonFeedStr: function getCommonFeedStr(cardType, info, isLiteCell, feedmove, ucFeed, iqiyiFeed) {
    if (template.isLeftArt()) {
      return this.getLeftArtFeedStr(cardType, info, isLiteCell, feedmove, ucFeed, iqiyiFeed);
    }
    var str = "";
    var target = this.getTarget(cardType);
    var otherArgs = this.getOtherArgs(cardType);
    var liteCellName = isLiteCell ? 'j_nativeLiteCell' : '';
    var intro = '';
    var pclink = '';
    if (feedmove && feedmove == "feedmove") {
      pclink = 'data-pclink=' + info.link;
    }
    if (mode) {
      // if (this.isOutsidePicUrl(info.img)) {
      //   //图片不可用直接不输出
      //   info.img = '';
      //   return '';
      // }
      // 微博热议做呼起功能
      if (cardType == 'hotweibo' || cardType == 'wbstick') {
        str += "<a " + target + otherArgs + " data-scheme='" + info.scheme + "' data-href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " href='javascript:void(0);' title='" + info.title + "' class='m_f_a cn " + liteCellName + "'>";
      } else if (isLiteCell && cardType == 'yaowen') {
        var callupid = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_url2callupId__["a" /* default */])(info.link);
        var chName = info.link.split("//")[1].split(".")[0];
        var pushUpName = this.isAndroidNoQQ() ? 'j_nativeLiteCell' : 'j_call_native';
        var link = this.isAndroidNoQQ() ? info.link : 'javascript:void(0)';
        var kid = this.isAndroidNoQQ() ? '' : 'data-kid="203"';
        str += "<a href='" + link + "' " + pclink + " " + (info.info ? " data-info='" + info.info + "'" : "") + " class='m_f_a cn " + pushUpName + "' " + kid + "  data-position='17' data-app='news' data-domain='" + chName + "' data-channel='" + chName + "'  data-callupid='" + callupid + "' data-type='wm_" + chName + "_" + callupid + "' data-calluptype='SN_0161'>";
      } else if (iqiyiFeed) {
        str += "<a " + target + otherArgs + " data-style='client' data-type='iqiyinews' href='javascript:;' title='" + info.title + "' class='m_f_a cn'>";
      } else if (ucFeed) {
        str += "<a " + target + otherArgs + "  data-style='client' data-type='ucnews' data-adid='" + info.adid + "' href='javascript:;' title='" + info.title + "' class='m_f_a cn'>";
      } else {
        str += "<a " + target + otherArgs + " " + pclink + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "' class='m_f_a cn'>";
      }
      // str += (cardType == 'hotweibo' ? "<a " + target + otherArgs + " data-scheme='" + info.scheme + "' data-href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + "' href='javascript:void(0);' title='" + info.title + "' class='m_f_a cn " + liteCellName + "'>" : "<a " + target + otherArgs + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "' class='m_f_a cn " + liteCellName + "'>")
      if (cardType == 'hotweibo' || cardType == 'book') {
        str += info.img ? "<figure class='m_f_div_weibo'><img class='img_width' src='" + lazyLoadImgConfig.lz1X1 + "' data-src='" + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, "90_90") + "' alt='" + info.title + "'></figure>" : "";
      } else {
        str += info.img ? "<figure class='m_f_div'><img class='img_width' src='" + lazyLoadImgConfig.lz3X2 + "' data-src='" + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, "200_134", false) + "' alt='" + info.title + "'></figure>" : "";
      }
      str += "<aside class='m_f_con'>";
      str += "<h2 class='m_f_con_t cm_tit'>" + info.title + "</h4>";

      intro = info.intro ? info.intro : info.title;

      str += this.getTagStr(cardType, info, isLiteCell);
      str += "</aside>";
      str += "</a>";
    } else {
      str = "<a class='m_f_a_no cn' " + pclink + " " + target + otherArgs + " href='" + info.link + "'" + (info.info ? " title='" + info.title + "' data-info='" + info.info + "'" : "") + ">";
      str += "<h2 class='cm_tit'>" + info.title + "</h2>";
      str += this.getTagStr(cardType, info);
      str += "</a>";
    }
    return str;
  },
  getLeftArtFeedStr: function getLeftArtFeedStr(cardType, info, isLiteCell, feedmove, ucFeed, iqiyiFeed) {
    var str = "";
    var target = this.getTarget(cardType);
    var otherArgs = this.getOtherArgs(cardType);
    var liteCellName = isLiteCell ? 'j_nativeLiteCell' : '';
    var intro = '';
    var pclink = '';
    if (feedmove && feedmove == "feedmove") {
      pclink = 'data-pclink=' + info.link;
    }
    if (mode) {
      if (this.isOutsidePicUrl(info.img)) {
        //图片不可用直接不输出
        info.img = '';
        return '';
      }
      // 微博热议做呼起功能
      if (cardType == 'hotweibo' || cardType == 'wbstick') {
        str += "<a " + target + otherArgs + " data-scheme='" + info.scheme + "' data-href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " href='javascript:void(0);' title='" + info.title + "' class='m_f_a_r" + liteCellName + "'>";
      } else if (isLiteCell && cardType == 'yaowen') {
        var callupid = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_url2callupId__["a" /* default */])(info.link);
        var chName = info.link.split("//")[1].split(".")[0];
        var pushUpName = this.isAndroidNoQQ() ? 'j_nativeLiteCell' : 'j_call_native';
        var link = this.isAndroidNoQQ() ? info.link : 'javascript:void(0)';
        var kid = this.isAndroidNoQQ() ? '' : 'data-kid="203"';
        str += "<a href='" + link + "' " + pclink + " " + (info.info ? " data-info='" + info.info + "'" : "") + " class='m_f_a_r " + pushUpName + "' " + kid + "  data-position='17' data-app='news' data-domain='" + chName + "' data-channel='" + chName + "'  data-callupid='" + callupid + "' data-type='wm_" + chName + "_" + callupid + "' data-calluptype='SN_0161'>";
      } else if (iqiyiFeed) {
        str += "<a " + target + otherArgs + " data-style='client' data-type='iqiyinews' href='javascript:;' title='" + info.title + "' class='m_f_a_r'>";
      } else if (ucFeed) {
        str += "<a " + target + otherArgs + "  data-style='client' data-type='ucnews' data-adid='" + info.adid + "' href='javascript:;' title='" + info.title + "' class='m_f_a_r'>";
      } else {
        str += "<a " + target + otherArgs + " " + pclink + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "' class='m_f_a_r'>";
      }
      // str += (cardType == 'hotweibo' ? "<a " + target + otherArgs + " data-scheme='" + info.scheme + "' data-href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + "' href='javascript:void(0);' title='" + info.title + "' class='m_f_a cn " + liteCellName + "'>" : "<a " + target + otherArgs + " href='" + info.link + "'" + (info.info ? " data-info='" + info.info + "'" : "") + " title='" + info.title + "' class='m_f_a cn " + liteCellName + "'>")

      str += "<aside class='m_f_con'>";
      str += "<h2 class='m_f_con_t cm_tit'>" + info.title + "</h4>";

      intro = info.intro ? info.intro : info.title;

      str += this.getLeftArtTagStr(cardType, info, isLiteCell);

      str += "</aside>";
      if (cardType == 'hotweibo' || cardType == 'book') {
        str += info.img ? "<figure class='m_f_div_weibo i_bg'><img class='img_width' src='" + lazyLoadImgConfig.lz1X1 + "' data-src='" + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, "90_90") + "' alt='" + info.title + "'></figure>" : "";
      } else {

        str += info.img ? "<figure class='m_f_div i_bg'><img class='img_width' src='" + lazyLoadImgConfig.lz3X2 + "' data-src='" + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, "200_134", false) + "' alt='" + info.title + "'></figure>" : "";
      }
      str += "</a>";
    } else {
      str = "<a class='m_f_a_no cn' " + pclink + " " + target + otherArgs + " href='" + info.link + "'" + (info.info ? " title='" + info.title + "' data-info='" + info.info + "'" : "") + ">";
      str += "<h2 class='cm_tit'>" + info.title + "</h2>";
      str += this.getTagStr(cardType, info);
      str += "</a>";
    }
    return str;
  },
  getMatchStr: function getMatchStr(cardType, info) {
    if (mode) {
      var len = info.length > 2 ? 2 : info.length;
      var str = '',
          statusClass = '',
          statusTime = '',
          statusText = '',
          matchid = '',
          addMatchClass = '';
      var score1 = 0;
      var score2 = 0;
      str += '<section class="m_match">';
      var aloneClassName = len == 2 ? '' : 'm_match_a_solo';
      for (var i = 0; i < len; i++) {
        score1 = info[i].score1;
        score2 = info[i].score2;
        matchid = info[i].matchid;
        if (info[i].status == 1) {
          statusTime = info[i].time;
          if (statusTime) {
            statusText = statusTime;
            statusClass = '';
          } else {
            statusText = '未开始';
            statusClass = 'lives';
          }
          score1 = score2 = 0;
        } else if (info[i].status == 2) {
          statusText = '直播中';
          statusClass = 'live';
          if (info[i].isNBA == 'yes' && matchid) {
            addMatchClass = 'j_sports_match';
          }
        } else if (info[i].status == 3) {
          statusText = '已结束';
          statusClass = 'lived';
        }
        str += '<a class="m_match_a ' + aloneClassName + ' ' + addMatchClass + '" href="' + info[i].url + '" title="' + info[i].title + '" data-matchid="' + matchid + '">';
        str += '<aside class="match_box"><cite class="match_box_cite fl"><figure class="match_img_box">';
        str += '<img class="img_width finpic" src="' + lazyLoadImgConfig.lz1X1 + '" data-src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info[i].flag1, "90_90") + '">';
        str += '</figure><span class="match_team">' + info[i].team1 + '</span></cite>';
        if (len == 2) {
          str += '<aside class="match_box_c"><span class="match_style">' + info[i].name + '</span>';
          str += '<em class="match_num "><span class="score1">' + score1 + '</span>:<span class="score2">' + score2 + '</span></em>';
          str += '<cite class="match_live ' + statusClass + '">' + statusText + '</cite></aside>';
        } else {
          str += '<aside class="match_box_c"><em class="match_num score1">' + score1 + '</em><aside class="match_box_c_c">';
          str += '<span class="match_style">' + info[i].name + '</span>';
          str += '<cite class="match_live ' + statusClass + '">' + statusText + '</cite></aside>';
          str += '<em class="match_num score2">' + score2 + '</em></aside>';
        }
        str += '<cite class="match_box_cite fr"><figure class="match_img_box">';
        str += '<img class="img_width finpic" src="' + lazyLoadImgConfig.lz1X1 + '" data-src="' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info[i].flag2, "90_90") + '"></figure>';
        str += '<span class="match_team">' + info[i].team2 + '</span></cite>';
        str += '</aside></a>';
      }
      str += '</section>';
    }
    return str;
  },
  getOtherArgs: function getOtherArgs(cardType) {
    var args = '';

    switch (cardType) {
      default:
        break;
    }

    return args;
  }
};
/* harmony default export */ __webpack_exports__["a"] = (template);

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/*
* @Author: niumeng
* @Date:   2017-05-05 10:55:44
* @depend:
* @Last Modified by:   chuming
* @Last Modified time: 2017-05-05 10:42:48
*/
(function (global, factory) {
    ( false ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = factory() :  true ? !(__WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : global.newExposure = factory();
})(window, function () {
    var win = window;
    var newExposure = {
        _listeningEles: [],
        timer: 0, //计数器
        _init: function _init() {
            this._bindEvent();
        },

        _bindEvent: function _bindEvent() {
            this._scrollListener(win, { 'timeEnd': this._checkExposeure.bind(this), 'timeStart': this._checkExposeureStart.bind(this) });

            win.addEventListener('resize', { 'timeEnd': this._checkExposeure.bind(this), 'timeStart': this._checkExposeureStart.bind(this) }, false);
        },

        _checkExposeure: function _checkExposeure() {
            var self = this;
            var i = 0;
            var selfEles = this._listeningEles;
            var len = this._listeningEles.length;
            var action = null;
            var stopTimer = 0;
            var resultArr = [];
            var num = 0,
                numDoneOnce = 0;
            var threshold = 500;
            for (i = 0; i < len; i++) {
                threshold = selfEles[i].threshold;
                for (var j = 0; j < selfEles[i].listeningEles.length; j++) {
                    num++;
                    if (!selfEles[i].listeningEles[j].canRepeat && selfEles[i].listeningEles[j].doneOnce) {
                        numDoneOnce++;
                        continue;
                    }

                    if (this._calculateTime(selfEles[i].listeningEles[j], 'end', threshold)) {

                        resultArr.push(selfEles[i].listeningEles[j].ele);
                        selfEles[i].listeningEles[j].doneOnce = true;
                    }
                }
                if (resultArr.length > 0) {
                    selfEles[i].action && selfEles[i].action(resultArr);
                    if (/exposure=1/.test(location.href)) {
                        for (var i = 0; i < resultArr.length; i++) {
                            console.log(resultArr[i].innerHTML);
                        }
                    }
                    resultArr = [];
                }
            };

            setTimeout(function () {
                self.scroll_lock = false;
            }, 300);
            // console.log(num+'/'+numDoneOnce);
            // if(num == numDoneOnce){
            //     clearInterval(self.timer);
            // }           
        },
        _checkExposeureStart: function _checkExposeureStart() {
            //页面初始、每次滑动时调用的计算start时间
            var i = 0;
            var selfEles = this._listeningEles;
            var len = this._listeningEles.length;
            var action = null;
            var resultArr = [];
            var threshold = 500;
            for (i = 0; i < len; i++) {
                threshold = selfEles[i].threshold;
                for (var j = 0; j < selfEles[i].listeningEles.length; j++) {
                    if (!selfEles[i].listeningEles[j].canRepeat && selfEles[i].listeningEles[j].doneOnce) {
                        continue;
                    }
                    this._calculateTime(selfEles[i].listeningEles[j], 'start', threshold); //计算startTime时间
                }
            };
        },

        _calculateTime: function _calculateTime(obj, timeJudge, threshold) {
            //计算页面元素出现时的时间、end循环时的结束时间
            //end-start为曝光允许间隔时间
            if (!obj.ele) {
                return false;
            }
            var timegap = 0;
            var viewHeight = document.documentElement.clientHeight;
            var threshold = threshold;
            var timegap = 0;
            var rect = obj.ele.getBoundingClientRect();
            var preOffset = 10;
            if (timeJudge == 'start') {
                if (rect.top >= 0 && rect.top < viewHeight - preOffset) {
                    if (!obj.startTop) {
                        obj.startTop = Date.now();
                    }
                } else {
                    obj.startTop = null;
                }
            }
            if (timeJudge == 'end') {
                if (rect.top >= 0 && rect.top < viewHeight - preOffset) {
                    if (obj.startTop != null) {
                        obj.startEnd = Date.now();
                        timegap = obj.startEnd - obj.startTop;
                    } else {
                        obj.startTop = Date.now();
                    }

                    // console.log('timegap'+timegap+obj.ele)
                };
            }

            if (timegap > threshold) {

                return true;
            }
        },

        pushListeningEle: function pushListeningEle(arr, action, canRepeat, threshold) {
            var listeningEle = {};
            var self = this;
            var clonelisteningEle = {};
            var brr = [];
            var threshold = threshold || 500;
            arr.forEach(function (ele) {
                listeningEle.ele = ele;
                listeningEle.canRepeat = canRepeat ? true : false;
                listeningEle.doneOnce = false;
                listeningEle.startTop = null;
                listeningEle.endTop = null;
                clonelisteningEle = self._clone(listeningEle); //深拷贝;
                brr.push(clonelisteningEle);
            });
            self._listeningEles.push({ 'listeningEles': brr, 'action': action, 'threshold': threshold });
            self._checkExposeureStart.call(self);
        },

        _actionFactory: function _actionFactory(action) {
            var actionType = typeof action === 'undefined' ? 'undefined' : _typeof(action);

            if (actionType == 'function') {
                return action;
            } else if (actionType == 'string') {
                return function () {
                    var url = action.indexOf('?') > -1 ? action + '&timestamp=' + new Date().valueOf() : action + '?timestamp=' + new Date().valueOf();

                    var oImg = new Image();
                    oImg.src = url;
                };
            } else {
                return null;
            }
        },
        scroll_lock: false,
        _scrollListener: function _scrollListener(target, option) {
            var self = this;
            //校验参数
            if (!target || (typeof option === 'undefined' ? 'undefined' : _typeof(option)) != 'object') {
                throw new Error('scrollListener needs a object parameter.');
            }

            //滚动开始、滚动中、滚动结束、判断滚动结束及两次不同滚动的时间依据
            var alowList = ['timeEnd', 'timeStart'];

            var _opt = {};

            for (var i = 0; i < alowList.length; i++) {
                _opt[alowList[i]] = option[alowList[i]] || null;
            }
            target.addEventListener('scroll', callback.bind(this), false);
            target.addEventListener('touchstart', callback.bind(this), false);

            target.addEventListener('touchend', function () {
                //scroll快速滑动时屏幕记录元素高度不准，需添加end事件再次记录屏幕高度
                _opt.timeStart && _opt.timeStart();
            }, false);
            target.addEventListener('touchcancel', function () {
                //兼容uc浏览器

                _opt.timeStart && _opt.timeStart();
            }, false);
            var lastScrollingTime = new Date(1970, 0, 1, 0, 0, 0);
            self.timer = setInterval(function () {
                // alert('end')
                _opt.timeEnd && _opt.timeEnd();
            }, 300);

            function callback() {
                if (self.scroll_lock) {
                    return;
                }
                self.scroll_lock = true;
                _opt.timeStart && _opt.timeStart();
            }
        },
        _clone: function _clone(obj) {
            var ret = null;
            var self = this;
            switch (this._getType(obj)) {
                case 'object':
                    ret = {};
                    Object.keys(obj).forEach(function (property) {
                        ret[property] = self._clone(obj[property]);
                    });
                    break;
                case 'array':
                    ret = [];
                    obj.forEach(function (value) {
                        ret.push(self._clone(value));
                    });
                    break;
                default:
                    ret = obj;
                    break;
            }
            return ret;
        },
        _getType: function _getType(obj) {
            var tmp = typeof obj === 'undefined' ? 'undefined' : _typeof(obj);
            return tmp === 'object' ? Object.prototype.toString.call(obj).match(/\[object (.*)\]/) ? RegExp.$1.toLowerCase() : 'other' : tmp;
        }

    };
    newExposure._init();
    window.newExposure = newExposure;
    return newExposure;
});

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_ievent_Event__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_SIMA__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_utils__ = __webpack_require__(7);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

// import safariBackEvent from "@mfelibs/base-tools-safari_back_event";




var defaultOption = {
  lazyImgAttr: "data-src",
  imgLoadClass: "finpic",
  noLazyLoadName: "nolzload",
  retryAttr: "retry",
  bgSrcAttr: "bg-src",
  marginHeight: 25,
  marginWidth: 25,
  bestHot: 60, //最佳焦点top位置
  _lazyImgCache: [],
  retryTime: 10 * 1000
};

var errImageList = [];

var sendPicErr = function sendPicErr(img, e) {
  var reg = /^((http\:\/\/)|(https\:\/\/)|(\/\/))/;
  var image = img.getAttribute("data-src");
  var a = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_utils__["a" /* $ */])(img).closest("a");
  var url = "";
  if (a) {
    url = reg.test(a.attr("href")) ? a.attr("href") : a.attr("data-href");
    url = url.split("?")[0];
  }
  if (errImageList.indexOf(image) >= 0) {
    return;
  }
  errImageList.push(image);
  var action = {
    action: "_imageError",
    pk: "187526",
    data: {
      image: image,
      url: url
    }
  };
  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_SIMA__["a" /* default */])(action);
  console.log("lazyload: 图片加载错误已发:", action);
};

var LazyLoad = function (_Event) {
  _inherits(LazyLoad, _Event);

  function LazyLoad() {
    _classCallCheck(this, LazyLoad);

    var _this = _possibleConstructorReturn(this, (LazyLoad.__proto__ || Object.getPrototypeOf(LazyLoad)).call(this));

    _this.option = defaultOption;
    _this.init();
    return _this;
  }

  _createClass(LazyLoad, [{
    key: "init",
    value: function init() {
      this._refreshLazyItems();
      this._initEvent();
      this._loadLazy();
    }
  }, {
    key: "_refreshLazyItems",
    value: function _refreshLazyItems() {
      var _this2 = this;

      this.option._lazyImgCache = [];

      Array.prototype.forEach.call(document.querySelectorAll("img,[bg-src]"), function (img) {
        _this2._canLazyLoad(img) && (img.getAttribute(_this2.option.lazyImgAttr) || img.getAttribute(_this2.option.bgSrcAttr)) && _this2.option._lazyImgCache.push(img);
      });
    }
  }, {
    key: "currentLazy",
    value: function currentLazy() {
      this._doLazy();
    }
  }, {
    key: "refreshLazyload",
    value: function refreshLazyload() {
      this._refreshLazyItems();
    }
  }, {
    key: "_canLazyLoad",
    value: function _canLazyLoad(img) {
      function hasClass(className, node) {
        var classNames = node.className.split(/\s+/);
        for (var i = 0; i < classNames.length; i++) {
          if (classNames[i] == className) {
            return true;
          }
        }
        return false;
      }

      return !hasClass(this.option.noLazyLoadName, img);
    }
  }, {
    key: "_loadImgSrc",
    value: function _loadImgSrc(img) {
      var _this3 = this;

      var image = new Image();
      var bgImg = img.getAttribute(this.option.bgSrcAttr);
      var context = this;
      image.onload = function (e) {
        img.act = true;
        img.classList.add(context.option.imgLoadClass);
        if (bgImg) {
          img.style.backgroundImage = "url(" + bgImg + ")";
          img.removeAttribute(context.option.bgSrcAttr);
        } else {
          img.setAttribute("src", image.getAttribute("src"));
          img.removeAttribute(context.option.lazyImgAttr);
        }
        context.onload && context.onload(img);
        _this3.emit("load", img);
      };
      image.onerror = function (e) {
        img.act = true;
        if (img.getAttribute(context.option.retryAttr)) {
          retry();
          return;
        }
        sendPicErr(img, e);
        image.src && context.onerror && context.onerror(img, e);
        image.src && _this3.emit("error", img, e);
      };
      image.onabort = function (e) {
        img.act = true;
        if (img.getAttribute(context.option.retryAttr)) {
          retry();
          return;
        }
        image.src && context.onabort && context.onabort(img, e);
        image.src && _this3.emit("abort", img, e);
      };

      image.src = bgImg || img.getAttribute(this.option.lazyImgAttr);

      var retry = function retry() {
        image.src = "";
        image.src = (bgImg || img.getAttribute(_this3.option.lazyImgAttr)) + "?" + new Date().getTime();
        img.removeAttribute(_this3.option.retryAttr);
      };
      //重试
      if (img.getAttribute(this.option.retryAttr)) {
        setTimeout(function () {
          return !img.act && retry();
        }, this.option.retryTime);
      }
    }
  }, {
    key: "_imgsHotSortAndLoad",
    value: function _imgsHotSortAndLoad(imgs) {
      imgs.sort(function (a, b) {
        return a.hot - b.hot;
      });
      for (var i = 0; i < imgs.length; ++i) {
        this._loadImgSrc(imgs[i].img);
      }
    }
  }, {
    key: "_loadLazy",
    value: function _loadLazy() {
      var _this4 = this;

      //最后一次保底
      if (this.timerScroll) {
        clearTimeout(this.timerScroll);
        this.timerScroll = null;
      }
      this.timerScroll = setTimeout(function () {
        _this4._doLazy();
      }, 500);
      //节流
      if (this.lastLazyTime && new Date() - this.lastLazyTime < 800) {
        return;
      }
      this.lastLazyTime = new Date();
      this._doLazy();
    }
  }, {
    key: "_doLazy",
    value: function _doLazy() {
      var all = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;

      var dd = document.documentElement;
      var viewHeight = window.innerHeight || dd.clientHeight || document.body.clientHeight || 0;
      var viewWidth = window.innerWidth || dd.clientWidth || document.body.clientWidth || 0;
      var removeArray = [];
      this._refreshLazyItems();

      //给cache里的img添加图片地址
      var preSortImgs = []; //记录所有准备加载的图片,等待按焦点热度进行排序后加载
      for (var i = 0; i < this.option._lazyImgCache.length; i++) {
        var img = this.option._lazyImgCache[i];
        var posInfo = img.getBoundingClientRect();
        var pass = (posInfo.top || posInfo.left || posInfo.right || posInfo.bottom || posInfo.width || posInfo.height) && posInfo && toString.call(posInfo.top) === "[object Number]" && posInfo.top > -this.option.marginHeight && posInfo.top < viewHeight + this.option.marginHeight && posInfo.left < viewWidth + this.option.marginWidth && posInfo.left > -this.option.marginHeight;
        if (all) pass = true;
        if (pass) {
          //将符合标准的图片加入准备队列和移除队列
          preSortImgs.push({
            img: img,
            hot: Math.abs(posInfo.top - this.option.bestHot)
          });
          removeArray.push(i);
        }
      }

      //按焦点热度进行排序后加载
      this._imgsHotSortAndLoad(preSortImgs);

      //维护cache
      for (var i = removeArray.length - 1; i >= 0; i--) {
        this.option._lazyImgCache.splice(removeArray[i], 1);
      }
    }
  }, {
    key: "loadAll",
    value: function loadAll() {
      this._doLazy(true);
    }
  }, {
    key: "_initEvent",
    value: function _initEvent() {
      window.addEventListener("scroll", this._loadLazy.bind(this), false);
      window.addEventListener("resize", this._loadLazy.bind(this), false);
      window.addEventListener("orientationchange", this._loadLazy.bind(this), false);
      window.addEventListener("touchmove", this._loadLazy.bind(this), false);
    }
  }, {
    key: "setMarginHeight",
    value: function setMarginHeight(height) {
      this.option.marginHeight = height;
    }
  }, {
    key: "setMarginWidth",
    value: function setMarginWidth(width) {
      this.option.marginWidth = width;
    }
  }]);

  return LazyLoad;
}(__WEBPACK_IMPORTED_MODULE_0_ievent_Event__["a" /* default */]);

var lazyLoad = new LazyLoad();

window.lazyLoad = lazyLoad;

// safariBackEvent.on("back", () => {
//   lazyLoad.refreshLazyload();
// });

/* harmony default export */ __webpack_exports__["a"] = (lazyLoad);

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* jshint esversion:6 */


var doc = document;
var win = window;
var isPhoto = function isPhoto(info) {

  if (!info.mthumbs || info.mthumbs.length < 3) {
    if (!info.thumbs || info.thumbs.length < 3) {
      return false;
    }
  }

  if (info.thumbStyle == 3) {
    return true;
  }
  if (!(info.surl.indexOf('photo.sina.cn') > -1 || info.url.indexOf('photo.sina.cn') > -1)) {
    return false;
  }

  return true;
};
var adapt = {

  adaptInfo: function adaptInfo(info, cardType) {

    var stdInfo = {};

    switch (cardType) {

      case "yaowen":

      case "like":
        if (isPhoto(info)) {

          var imgs = (info.mthumbs && info.mthumbs.length >= 3 ? info.mthumbs.slice(0) : '') || (info.thumbs ? info.thumbs.slice(0) : '') || [];
          // for (var i = 0; i < imgs.length; i++) {
          //   imgs[i] = S.getCuttedImg(imgs[i], '230_154', true);
          // };
          var stdInfo = {
            link: info.surl || info.url || '',
            feedback: info.url || '',
            title: info.ltitle || info.title || '',
            imgNum: info.img_count || 0,
            imgs: imgs,
            info: info.info || '',
            comment: adapt.commentFiler(info.comment_count) || 0,
            thumbStyle: info.thumbStyle || '',
            media: adapt.sourceFiler(info.media) || '',
            card: info.card || false,
            docID: info.docid || '',
            pclink: info.url || '',
            is_3pics: info.is_3pics || 0,
            bthumb: info.bthumb || '',
            reason: info.reason || ''
            //1 大图，2左图右文，3三图，4三拼图，5三柱图
          };
        } else {
          var img = (info.mthumbs ? info.mthumbs[0] : '') || info.thumb || (info.thumbs ? info.thumbs[0] : '');
          var stdInfo = {
            link: info.surl || info.url || '',
            feedback: info.url || '',
            img: __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(img, '200_134', true),
            title: info.ltitle || info.title || '',
            intro: info.mintro || info.short_intro || info.intro || info.title || '',
            reason: info.reason || 0,
            uid: info.uids ? info.uids[0].split("_")[2] || 0 : 0,
            info: info.info || '',
            comment: adapt.commentFiler(info.comment_count) || 0,
            media: adapt.sourceFiler(info.media) || '',
            type: info.type || '',
            time_length: info.time_length || '',
            card: info.card || false,
            docID: info.docid || '',
            pclink: info.url || '',
            is_3pics: info.is_3pics || 0,
            bthumb: info.bthumb || ''
            //3 视频 10 秒拍
          };
        }

        break;
      case "intellect_news":
        var imgs = info.thumbs ? info.thumbs.slice(0) : info.thumbs ? info.thumbs.slice(0) : [];
        for (var i = 0; i < imgs.length; i++) {
          imgs[i] = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(imgs[i], '230_154', true);
        };
        var thumb = info.thumb || (info.mthumbs ? info.mthumbs[0] : '') || (info.thumbs ? info.thumbs[0] : '');

        var stdInfo = {
          link: info.surl || info.url || '',
          feedback: info.url || '',
          thumb: thumb,
          img: __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(thumb, info.type == 3 || info.type == 10 ? '710_400' : '200_134', info.type == 3 || info.type == 10 ? false : true),
          imgNum: info.org_imgCount || 0, //图集专用
          imgs: imgs, //图集专用
          title: info.ltitle || info.title || '',
          intro: info.mintro || info.short_intro || info.intro || info.title || '',
          reason: info.reason || 0,
          uid: info.uids ? info.uids[0].split("_")[2] || 0 : 0,
          info: info.info || '',
          comment: adapt.commentFiler(info.comment_count) || 0,
          media: adapt.sourceFiler(info.media) || '',
          type: info.type || '',
          mtime: adapt.dateFormat(new Date(parseInt(info.time_length) || 0), '%M:%S') || '', //视频时长专用
          card: info.card || false,
          docid: info.docid || '',
          labels: info.labels_show && Array.isArray(info.labels_show) && info.labels_show.join(',') || '',
          is_3pics: info.is_3pics || 0,
          bthumb: info.bthumb && __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.bthumb, '710_400', true) || '',
          wdthumb: info.thumbs && info.thumbs[0] && __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.thumbs[0], '710_400', true) || ''
        };
        break;
      case "local":
        if (info.pics && info.pics.total >= 3) {
          var imgs = info.pics.imgs.slice(0);
          // for (var i = 0; i < imgs.length; i++) {
          //   imgs[i] = S.getCuttedImg(imgs[i], '230_154', true);
          // };
          var stdInfo = {
            link: info.link || '',
            title: info.largetitle || info.title || '',
            imgNum: info.pics.total || '',
            imgs: imgs
          };
        } else {
          var stdInfo = {
            link: info.link || '',
            img: __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.img, '200_134', true),
            title: info.largetitle || info.title || '',
            intro: info.intro || '',
            comment: adapt.commentFiler(info.comment_count) || ''
          };
        }
        break;
      case "house":
        stdInfo = info.pics ? {
          link: info.link || '',
          title: info.title || '',
          imgNum: info.pics.total || '',
          imgs: info.pics.imgs.slice(0)
        } : {
          link: info.link || '',
          img: info.pic || '',
          title: info.title || '',
          intro: info.zhaiyao || info.title || '',
          comment: 0
        };
        break;
      case "app":
        stdInfo = {
          link: info.url || '',
          img: info.pic,
          title: info.title || ''
        };
        break;
      case "stockIndex":
        stdInfo = {
          link: info.link || '',
          range: info.range || '',
          title: info.title || '',
          value: info.value || '',
          class: info.class || ''
        };
        break;
      case "breaker":
        stdInfo = {
          status: info.status || '',
          begin: info.begin || '',
          lastend: info.lastend || '',
          zuixin: info.zuixin || '',
          zhangdiefu: info.zhangdiefu || ''
        };
        break;
      case "video":
        stdInfo = {
          link: info.link || '',
          img: info.img,
          title: info.title || info.wap_title || '',
          intro: info.intro || '',
          comment: info.comment || '',
          tag: info.newsTag || ''
          // duration: info.duration,
          // playCount: info.playCount
        };
        break;
      case "weather":
        stdInfo = {
          icon: info.icon_v3 || info.icon || mjsDomain + "/wap/homev6/weather/qing_bai_2.png"
        };
        break;
      case "cardvideo":
        var img = (info.mthumbs ? info.mthumbs[0] : '') || info.thumb || (info.thumbs ? info.thumbs[0] : '');
        stdInfo = {
          link: info.surl || info.url || '',
          src: __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(img, '710_400', false),
          title: info.ltitle || info.title || '',
          time: adapt.dateFormat(new Date(parseInt(info.time_length) || 0), '%M:%S'),
          reason: info.reason || 0,
          docID: info.docid || '',
          comment: adapt.commentFiler(info.comment_count) || 0,
          info: info.info || ''
        };
        break;
      case "flowPic":
        var img = (info.thumbs ? info.thumbs[0] : '') || info.thumb || (info.mthumbs ? info.mthumbs[0] : '');
        stdInfo = {
          link: info.surl || info.url || '',
          src: __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(img, '345_0', false, true),
          alt: info.ltitle || info.title || '',
          count: info.org_imgCount || '',
          docID: info.docid || '',
          info: info.info || 0
        };
        break;
      case "threePic":
        for (var i = 0; i < info.thumbs.length; i++) {
          info.thumbs[i] = info.thumbs[i];
        };
        stdInfo = {
          link: info.surl || info.url || '',
          src: info.thumbs,
          alt: info.ltitle || info.title || '',
          count: info.img_count || ''
        };

        break;
      case "stick":

        if (info.pics && info.pics.total >= 3) {
          var imgs = info.pics.imgs.slice(0);
          // for (var i = 0; i < imgs.length; i++) {
          //   imgs[i] = S.getCuttedImg(imgs[i], '230_154', true);
          // };
          var stdInfo = {
            link: info.link || '',
            title: info.title || info.wap_title || '',
            imgNum: info.pics.total || '',
            imgs: imgs,
            docID: info.docID || '',
            comment: adapt.commentFiler(info.comment) || '',
            scheme: info.scheme || ''
          };
        } else {
          var img = info.img || info.pic;
          if (info.link.indexOf('v.sina.cn') != -1 || info.link.indexOf('video.sina.cn') != -1) {
            info.type = 3;
          }
          var stdInfo = {
            link: info.link || '',
            img: __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(img, info.type == 3 || info.type == 10 ? '710_400' : '200_134', false),
            title: info.title || info.wap_title || '',
            intro: info.intro || '',
            comment: adapt.commentFiler(info.comment) || '',
            tag: info.newsTag || '',
            docID: info.docID || '',
            scheme: info.scheme || '',
            source: info.source || '',
            type: info.type || ''

          };
        }
        break;
      default:
        var info = info || {};
        stdInfo = info.pics && info.pics.total >= 3 ? {
          link: info.link || '',
          title: info.title || info.wap_title || '',
          imgNum: info.pics.total || '',
          imgs: info.pics.imgs.slice(0),
          docID: info.docID || '',
          comment: adapt.commentFiler(info.comment) || ''
        } : {
          link: info.link || '',
          img: info.img || info.pic || '',
          title: info.title || info.wap_title || '',
          intro: info.intro || '',
          comment: adapt.commentFiler(info.comment) || '',
          tag: info.newsTag || '',
          docID: info.docID || '',
          scheme: info.scheme || '',
          source: info.source || ''
        };
        break;
    };

    return stdInfo;
  },
  adapt2PicsInfo: function adapt2PicsInfo(info, cardType) {
    var stdInfo = [];
    var i = 0;
    var len = 0;

    switch (cardType) {
      case "house":
        for (i = 0, len = info.retData.house.pic.length; i < len; i++) {
          stdInfo[i] = {};

          stdInfo[i].url = info.retData.house.pic[i].link || '';
          stdInfo[i].img = info.retData.house.pic[i].pic || '';
          stdInfo[i].title = info.retData.house.pic[i].title || '';
        }
        break;
      case "xc":
        for (i = 0, len = info.list.length; i < len; i++) {
          stdInfo[i] = {};

          stdInfo[i].url = info.list[i].link || '';
          stdInfo[i].img = info.list[i].img || '';
          stdInfo[i].title = info.list[i].title || '';
        }
        break;
      case "cardgroup":
        for (i = 0, len = info.length; i < len; i++) {
          stdInfo[i] = {};

          stdInfo[i].url = info[i].link || '';
          stdInfo[i].img = info[i].pic || '';
          stdInfo[i].title = info[i].title || '';
          stdInfo[i].docid = info[i].docID || '';
        }
        break;
    }

    return stdInfo;
  },
  adapt5PicsInfo: function adapt5PicsInfo(info, cardType) {
    var stdInfo = [];
    var i = 0;
    var len = 0;

    switch (cardType) {
      case "cardgroup":
        for (i = 0, len = info.length; i < len; i++) {
          stdInfo[i] = {};

          stdInfo[i].url = info[i].link || '';
          stdInfo[i].img = info[i].pic || '';
          stdInfo[i].title = info[i].title || '';
          stdInfo[i].docID = info[i].docID || '';
        }
        break;
    }

    return stdInfo;
  },
  adaptTitleInfo: function adaptTitleInfo(info, cardType) {
    var stdInfo = {};

    switch (cardType) {
      case "house":
        stdInfo = {
          title: {
            title: info.retData.house && info.retData.house.title.title || '',
            url: info.retData.house && info.retData.house.title.url || '',
            urlMore: info.retData.house && info.retData.house.title.url_more || ''
          },
          subTitle: __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].cloneObj(info.retData.house.subtitle)
        };
        break;
      case "local":
        stdInfo = {
          title: {
            title: info.retData.dfz && info.retData.dfz.title.title || '',
            url: info.retData.dfz && info.retData.dfz.title.url || ''
          },
          subTitle: info.retData.dfz && __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].cloneObj(info.retData.dfz.subtitle) || ''
        };
        break;
      case "hotweibo":
        stdInfo = {
          title: {
            title: info.retData.hotweibo && info.retData.hotweibo.title.title || '',
            url: info.retData.hotweibo && info.retData.hotweibo.title.url || ''
          },
          subTitle: info.retData.hotweibo && __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].cloneObj(info.retData.hotweibo.subtitle) || ''
        };
        break;
      case "cardgroup":
        stdInfo = {
          title: {
            title: info.title.title || '',
            url: info.title.url || ''
          }
        };
        if (info.subtitle) {
          stdInfo.subTitle = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].cloneObj(info.subtitle);
        }
        break;

    }

    return stdInfo;
  },
  adaptMatchInfo: function adaptMatchInfo(info, cardType) {
    var stdInfo = [];
    switch (cardType) {
      case "cardgroup":
        for (var i = 0, len = info.length; i < len; i++) {

          var matchesApi = info[i].matches_api || {};
          var matchesTh = info[i].smart_data || {};
          var ymd = matchesApi.date.split("-")[1] + "-" + matchesApi.date.split("-")[2];
          stdInfo[i] = {
            team1: matchesApi.Team1 || '',
            score1: matchesApi.Score1 || 0,
            flag1: matchesApi.Flag1_small || matchesApi.Flag1 || '',
            team2: matchesApi.Team2 || '',
            score2: matchesApi.Score2 || 0,
            flag2: matchesApi.Flag2_small || matchesApi.Flag2 || '',
            name: matchesApi.LeagueType_cn || '',
            status: matchesApi.match_status || '',
            url: matchesTh.url || '',
            title: matchesTh.title || '',
            isNBA: matchesTh.isNBA || '',
            time: ymd + " " + matchesApi.time,
            matchid: matchesTh.matchid || ''
          };
        }
        break;
    }
    return stdInfo;
  },
  dateFormat: function dateFormat(date, fstr, utc) {
    utc = utc ? 'getUTC' : 'get';
    return fstr.replace(/%[YmdHMS]/g, function (m) {
      switch (m) {
        case '%Y':
          return date[utc + 'FullYear'](); // no leading zeros required
        case '%m':
          m = 1 + date[utc + 'Month']();
          break;
        case '%d':
          m = date[utc + 'Date']();
          break;
        case '%H':
          m = date[utc + 'Hours']();
          break;
        case '%M':
          m = date[utc + 'Minutes']();
          break;
        case '%S':
          m = date[utc + 'Seconds']();
          break;
        default:
          return m.slice(1); // unknown code, remove %
      }
      // add leading zero if required
      return ('0' + m).slice(-2);
    });
  },
  sourceFiler: function sourceFiler(keyword) {
    if (!keyword) return false;
    var keywordArray = ["新闻综合", "综合", "其他", "新浪新闻客户端"];
    for (var i = 0, len = keywordArray.length; i < len; i++) {
      if (keyword.indexOf(keywordArray[i]) != -1) {
        keyword = '';
        return keyword;
      }
    }
    return keyword;
  },
  commentFiler: function commentFiler(comment) {
    if (comment) {
      var cmtNum = parseInt(comment);
      if (cmtNum > 9999) {
        var kiloNum = parseInt(cmtNum / 1000).toString();
        var lastNum = kiloNum.charAt(kiloNum.length - 1).toString();
        if (lastNum == "0") {
          comment = parseInt(cmtNum / 10000) + '万';
        } else {
          comment = parseInt(cmtNum / 1000) / 10 + '万';
        }
      } else {
        comment = cmtNum;
      }
    } else {
      comment = '';
    }
    return comment;
  }
};
/* harmony default export */ __webpack_exports__["a"] = (adapt);

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_sina_log__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_wifi__ = __webpack_require__(17);
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



//20170822，net status add

var NetStatus = {
  result: null
};
__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_wifi__["a" /* default */].wifi(function (data) {
  try {
    NetStatus.result = ('' + data.result).toLocaleLowerCase() || ('' + data.ori).toLocaleLowerCase() || null;
  } catch (e) {
    console.log('net get error ==== ' + e.message);
  }
});
//20170822，net status add


var sinaSax = function () {
  "use strict";

  // var prtl = 'https:' == window.location.protocol ? 'https://' : 'http://',

  var prtl = 'https://',
      timestamp = Date.now();
  var base64EncodeChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  var base64DecodeChars = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);
  function base64encode(str) {
    var out, i, len;
    var c1, c2, c3;
    len = str.length;
    i = 0;
    out = "";
    while (i < len) {
      c1 = str.charCodeAt(i++) & 0xff;
      if (i == len) {
        out += base64EncodeChars.charAt(c1 >> 2);
        out += base64EncodeChars.charAt((c1 & 0x3) << 4);
        out += "==";
        break;
      }
      c2 = str.charCodeAt(i++);
      if (i == len) {
        out += base64EncodeChars.charAt(c1 >> 2);
        out += base64EncodeChars.charAt((c1 & 0x3) << 4 | (c2 & 0xF0) >> 4);
        out += base64EncodeChars.charAt((c2 & 0xF) << 2);
        out += "=";
        break;
      }
      c3 = str.charCodeAt(i++);
      out += base64EncodeChars.charAt(c1 >> 2);
      out += base64EncodeChars.charAt((c1 & 0x3) << 4 | (c2 & 0xF0) >> 4);
      out += base64EncodeChars.charAt((c2 & 0xF) << 2 | (c3 & 0xC0) >> 6);
      out += base64EncodeChars.charAt(c3 & 0x3F);
    }
    return out;
  }
  var sinaSax = {
    saxType: {}, //存储模板类型
    saxDomain: window.location.host,
    loadWapPv: [],
    //id为数据源pdps的key; data为返回数据集的直接父级，多层嵌套用'-'分割,pv同理; urlFix为发送jsonp请求是额外字段
    sax: [{
      class: 'j_sax',
      // url: prtl + 'sax.sina.cn/wap/impress',
      url: prtl + 'mixer.sina.cn/wap/impress',
      id: 'id',
      pv: 'content-0-pv',
      data: 'ad',
      urlFix: function urlFix() {
        var am = sinaSax.getAMData(); //反作弊
        return "&rotate_count=" + parseInt(isNaN(sinaSax.storage.getMode('sax_wap')) ? Math.random() * 1000 : sinaSax.storage.get('sax_wap')) + "&am=" + encodeURIComponent(am) + '&net=' + NetStatus.result;
      }
    }, {
      class: 'j_native',
      // url: prtl + 'sax.sina.cn/native/impress',
      url: prtl + 'mixer.sina.cn/native/impress',
      id: 'pdps',
      pv: 'pvmonitor',
      urlFix: function urlFix() {
        var am = sinaSax.getAMData(); //反作弊
        return "&rotate_count=" + parseInt(isNaN(sinaSax.storage.getMode('sax_native')) ? Math.random() * 1000 : sinaSax.storage.get('sax_native')) + "&am=" + encodeURIComponent(am) + '&net=' + NetStatus.result;
      }
    }],
    isTwice: false, //正文返回回退标志,默认值为false
    previewed: false,
    init: function init() {
      // debugger
      //console.log(prtl);
      var iterator,
          i = 0,
          len = this.sax.length;
      for (; i < len; i++) {
        this.sax[i].pdpsArr = [];
        this.sax[i].pdpsNodes = this.sax[i].pdpsNodes || [];
        this.sax[i].pdpsStr = this.sax[i].pdpsStr || [];
        this.sax[i].pdpsNodes.push(this.getValidClass(this.getClass(this.sax[i].class)));
        iterator = this.sax[i].pdpsNodes.length - 1;
        this.sax[i].pdpsStr.push(this.getPdpsArr(this.sax[i].pdpsNodes[iterator]));
      }

      this.creatPvElement();
      this.getSaxType();
      this.ajaxHandle(iterator);
      if (location.hash.indexOf('preview') + 1) {
        setTimeout(this.preview.call(this), 300);
      }
    },
    bindEvent: function bindEvent() {
      //历史回退，重新请求数据
      sinaSax.bind("saxHistory", sinaSax.saxHistory);
    },
    preview: function preview() {
      if (this.previewed) return;
      this.previewed = true;

      var previewData = decodeURIComponent(location.hash.substring(1)).split('|');
      previewData[0] = previewData[0].split('=')[1];
      if (previewData[0] && previewData[3]) {
        var url = prtl + 'sax.sina.cn/wap/preview?' + 'adunit_id=' + previewData[0] + '&date=' + previewData[1] + '&ip=' + previewData[2] + '&deid=' + previewData[3] + '&rotate_count=' + parseInt(Math.random() * 1000) + '&page_url=' + encodeURIComponent(window.location.href) + '&version=vt4&timestamp=' + Date.now();
        this.previewArr = previewData;

        this.jsonp(url, this.previewCallback);
      } else {
        alert('参数错误');
      }
    },
    previewCallback: function previewCallback(data, index, iterator, self) {

      if (!data.ad) {
        alert('没有预览数据');
      } else {
        self.previewData = data.ad[0];
      }
    },
    insertPreview: function insertPreview(scriptId, pdps, cb) {

      if (this.previewData) {
        try {

          pdps.innerHTML = this.jsTemplate(scriptId, this.previewData);
          cb && cb();
        } catch (e) {
          this.callback('error', e);
        }
      } else {
        var self = this;
        var timer = setTimeout(function () {
          self.insertPreview(scriptId, pdps, cb);
        }, 500);
      }
    },
    RandomNumBoth: function RandomNumBoth(Min, Max) {
      var Range = Max - Min;
      var Rand = Math.random();
      var num = Min + Math.round(Rand * Range);
      return num;
    },
    creatPvElement: function creatPvElement() {
      var id = "sax_pv_count";
      if (!document.getElementById(id)) {
        this.pvBox = this.creatElement("div", {
          id: id,
          style: 'display:none'
        });
        document.body.appendChild(this.pvBox);
      } else {
        this.pvBox = document.getElementById(id);
      }
    },
    getClass: function getClass(value) {
      return document.getElementsByClassName(value);
    },
    getValidClass: function getValidClass(dom) {
      var i = 0,
          len = dom.length,
          nodeArr = [];
      for (; i < len; i++) {
        if (dom[i].getAttribute('loaded') !== 'loaded' && dom[i].getAttribute('data-id') && dom[i].getAttribute('sax-type')) {
          dom[i].setAttribute('loaded', 'loaded');
          nodeArr.push(dom[i]);
        }
      }
      return nodeArr;
    },
    getCookie: function getCookie(ckName) {
      if (undefined == ckName || "" == ckName) {
        return "";
      }
      return this.stringSplice(document.cookie, ckName, ";", "");
    },
    stringSplice: function stringSplice(src, k, e, sp) {
      if (src == "") {
        return "";
      }
      sp = sp == "" ? "=" : sp;
      k += sp;
      var ps = src.indexOf(k);
      if (ps < 0) {
        return "";
      }
      ps += k.length;
      var pe = src.indexOf(e, ps);
      if (pe < ps) {
        pe = src.length;
      }

      return src.substring(ps, pe);
    },
    // 鍐� Cookie
    setCookie: function setCookie(key, value, expires, path, domain, m) {
      var s = [];
      s.push(key + "=" + escape(value));
      if (expires) {
        var t = new Date();
        var p = t.getTime() + expires * 3600000;
        t.setTime(p);
        s.push("expires=" + t.toGMTString());
      }
      if (path) {
        s.push("path=" + path);
      }
      if (domain) {
        s.push("domain=" + domain);
      }
      if (m) {
        s.push(m);
      }
      document.cookie = s.join(";");
    },
    getRate: function getRate(dom) {

      if (dom.dataset.rate) {
        if (this.getCookie(dom.dataset.id)) {
          return false;
        } else {

          return true;
        }
      } else {
        return true;
      }
    },
    setRate: function setRate(dom) {
      if (dom.dataset.rate) {
        this.setCookie(dom.dataset.id, 1, (dom.dataset.rate - 0) * 24);
      }
    },
    getPdpsArr: function getPdpsArr(nodeArr) {
      var pdpsStr = [];
      for (var i = 0, len = nodeArr.length; i < len; i++) {
        pdpsStr.push(nodeArr[i].getAttribute('data-id'));
      }
      return pdpsStr.join(',');
    },
    //请求广告数据
    ajaxHandle: function ajaxHandle(iterator) {
      for (var i = 0, len = this.sax.length; i < len; i++) {
        if (this.sax[i].pdpsStr[iterator]) {

          //201718,判断是否包含entcard，包含的pdps码为PDPS000000057781
          var isContainEnt = this.sax[i].pdpsStr[iterator].indexOf('PDPS000000057781') >= 0;
          //20170718,添加娱乐card请求日志，请求发出前日志
          if (isContainEnt) {
            sinaSax.callback('sendHistoryLog', [sinaSax.historyStatus.entstart]);
          }

          var url = this.sax[i].url + '?' + 'adunit_id=' + this.sax[i].pdpsStr[iterator] + '&page_url=' + encodeURIComponent(window.location.href) + (this.isTwice ? '&twice=1' : '') + '&timestamp=' + timestamp;
          url += this.sax[i].urlFix();
          this.setRotateCount(url);
          this.jsonp(url, this.callbackHandle, i, iterator, this.completeHandle, 5000, this.timeoutFunHandle, this.sax[i].pdpsStr[iterator]);

          //20170704，若为历史回退，回退请求发送成功，则同步发送一个日志
          if (this.isTwice) {
            sinaSax.callback('sendHistoryLog', [sinaSax.historyStatus.after]);
            this.isTwice = false;
          }
          //20170718,添加娱乐card请求日志，请求成功发出，则发送日志
          if (isContainEnt) {
            sinaSax.callback('sendHistoryLog', [sinaSax.historyStatus.entend]);
          }
        }
      }
    },
    //过滤页面数据
    getSaxType: function () {
      var count = 0,
          foo = function foo() {
        var script = document.getElementsByTagName('script'),
            i = 0,
            len = script.length;
        for (; i < len; i++) {
          var saxType = script[i].getAttribute('sax-type');
          if (saxType && !this.saxType.hasOwnProperty(saxType)) {
            var id = 'sax_template_' + count++;
            script[i].id = id;
            this.saxType[saxType] = id;
          }
        }
      };
      return foo;
    }(),
    completeHandle: function completeHandle() {
      sinaSax.callback("completeFunc");
    },
    timeoutFunHandle: function timeoutFunHandle(pdps) {
      sinaSax.callback("timeoutFunc", [pdps]);
    },
    callbackHandle: function callbackHandle(data, index, iterator, self) {
      var thisArr = self.sax[index].pdpsStr[iterator].split(','),
          dataArr = [];

      self.cmPv(data); //添加dsp cm字段曝光

      data = self.formatData(data, index, "data");
      self.sax[index]['pdpsArr'][iterator] = thisArr;

      for (var i = 0, len = data.length; i < len; i++) {
        (function (i) {
          // debugger
          var pdpsIndex = thisArr.indexOf(data[i][self.sax[index]['id']]),
              //索引
          scriptId = self.getTemplateScriptId(index, iterator, pdpsIndex),
              //查找当前页面图形模板
          pdpsDom = self.sax[index].pdpsNodes[iterator][pdpsIndex]; //获取图形模板的dom

          //图形广告，wap接口，例如，顶通、焦点图、全屏、流媒体（浪首是从下往上展开广告）
          if (scriptId) {
            try {
              if (window.location.href.indexOf('wm=3206') != -1) {
                return; //更新百度热词的渠道广告展示
              }

              //可客户预览效果测试代码
              if (self.previewArr && self.previewArr[0] === pdpsDom.getAttribute('data-id')) {
                //广告已下线，待定
                self.insertPreview(scriptId, pdpsDom, function () {
                  self.callback("insertSucc", [pdpsDom]);
                });
                self.previewArr = [];
              } else {
                // if(i === 2){debugger}
                if (prtl == 'https://') {
                  // console.log('self.isAllHttpsData(data[i], index)'+self.isAllHttpsData(data[i], index));
                  if (!self.isAllHttpsData(data[i], index)) {
                    return;
                  }
                }

                //直接发送曝光，不等待onload
                self.sendPv(data[i], index);
                // if(data[i].id=='E9D6AC4F348E' || data[i].id== 'PDPS000000049629'){debugger}
                if (data[i] && data[i].content && data[i].content.length > 0) {
                  //20170704，天乙接口新增info字段，若不添加，模板渲染会报错
                  data[i].info = '';
                  pdpsDom.innerHTML = self.jsTemplate(scriptId, data[i]);
                  dataArr.push(pdpsIndex);
                  if (self.getRate(pdpsDom)) {
                    self.callback("insertSucc", [pdpsDom]);
                    self.setRate(pdpsDom); //设置cookie
                  }
                  //素材都放为js
                  self.saxJsFun(data[i]);
                }
              }
            } catch (e) {

              self.callback('error', [e]);
            }
          } else {
            //feed
            // debugger
            //console.log(data[i]);
            if (prtl == 'https://') {
              if (!self.isAllHttpsData(data[i], index)) {
                return;
              }
            }
            // if(data[i].pdps == "PDPS000000060104" || data[i].pdps == "PDPS000000057781"){debugger;}
            dataArr.push(pdpsIndex);
            if (self.getRate(pdpsDom)) {
              self.callback("proxy", [pdpsDom, data[i]]);
              //console.log('native成功插入');
              self.setRate(pdpsDom); //设置cookie
            }
            self.saxJsFun(data[i]);
            // self.sendPv(data[i], index);
          }
          //呼起客户端
          self.deeplink(data[i], pdpsDom);
        })(i);
      }
      for (var j = 0, jlen = thisArr.length; j < jlen; j++) {
        if (dataArr.indexOf(j) === -1) {
          self.callback("nullData", [self.sax[index]['pdpsNodes'][iterator][j]]);
        }
      }

      //self.clearNoneDataPdpsLock(index, iterator);
    },
    //延迟发送广告曝光
    delayPvSend: function delayPvSend(index) {
      // debugger
      __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].onload(function (index) {
        sinaSax.wapSendPvs(index);
      }(index));
    },
    wapSendPvs: function wapSendPvs(index) {
      for (var i = sinaSax.loadWapPv.length; i >= 0; i--) {
        // debugger
        sinaSax.sendPv(sinaSax.loadWapPv[i], index);
        sinaSax.loadWapPv.splice(i, 1);
      }
    },
    saxJsFun: function saxJsFun(data) {

      if (data.type === "js") {
        var _src = data.content[0] != undefined ? data.content[0]['src'] : undefined;
        if (_src && _src[0] && !this.isBlank(_src[0])) {
          //js地址
          var jsBox = this.creatElement("script", {
            src: _src[0]
          });
          document.body.appendChild(jsBox);
          this.callback("saxJsAppend", [_src[0]]);
        }
        if (_src && _src[1] != undefined && !this.isBlank(_src[1])) {
          //js地址对应的广告logo地址
          this.callback("saxJsLogo", [_src[1]]);
        }
      }
    },
    cmPv: function cmPv(data) {
      if (data.cm && data.cm.length > 0) {
        for (var i = 0; i < data.cm.length; i++) {
          var pv = data.cm[i];
          if (pv && !this.isBlank(pv)) {
            //console.log(this.pvBox);
            var img = this.creatElement("img", {
              src: pv
            });
            this.pvBox.appendChild(img);
          }
        }
      }
    },
    clearNoneDataPdpsLock: function clearNoneDataPdpsLock(index, iterator) {
      var pdpsNodes = this.sax[index]['pdpsNodes'][iterator];
      for (var i = 0, len = pdpsNodes.length; i < len; i++) {
        if (!pdpsNodes[i].innerHTML && this.isBlank(pdpsNodes[i].innerHTML)) {
          pdpsNodes[i].removeAttribute('loaded');
        }
      }
    },
    listener: {},
    bind: function bind(event, func) {
      if (!this.listener.hasOwnProperty(event)) {
        this.listener[event] = [];
      }
      this.listener[event].push(func);
    },
    callback: function callback(event, args) {
      if (!this.listener.hasOwnProperty(event)) return;
      for (var i = 0, len = this.listener[event].length; i < len; i++) {
        this.listener[event][i].apply(this, args);
      }
    },
    deeplink: function deeplink(data, pdpsDom) {
      //判断deeplink
      if (typeof data.content != "undefined") {
        if (data.content.length > 0) {
          var data_centent = data.content;
          var data_undefined = null;
          var pdps_a = pdpsDom.children[0];
          for (var d = 0, dLen = data_centent.length; d <= dLen; d++) {
            (function (d) {
              if (typeof data_centent[d] == "undefined") {
                data_undefined = d;
              }
              if (d != data_undefined && typeof data_centent[d].type != "undefined") {
                //有的centent下无type字段、有的data未定义
                if (data_centent[d].type.indexOf("deeplink") > -1) {
                  var pdps_src = data_centent[d].src;
                  var pdps_link = data_centent[d].link;
                  pdps_a.addEventListener('click', function (ev) {
                    ev.preventDefault();
                    sinaSax.huqiFunc(pdps_src, pdps_link);
                  }, false);
                }
              }
            })(d);
          }
        }
      }
    },
    huqiFunc: function huqiFunc(src, link) {
      var loaded_src = null;
      for (var i = 0, len = src.length; i <= len; i++) {
        if (typeof src[i] != "undefined" && src[i].indexOf("sinaweibo") > -1) {
          loaded_src = src[i];
          location.href = loaded_src;
        }
      }
      setTimeout(function () {
        window.location.href = link;
      }, 3000);
    },
    sendPv: function sendPv(_data, index) {
      var data = [];
      if (typeof index == "undefined" || (typeof index === 'undefined' ? 'undefined' : _typeof(index)) == undefined) {
        data = _data.pvmonitor;
      } else {
        data = this.formatData(_data, index, "pv");
      }
      if (typeof data == 'undefined') {
        return;
      }

      var i = 0,
          len = data.length;
      var am = this.getAMData(); //反作弊
      for (; i < len; i++) {
        var pv = data[i];
        if (pv && !this.isBlank(pv)) {

          pv = data[i].match(/\/\/sax\./ig) ? data[i] + (data[i].match(/\?/ig) ? '&' : '?') + "am=" + encodeURIComponent(am) : data[i];

          //console.log(pv);
          var img = this.creatElement("img", { src: pv });
          if (this.pvBox === undefined || this.pvBox === "undefined") {
            this.creatPvElement();
          }
          this.pvBox.appendChild(img);
        }
      }
    },
    getAMData: function getAMData() {
      var am = {
        ds: window.screen.width + '*' + window.screen.height,
        ov: navigator.userAgent.toLowerCase().indexOf('iphone') > -1 ? 'ios' : 'android'
      };
      return JSON.stringify(am);
    },
    isBlank: function isBlank(str) {
      return (/^\s*$/.test(str)
      );
    },
    formatData: function formatData(data, index, key) {

      // console.log(this.sax[index]);
      if (this.sax[index][key]) {

        var treeArr = this.sax[index][key].split('-');
        var i = 0;
        var len = treeArr != undefined ? treeArr.length : undefined;
        for (; i < len; i++) {
          //console.log(data,treeArr[i],data[treeArr[i]]);
          if (data) {
            data = data[treeArr[i]];
          }
        }
      }
      return data;
    },
    getTemplateScriptId: function getTemplateScriptId(index, iterator, pdpsIndex) {
      var pdpsEl = this.sax[index].pdpsNodes[iterator][pdpsIndex];
      return this.saxType[pdpsEl.getAttribute('sax-type')];
    },
    creatElement: function creatElement(tag, option) {
      var el = document.createElement(tag);
      for (var i in option) {
        el.setAttribute(i, option[i]);
      }
      return el;
    },
    setRotateCount: function setRotateCount(url) {
      // var arr = url.split('&');
      // var rotate_count = arr[3].split('='); //目前rotate_count是第三个参数
      // var rotate_count_int = parseInt(rotate_count[1]);

      //20170622，更改截取rotate_count 取值方式
      var rotate_count_int = parseInt(url.split('rotate_count=')[1] || 1);
      // debugger
      //console.log(arr,rotate_count);
      if (url.indexOf('sax.sina.cn/wap') > -1) {
        sinaSax.storage.setMode('sax_wap', rotate_count_int + 1);
      } else if (url.indexOf('sax.sina.cn/native') > -1) {
        sinaSax.storage.setMode('sax_native', rotate_count_int + 1);
      }
    },
    storage: {
      setMode: function setMode(key, val) {
        try {
          this.set('check', 1);
          this.set(key, val);
        } catch (e) {}
      },
      getMode: function getMode(key) {
        try {
          this.set('check', 1);
          return this.get(key);
        } catch (e) {}
      },
      set: function set(key, value) {
        sessionStorage.setItem(key, parseInt(value));
      },
      get: function get(key) {
        return parseInt(sessionStorage.getItem(key));
      }
    },
    jsonp: function () {
      var count = 0,
          foo = function foo(url, func, index, iterator, comple, time, timeoutFun, pdps) {
        //index 为sax索引，iterator为当前请求次数的pdpsNodes索引
        var countScript = count,
            callback = "sax_jsonpCallback_" + count++;
        var _url = url.split('?');
        var baseTime = +new Date() + '';
        window[callback] = function (data) {

          clearTimeout(timmer);
          func(data, index, iterator, self);
          comple && comple();
          document.body.removeChild(document.getElementById("sax_script_jsonp_" + countScript));
          window[callback] = null;
        };
        if (_url.length == 2) {
          if (isChangeSax) {
            var url = _url[0] + '?' + baseTime.substr(sinaSax.RandomNumBoth(0, 3), sinaSax.RandomNumBoth(2, 6)) + '=' + base64encode('callback=' + callback + '&' + _url[1]);
          } else {
            var url = _url[0] + '?callback=' + callback + '&' + _url[1];
          }
          // var url = _url[0] + '?callback=' + callback + '&' + _url[1],
          var s = this.creatElement("script", {
            "src": url,
            "id": "sax_script_jsonp_" + countScript
          }),
              self = this,
              timmer;
        } else {
          if (isChangeSax) {
            var url = url + (url.indexOf('?') + 1 ? '&' : '?') + baseTime.substr(sinaSax.RandomNumBoth(0, 3), sinaSax.RandomNumBoth(2, 6)) + '=' + base64encode('callback=' + callback);
          } else {
            var url = url + (url.indexOf('?') + 1 ? '&' : '?') + 'callback=' + callback;
          }
          // var url = url + (url.indexOf('?') + 1 ? '&' : '?') + 'callback=' + callback,
          var s = this.creatElement("script", {
            "src": url,
            "id": "sax_script_jsonp_" + countScript
          }),
              self = this,
              timmer;
        }

        // window[callback] = function (data) {
        //     clearTimeout(timmer);
        //     func(data, index, iterator, self);
        //     comple && comple();
        //     document.body.removeChild(document.getElementById("sax_script_jsonp_" + countScript));
        //     window[callback] = null;

        // }
        if (typeof time != "undefined") {
          timmer = setTimeout(function () {
            comple && comple();
            timeoutFun && timeoutFun(pdps);
            document.body.removeChild(document.getElementById("sax_script_jsonp_" + countScript));
            window[callback] = null;
          }, time);
        }
        document.body.appendChild(s);
      };
      return foo;
    }(),
    jsTemplate: function () {
      var cache = {},
          foo = function tmpl(str, data) {
        var fnArrStr = [];
        fnArrStr.push("var p=[],print=function(){p.push.apply(p,arguments);};");
        fnArrStr.push("with(obj){p.push('");
        fnArrStr.push(str.replace(/[\r\t\n]/g, " ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g, "$1\r").replace(/\t(.*?)%>/g, "',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'"));
        fnArrStr.push("');}return p.join('');");
        var fn = !/\W/.test(str) ? cache[str] = cache[str] || tmpl(document.getElementById(str).innerHTML) : new Function("obj", fnArrStr.join(""));

        return data ? fn(data) : fn;
      };
      return foo;
    }(),
    _getUAInfo: function _getUAInfo() {
      //拆分字段
      var browserObj = {
        appName: navigator.appName,
        appVersion: navigator.appVersion,
        platform: navigator.platform,
        ua: navigator.userAgent.toLowerCase()
        //console.log(browserObj.appName+" %%%%%"+browserObj.appVersion+'%%%%'+browserObj.platform+"%%%%"+browserObj.ua);
      };return browserObj;
    },
    saxlog: function saxlog(json) {
      //反屏蔽日志
      json.data = json.data || {};

      var arr = [];
      for (var i in json.data) {
        arr.push(i + '=' + encodeURIComponent(json.data[i]));
      }
      var sData = arr.join('&');
      var oS = document.createElement('img');
      if (json.url.indexOf('?') == -1) {
        json.url += "?";
      }
      oS.src = json.url + sData;
      var oHead = document.getElementsByTagName('head')[0];
      oHead.appendChild(oS);
    },
    saxHistory: function saxHistory() {

      console.log('has history sax');

      sinaSax.callback('sendHistoryLog', [sinaSax.historyStatus.before]);
      //更新请求的时间戳，防止浏览器缓存
      timestamp = Date.now();

      var i = 0,
          len = this.sax.length,
          pdpsArrs = [],
          targerNode = [];
      for (; i < len; i++) {
        pdpsArrs[i] = this.getClass(this.sax[i].class);
        for (var j = 0; j < pdpsArrs[i].length; j++) {
          if (i === 0) {
            //非浪首、焦点图不走历史回退
            if (this.saxDomain != "sina.cn" && this.saxDomain != "langshou.dev.sina.cn" && (pdpsArrs[i][j].getAttribute("sax-type") == "sax_3" || pdpsArrs[i][j].getAttribute("sax-type") == "slide")) {
              continue;
            }
            if (typeof pdpsArrs[i][j] !== "undefined") {
              pdpsArrs[i][j].removeAttribute("loaded");
            }
          } else {
            //要闻区card外回退
            if (pdpsArrs[i][j].getAttribute("data-id") == "PDPS000000057778") {
              pdpsArrs[i][j].removeAttribute("loaded");
            }
          }
        }
        this.isTwice = true;
      }
      sinaSax.init();
    },
    reloadPdps: function reloadPdps(arr) {

      //更新请求的时间戳，防止浏览器缓存
      timestamp = Date.now();
      var i = 0,
          len = this.sax.length,
          pdpsArrs = [],
          targerNode = [];
      for (; i < len; i++) {
        pdpsArrs[i] = this.getClass(this.sax[i].class);
        targerNode = this.searchPdpsNodes(pdpsArrs[i], arr);
        if (typeof targerNode !== "undefined") {
          targerNode.removeAttribute("loaded");
          sinaSax.init();
          return;
        }
      }
    },
    searchPdpsNodes: function searchPdpsNodes(pdpsArrs, arr) {
      var i = 0,
          len = pdpsArrs.length;
      for (; i < len; i++) {
        if (pdpsArrs[i].getAttribute("data-id") == arr) {
          return pdpsArrs[i];
        }
      }
    },
    isAllHttpsData: function isAllHttpsData(data, index) {
      //两个接口的展示pv曝光数据的过滤
      if (this.pvHttpsData(data, index)) {} else {
        console.log('pvHttpsDataError', data);
        return false;
      }
      //两个接口的img src 数据的过滤
      if (this.imagesHttpsData(data, index)) {} else {
        console.log('imagesHttpsDataError', data);
        return false;
      }
      //两个接口的点击曝光的 数据的过滤
      if (data['play'] || data['namonitor']) {
        if (this.playHttpsData(data, index)) {} else {
          console.log('playHttpsDataError', data);
          return false;
        }
      } else {}

      if (data['templateid'] === 42) {
        return false;
      }
      //视频的 数据的过滤 在feedpush.js
      //第三方检测数据过滤在feedpush.js

      return true;
    },
    pvHttpsData: function pvHttpsData(data, index) {
      var data = this.formatData(data, index, "pv"),
          i = 0,
          len = (typeof data === 'undefined' ? 'undefined' : _typeof(data)) == 'object' && data.length || 0;

      for (; i < len; i++) {
        var pv = data[i];
        if (pv && !this.isBlank(pv)) {
          if (pv.indexOf(prtl) > -1) {} else {
            return false;
          }
        }
      }
      return true;
    },
    imagesHttpsData: function imagesHttpsData(data, index) {

      if ((index == 0 || index == '0') && data['content'] !== undefined && data['content'].length > 0) {
        //wap接口
        var _content = data.content[0];
        switch (data.type) {
          case 'qp':
            //只有全屏图片数据在src[1]

            if (_content.src[1].indexOf(prtl) === -1) {
              //console.log('contentSrcError', data);
              return false;
            } else {

              break;
            }

          default:
            //其他图片数据在src[0]

            if (_content.src[0].indexOf(prtl) === -1) {
              //严格是第一个数据。
              //console.log('contentSrcError', data);
              return false;
            } else {

              break;
            }

        }
      } else {
        if (data['images']) {
          var _images = data['images'],
              i = 0,
              len = _images.length;
          for (; i < len; i++) {
            var imgSrc = _images[i]['u'];
            if (imgSrc && !this.isBlank(imgSrc)) {
              if (imgSrc.indexOf(prtl) > -1) {} else {

                return false;
              }
            }
          }
        }
        if (data['img'] && !this.isBlank(data['img'])) {
          //console.log('img');
          if (data['img']['u'] && data['img']['u'].indexOf(prtl) > -1) {} else {

            return false;
          }
          /*if(data['img']){
           }*/
        }
      }

      return true;
    },
    playHttpsData: function playHttpsData(data, index) {
      //console.log('index: '+index);
      if (index === '1' || index === 1) {
        if (data['play']) {
          var play = data['play'],
              i = 0,
              len = play.length;
          for (; i < len; i++) {
            var playSrc = play[i];

            if (playSrc && !this.isBlank(playSrc)) {
              if (playSrc.indexOf(prtl) > -1) {

                return true;
              } else {

                return false;
              }
            }
          }
        } else if (data['namonitor']['tel']) {
          var telsrc = data['namonitor']['tel'];
          if (telsrc.indexOf(prtl) > -1) {

            return true;
          } else {

            return false;
          }
        }
        return true;
      }
    },
    sendPVByNetStatus: function sendPVByNetStatus(url, pdps) {

      var xmlhttp = null;

      function loadXMLDoc(url) {

        if (window.XMLHttpRequest) {
          xmlhttp = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
          // code for IE5 and IE6
          xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        if (xmlhttp != null) {
          xmlhttp.onreadystatechange = state_Change;
          xmlhttp.open("GET", url, true);
          xmlhttp.send(null);
        } else {
          console.log("Your browser does not support XMLHTTP.");
        }
      }

      function state_Change() {
        if (xmlhttp.readyState == 4) {
          // 4 = "loaded"
          // debugger
          console.log(xmlhttp.status);
          if (xmlhttp.status == 200) {// 200 = OK
            // ...our code here...
          } else {
            alert("Problem retrieving XML data");
          }
        }
      }
      loadXMLDoc(url);
    },
    sendLog: function sendLog(pv, id) {
      var _id = id ? id : pvContainer.pv;
      // debugger
      if (pv && !sinaSax.isBlank(pv)) {
        var img = sinaSax.creatElement("img", {
          src: pv
        });
        var oDiv = document.getElementById(_id);
        if (!oDiv) {
          oDiv = sinaSax.creatElement("div", { id: _id, style: 'display:none' });
          document.body.appendChild(oDiv);
        }
        oDiv.appendChild(img);
      }
    },
    sendSinaLog: function sendSinaLog(box) {
      try {
        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_sina_log__["a" /* default */])({
          "ek": box.ek, //错误的来源
          "pk": 'ad_group',
          "method": 'load', //引起错误的方式
          "data": [box.info]
        });
      } catch (e) {
        console.log(e.message);
      }
    },
    sendErrLog: function sendErrLog(data) {
      console.log('insert error ==== pdps/pos/tysize : ' + data.pdps + '/' + data.pos + '/' + data.tysize);
      try {
        // debugger
        var _logUrl = data.pb[0];
        var _tySize = '_num_' + data.tysize + '_tysize_' + data.allty + '_gesture_' + data.gesture;
        _logUrl = _logUrl.replace('http://', 'https://').replace('__PB__', 'insertErr') + _tySize;
        sinaSax.sendLog(_logUrl, 'sax_null_count');

        this.sendSinaLog({
          ek: 'ad_insert',
          info: {
            message: '插入失败',
            alen: data.tysize,
            tylen: data.allty,
            gesture: data.gesture,
            pdps: data.pdps,
            adid: data.adid
          }
        });
      } catch (e) {
        console.log(e.message);
      }
    },
    historyStatus: _defineProperty({
      pagehtbefore: 0,
      pagehtafter: 1,
      page: 1,
      before: 2,
      after: 3,
      entcard: 4,
      entstart: 5,
      enterror: 6
    }, 'entstart', 7),
    initBindEvt: function initBindEvt() {
      //发送pv的容器，包含了天乙数据未成功发送的容器
      var pvContainer = {
        pv: 'sax_pv_count',
        nullPv: 'sax_null_count'
      };
      //天乙数据异常时，需要向广告的后端发送一个请求，告知对方，以做曝光减的工作
      var sendNullTyInfo = {
        url: 'https://csi.sina.cn/tym',
        history: 'https://csi.sina.cn/pv?ht=w'
        //重新load广告的list
      };var reloadPdpsList = ['PDPS000000057793'];

      //天乙数据为空时，需要发送请求告诉后端
      sinaSax.bind('proxyty_null', function (rid) {
        var _url = sendNullTyInfo.url + '?rid=' + rid + '&r=' + Math.random();
        // debugger
        // _sendPv(_url,pvContainer.nullPv);
        sinaSax.sendLog(_url, pvContainer.nullPv);
        // debugger
      });
      //绑定reload事件  
      sinaSax.bind('reloadAds', function () {
        sinaSax.reloadPdps(reloadPdpsList);
      });

      //sinaSax.callback('sendHistoryLog',[sinaSax.historyStatus.before]);
      //sinaSax.callback('sendHistoryLog',[sinaSax.historyStatus.after]);
      //sinaSax.callback('sendHistoryLog',[sinaSax.historyStatus.entcard]);
      //sinaSax.callback('sendHistoryLog',[sinaSax.historyStatus.entstart]);
      //绑定历史回退事件日志
      sinaSax.bind('sendHistoryLog', function (type) {
        var _status = sinaSax.historyStatus;
        var _url = sendNullTyInfo.history;
        var _ua = navigator.userAgent.toLocaleLowerCase();
        var _link = encodeURIComponent(window.location.href);
        var _action = '';

        switch (type) {
          case _status.pagehtbefore:
            _url += '&action=pagehtbefore';
            _action = 'pagehtbefore';
            break;
          case _status.page:
          case _status.pagehtafter:
            _url += '&action=pagehtafter';
            _action = 'pagehtafter';
            break;
          case _status.before:
            _url += '&action=saxhtbefore';
            _action = 'saxhtbefore';
            break;
          case _status.entcard:
            _url += '&action=entcard';
            _action = 'entcard';
            break;
          case _status.enterror:
            _url += '&action=enterror';
            _action = 'enterror';
            break;
          case _status.entstart:
            _url += '&action=entstart';
            _action = 'entstart';
            break;
          case _status.entend:
            _url += '&action=entend';
            _action = 'entend';
            break;
          default:
            _url += '&action=saxhtafter';
            _action = 'saxhtafter';
            break;
        }
        _url += '&ua=' + _ua + '&link=' + _link + '&r=' + Math.random();
        // _sendPv(_url,pvContainer.nullPv);
        // sinaSax.sendLog(_url,pvContainer.nullPv);

        //   this.sendSinaLog({
        //     ek : 'tyLog',
        //     info : {
        //         action : _action,
        //         // message : info || '',
        //     }
        // });
      });

      //单独发送曝光
      // function _sendPv(pv,id) {
      //   var _id = id?id:pvContainer.pv;
      //   // debugger
      //   if (pv && !sinaSax.isBlank(pv)) {
      //     var img = sinaSax.creatElement("img", {
      //       src: pv
      //     });
      //     var oDiv = document.getElementById(_id);
      //     if(!oDiv){
      //       oDiv = sinaSax.creatElement("div", {id : _id,style:'display:none'});
      //       document.body.appendChild(oDiv);
      //     }
      //     oDiv.appendChild(img);
      //   }
      // }
    }
  };
  return sinaSax;
}();

//20170907,懒加载处理图片错误逻辑
window.findParentsByTag = function (ele, _tag) {
  var _times = 0;
  var _MAX_TIMES = 10;
  while (ele && _times < _MAX_TIMES && ele.tagName != "BODY") {
    if (ele.tagName.toLocaleLowerCase() === _tag.toLocaleLowerCase()) {
      return ele;
    } else {
      ele = ele.parentNode;
    }
  }
  return false;
};
window.adImgErrList = [];

window._lazyLoad = function () {
  if (!!window.lazyLoad) {
    window.lazyLoad.currentLazy();
    window.lazyLoad.onerror = function (ele, e) {
      try {
        var _mParents = findParentsByTag(ele, 'a');
        var _href = ele.dataset['src'] || ele.src;
        var isAllow = _mParents && (_mParents.href.match(/sax/ig) || _mParents.dataset['href'].match(/sax/ig));
        var _log = 'http://csi.sina.cn/imgerr?url=' + encodeURIComponent(_href) + '&ts=' + new Date().getTime();

        if (isAllow && window.adImgErrList.indexOf(_href) < 0) {
          // debugger;
          console.log('image error log ==== ' + _log);
          window.adImgErrList.push(_href);
          sinaSax.sendLog(_log.replace('http://', 'https://'), 'sax_null_count');
          sinaSax.sendSinaLog({
            ek: 'image',
            info: {
              origin: _href,
              message: '图片加载失败'
            }
          });
        }
      } catch (e) {
        console.log(e.message);
      }
    };
  }
};
//20170907,懒加载处理图片错误逻辑

//suda_log包含回退逻辑，需要调用sinaSax组件重新请求广告数据
window.sinaSax = sinaSax;
//绑定初始化事件
sinaSax.initBindEvt();

/* harmony default export */ __webpack_exports__["a"] = (sinaSax);

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/**
 * Swiper 3.4.0
 * Most modern mobile touch slider and framework with hardware accelerated transitions
 * 
 * http://www.idangero.us/swiper/
 * 
 * Copyright 2016, Vladimir Kharlampidi
 * The iDangero.us
 * http://www.idangero.us/
 * 
 * Licensed under MIT
 * 
 * 2017.1.8 新增不在可视区内不自动播放参数
 */
(function () {
    'use strict';

    var $;
    /*===========================
    Swiper
    ===========================*/
    var Swiper = function Swiper(container, params) {
        if (!(this instanceof Swiper)) return new Swiper(container, params);

        var defaults = {
            direction: 'horizontal',
            touchEventsTarget: 'container',
            initialSlide: 0,
            speed: 300,
            // autoplay
            autoplay: false,
            autoplayDisableOnInteraction: true,
            autoplayStopOnLast: false,
            // To support iOS's swipe-to-go-back gesture (when being used in-app, with UIWebView).
            // iOSEdgeSwipeDetection: false,
            // iOSEdgeSwipeThreshold: 20,
            // Free mode
            freeMode: false,
            freeModeMomentum: true,
            freeModeMomentumRatio: 1,
            freeModeMomentumBounce: true,
            freeModeMomentumBounceRatio: 1,
            freeModeMomentumVelocityRatio: 1,
            freeModeSticky: false,
            freeModeMinimumVelocity: 0.02,
            // Autoheight
            // autoHeight: false,
            // Set wrapper width
            setWrapperSize: false,
            // Virtual Translate
            virtualTranslate: false,
            observeAutoPlay: false,
            // Effects
            effect: 'slide', // 'slide' or 'fade' or 'cube' or 'coverflow' or 'flip'
            // coverflow: {
            //     rotate: 50,
            //     stretch: 0,
            //     depth: 100,
            //     modifier: 1,
            //     slideShadows : true
            // },
            // flip: {
            //     slideShadows : true,
            //     limitRotation: true
            // },
            // cube: {
            //     slideShadows: true,
            //     shadow: true,
            //     shadowOffset: 20,
            //     shadowScale: 0.94
            // },
            // fade: {
            //     crossFade: false
            // },
            // Parallax
            // parallax: false,
            // Zoom
            // zoom: false,
            // zoomMax: 3,
            // zoomMin: 1,
            // zoomToggle: true,
            // Scrollbar
            // scrollbar: null,
            // scrollbarHide: true,
            // scrollbarDraggable: false,
            // scrollbarSnapOnRelease: false,
            // Keyboard Mousewheel
            // keyboardControl: false,
            // mousewheelControl: false,
            // mousewheelReleaseOnEdges: false,
            // mousewheelInvert: false,
            // mousewheelForceToAxis: false,
            // mousewheelSensitivity: 1,
            // mousewheelEventsTarged: 'container',
            // Hash Navigation
            // hashnav: false,
            // hashnavWatchState: false,
            // History
            // history: false,
            // Commong Nav State
            // replaceState: false,
            // Breakpoints
            // breakpoints: undefined,
            // Slides grid
            spaceBetween: 0,
            slidesPerView: 1,
            slidesPerColumn: 1,
            // slidesPerColumnFill: 'column',
            slidesPerGroup: 1,
            // centeredSlides: false,
            slidesOffsetBefore: 0, // in px
            slidesOffsetAfter: 0, // in px
            // Round length
            roundLengths: false,
            // Touches
            touchRatio: 1,
            touchAngle: 45,
            simulateTouch: true,
            shortSwipes: true,
            longSwipes: true,
            longSwipesRatio: 0.5,
            longSwipesMs: 300,
            followFinger: true,
            // onlyExternal: false,
            threshold: 0,
            touchMoveStopPropagation: true,
            // touchReleaseOnEdges: false,
            // Unique Navigation Elements
            uniqueNavElements: true,
            // Pagination
            pagination: null,
            paginationElement: 'span',
            // paginationClickable: false,
            // paginationHide: false,
            paginationBulletRender: null,
            paginationProgressRender: null,
            paginationFractionRender: null,
            paginationCustomRender: null,
            paginationType: 'bullets', // 'bullets' or 'progress' or 'fraction' or 'custom'
            // Resistance
            resistance: true,
            resistanceRatio: 0.85,
            // Next/prev buttons
            nextButton: null,
            prevButton: null,
            // Progress
            // watchSlidesProgress: false,
            // watchSlidesVisibility: false,
            // Cursor
            // grabCursor: false,
            // Clicks
            preventClicks: true,
            preventClicksPropagation: true,
            // slideToClickedSlide: false,
            // Lazy Loading
            lazyLoading: false,
            lazyLoadingInPrevNext: false,
            lazyLoadingInPrevNextAmount: 1,
            lazyLoadingOnTransitionStart: false,
            // Images
            // preloadImages: true,
            // updateOnImagesReady: true,
            // loop
            loop: false,
            loopAdditionalSlides: 0,
            loopedSlides: null,
            // Control
            // control: undefined,
            controlInverse: false,
            controlBy: 'slide', //or 'container'
            // normalizeSlideIndex: true,
            // Swiping/no swiping
            allowSwipeToPrev: true,
            allowSwipeToNext: true,
            swipeHandler: null, //'.swipe-handler',
            // noSwiping: true,
            // noSwipingClass: 'swiper-no-swiping',
            // Passive Listeners
            passiveListeners: true,
            // NS
            containerModifierClass: 'swiper-container-', // NEW
            slideClass: 'swiper-slide',
            slideActiveClass: 'swiper-slide-active',
            slideDuplicateActiveClass: 'swiper-slide-duplicate-active',
            slideVisibleClass: 'swiper-slide-visible',
            slideDuplicateClass: 'swiper-slide-duplicate',
            slideNextClass: 'swiper-slide-next',
            slideDuplicateNextClass: 'swiper-slide-duplicate-next',
            slidePrevClass: 'swiper-slide-prev',
            slideDuplicatePrevClass: 'swiper-slide-duplicate-prev',
            wrapperClass: 'swiper-wrapper',
            bulletClass: 'swiper-pagination-bullet',
            bulletActiveClass: 'swiper-pagination-bullet-active',
            buttonDisabledClass: 'swiper-button-disabled',
            paginationCurrentClass: 'swiper-pagination-current',
            paginationTotalClass: 'swiper-pagination-total',
            paginationHiddenClass: 'swiper-pagination-hidden',
            paginationProgressbarClass: 'swiper-pagination-progressbar',
            // paginationClickableClass: 'swiper-pagination-clickable', // NEW
            paginationModifierClass: 'swiper-pagination-', // NEW
            lazyLoadingClass: 'swiper-lazy',
            lazyStatusLoadingClass: 'swiper-lazy-loading',
            lazyStatusLoadedClass: 'swiper-lazy-loaded',
            lazyPreloaderClass: 'swiper-lazy-preloader',
            notificationClass: 'swiper-notification',
            preloaderClass: 'preloader',
            zoomContainerClass: 'swiper-zoom-container',

            // Observer
            observer: false,
            // observeParents: false,
            // Accessibility
            // a11y: false,
            prevSlideMessage: 'Previous slide',
            nextSlideMessage: 'Next slide',
            firstSlideMessage: 'This is the first slide',
            lastSlideMessage: 'This is the last slide',
            paginationBulletMessage: 'Go to slide {{index}}',
            // Callbacks
            runCallbacksOnInit: true
            /*
            Callbacks:
            onInit: function (swiper)
            onDestroy: function (swiper)
            onClick: function (swiper, e)
            onTap: function (swiper, e)
            onDoubleTap: function (swiper, e)
            onSliderMove: function (swiper, e)
            onSlideChangeStart: function (swiper)
            onSlideChangeEnd: function (swiper)
            onTransitionStart: function (swiper)
            onTransitionEnd: function (swiper)
            onImagesReady: function (swiper)
            onProgress: function (swiper, progress)
            onTouchStart: function (swiper, e)
            onTouchMove: function (swiper, e)
            onTouchMoveOpposite: function (swiper, e)
            onTouchEnd: function (swiper, e)
            onReachBeginning: function (swiper)
            onReachEnd: function (swiper)
            onSetTransition: function (swiper, duration)
            onSetTranslate: function (swiper, translate)
            onAutoplayStart: function (swiper)
            onAutoplayStop: function (swiper),
            onLazyImageLoad: function (swiper, slide, image)
            onLazyImageReady: function (swiper, slide, image)
            */

        };
        // var initialVirtualTranslate = params && params.virtualTranslate;

        params = params || {};
        var originalParams = {};
        for (var param in params) {
            if (_typeof(params[param]) === 'object' && params[param] !== null && !(params[param].nodeType || params[param] === window || params[param] === document || typeof Dom7 !== 'undefined' && params[param] instanceof Dom7 || typeof jQuery !== 'undefined' && params[param] instanceof jQuery)) {
                originalParams[param] = {};
                for (var deepParam in params[param]) {
                    originalParams[param][deepParam] = params[param][deepParam];
                }
            } else {
                originalParams[param] = params[param];
            }
        }
        for (var def in defaults) {
            if (typeof params[def] === 'undefined') {
                params[def] = defaults[def];
            } else if (_typeof(params[def]) === 'object') {
                for (var deepDef in defaults[def]) {
                    if (typeof params[def][deepDef] === 'undefined') {
                        params[def][deepDef] = defaults[def][deepDef];
                    }
                }
            }
        }

        // Swiper
        var s = this;

        // Params
        s.params = params;
        s.originalParams = originalParams;

        // Classname
        s.classNames = [];
        /*=========================
          Dom Library and plugins
          ===========================*/
        if (typeof $ !== 'undefined' && typeof Dom7 !== 'undefined') {
            $ = Dom7;
        }
        if (typeof $ === 'undefined') {
            if (typeof Dom7 === 'undefined') {
                $ = window.Dom7 || window.Zepto || window.jQuery;
            } else {
                $ = Dom7;
            }
            if (!$) return;
        }
        // Export it to Swiper instance
        s.$ = $;

        /*=========================
          Breakpoints
          ===========================*/
        // s.currentBreakpoint = undefined;
        // s.getActiveBreakpoint = function () {
        //     //Get breakpoint for window width
        //     if (!s.params.breakpoints) return false;
        //     var breakpoint = false;
        //     var points = [], point;
        //     for ( point in s.params.breakpoints ) {
        //         if (s.params.breakpoints.hasOwnProperty(point)) {
        //             points.push(point);
        //         }
        //     }
        //     points.sort(function (a, b) {
        //         return parseInt(a, 10) > parseInt(b, 10);
        //     });
        //     for (var i = 0; i < points.length; i++) {
        //         point = points[i];
        //         if (point >= window.innerWidth && !breakpoint) {
        //             breakpoint = point;
        //         }
        //     }
        //     return breakpoint || 'max';
        // };
        // s.setBreakpoint = function () {
        //     //Set breakpoint for window width and update parameters
        //     var breakpoint = s.getActiveBreakpoint();
        //     if (breakpoint && s.currentBreakpoint !== breakpoint) {
        //         var breakPointsParams = breakpoint in s.params.breakpoints ? s.params.breakpoints[breakpoint] : s.originalParams;
        //         var needsReLoop = s.params.loop && (breakPointsParams.slidesPerView !== s.params.slidesPerView);
        //         for ( var param in breakPointsParams ) {
        //             s.params[param] = breakPointsParams[param];
        //         }
        //         s.currentBreakpoint = breakpoint;
        //         if(needsReLoop && s.destroyLoop) {
        //             // s.reLoop(true);
        //         }
        //     }
        // };
        // // Set breakpoint on load
        // if (s.params.breakpoints) {
        //     s.setBreakpoint();
        // }

        /*=========================
          Preparation - Define Container, Wrapper and Pagination
          ===========================*/
        s.container = $(container);
        if (s.container.length === 0) return;
        if (s.container.length > 1) {
            var swipers = [];
            s.container.each(function () {
                var container = this;
                swipers.push(new Swiper(this, params));
            });
            return swipers;
        }

        // Save instance in container HTML Element and in data
        s.container[0].swiper = s;
        s.container.data('swiper', s);

        s.classNames.push(s.params.containerModifierClass + s.params.direction);

        if (s.params.freeMode) {
            s.classNames.push(s.params.containerModifierClass + 'free-mode');
        }
        if (!s.support.flexbox) {
            s.classNames.push(s.params.containerModifierClass + 'no-flexbox');
            s.params.slidesPerColumn = 1;
        }
        // if (s.params.autoHeight) {
        //     s.classNames.push(s.params.containerModifierClass + 'autoheight');
        // }
        // Enable slides progress when required
        // if (s.params.parallax || s.params.watchSlidesVisibility) {
        //     s.params.watchSlidesProgress = true;
        // }
        // Max resistance when touchReleaseOnEdges
        // if (s.params.touchReleaseOnEdges) {
        //     s.params.resistanceRatio = 0;
        // }
        // Coverflow / 3D
        // if (['cube', 'coverflow', 'flip'].indexOf(s.params.effect) >= 0) {
        //     if (s.support.transforms3d) {
        //         s.params.watchSlidesProgress = true;
        //         s.classNames.push(s.params.containerModifierClass + '3d');
        //     }
        //     else {
        //         s.params.effect = 'slide';
        //     }
        // }
        // if (s.params.effect !== 'slide') {
        //     s.classNames.push(s.params.containerModifierClass + s.params.effect);
        // }
        // if (s.params.effect === 'cube') {
        //     s.params.resistanceRatio = 0;
        //     s.params.slidesPerView = 1;
        //     // s.params.slidesPerColumn = 1;
        //     s.params.slidesPerGroup = 1;
        //     s.params.centeredSlides = false;
        //     s.params.spaceBetween = 0;
        //     s.params.virtualTranslate = true;
        //     s.params.setWrapperSize = false;
        // }
        // if (s.params.effect === 'fade' || s.params.effect === 'flip') {
        //     s.params.slidesPerView = 1;
        //     // s.params.slidesPerColumn = 1;
        //     s.params.slidesPerGroup = 1;
        //     s.params.watchSlidesProgress = true;
        //     s.params.spaceBetween = 0;
        //     s.params.setWrapperSize = false;
        //     if (typeof initialVirtualTranslate === 'undefined') {
        //         s.params.virtualTranslate = true;
        //     }
        // }

        // Grab Cursor
        // if (s.params.grabCursor && s.support.touch) {
        //     s.params.grabCursor = false;
        // }

        // Wrapper
        s.wrapper = s.container.children('.' + s.params.wrapperClass);

        // Pagination
        if (s.params.pagination) {
            s.paginationContainer = $(s.params.pagination);
            if (s.params.uniqueNavElements && typeof s.params.pagination === 'string' && s.paginationContainer.length > 1 && s.container.find(s.params.pagination).length === 1) {
                s.paginationContainer = s.container.find(s.params.pagination);
            }

            // if (s.params.paginationType === 'bullets' && s.params.paginationClickable) {
            //     s.paginationContainer.addClass(s.params.paginationModifierClass + 'clickable');
            // }
            // else {
            //     s.params.paginationClickable = false;
            // }
            s.paginationContainer.addClass(s.params.paginationModifierClass + s.params.paginationType);
        }
        // Next/Prev Buttons
        // if (s.params.nextButton || s.params.prevButton) {
        //     if (s.params.nextButton) {
        //         s.nextButton = $(s.params.nextButton);
        //         if (s.params.uniqueNavElements && typeof s.params.nextButton === 'string' && s.nextButton.length > 1 && s.container.find(s.params.nextButton).length === 1) {
        //             s.nextButton = s.container.find(s.params.nextButton);
        //         }
        //     }
        //     if (s.params.prevButton) {
        //         s.prevButton = $(s.params.prevButton);
        //         if (s.params.uniqueNavElements && typeof s.params.prevButton === 'string' && s.prevButton.length > 1 && s.container.find(s.params.prevButton).length === 1) {
        //             s.prevButton = s.container.find(s.params.prevButton);
        //         }
        //     }
        // }

        // Is Horizontal
        s.isHorizontal = function () {
            return s.params.direction === 'horizontal';
        };
        // s.isH = isH;

        // RTL
        s.rtl = s.isHorizontal() && (s.container[0].dir.toLowerCase() === 'rtl' || s.container.css('direction') === 'rtl');
        if (s.rtl) {
            s.classNames.push(s.params.containerModifierClass + 'rtl');
        }

        // Wrong RTL support
        if (s.rtl) {
            s.wrongRTL = s.wrapper.css('display') === '-webkit-box';
        }

        // Columns
        // if (s.params.slidesPerColumn > 1) {
        //     s.classNames.push(s.params.containerModifierClass + 'multirow');
        // }

        // Check for Android
        if (s.device.android) {
            s.classNames.push(s.params.containerModifierClass + 'android');
        }

        // Add classes
        s.container.addClass(s.classNames.join(' '));

        // Translate
        s.translate = 0;

        // Progress
        s.progress = 0;

        // Velocity
        s.velocity = 0;

        /*=========================
          Locks, unlocks
          ===========================*/
        // s.lockSwipeToNext = function () {
        //     s.params.allowSwipeToNext = false;
        //     // if (s.params.allowSwipeToPrev === false && s.params.grabCursor) {
        //     //     s.unsetGrabCursor();
        //     // }
        // };
        // s.lockSwipeToPrev = function () {
        //     s.params.allowSwipeToPrev = false;
        //     // if (s.params.allowSwipeToNext === false && s.params.grabCursor) {
        //     //     s.unsetGrabCursor();
        //     // }
        // };
        // s.lockSwipes = function () {
        //     s.params.allowSwipeToNext = s.params.allowSwipeToPrev = false;
        //     // if (s.params.grabCursor) s.unsetGrabCursor();
        // };
        // s.unlockSwipeToNext = function () {
        //     s.params.allowSwipeToNext = true;
        //     // if (s.params.allowSwipeToPrev === true && s.params.grabCursor) {
        //     //     s.setGrabCursor();
        //     // }
        // };
        // s.unlockSwipeToPrev = function () {
        //     s.params.allowSwipeToPrev = true;
        //     // if (s.params.allowSwipeToNext === true && s.params.grabCursor) {
        //     //     s.setGrabCursor();
        //     // }
        // };
        // s.unlockSwipes = function () {
        //     s.params.allowSwipeToNext = s.params.allowSwipeToPrev = true;
        //     // if (s.params.grabCursor) s.setGrabCursor();
        // };

        /*=========================
          Round helper
          ===========================*/
        function round(a) {
            return Math.floor(a);
        }
        /*=========================
          Set grab cursor
          ===========================*/
        // s.setGrabCursor = function(moving) {
        //     s.container[0].style.cursor = 'move';
        //     s.container[0].style.cursor = moving ? '-webkit-grabbing' : '-webkit-grab';
        //     s.container[0].style.cursor = moving ? '-moz-grabbin' : '-moz-grab';
        //     s.container[0].style.cursor = moving ? 'grabbing': 'grab';
        // };
        // s.unsetGrabCursor = function () {
        //     s.container[0].style.cursor = '';
        // };
        // if (s.params.grabCursor) {
        //     s.setGrabCursor();
        // }
        /*=========================
          Update on Images Ready
          ===========================*/
        s.imagesToLoad = [];
        s.imagesLoaded = 0;

        s.loadImage = function (imgElement, src, srcset, sizes, checkForComplete, callback) {
            var image;

            function onReady() {
                if (callback) callback();
            }

            if (!imgElement.complete || !checkForComplete) {
                if (src) {
                    image = new window.Image();
                    image.onload = onReady;
                    image.onerror = onReady;
                    if (sizes) {
                        image.sizes = sizes;
                    }
                    if (srcset) {
                        image.srcset = srcset;
                    }
                    if (src) {
                        image.src = src;
                    }
                } else {

                    onReady();
                }
            } else {
                //image already loaded...

                onReady();
            }
        };
        // s.preloadImages = function() {
        //     s.imagesToLoad = s.container.find('img');

        //     function _onReady() {
        //         if (typeof s === 'undefined' || s === null) return;
        //         if (s.imagesLoaded !== undefined) s.imagesLoaded++;
        //         if (s.imagesLoaded === s.imagesToLoad.length) {
        //             if (s.params.updateOnImagesReady) s.update();
        //             s.emit('onImagesReady', s);
        //         }
        //     }
        //     for (var i = 0; i < s.imagesToLoad.length; i++) {
        //         s.loadImage(s.imagesToLoad[i], (s.imagesToLoad[i].currentSrc || s.imagesToLoad[i].getAttribute('src')), (s.imagesToLoad[i].srcset || s.imagesToLoad[i].getAttribute('srcset')), s.imagesToLoad[i].sizes || s.imagesToLoad[i].getAttribute('sizes'), true, _onReady);
        //     }
        // };

        /*=========================
          Autoplay
          ===========================*/
        s.autoplayTimeoutId = undefined;
        s.autoplaying = false;
        s.autoplayPaused = false;

        function autoplay() {
            var autoplayDelay = s.params.autoplay;
            var activeSlide = s.slides.eq(s.activeIndex);
            if (activeSlide.attr('data-swiper-autoplay')) {
                autoplayDelay = activeSlide.attr('data-swiper-autoplay') || s.params.autoplay;
            }
            s.autoplayTimeoutId = setTimeout(function () {
                if (s.params.loop) {
                    s.fixLoop();
                    s._slideNext();
                    s.emit('onAutoplay', s);
                } else {
                    if (!s.isEnd) {
                        s._slideNext();
                        s.emit('onAutoplay', s);
                    } else {
                        if (!params.autoplayStopOnLast) {
                            s._slideTo(0);
                            s.emit('onAutoplay', s);
                        } else {
                            s.stopAutoplay();
                        }
                    }
                }
            }, autoplayDelay);
        }
        s.startAutoplay = function () {
            if (typeof s.autoplayTimeoutId !== 'undefined') return false;
            if (!s.params.autoplay) return false;
            if (s.autoplaying) return false;
            s.autoplaying = true;
            s.emit('onAutoplayStart', s);
            autoplay();
        };
        s.stopAutoplay = function (internal) {
            if (!s.autoplayTimeoutId) return;
            if (s.autoplayTimeoutId) clearTimeout(s.autoplayTimeoutId);
            s.autoplaying = false;
            s.autoplayTimeoutId = undefined;
            s.emit('onAutoplayStop', s);
        };
        s.pauseAutoplay = function (speed) {
            if (s.autoplayPaused) return;
            if (s.autoplayTimeoutId) clearTimeout(s.autoplayTimeoutId);
            s.autoplayPaused = true;
            if (speed === 0) {
                s.autoplayPaused = false;
                autoplay();
            } else {
                s.wrapper.transitionEnd(function () {
                    if (!s) return;
                    s.autoplayPaused = false;
                    if (!s.autoplaying) {
                        s.stopAutoplay();
                    } else {
                        autoplay();
                    }
                });
            }
        };
        /*=========================
          Min/Max Translate
          ===========================*/
        s.minTranslate = function () {
            return -s.snapGrid[0];
        };
        s.maxTranslate = function () {
            return -s.snapGrid[s.snapGrid.length - 1];
        };
        /*=========================
          Slider/slides sizes
          ===========================*/
        // s.updateAutoHeight = function () {
        //     var activeSlides = [];
        //     var newHeight = 0;

        //     // Find slides currently in view
        //     if(s.params.slidesPerView !== 'auto' && s.params.slidesPerView > 1) {
        //         for (i = 0; i < Math.ceil(s.params.slidesPerView); i++) {
        //             var index = s.activeIndex + i;
        //             if(index > s.slides.length) break;
        //             activeSlides.push(s.slides.eq(index)[0]);
        //         }
        //     } else {
        //         activeSlides.push(s.slides.eq(s.activeIndex)[0]);
        //     }

        //     // Find new height from heighest slide in view
        //     for (i = 0; i < activeSlides.length; i++) {
        //         if (typeof activeSlides[i] !== 'undefined') {
        //             var height = activeSlides[i].offsetHeight;
        //             newHeight = height > newHeight ? height : newHeight;
        //         }
        //     }

        //     // Update Height
        //     if (newHeight) s.wrapper.css('height', newHeight + 'px');
        // };
        s.updateContainerSize = function () {
            var width, height;
            if (typeof s.params.width !== 'undefined') {
                width = s.params.width;
            } else {
                width = s.container[0].clientWidth;
            }
            if (typeof s.params.height !== 'undefined') {
                height = s.params.height;
            } else {
                height = s.container[0].clientHeight;
            }
            if (width === 0 && s.isHorizontal() || height === 0 && !s.isHorizontal()) {
                return;
            }

            //Subtract paddings
            width = width - parseInt(s.container.css('padding-left'), 10) - parseInt(s.container.css('padding-right'), 10);
            height = height - parseInt(s.container.css('padding-top'), 10) - parseInt(s.container.css('padding-bottom'), 10);

            // Store values
            s.width = width;
            s.height = height;
            s.size = s.isHorizontal() ? s.width : s.height;
        };

        s.updateSlidesSize = function () {
            s.slides = s.wrapper.children('.' + s.params.slideClass);
            s.snapGrid = [];
            s.slidesGrid = [];
            s.slidesSizesGrid = [];

            var spaceBetween = s.params.spaceBetween,
                slidePosition = -s.params.slidesOffsetBefore,
                i,
                prevSlideSize = 0,
                index = 0;
            if (typeof s.size === 'undefined') return;
            if (typeof spaceBetween === 'string' && spaceBetween.indexOf('%') >= 0) {
                spaceBetween = parseFloat(spaceBetween.replace('%', '')) / 100 * s.size;
            }

            s.virtualSize = -spaceBetween;
            // reset margins
            if (s.rtl) s.slides.css({ marginLeft: '', marginTop: '' });else s.slides.css({ marginRight: '', marginBottom: '' });

            var slidesNumberEvenToRows;
            // if (s.params.slidesPerColumn > 1) {
            //     if (Math.floor(s.slides.length / s.params.slidesPerColumn) === s.slides.length / s.params.slidesPerColumn) {
            //         slidesNumberEvenToRows = s.slides.length;
            //     }
            //     else {
            //         slidesNumberEvenToRows = Math.ceil(s.slides.length / s.params.slidesPerColumn) * s.params.slidesPerColumn;
            //     }
            //     if (s.params.slidesPerView !== 'auto' && s.params.slidesPerColumnFill === 'row') {
            //         slidesNumberEvenToRows = Math.max(slidesNumberEvenToRows, s.params.slidesPerView * s.params.slidesPerColumn);
            //     }
            // }

            // Calc slides
            var slideSize;
            var slidesPerColumn = s.params.slidesPerColumn;
            var slidesPerRow = slidesNumberEvenToRows / slidesPerColumn;
            var numFullColumns = slidesPerRow - (s.params.slidesPerColumn * slidesPerRow - s.slides.length);
            for (i = 0; i < s.slides.length; i++) {
                slideSize = 0;
                var slide = s.slides.eq(i);
                // if (s.params.slidesPerColumn > 1) {
                //     // Set slides order
                //     var newSlideOrderIndex;
                //     var column, row;
                //     if (s.params.slidesPerColumnFill === 'column') {
                //         column = Math.floor(i / slidesPerColumn);
                //         row = i - column * slidesPerColumn;
                //         if (column > numFullColumns || (column === numFullColumns && row === slidesPerColumn-1)) {
                //             if (++row >= slidesPerColumn) {
                //                 row = 0;
                //                 column++;
                //             }
                //         }
                //         newSlideOrderIndex = column + row * slidesNumberEvenToRows / slidesPerColumn;
                //         slide
                //             .css({
                //                 '-webkit-box-ordinal-group': newSlideOrderIndex,
                //                 '-moz-box-ordinal-group': newSlideOrderIndex,
                //                 '-ms-flex-order': newSlideOrderIndex,
                //                 '-webkit-order': newSlideOrderIndex,
                //                 'order': newSlideOrderIndex
                //             });
                //     }
                //     else {
                //         row = Math.floor(i / slidesPerRow);
                //         column = i - row * slidesPerRow;
                //     }
                //     slide
                //         .css(
                //             'margin-' + (s.isHorizontal() ? 'top' : 'left'),
                //             (row !== 0 && s.params.spaceBetween) && (s.params.spaceBetween + 'px')
                //         )
                //         .attr('data-swiper-column', column)
                //         .attr('data-swiper-row', row);

                // }
                if (slide.css('display') === 'none') continue;
                if (s.params.slidesPerView === 'auto') {
                    slideSize = s.isHorizontal() ? slide.outerWidth(true) : slide.outerHeight(true);
                    if (s.params.roundLengths) slideSize = round(slideSize);
                } else {
                    slideSize = (s.size - (s.params.slidesPerView - 1) * spaceBetween) / s.params.slidesPerView;
                    if (s.params.roundLengths) slideSize = round(slideSize);

                    if (s.isHorizontal()) {
                        s.slides[i].style.width = slideSize + 'px';
                    } else {
                        s.slides[i].style.height = slideSize + 'px';
                    }
                }
                s.slides[i].swiperSlideSize = slideSize;
                s.slidesSizesGrid.push(slideSize);

                if (s.params.centeredSlides) {
                    // slidePosition = slidePosition + slideSize / 2 + prevSlideSize / 2 + spaceBetween;
                    // if (i === 0) slidePosition = slidePosition - s.size / 2 - spaceBetween;
                    // if (Math.abs(slidePosition) < 1 / 1000) slidePosition = 0;
                    // if ((index) % s.params.slidesPerGroup === 0) s.snapGrid.push(slidePosition);
                    // s.slidesGrid.push(slidePosition);
                } else {
                    if (index % s.params.slidesPerGroup === 0) s.snapGrid.push(slidePosition);
                    s.slidesGrid.push(slidePosition);
                    slidePosition = slidePosition + slideSize + spaceBetween;
                }

                s.virtualSize += slideSize + spaceBetween;

                prevSlideSize = slideSize;

                index++;
            }
            s.virtualSize = Math.max(s.virtualSize, s.size) + s.params.slidesOffsetAfter;
            var newSlidesGrid;

            if (s.rtl && s.wrongRTL && (s.params.effect === 'slide' || s.params.effect === 'coverflow')) {
                s.wrapper.css({ width: s.virtualSize + s.params.spaceBetween + 'px' });
            }
            if (!s.support.flexbox || s.params.setWrapperSize) {
                if (s.isHorizontal()) s.wrapper.css({ width: s.virtualSize + s.params.spaceBetween + 'px' });else s.wrapper.css({ height: s.virtualSize + s.params.spaceBetween + 'px' });
            }

            // if (s.params.slidesPerColumn > 1) {
            //     s.virtualSize = (slideSize + s.params.spaceBetween) * slidesNumberEvenToRows;
            //     s.virtualSize = Math.ceil(s.virtualSize / s.params.slidesPerColumn) - s.params.spaceBetween;
            //     if (s.isHorizontal()) s.wrapper.css({width: s.virtualSize + s.params.spaceBetween + 'px'});
            //     else s.wrapper.css({height: s.virtualSize + s.params.spaceBetween + 'px'});
            //     // if (s.params.centeredSlides) {
            //     //     newSlidesGrid = [];
            //     //     for (i = 0; i < s.snapGrid.length; i++) {
            //     //         if (s.snapGrid[i] < s.virtualSize + s.snapGrid[0]) newSlidesGrid.push(s.snapGrid[i]);
            //     //     }
            //     //     s.snapGrid = newSlidesGrid;
            //     // }
            // }

            // Remove last grid elements depending on width
            if (!s.params.centeredSlides) {
                newSlidesGrid = [];
                for (i = 0; i < s.snapGrid.length; i++) {
                    if (s.snapGrid[i] <= s.virtualSize - s.size) {
                        newSlidesGrid.push(s.snapGrid[i]);
                    }
                }
                s.snapGrid = newSlidesGrid;
                if (Math.floor(s.virtualSize - s.size) - Math.floor(s.snapGrid[s.snapGrid.length - 1]) > 1) {
                    s.snapGrid.push(s.virtualSize - s.size);
                }
            }
            if (s.snapGrid.length === 0) s.snapGrid = [0];

            if (s.params.spaceBetween !== 0) {
                if (s.isHorizontal()) {
                    if (s.rtl) s.slides.css({ marginLeft: spaceBetween + 'px' });else s.slides.css({ marginRight: spaceBetween + 'px' });
                } else s.slides.css({ marginBottom: spaceBetween + 'px' });
            }
            if (s.params.watchSlidesProgress) {
                s.updateSlidesOffset();
            }
        };
        s.updateSlidesOffset = function () {
            for (var i = 0; i < s.slides.length; i++) {
                s.slides[i].swiperSlideOffset = s.isHorizontal() ? s.slides[i].offsetLeft : s.slides[i].offsetTop;
            }
        };

        /*=========================
          Slider/slides progress
          ===========================*/
        s.updateSlidesProgress = function (translate) {
            if (typeof translate === 'undefined') {
                translate = s.translate || 0;
            }
            if (s.slides.length === 0) return;
            if (typeof s.slides[0].swiperSlideOffset === 'undefined') s.updateSlidesOffset();

            var offsetCenter = -translate;
            if (s.rtl) offsetCenter = translate;

            // Visible Slides
            s.slides.removeClass(s.params.slideVisibleClass);
            for (var i = 0; i < s.slides.length; i++) {
                var slide = s.slides[i];
                var slideProgress = (offsetCenter + (s.params.centeredSlides ? s.minTranslate() : 0) - slide.swiperSlideOffset) / (slide.swiperSlideSize + s.params.spaceBetween);
                // if (s.params.watchSlidesVisibility) {
                //     var slideBefore = -(offsetCenter - slide.swiperSlideOffset);
                //     var slideAfter = slideBefore + s.slidesSizesGrid[i];
                //     var isVisible =
                //         (slideBefore >= 0 && slideBefore < s.size) ||
                //         (slideAfter > 0 && slideAfter <= s.size) ||
                //         (slideBefore <= 0 && slideAfter >= s.size);
                //     if (isVisible) {
                //         s.slides.eq(i).addClass(s.params.slideVisibleClass);
                //     }
                // }
                slide.progress = s.rtl ? -slideProgress : slideProgress;
            }
        };
        s.updateProgress = function (translate) {
            if (typeof translate === 'undefined') {
                translate = s.translate || 0;
            }
            var translatesDiff = s.maxTranslate() - s.minTranslate();
            var wasBeginning = s.isBeginning;
            var wasEnd = s.isEnd;
            if (translatesDiff === 0) {
                s.progress = 0;
                s.isBeginning = s.isEnd = true;
            } else {
                s.progress = (translate - s.minTranslate()) / translatesDiff;
                s.isBeginning = s.progress <= 0;
                s.isEnd = s.progress >= 1;
            }
            if (s.isBeginning && !wasBeginning) s.emit('onReachBeginning', s);
            if (s.isEnd && !wasEnd) s.emit('onReachEnd', s);

            if (s.params.watchSlidesProgress) s.updateSlidesProgress(translate);
            s.emit('onProgress', s, s.progress);
        };
        s.updateActiveIndex = function () {
            var translate = s.rtl ? s.translate : -s.translate;
            var newActiveIndex, i, snapIndex;
            for (i = 0; i < s.slidesGrid.length; i++) {
                if (typeof s.slidesGrid[i + 1] !== 'undefined') {
                    if (translate >= s.slidesGrid[i] && translate < s.slidesGrid[i + 1] - (s.slidesGrid[i + 1] - s.slidesGrid[i]) / 2) {
                        newActiveIndex = i;
                    } else if (translate >= s.slidesGrid[i] && translate < s.slidesGrid[i + 1]) {
                        newActiveIndex = i + 1;
                    }
                } else {
                    if (translate >= s.slidesGrid[i]) {
                        newActiveIndex = i;
                    }
                }
            }
            // Normalize slideIndex
            // if (s.params.normalizeSlideIndex) {
            //     if (newActiveIndex < 0 || typeof newActiveIndex === 'undefined') newActiveIndex = 0;
            // }
            // for (i = 0; i < s.slidesGrid.length; i++) {
            // if (- translate >= s.slidesGrid[i]) {
            // newActiveIndex = i;
            // }
            // }
            snapIndex = Math.floor(newActiveIndex / s.params.slidesPerGroup);
            if (snapIndex >= s.snapGrid.length) snapIndex = s.snapGrid.length - 1;

            if (newActiveIndex === s.activeIndex) {
                return;
            }
            s.snapIndex = snapIndex;
            s.previousIndex = s.activeIndex;
            s.activeIndex = newActiveIndex;
            s.updateClasses();
            s.updateRealIndex();
        };
        s.updateRealIndex = function () {
            s.realIndex = s.slides.eq(s.activeIndex).attr('data-swiper-slide-index') || s.activeIndex;
        };

        /*=========================
          Classes
          ===========================*/
        s.updateClasses = function () {
            s.slides.removeClass(s.params.slideActiveClass + ' ' + s.params.slideNextClass + ' ' + s.params.slidePrevClass + ' ' + s.params.slideDuplicateActiveClass + ' ' + s.params.slideDuplicateNextClass + ' ' + s.params.slideDuplicatePrevClass);
            var activeSlide = s.slides.eq(s.activeIndex);
            // Active classes
            activeSlide.addClass(s.params.slideActiveClass);
            if (params.loop) {
                // Duplicate to all looped slides
                if (activeSlide.hasClass(s.params.slideDuplicateClass)) {
                    s.wrapper.children('.' + s.params.slideClass + ':not(.' + s.params.slideDuplicateClass + ')[data-swiper-slide-index="' + s.realIndex + '"]').addClass(s.params.slideDuplicateActiveClass);
                } else {
                    s.wrapper.children('.' + s.params.slideClass + '.' + s.params.slideDuplicateClass + '[data-swiper-slide-index="' + s.realIndex + '"]').addClass(s.params.slideDuplicateActiveClass);
                }
            }
            // Next Slide
            var nextSlide = activeSlide.next('.' + s.params.slideClass).addClass(s.params.slideNextClass);
            if (s.params.loop && nextSlide.length === 0) {
                nextSlide = s.slides.eq(0);
                nextSlide.addClass(s.params.slideNextClass);
            }
            // Prev Slide
            var prevSlide = activeSlide.prev('.' + s.params.slideClass).addClass(s.params.slidePrevClass);
            if (s.params.loop && prevSlide.length === 0) {
                prevSlide = s.slides.eq(-1);
                prevSlide.addClass(s.params.slidePrevClass);
            }
            if (params.loop) {
                // Duplicate to all looped slides
                if (nextSlide.hasClass(s.params.slideDuplicateClass)) {
                    s.wrapper.children('.' + s.params.slideClass + ':not(.' + s.params.slideDuplicateClass + ')[data-swiper-slide-index="' + nextSlide.attr('data-swiper-slide-index') + '"]').addClass(s.params.slideDuplicateNextClass);
                } else {
                    s.wrapper.children('.' + s.params.slideClass + '.' + s.params.slideDuplicateClass + '[data-swiper-slide-index="' + nextSlide.attr('data-swiper-slide-index') + '"]').addClass(s.params.slideDuplicateNextClass);
                }
                if (prevSlide.hasClass(s.params.slideDuplicateClass)) {
                    s.wrapper.children('.' + s.params.slideClass + ':not(.' + s.params.slideDuplicateClass + ')[data-swiper-slide-index="' + prevSlide.attr('data-swiper-slide-index') + '"]').addClass(s.params.slideDuplicatePrevClass);
                } else {
                    s.wrapper.children('.' + s.params.slideClass + '.' + s.params.slideDuplicateClass + '[data-swiper-slide-index="' + prevSlide.attr('data-swiper-slide-index') + '"]').addClass(s.params.slideDuplicatePrevClass);
                }
            }

            // Pagination
            if (s.paginationContainer && s.paginationContainer.length > 0) {
                // Current/Total
                var current,
                    total = s.params.loop ? Math.ceil((s.slides.length - s.loopedSlides * 2) / s.params.slidesPerGroup) : s.snapGrid.length;
                if (s.params.loop) {
                    current = Math.ceil((s.activeIndex - s.loopedSlides) / s.params.slidesPerGroup);
                    if (current > s.slides.length - 1 - s.loopedSlides * 2) {
                        current = current - (s.slides.length - s.loopedSlides * 2);
                    }
                    if (current > total - 1) current = current - total;
                    if (current < 0 && s.params.paginationType !== 'bullets') current = total + current;
                } else {
                    if (typeof s.snapIndex !== 'undefined') {
                        current = s.snapIndex;
                    } else {
                        current = s.activeIndex || 0;
                    }
                }
                // Types
                if (s.params.paginationType === 'bullets' && s.bullets && s.bullets.length > 0) {
                    s.bullets.removeClass(s.params.bulletActiveClass);
                    if (s.paginationContainer.length > 1) {
                        s.bullets.each(function () {
                            if ($(this).index() === current) $(this).addClass(s.params.bulletActiveClass);
                        });
                    } else {
                        s.bullets.eq(current).addClass(s.params.bulletActiveClass);
                    }
                }
                if (s.params.paginationType === 'fraction') {
                    s.paginationContainer.find('.' + s.params.paginationCurrentClass).text(current + 1);
                    s.paginationContainer.find('.' + s.params.paginationTotalClass).text(total);
                }
                // if (s.params.paginationType === 'progress') {
                //     var scale = (current + 1) / total,
                //         scaleX = scale,
                //         scaleY = 1;
                //     if (!s.isHorizontal()) {
                //         scaleY = scale;
                //         scaleX = 1;
                //     }
                //     s.paginationContainer.find('.' + s.params.paginationProgressbarClass).transform('translate3d(0,0,0) scaleX(' + scaleX + ') scaleY(' + scaleY + ')').transition(s.params.speed);
                // }
                // if (s.params.paginationType === 'custom' && s.params.paginationCustomRender) {
                //     s.paginationContainer.html(s.params.paginationCustomRender(s, current + 1, total));
                //     // s.emit('onPaginationRendered', s, s.paginationContainer[0]);
                // }
            }

            // Next/active buttons
            if (!s.params.loop) {
                if (s.params.prevButton && s.prevButton && s.prevButton.length > 0) {
                    if (s.isBeginning) {
                        s.prevButton.addClass(s.params.buttonDisabledClass);
                        // if (s.params.a11y && s.a11y) s.a11y.disable(s.prevButton);
                    } else {
                        s.prevButton.removeClass(s.params.buttonDisabledClass);
                        // if (s.params.a11y && s.a11y) s.a11y.enable(s.prevButton);
                    }
                }
                // if (s.params.nextButton && s.nextButton && s.nextButton.length > 0) {
                //     if (s.isEnd) {
                //         s.nextButton.addClass(s.params.buttonDisabledClass);
                //         // if (s.params.a11y && s.a11y) s.a11y.disable(s.nextButton);
                //     }
                //     else {
                //         s.nextButton.removeClass(s.params.buttonDisabledClass);
                //         // if (s.params.a11y && s.a11y) s.a11y.enable(s.nextButton);
                //     }
                // }
            }
        };

        /*=========================
          Pagination
          ===========================*/
        s.updatePagination = function () {
            if (!s.params.pagination) return;
            if (s.paginationContainer && s.paginationContainer.length > 0) {
                var paginationHTML = '';
                if (s.params.paginationType === 'bullets') {
                    var numberOfBullets = s.params.loop ? Math.ceil((s.slides.length - s.loopedSlides * 2) / s.params.slidesPerGroup) : s.snapGrid.length;
                    for (var i = 0; i < numberOfBullets; i++) {
                        if (s.params.paginationBulletRender) {
                            paginationHTML += s.params.paginationBulletRender(s, i, s.params.bulletClass);
                        } else {
                            paginationHTML += '<' + s.params.paginationElement + ' class="' + s.params.bulletClass + '"></' + s.params.paginationElement + '>';
                        }
                    }
                    s.paginationContainer.html(paginationHTML);
                    s.bullets = s.paginationContainer.find('.' + s.params.bulletClass);
                    // if (s.params.paginationClickable && s.params.a11y && s.a11y) {
                    //     // s.a11y.initPagination();
                    // }
                }
                if (s.params.paginationType === 'fraction') {
                    if (s.params.paginationFractionRender) {
                        paginationHTML = s.params.paginationFractionRender(s, s.params.paginationCurrentClass, s.params.paginationTotalClass);
                    } else {
                        paginationHTML = '<span class="' + s.params.paginationCurrentClass + '"></span>' + ' / ' + '<span class="' + s.params.paginationTotalClass + '"></span>';
                    }
                    s.paginationContainer.html(paginationHTML);
                }
                // if (s.params.paginationType === 'progress') {
                //     if (s.params.paginationProgressRender) {
                //         paginationHTML = s.params.paginationProgressRender(s, s.params.paginationProgressbarClass);
                //     } else {
                //         paginationHTML = '<span class="' + s.params.paginationProgressbarClass + '"></span>';
                //     }
                //     s.paginationContainer.html(paginationHTML);
                // }
                // if (s.params.paginationType !== 'custom') {
                //     // s.emit('onPaginationRendered', s, s.paginationContainer[0]);
                // }
            }
        };
        /*=========================
          Common update method
          ===========================*/
        s.update = function (updateTranslate) {
            s.updateContainerSize();
            s.updateSlidesSize();
            s.updateProgress();
            s.updatePagination();
            s.updateClasses();
            // if (s.params.scrollbar && s.scrollbar) {
            //     s.scrollbar.set();
            // }
            function forceSetTranslate() {
                var translate = s.rtl ? -s.translate : s.translate;
                newTranslate = Math.min(Math.max(s.translate, s.maxTranslate()), s.minTranslate());
                s.setWrapperTranslate(newTranslate);
                s.updateActiveIndex();
                s.updateClasses();
            }
            if (updateTranslate) {
                var translated, newTranslate;
                if (s.controller && s.controller.spline) {
                    s.controller.spline = undefined;
                }
                if (s.params.freeMode) {
                    forceSetTranslate();
                    // if (s.params.autoHeight) {
                    //     s.updateAutoHeight();
                    // }
                } else {
                    if ((s.params.slidesPerView === 'auto' || s.params.slidesPerView > 1) && s.isEnd && !s.params.centeredSlides) {
                        translated = s.slideTo(s.slides.length - 1, 0, false, true);
                    } else {
                        translated = s.slideTo(s.activeIndex, 0, false, true);
                    }
                    if (!translated) {
                        forceSetTranslate();
                    }
                }
            }
            // else if (s.params.autoHeight) {
            //     s.updateAutoHeight();
            // }
        };

        /*=========================
          Resize Handler
          ===========================*/
        s.onResize = function (forceUpdatePagination) {
            //Breakpoints
            if (s.params.breakpoints) {
                s.setBreakpoint();
            }

            // Disable locks on resize
            var allowSwipeToPrev = s.params.allowSwipeToPrev;
            var allowSwipeToNext = s.params.allowSwipeToNext;
            s.params.allowSwipeToPrev = s.params.allowSwipeToNext = true;

            s.updateContainerSize();
            s.updateSlidesSize();
            if (s.params.slidesPerView === 'auto' || s.params.freeMode || forceUpdatePagination) s.updatePagination();
            // if (s.params.scrollbar && s.scrollbar) {
            //     s.scrollbar.set();
            // }
            if (s.controller && s.controller.spline) {
                s.controller.spline = undefined;
            }
            var slideChangedBySlideTo = false;
            if (s.params.freeMode) {
                var newTranslate = Math.min(Math.max(s.translate, s.maxTranslate()), s.minTranslate());
                s.setWrapperTranslate(newTranslate);
                s.updateActiveIndex();
                s.updateClasses();

                // if (s.params.autoHeight) {
                //     s.updateAutoHeight();
                // }
            } else {
                s.updateClasses();
                if ((s.params.slidesPerView === 'auto' || s.params.slidesPerView > 1) && s.isEnd && !s.params.centeredSlides) {
                    slideChangedBySlideTo = s.slideTo(s.slides.length - 1, 0, false, true);
                } else {
                    slideChangedBySlideTo = s.slideTo(s.activeIndex, 0, false, true);
                }
            }
            if (s.params.lazyLoading && !slideChangedBySlideTo && s.lazy) {
                s.lazy.load();
            }
            // Return locks after resize
            s.params.allowSwipeToPrev = allowSwipeToPrev;
            s.params.allowSwipeToNext = allowSwipeToNext;
        };

        /*=========================
          Events
          ===========================*/

        //Define Touch Events
        s.touchEventsDesktop = { start: 'mousedown', move: 'mousemove', end: 'mouseup' };
        if (window.navigator.pointerEnabled) s.touchEventsDesktop = { start: 'pointerdown', move: 'pointermove', end: 'pointerup' };else if (window.navigator.msPointerEnabled) s.touchEventsDesktop = { start: 'MSPointerDown', move: 'MSPointerMove', end: 'MSPointerUp' };
        s.touchEvents = {
            start: s.support.touch || !s.params.simulateTouch ? 'touchstart' : s.touchEventsDesktop.start,
            move: s.support.touch || !s.params.simulateTouch ? 'touchmove' : s.touchEventsDesktop.move,
            end: s.support.touch || !s.params.simulateTouch ? 'touchend' : s.touchEventsDesktop.end
        };

        // WP8 Touch Events Fix
        if (window.navigator.pointerEnabled || window.navigator.msPointerEnabled) {
            (s.params.touchEventsTarget === 'container' ? s.container : s.wrapper).addClass('swiper-wp8-' + s.params.direction);
        }

        // Attach/detach events
        s.initEvents = function (detach) {
            var actionDom = detach ? 'off' : 'on';
            var action = detach ? 'removeEventListener' : 'addEventListener';
            var touchEventsTarget = s.params.touchEventsTarget === 'container' ? s.container[0] : s.wrapper[0];
            var target = s.support.touch ? touchEventsTarget : document;

            var moveCapture = s.params.nested ? true : false;

            //Touch Events
            if (s.browser.ie) {
                // touchEventsTarget[action](s.touchEvents.start, s.onTouchStart, false);
                // target[action](s.touchEvents.move, s.onTouchMove, moveCapture);
                // target[action](s.touchEvents.end, s.onTouchEnd, false);
            } else {
                if (s.support.touch) {
                    var passiveListener = s.touchEvents.start === 'touchstart' && s.support.passiveListener && s.params.passiveListeners ? { passive: true, capture: false } : false;
                    touchEventsTarget[action](s.touchEvents.start, s.onTouchStart, passiveListener);
                    touchEventsTarget[action](s.touchEvents.move, s.onTouchMove, moveCapture);
                    touchEventsTarget[action](s.touchEvents.end, s.onTouchEnd, passiveListener);
                }
                if (params.simulateTouch && !s.device.ios && !s.device.android || params.simulateTouch && !s.support.touch && s.device.ios) {
                    touchEventsTarget[action]('mousedown', s.onTouchStart, false);
                    document[action]('mousemove', s.onTouchMove, moveCapture);
                    document[action]('mouseup', s.onTouchEnd, false);
                }
            }
            window[action]('resize', s.onResize);

            // Next, Prev, Index
            // if (s.params.nextButton && s.nextButton && s.nextButton.length > 0) {
            //     s.nextButton[actionDom]('click', s.onClickNext);
            //     // if (s.params.a11y && s.a11y) s.nextButton[actionDom]('keydown', s.a11y.onEnterKey);
            // }
            // if (s.params.prevButton && s.prevButton && s.prevButton.length > 0) {
            //     s.prevButton[actionDom]('click', s.onClickPrev);
            //     // if (s.params.a11y && s.a11y) s.prevButton[actionDom]('keydown', s.a11y.onEnterKey);
            // }
            // if (s.params.pagination && s.params.paginationClickable) {
            //     s.paginationContainer[actionDom]('click', '.' + s.params.bulletClass, s.onClickIndex);
            //     // if (s.params.a11y && s.a11y) s.paginationContainer[actionDom]('keydown', '.' + s.params.bulletClass, s.a11y.onEnterKey);
            // }

            // Prevent Links Clicks
            if (s.params.preventClicks || s.params.preventClicksPropagation) touchEventsTarget[action]('click', s.preventClicks, true);
        };
        s.attachEvents = function () {
            s.initEvents();
        };
        s.detachEvents = function () {
            s.initEvents(true);
        };

        /*=========================
          Handle Clicks
          ===========================*/
        // Prevent Clicks
        s.allowClick = true;
        s.preventClicks = function (e) {
            if (!s.allowClick) {
                if (s.params.preventClicks) e.preventDefault();
                if (s.params.preventClicksPropagation && s.animating) {
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                }
            }
        };
        // Clicks
        // s.onClickNext = function (e) {
        //     e.preventDefault();
        //     if (s.isEnd && !s.params.loop) return;
        //     s.slideNext();
        // };
        // s.onClickPrev = function (e) {
        //     e.preventDefault();
        //     if (s.isBeginning && !s.params.loop) return;
        //     s.slidePrev();
        // };
        // s.onClickIndex = function (e) {
        //     e.preventDefault();
        //     var index = $(this).index() * s.params.slidesPerGroup;
        //     if (s.params.loop) index = index + s.loopedSlides;
        //     s.slideTo(index);
        // };

        /*=========================
          Handle Touches
          ===========================*/
        // function findElementInEvent(e, selector) {
        //     var el = $(e.target);
        //     if (!el.is(selector)) {
        //         if (typeof selector === 'string') {
        //             el = el.parents(selector);
        //         } else if (selector.nodeType) {
        //             var found;
        //             el.parents().each(function(index, _el) {
        //                 if (_el === selector) found = selector;
        //             });
        //             if (!found) return undefined;
        //             else return selector;
        //         }
        //     }
        //     if (el.length === 0) {
        //         return undefined;
        //     }
        //     return el[0];
        // }
        // s.updateClickedSlide = function (e) {
        //     var slide = findElementInEvent(e, '.' + s.params.slideClass);
        //     var slideFound = false;
        //     if (slide) {
        //         for (var i = 0; i < s.slides.length; i++) {
        //             if (s.slides[i] === slide) slideFound = true;
        //         }
        //     }

        //     if (slide && slideFound) {
        //         s.clickedSlide = slide;
        //         s.clickedIndex = $(slide).index();
        //     }
        //     else {
        //         s.clickedSlide = undefined;
        //         s.clickedIndex = undefined;
        //         return;
        //     }
        //     if (s.params.slideToClickedSlide && s.clickedIndex !== undefined && s.clickedIndex !== s.activeIndex) {
        //         var slideToIndex = s.clickedIndex,
        //             realIndex,
        //             duplicatedSlides;
        //         if (s.params.loop) {
        //             if (s.animating) return;
        //             realIndex = $(s.clickedSlide).attr('data-swiper-slide-index');
        //             if (s.params.centeredSlides) {
        //                 if ((slideToIndex < s.loopedSlides - s.params.slidesPerView/2) || (slideToIndex > s.slides.length - s.loopedSlides + s.params.slidesPerView/2)) {
        //                     s.fixLoop();
        //                     slideToIndex = s.wrapper.children('.' + s.params.slideClass + '[data-swiper-slide-index="' + realIndex + '"]:not(.' + s.params.slideDuplicateClass + ')').eq(0).index();
        //                     setTimeout(function () {
        //                         s.slideTo(slideToIndex);
        //                     }, 0);
        //                 }
        //                 else {
        //                     s.slideTo(slideToIndex);
        //                 }
        //             }
        //             else {
        //                 if (slideToIndex > s.slides.length - s.params.slidesPerView) {
        //                     s.fixLoop();
        //                     slideToIndex = s.wrapper.children('.' + s.params.slideClass + '[data-swiper-slide-index="' + realIndex + '"]:not(.' + s.params.slideDuplicateClass + ')').eq(0).index();
        //                     setTimeout(function () {
        //                         s.slideTo(slideToIndex);
        //                     }, 0);
        //                 }
        //                 else {
        //                     s.slideTo(slideToIndex);
        //                 }
        //             }
        //         }
        //         else {
        //             s.slideTo(slideToIndex);
        //         }
        //     }
        // };

        var isTouched,
            isMoved,
            allowTouchCallbacks,
            touchStartTime,
            isScrolling,
            currentTranslate,
            startTranslate,
            allowThresholdMove,

        // Form elements to match
        formElements = 'input, select, textarea, button, video',

        // Last click time
        lastClickTime = Date.now(),
            clickTimeout,

        //Velocities
        velocities = [],
            allowMomentumBounce;

        // Animating Flag
        s.animating = false;

        // Touches information
        s.touches = {
            startX: 0,
            startY: 0,
            currentX: 0,
            currentY: 0,
            diff: 0
        };

        // Touch handlers
        var isTouchEvent, startMoving;
        s.onTouchStart = function (e) {
            if (e.originalEvent) e = e.originalEvent;
            isTouchEvent = e.type === 'touchstart';
            if (!isTouchEvent && 'which' in e && e.which === 3) return;
            // if (s.params.noSwiping && findElementInEvent(e, '.' + s.params.noSwipingClass)) {
            //     s.allowClick = true;
            //     return;
            // }
            // if (s.params.swipeHandler) {
            //     if (!findElementInEvent(e, s.params.swipeHandler)) return;
            // }

            var startX = s.touches.currentX = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;
            var startY = s.touches.currentY = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;

            // Do NOT start if iOS edge swipe is detected. Otherwise iOS app (UIWebView) cannot swipe-to-go-back anymore
            // if(s.device.ios && s.params.iOSEdgeSwipeDetection && startX <= s.params.iOSEdgeSwipeThreshold) {
            //     return;
            // }

            isTouched = true;
            isMoved = false;
            allowTouchCallbacks = true;
            isScrolling = undefined;
            startMoving = undefined;
            s.touches.startX = startX;
            s.touches.startY = startY;
            touchStartTime = Date.now();
            s.allowClick = true;
            s.updateContainerSize();
            s.swipeDirection = undefined;
            // if (s.params.threshold > 0) allowThresholdMove = false;
            if (e.type !== 'touchstart') {
                var preventDefault = true;
                if ($(e.target).is(formElements)) preventDefault = false;
                if (document.activeElement && $(document.activeElement).is(formElements)) {
                    document.activeElement.blur();
                }
                if (preventDefault) {
                    e.preventDefault();
                }
            }
            s.emit('onTouchStart', s, e);
        };

        s.onTouchMove = function (e) {
            if (e.originalEvent) e = e.originalEvent;
            if (isTouchEvent && e.type === 'mousemove') return;
            if (e.preventedByNestedSwiper) {
                s.touches.startX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;
                s.touches.startY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;
                return;
            }
            // if (s.params.onlyExternal) {
            //     // isMoved = true;
            //     s.allowClick = false;
            //     if (isTouched) {
            //         s.touches.startX = s.touches.currentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;
            //         s.touches.startY = s.touches.currentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;
            //         touchStartTime = Date.now();
            //     }
            //     return;
            // }
            // if (isTouchEvent && s.params.touchReleaseOnEdges && !s.params.loop) {
            //     if (!s.isHorizontal()) {
            //         // Vertical
            //         if (
            //             (s.touches.currentY < s.touches.startY && s.translate <= s.maxTranslate()) ||
            //             (s.touches.currentY > s.touches.startY && s.translate >= s.minTranslate())
            //             ) {
            //             return;
            //         }
            //     }
            //     else {
            //         if (
            //             (s.touches.currentX < s.touches.startX && s.translate <= s.maxTranslate()) ||
            //             (s.touches.currentX > s.touches.startX && s.translate >= s.minTranslate())
            //             ) {
            //             return;
            //         }
            //     }
            // }
            if (isTouchEvent && document.activeElement) {
                if (e.target === document.activeElement && $(e.target).is(formElements)) {
                    isMoved = true;
                    s.allowClick = false;
                    return;
                }
            }
            if (allowTouchCallbacks) {
                s.emit('onTouchMove', s, e);
            }
            if (e.targetTouches && e.targetTouches.length > 1) return;

            s.touches.currentX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;
            s.touches.currentY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;

            if (typeof isScrolling === 'undefined') {
                var touchAngle;
                if (s.isHorizontal() && s.touches.currentY === s.touches.startY || !s.isHorizontal() && s.touches.currentX !== s.touches.startX) {
                    isScrolling = false;
                } else {
                    touchAngle = Math.atan2(Math.abs(s.touches.currentY - s.touches.startY), Math.abs(s.touches.currentX - s.touches.startX)) * 180 / Math.PI;
                    isScrolling = s.isHorizontal() ? touchAngle > s.params.touchAngle : 90 - touchAngle > s.params.touchAngle;
                }
            }
            if (isScrolling) {
                s.emit('onTouchMoveOpposite', s, e);
            }
            // if (typeof startMoving === 'undefined' && s.browser.ieTouch) {
            //     if (s.touches.currentX !== s.touches.startX || s.touches.currentY !== s.touches.startY) {
            //         startMoving = true;
            //     }
            // }
            if (!isTouched) return;
            if (isScrolling) {
                isTouched = false;
                return;
            }
            // if (!startMoving && s.browser.ieTouch) {
            //     return;
            // }
            s.allowClick = false;
            s.emit('onSliderMove', s, e);
            e.preventDefault();
            if (s.params.touchMoveStopPropagation && !s.params.nested) {
                e.stopPropagation();
            }

            if (!isMoved) {
                if (params.loop) {
                    s.fixLoop();
                }
                startTranslate = s.getWrapperTranslate();
                s.setWrapperTransition(0);
                if (s.animating) {
                    s.wrapper.trigger('webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd');
                }
                if (s.params.autoplay && s.autoplaying) {
                    if (s.params.autoplayDisableOnInteraction) {
                        s.stopAutoplay();
                    } else {
                        s.pauseAutoplay();
                    }
                }
                allowMomentumBounce = false;
                //Grab Cursor
                // if (s.params.grabCursor && (s.params.allowSwipeToNext === true || s.params.allowSwipeToPrev === true)) {
                //     s.setGrabCursor(true);
                // }
            }
            isMoved = true;

            var diff = s.touches.diff = s.isHorizontal() ? s.touches.currentX - s.touches.startX : s.touches.currentY - s.touches.startY;

            diff = diff * s.params.touchRatio;
            if (s.rtl) diff = -diff;

            s.swipeDirection = diff > 0 ? 'prev' : 'next';
            currentTranslate = diff + startTranslate;

            var disableParentSwiper = true;
            if (diff > 0 && currentTranslate > s.minTranslate()) {
                disableParentSwiper = false;
                if (s.params.resistance) currentTranslate = s.minTranslate() - 1 + Math.pow(-s.minTranslate() + startTranslate + diff, s.params.resistanceRatio);
            } else if (diff < 0 && currentTranslate < s.maxTranslate()) {
                disableParentSwiper = false;
                if (s.params.resistance) currentTranslate = s.maxTranslate() + 1 - Math.pow(s.maxTranslate() - startTranslate - diff, s.params.resistanceRatio);
            }

            if (disableParentSwiper) {
                e.preventedByNestedSwiper = true;
            }

            // Directions locks
            // if (!s.params.allowSwipeToNext && s.swipeDirection === 'next' && currentTranslate < startTranslate) {
            //     currentTranslate = startTranslate;
            // }
            // if (!s.params.allowSwipeToPrev && s.swipeDirection === 'prev' && currentTranslate > startTranslate) {
            //     currentTranslate = startTranslate;
            // }


            // Threshold
            // if (s.params.threshold > 0) {
            //     if (Math.abs(diff) > s.params.threshold || allowThresholdMove) {
            //         if (!allowThresholdMove) {
            //             allowThresholdMove = true;
            //             s.touches.startX = s.touches.currentX;
            //             s.touches.startY = s.touches.currentY;
            //             currentTranslate = startTranslate;
            //             s.touches.diff = s.isHorizontal() ? s.touches.currentX - s.touches.startX : s.touches.currentY - s.touches.startY;
            //             return;
            //         }
            //     }
            //     else {
            //         currentTranslate = startTranslate;
            //         return;
            //     }
            // }

            if (!s.params.followFinger) return;

            // Update active index in free mode
            if (s.params.freeMode || s.params.watchSlidesProgress) {
                s.updateActiveIndex();
            }
            if (s.params.freeMode) {
                //Velocity
                if (velocities.length === 0) {
                    velocities.push({
                        position: s.touches[s.isHorizontal() ? 'startX' : 'startY'],
                        time: touchStartTime
                    });
                }
                velocities.push({
                    position: s.touches[s.isHorizontal() ? 'currentX' : 'currentY'],
                    time: new window.Date().getTime()
                });
            }
            // Update progress
            s.updateProgress(currentTranslate);
            // Update translate
            s.setWrapperTranslate(currentTranslate);
        };
        s.onTouchEnd = function (e) {
            if (e.originalEvent) e = e.originalEvent;
            if (allowTouchCallbacks) {
                s.emit('onTouchEnd', s, e);
            }
            allowTouchCallbacks = false;
            if (!isTouched) return;
            //Return Grab Cursor
            // if (s.params.grabCursor && isMoved && isTouched  && (s.params.allowSwipeToNext === true || s.params.allowSwipeToPrev === true)) {
            //     s.setGrabCursor(false);
            // }

            // Time diff
            var touchEndTime = Date.now();
            var timeDiff = touchEndTime - touchStartTime;

            // Tap, doubleTap, Click
            if (s.allowClick) {
                // s.updateClickedSlide(e);
                s.emit('onTap', s, e);
                if (timeDiff < 300 && touchEndTime - lastClickTime > 300) {
                    if (clickTimeout) clearTimeout(clickTimeout);
                    clickTimeout = setTimeout(function () {
                        if (!s) return;
                        // if (s.params.paginationHide && s.paginationContainer.length > 0 && !$(e.target).hasClass(s.params.bulletClass)) {
                        //     s.paginationContainer.toggleClass(s.params.paginationHiddenClass);
                        // }
                        s.emit('onClick', s, e);
                    }, 300);
                }
                // if (timeDiff < 300 && (touchEndTime - lastClickTime) < 300) {
                //     if (clickTimeout) clearTimeout(clickTimeout);
                //     s.emit('onDoubleTap', s, e);
                // }
            }

            lastClickTime = Date.now();
            setTimeout(function () {
                if (s) s.allowClick = true;
            }, 0);

            if (!isTouched || !isMoved || !s.swipeDirection || s.touches.diff === 0 || currentTranslate === startTranslate) {
                isTouched = isMoved = false;
                return;
            }
            isTouched = isMoved = false;

            var currentPos;
            if (s.params.followFinger) {
                currentPos = s.rtl ? s.translate : -s.translate;
            } else {
                currentPos = -currentTranslate;
            }
            if (s.params.freeMode) {
                if (currentPos < -s.minTranslate()) {
                    s.slideTo(s.activeIndex);
                    return;
                } else if (currentPos > -s.maxTranslate()) {
                    if (s.slides.length < s.snapGrid.length) {
                        s.slideTo(s.snapGrid.length - 1);
                    } else {
                        s.slideTo(s.slides.length - 1);
                    }
                    return;
                }

                if (s.params.freeModeMomentum) {
                    if (velocities.length > 1) {
                        var lastMoveEvent = velocities.pop(),
                            velocityEvent = velocities.pop();

                        var distance = lastMoveEvent.position - velocityEvent.position;
                        var time = lastMoveEvent.time - velocityEvent.time;
                        s.velocity = distance / time;
                        s.velocity = s.velocity / 2;
                        if (Math.abs(s.velocity) < s.params.freeModeMinimumVelocity) {
                            s.velocity = 0;
                        }
                        // this implies that the user stopped moving a finger then released.
                        // There would be no events with distance zero, so the last event is stale.
                        if (time > 150 || new window.Date().getTime() - lastMoveEvent.time > 300) {
                            s.velocity = 0;
                        }
                    } else {
                        s.velocity = 0;
                    }
                    s.velocity = s.velocity * s.params.freeModeMomentumVelocityRatio;

                    velocities.length = 0;
                    var momentumDuration = 1000 * s.params.freeModeMomentumRatio;
                    var momentumDistance = s.velocity * momentumDuration;

                    var newPosition = s.translate + momentumDistance;
                    if (s.rtl) newPosition = -newPosition;
                    var doBounce = false;
                    var afterBouncePosition;
                    var bounceAmount = Math.abs(s.velocity) * 20 * s.params.freeModeMomentumBounceRatio;
                    if (newPosition < s.maxTranslate()) {
                        if (s.params.freeModeMomentumBounce) {
                            if (newPosition + s.maxTranslate() < -bounceAmount) {
                                newPosition = s.maxTranslate() - bounceAmount;
                            }
                            afterBouncePosition = s.maxTranslate();
                            doBounce = true;
                            allowMomentumBounce = true;
                        } else {
                            newPosition = s.maxTranslate();
                        }
                    } else if (newPosition > s.minTranslate()) {
                        if (s.params.freeModeMomentumBounce) {
                            if (newPosition - s.minTranslate() > bounceAmount) {
                                newPosition = s.minTranslate() + bounceAmount;
                            }
                            afterBouncePosition = s.minTranslate();
                            doBounce = true;
                            allowMomentumBounce = true;
                        } else {
                            newPosition = s.minTranslate();
                        }
                    } else if (s.params.freeModeSticky) {
                        var j = 0,
                            nextSlide;
                        for (j = 0; j < s.snapGrid.length; j += 1) {
                            if (s.snapGrid[j] > -newPosition) {
                                nextSlide = j;
                                break;
                            }
                        }
                        if (Math.abs(s.snapGrid[nextSlide] - newPosition) < Math.abs(s.snapGrid[nextSlide - 1] - newPosition) || s.swipeDirection === 'next') {
                            newPosition = s.snapGrid[nextSlide];
                        } else {
                            newPosition = s.snapGrid[nextSlide - 1];
                        }
                        if (!s.rtl) newPosition = -newPosition;
                    }
                    //Fix duration
                    if (s.velocity !== 0) {
                        if (s.rtl) {
                            momentumDuration = Math.abs((-newPosition - s.translate) / s.velocity);
                        } else {
                            momentumDuration = Math.abs((newPosition - s.translate) / s.velocity);
                        }
                    } else if (s.params.freeModeSticky) {
                        s.slideReset();
                        return;
                    }

                    if (s.params.freeModeMomentumBounce && doBounce) {
                        s.updateProgress(afterBouncePosition);
                        s.setWrapperTransition(momentumDuration);
                        s.setWrapperTranslate(newPosition);
                        s.onTransitionStart();
                        s.animating = true;
                        s.wrapper.transitionEnd(function () {
                            if (!s || !allowMomentumBounce) return;
                            s.emit('onMomentumBounce', s);

                            s.setWrapperTransition(s.params.speed);
                            s.setWrapperTranslate(afterBouncePosition);
                            s.wrapper.transitionEnd(function () {
                                if (!s) return;
                                s.onTransitionEnd();
                            });
                        });
                    } else if (s.velocity) {
                        s.updateProgress(newPosition);
                        s.setWrapperTransition(momentumDuration);
                        s.setWrapperTranslate(newPosition);
                        s.onTransitionStart();
                        if (!s.animating) {
                            s.animating = true;
                            s.wrapper.transitionEnd(function () {
                                if (!s) return;
                                s.onTransitionEnd();
                            });
                        }
                    } else {
                        s.updateProgress(newPosition);
                    }

                    s.updateActiveIndex();
                }
                if (!s.params.freeModeMomentum || timeDiff >= s.params.longSwipesMs) {
                    s.updateProgress();
                    s.updateActiveIndex();
                }
                return;
            }

            // Find current slide
            var i,
                stopIndex = 0,
                groupSize = s.slidesSizesGrid[0];
            for (i = 0; i < s.slidesGrid.length; i += s.params.slidesPerGroup) {
                if (typeof s.slidesGrid[i + s.params.slidesPerGroup] !== 'undefined') {
                    if (currentPos >= s.slidesGrid[i] && currentPos < s.slidesGrid[i + s.params.slidesPerGroup]) {
                        stopIndex = i;
                        groupSize = s.slidesGrid[i + s.params.slidesPerGroup] - s.slidesGrid[i];
                    }
                } else {
                    if (currentPos >= s.slidesGrid[i]) {
                        stopIndex = i;
                        groupSize = s.slidesGrid[s.slidesGrid.length - 1] - s.slidesGrid[s.slidesGrid.length - 2];
                    }
                }
            }

            // Find current slide size
            var ratio = (currentPos - s.slidesGrid[stopIndex]) / groupSize;

            if (timeDiff > s.params.longSwipesMs) {
                // Long touches
                if (!s.params.longSwipes) {
                    s.slideTo(s.activeIndex);
                    return;
                }
                if (s.swipeDirection === 'next') {
                    if (ratio >= s.params.longSwipesRatio) s.slideTo(stopIndex + s.params.slidesPerGroup);else s.slideTo(stopIndex);
                }
                if (s.swipeDirection === 'prev') {
                    if (ratio > 1 - s.params.longSwipesRatio) s.slideTo(stopIndex + s.params.slidesPerGroup);else s.slideTo(stopIndex);
                }
            } else {
                // Short swipes
                if (!s.params.shortSwipes) {
                    s.slideTo(s.activeIndex);
                    return;
                }
                if (s.swipeDirection === 'next') {
                    s.slideTo(stopIndex + s.params.slidesPerGroup);
                }
                if (s.swipeDirection === 'prev') {
                    s.slideTo(stopIndex);
                }
            }
        };
        /*=========================
          Transitions
          ===========================*/
        s._slideTo = function (slideIndex, speed) {
            return s.slideTo(slideIndex, speed, true, true);
        };
        s.slideTo = function (slideIndex, speed, runCallbacks, internal) {
            if (typeof runCallbacks === 'undefined') runCallbacks = true;
            if (typeof slideIndex === 'undefined') slideIndex = 0;
            if (slideIndex < 0) slideIndex = 0;
            s.snapIndex = Math.floor(slideIndex / s.params.slidesPerGroup);
            if (s.snapIndex >= s.snapGrid.length) s.snapIndex = s.snapGrid.length - 1;

            var translate = -s.snapGrid[s.snapIndex];
            // Stop autoplay
            if (s.params.autoplay && s.autoplaying) {
                if (internal || !s.params.autoplayDisableOnInteraction) {
                    s.pauseAutoplay(speed);
                } else {
                    s.stopAutoplay();
                }
            }
            // Update progress
            s.updateProgress(translate);

            // Normalize slideIndex
            // if (s.params.normalizeSlideIndex) {
            //     for (var i = 0; i < s.slidesGrid.length; i++) {
            //         if (-Math.floor(translate * 100) >= Math.floor(s.slidesGrid[i] * 100)) {
            //             slideIndex = i;
            //         }
            //     }
            // }

            // Directions locks
            // if (!s.params.allowSwipeToNext && translate < s.translate && translate < s.minTranslate()) {
            //     return false;
            // }
            if (!s.params.allowSwipeToPrev && translate > s.translate && translate > s.maxTranslate()) {
                if ((s.activeIndex || 0) !== slideIndex) return false;
            }

            // Update Index
            if (typeof speed === 'undefined') speed = s.params.speed;
            s.previousIndex = s.activeIndex || 0;
            s.activeIndex = slideIndex;
            s.updateRealIndex();
            if (s.rtl && -translate === s.translate || !s.rtl && translate === s.translate) {
                // Update Height
                // if (s.params.autoHeight) {
                //     s.updateAutoHeight();
                // }
                s.updateClasses();
                if (s.params.effect !== 'slide') {
                    s.setWrapperTranslate(translate);
                }
                return false;
            }
            s.updateClasses();
            s.onTransitionStart(runCallbacks);

            if (speed === 0 || s.browser.lteIE9) {
                s.setWrapperTranslate(translate);
                s.setWrapperTransition(0);
                s.onTransitionEnd(runCallbacks);
            } else {
                s.setWrapperTranslate(translate);
                s.setWrapperTransition(speed);
                if (!s.animating) {
                    s.animating = true;
                    s.wrapper.transitionEnd(function () {
                        if (!s) return;
                        s.onTransitionEnd(runCallbacks);
                    });
                }
            }

            return true;
        };

        s.onTransitionStart = function (runCallbacks) {
            if (typeof runCallbacks === 'undefined') runCallbacks = true;
            // if (s.params.autoHeight) {
            //     s.updateAutoHeight();
            // }
            if (s.lazy) s.lazy.onTransitionStart();
            if (runCallbacks) {
                s.emit('onTransitionStart', s);
                if (s.activeIndex !== s.previousIndex) {
                    s.emit('onSlideChangeStart', s);
                    if (s.activeIndex > s.previousIndex) {
                        s.emit('onSlideNextStart', s);
                    } else {
                        s.emit('onSlidePrevStart', s);
                    }
                }
            }
        };
        s.onTransitionEnd = function (runCallbacks) {
            s.animating = false;
            s.setWrapperTransition(0);
            if (typeof runCallbacks === 'undefined') runCallbacks = true;
            if (s.lazy) s.lazy.onTransitionEnd();
            if (runCallbacks) {
                s.emit('onTransitionEnd', s);
                if (s.activeIndex !== s.previousIndex) {
                    s.emit('onSlideChangeEnd', s);
                    if (s.activeIndex > s.previousIndex) {
                        s.emit('onSlideNextEnd', s);
                    } else {
                        s.emit('onSlidePrevEnd', s);
                    }
                }
            }
            // if (s.params.history && s.history) {
            //     s.history.setHistory(s.params.history, s.activeIndex);
            // }
            // if (s.params.hashnav && s.hashnav) {
            //     s.hashnav.setHash();
            // }
        };
        s.slideNext = function (runCallbacks, speed, internal) {
            if (s.params.loop) {
                if (s.animating) return false;
                s.fixLoop();
                var clientLeft = s.container[0].clientLeft;
                return s.slideTo(s.activeIndex + s.params.slidesPerGroup, speed, runCallbacks, internal);
            } else return s.slideTo(s.activeIndex + s.params.slidesPerGroup, speed, runCallbacks, internal);
        };
        s._slideNext = function (speed) {
            return s.slideNext(true, speed, true);
        };
        s.slidePrev = function (runCallbacks, speed, internal) {
            if (s.params.loop) {
                if (s.animating) return false;
                s.fixLoop();
                var clientLeft = s.container[0].clientLeft;
                return s.slideTo(s.activeIndex - 1, speed, runCallbacks, internal);
            } else return s.slideTo(s.activeIndex - 1, speed, runCallbacks, internal);
        };
        s._slidePrev = function (speed) {
            return s.slidePrev(true, speed, true);
        };
        s.slideReset = function (runCallbacks, speed, internal) {
            return s.slideTo(s.activeIndex, speed, runCallbacks);
        };

        // s.disableTouchControl = function () {
        //     s.params.onlyExternal = true;
        //     return true;
        // };
        // s.enableTouchControl = function () {
        //     s.params.onlyExternal = false;
        //     return true;
        // };

        /*=========================
          Translate/transition helpers
          ===========================*/
        s.setWrapperTransition = function (duration, byController) {
            s.wrapper.transition(duration);
            // if (s.params.effect !== 'slide' && s.effects[s.params.effect]) {
            //     s.effects[s.params.effect].setTransition(duration);
            // }
            // if (s.params.parallax && s.parallax) {
            //     s.parallax.setTransition(duration);
            // }
            // if (s.params.scrollbar && s.scrollbar) {
            //     s.scrollbar.setTransition(duration);
            // }
            // if (s.params.control && s.controller) {
            //     s.controller.setTransition(duration, byController);
            // }
            s.emit('onSetTransition', s, duration);
        };
        s.setWrapperTranslate = function (translate, updateActiveIndex, byController) {
            var x = 0,
                y = 0,
                z = 0;
            if (s.isHorizontal()) {
                x = s.rtl ? -translate : translate;
            } else {
                y = translate;
            }

            if (s.params.roundLengths) {
                x = round(x);
                y = round(y);
            }

            if (!s.params.virtualTranslate) {
                if (s.support.transforms3d) s.wrapper.transform('translate3d(' + x + 'px, ' + y + 'px, ' + z + 'px)');else s.wrapper.transform('translate(' + x + 'px, ' + y + 'px)');
            }

            s.translate = s.isHorizontal() ? x : y;

            // Check if we need to update progress
            var progress;
            var translatesDiff = s.maxTranslate() - s.minTranslate();
            if (translatesDiff === 0) {
                progress = 0;
            } else {
                progress = (translate - s.minTranslate()) / translatesDiff;
            }
            if (progress !== s.progress) {
                s.updateProgress(translate);
            }

            if (updateActiveIndex) s.updateActiveIndex();
            // if (s.params.effect !== 'slide' && s.effects[s.params.effect]) {
            //     s.effects[s.params.effect].setTranslate(s.translate);
            // }
            // if (s.params.parallax && s.parallax) {
            //     s.parallax.setTranslate(s.translate);
            // }
            // if (s.params.scrollbar && s.scrollbar) {
            //     s.scrollbar.setTranslate(s.translate);
            // }
            // if (s.params.control && s.controller) {
            //     s.controller.setTranslate(s.translate, byController);
            // }
            s.emit('onSetTranslate', s, s.translate);
        };

        s.getTranslate = function (el, axis) {
            var matrix, curTransform, curStyle, transformMatrix;

            // automatic axis detection
            if (typeof axis === 'undefined') {
                axis = 'x';
            }

            // if (s.params.virtualTranslate) {
            //     return s.rtl ? -s.translate : s.translate;
            // }

            curStyle = window.getComputedStyle(el, null);
            if (window.WebKitCSSMatrix) {
                curTransform = curStyle.transform || curStyle.webkitTransform;
                if (curTransform.split(',').length > 6) {
                    curTransform = curTransform.split(', ').map(function (a) {
                        return a.replace(',', '.');
                    }).join(', ');
                }
                // Some old versions of Webkit choke when 'none' is passed; pass
                // empty string instead in this case
                transformMatrix = new window.WebKitCSSMatrix(curTransform === 'none' ? '' : curTransform);
            } else {
                transformMatrix = curStyle.MozTransform || curStyle.OTransform || curStyle.MsTransform || curStyle.msTransform || curStyle.transform || curStyle.getPropertyValue('transform').replace('translate(', 'matrix(1, 0, 0, 1,');
                matrix = transformMatrix.toString().split(',');
            }

            if (axis === 'x') {
                //Latest Chrome and webkits Fix
                if (window.WebKitCSSMatrix) curTransform = transformMatrix.m41;
                //Crazy IE10 Matrix
                else if (matrix.length === 16) curTransform = parseFloat(matrix[12]);
                    //Normal Browsers
                    else curTransform = parseFloat(matrix[4]);
            }
            if (axis === 'y') {
                //Latest Chrome and webkits Fix
                if (window.WebKitCSSMatrix) curTransform = transformMatrix.m42;
                //Crazy IE10 Matrix
                else if (matrix.length === 16) curTransform = parseFloat(matrix[13]);
                    //Normal Browsers
                    else curTransform = parseFloat(matrix[5]);
            }
            if (s.rtl && curTransform) curTransform = -curTransform;
            return curTransform || 0;
        };
        s.getWrapperTranslate = function (axis) {
            if (typeof axis === 'undefined') {
                axis = s.isHorizontal() ? 'x' : 'y';
            }
            return s.getTranslate(s.wrapper[0], axis);
        };

        /*=========================
          Observer
          ===========================*/
        s.observers = [];
        // function initObserver(target, options) {
        //     options = options || {};
        //     // create an observer instance
        //     var ObserverFunc = window.MutationObserver || window.WebkitMutationObserver;
        //     var observer = new ObserverFunc(function (mutations) {
        //         mutations.forEach(function (mutation) {
        //             s.onResize(true);
        //             s.emit('onObserverUpdate', s, mutation);
        //         });
        //     });

        //     observer.observe(target, {
        //         attributes: typeof options.attributes === 'undefined' ? true : options.attributes,
        //         childList: typeof options.childList === 'undefined' ? true : options.childList,
        //         characterData: typeof options.characterData === 'undefined' ? true : options.characterData
        //     });

        //     s.observers.push(observer);
        // }
        // s.initObservers = function () {
        //     if (s.params.observeParents) {
        //         var containerParents = s.container.parents();
        //         for (var i = 0; i < containerParents.length; i++) {
        //             initObserver(containerParents[i]);
        //         }
        //     }

        //     // Observe container
        //     initObserver(s.container[0], {childList: false});

        //     // Observe wrapper
        //     initObserver(s.wrapper[0], {attributes: false});
        // };
        // s.disconnectObservers = function () {
        //     for (var i = 0; i < s.observers.length; i++) {
        //         s.observers[i].disconnect();
        //     }
        //     s.observers = [];
        // };
        /*=========================
          Loop
          ===========================*/
        // Create looped slides
        s.createLoop = function () {
            // Remove duplicated slides
            s.wrapper.children('.' + s.params.slideClass + '.' + s.params.slideDuplicateClass).remove();

            var slides = s.wrapper.children('.' + s.params.slideClass);

            if (s.params.slidesPerView === 'auto' && !s.params.loopedSlides) s.params.loopedSlides = slides.length;

            s.loopedSlides = parseInt(s.params.loopedSlides || s.params.slidesPerView, 10);
            s.loopedSlides = s.loopedSlides + s.params.loopAdditionalSlides;
            if (s.loopedSlides > slides.length) {
                s.loopedSlides = slides.length;
            }

            var prependSlides = [],
                appendSlides = [],
                i;
            slides.each(function (index, el) {
                var slide = $(this);
                if (index < s.loopedSlides) appendSlides.push(el);
                if (index < slides.length && index >= slides.length - s.loopedSlides) prependSlides.push(el);
                slide.attr('data-swiper-slide-index', index);
            });
            for (i = 0; i < appendSlides.length; i++) {
                s.wrapper.append($(appendSlides[i].cloneNode(true)).addClass(s.params.slideDuplicateClass));
            }
            for (i = prependSlides.length - 1; i >= 0; i--) {
                s.wrapper.prepend($(prependSlides[i].cloneNode(true)).addClass(s.params.slideDuplicateClass));
            }
        };
        s.destroyLoop = function () {
            s.wrapper.children('.' + s.params.slideClass + '.' + s.params.slideDuplicateClass).remove();
            s.slides.removeAttr('data-swiper-slide-index');
        };
        // s.reLoop = function (updatePosition) {
        //     var oldIndex = s.activeIndex - s.loopedSlides;
        //     s.destroyLoop();
        //     s.createLoop();
        //     s.updateSlidesSize();
        //     if (updatePosition) {
        //         s.slideTo(oldIndex + s.loopedSlides, 0, false);
        //     }

        // };
        s.fixLoop = function () {
            var newIndex;
            //Fix For Negative Oversliding
            if (s.activeIndex < s.loopedSlides) {
                newIndex = s.slides.length - s.loopedSlides * 3 + s.activeIndex;
                newIndex = newIndex + s.loopedSlides;
                s.slideTo(newIndex, 0, false, true);
            }
            //Fix For Positive Oversliding
            else if (s.params.slidesPerView === 'auto' && s.activeIndex >= s.loopedSlides * 2 || s.activeIndex > s.slides.length - s.params.slidesPerView * 2) {
                    newIndex = -s.slides.length + s.activeIndex + s.loopedSlides;
                    newIndex = newIndex + s.loopedSlides;
                    s.slideTo(newIndex, 0, false, true);
                }
        };
        /*=========================
          AfterSlide/Append/Prepend/Remove Slides
          ===========================*/
        s.afterSlide = function (slides, index) {
            if (s.params.loop) {
                s.destroyLoop();
            }
            if (index <= s.activeIndex) {
                var newActiveIndex = s.activeIndex + 1;
            }
            if ((typeof slides === 'undefined' ? 'undefined' : _typeof(slides)) === 'object' && slides.length) {
                for (var i = 0; i < slides.length; i++) {
                    if (slides[i]) s.wrapper.insert(slides[i], index, s.activeIndex);
                }
                if (index <= s.activeIndex) {
                    newActiveIndex = s.activeIndex + slides.length;
                }
            } else {
                s.wrapper.insert(slides, index, s.activeIndex);
                // s.wrapper.append(slides);
            }
            if (s.params.loop) {
                s.createLoop();
            }
            if (!(s.params.observer && s.support.observer)) {
                s.update(true);
            }
            if (index < s.activeIndex) {
                s.slideTo(newActiveIndex, 0, false);
            } else if (index == s.activeIndex) {
                s.slideTo(newActiveIndex - 1, 0, false);
            }
        };
        // s.appendSlide = function(slides) {
        //     if (s.params.loop) {
        //         s.destroyLoop();
        //     }
        //     if (typeof slides === 'object' && slides.length) {
        //         for (var i = 0; i < slides.length; i++) {
        //             if (slides[i]) s.wrapper.append(slides[i]);
        //         }
        //     } else {
        //         s.wrapper.append(slides);
        //     }
        //     if (s.params.loop) {
        //         s.createLoop();
        //     }
        //     if (!(s.params.observer && s.support.observer)) {
        //         s.update(true);
        //     }
        // };
        // s.prependSlide = function(slides) {
        //     if (s.params.loop) {
        //         s.destroyLoop();
        //     }
        //     var newActiveIndex = s.activeIndex + 1;
        //     if (typeof slides === 'object' && slides.length) {
        //         for (var i = 0; i < slides.length; i++) {
        //             if (slides[i]) s.wrapper.prepend(slides[i]);
        //         }
        //         newActiveIndex = s.activeIndex + slides.length;
        //     } else {
        //         s.wrapper.prepend(slides);
        //     }
        //     if (s.params.loop) {
        //         s.createLoop();
        //     }
        //     if (!(s.params.observer && s.support.observer)) {
        //         s.update(true);
        //     }
        //     s.slideTo(newActiveIndex, 0, false);
        // };
        // s.removeSlide = function (slidesIndexes) {
        //     if (s.params.loop) {
        //         s.destroyLoop();
        //         s.slides = s.wrapper.children('.' + s.params.slideClass);
        //     }
        //     var newActiveIndex = s.activeIndex,
        //         indexToRemove;
        //     if (typeof slidesIndexes === 'object' && slidesIndexes.length) {
        //         for (var i = 0; i < slidesIndexes.length; i++) {
        //             indexToRemove = slidesIndexes[i];
        //             if (s.slides[indexToRemove]) s.slides.eq(indexToRemove).remove();
        //             if (indexToRemove < newActiveIndex) newActiveIndex--;
        //         }
        //         newActiveIndex = Math.max(newActiveIndex, 0);
        //     }
        //     else {
        //         indexToRemove = slidesIndexes;
        //         if (s.slides[indexToRemove]) s.slides.eq(indexToRemove).remove();
        //         if (indexToRemove < newActiveIndex) newActiveIndex--;
        //         newActiveIndex = Math.max(newActiveIndex, 0);
        //     }

        //     if (s.params.loop) {
        //         s.createLoop();
        //     }

        //     if (!(s.params.observer && s.support.observer)) {
        //         s.update(true);
        //     }
        //     if (s.params.loop) {
        //         s.slideTo(newActiveIndex + s.loopedSlides, 0, false);
        //     }
        //     else {
        //         s.slideTo(newActiveIndex, 0, false);
        //     }

        // };
        // s.removeAllSlides = function () {
        //     var slidesIndexes = [];
        //     for (var i = 0; i < s.slides.length; i++) {
        //         slidesIndexes.push(i);
        //     }
        //     s.removeSlide(slidesIndexes);
        // };


        /*=========================
          Effects
          ===========================*/
        s.effects = {
            // fade: {
            //     setTranslate: function () {
            //         for (var i = 0; i < s.slides.length; i++) {
            //             var slide = s.slides.eq(i);
            //             var offset = slide[0].swiperSlideOffset;
            //             var tx = -offset;
            //             if (!s.params.virtualTranslate) tx = tx - s.translate;
            //             var ty = 0;
            //             if (!s.isHorizontal()) {
            //                 ty = tx;
            //                 tx = 0;
            //             }
            //             var slideOpacity = s.params.fade.crossFade ?
            //                     Math.max(1 - Math.abs(slide[0].progress), 0) :
            //                     1 + Math.min(Math.max(slide[0].progress, -1), 0);
            //             slide
            //                 .css({
            //                     opacity: slideOpacity
            //                 })
            //                 .transform('translate3d(' + tx + 'px, ' + ty + 'px, 0px)');

            //         }

            //     },
            //     setTransition: function (duration) {
            //         s.slides.transition(duration);
            //         if (s.params.virtualTranslate && duration !== 0) {
            //             var eventTriggered = false;
            //             s.slides.transitionEnd(function () {
            //                 if (eventTriggered) return;
            //                 if (!s) return;
            //                 eventTriggered = true;
            //                 s.animating = false;
            //                 var triggerEvents = ['webkitTransitionEnd', 'transitionend', 'oTransitionEnd', 'MSTransitionEnd', 'msTransitionEnd'];
            //                 for (var i = 0; i < triggerEvents.length; i++) {
            //                     s.wrapper.trigger(triggerEvents[i]);
            //                 }
            //             });
            //         }
            //     }
            // },
            // flip: {
            //     setTranslate: function () {
            //         for (var i = 0; i < s.slides.length; i++) {
            //             var slide = s.slides.eq(i);
            //             var progress = slide[0].progress;
            //             if (s.params.flip.limitRotation) {
            //                 progress = Math.max(Math.min(slide[0].progress, 1), -1);
            //             }
            //             var offset = slide[0].swiperSlideOffset;
            //             var rotate = -180 * progress,
            //                 rotateY = rotate,
            //                 rotateX = 0,
            //                 tx = -offset,
            //                 ty = 0;
            //             if (!s.isHorizontal()) {
            //                 ty = tx;
            //                 tx = 0;
            //                 rotateX = -rotateY;
            //                 rotateY = 0;
            //             }
            //             else if (s.rtl) {
            //                 rotateY = -rotateY;
            //             }

            //             slide[0].style.zIndex = -Math.abs(Math.round(progress)) + s.slides.length;

            //             if (s.params.flip.slideShadows) {
            //                 //Set shadows
            //                 var shadowBefore = s.isHorizontal() ? slide.find('.swiper-slide-shadow-left') : slide.find('.swiper-slide-shadow-top');
            //                 var shadowAfter = s.isHorizontal() ? slide.find('.swiper-slide-shadow-right') : slide.find('.swiper-slide-shadow-bottom');
            //                 if (shadowBefore.length === 0) {
            //                     shadowBefore = $('<div class="swiper-slide-shadow-' + (s.isHorizontal() ? 'left' : 'top') + '"></div>');
            //                     slide.append(shadowBefore);
            //                 }
            //                 if (shadowAfter.length === 0) {
            //                     shadowAfter = $('<div class="swiper-slide-shadow-' + (s.isHorizontal() ? 'right' : 'bottom') + '"></div>');
            //                     slide.append(shadowAfter);
            //                 }
            //                 if (shadowBefore.length) shadowBefore[0].style.opacity = Math.max(-progress, 0);
            //                 if (shadowAfter.length) shadowAfter[0].style.opacity = Math.max(progress, 0);
            //             }

            //             slide
            //                 .transform('translate3d(' + tx + 'px, ' + ty + 'px, 0px) rotateX(' + rotateX + 'deg) rotateY(' + rotateY + 'deg)');
            //         }
            //     },
            //     setTransition: function (duration) {
            //         s.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);
            //         if (s.params.virtualTranslate && duration !== 0) {
            //             var eventTriggered = false;
            //             s.slides.eq(s.activeIndex).transitionEnd(function () {
            //                 if (eventTriggered) return;
            //                 if (!s) return;
            //                 if (!$(this).hasClass(s.params.slideActiveClass)) return;
            //                 eventTriggered = true;
            //                 s.animating = false;
            //                 var triggerEvents = ['webkitTransitionEnd', 'transitionend', 'oTransitionEnd', 'MSTransitionEnd', 'msTransitionEnd'];
            //                 for (var i = 0; i < triggerEvents.length; i++) {
            //                     s.wrapper.trigger(triggerEvents[i]);
            //                 }
            //             });
            //         }
            //     }
            // },
            // cube: {
            //     setTranslate: function () {
            //         var wrapperRotate = 0, cubeShadow;
            //         if (s.params.cube.shadow) {
            //             if (s.isHorizontal()) {
            //                 cubeShadow = s.wrapper.find('.swiper-cube-shadow');
            //                 if (cubeShadow.length === 0) {
            //                     cubeShadow = $('<div class="swiper-cube-shadow"></div>');
            //                     s.wrapper.append(cubeShadow);
            //                 }
            //                 cubeShadow.css({height: s.width + 'px'});
            //             }
            //             else {
            //                 cubeShadow = s.container.find('.swiper-cube-shadow');
            //                 if (cubeShadow.length === 0) {
            //                     cubeShadow = $('<div class="swiper-cube-shadow"></div>');
            //                     s.container.append(cubeShadow);
            //                 }
            //             }
            //         }
            //         for (var i = 0; i < s.slides.length; i++) {
            //             var slide = s.slides.eq(i);
            //             var slideAngle = i * 90;
            //             var round = Math.floor(slideAngle / 360);
            //             if (s.rtl) {
            //                 slideAngle = -slideAngle;
            //                 round = Math.floor(-slideAngle / 360);
            //             }
            //             var progress = Math.max(Math.min(slide[0].progress, 1), -1);
            //             var tx = 0, ty = 0, tz = 0;
            //             if (i % 4 === 0) {
            //                 tx = - round * 4 * s.size;
            //                 tz = 0;
            //             }
            //             else if ((i - 1) % 4 === 0) {
            //                 tx = 0;
            //                 tz = - round * 4 * s.size;
            //             }
            //             else if ((i - 2) % 4 === 0) {
            //                 tx = s.size + round * 4 * s.size;
            //                 tz = s.size;
            //             }
            //             else if ((i - 3) % 4 === 0) {
            //                 tx = - s.size;
            //                 tz = 3 * s.size + s.size * 4 * round;
            //             }
            //             if (s.rtl) {
            //                 tx = -tx;
            //             }

            //             if (!s.isHorizontal()) {
            //                 ty = tx;
            //                 tx = 0;
            //             }

            //             var transform = 'rotateX(' + (s.isHorizontal() ? 0 : -slideAngle) + 'deg) rotateY(' + (s.isHorizontal() ? slideAngle : 0) + 'deg) translate3d(' + tx + 'px, ' + ty + 'px, ' + tz + 'px)';
            //             if (progress <= 1 && progress > -1) {
            //                 wrapperRotate = i * 90 + progress * 90;
            //                 if (s.rtl) wrapperRotate = -i * 90 - progress * 90;
            //             }
            //             slide.transform(transform);
            //             if (s.params.cube.slideShadows) {
            //                 //Set shadows
            //                 var shadowBefore = s.isHorizontal() ? slide.find('.swiper-slide-shadow-left') : slide.find('.swiper-slide-shadow-top');
            //                 var shadowAfter = s.isHorizontal() ? slide.find('.swiper-slide-shadow-right') : slide.find('.swiper-slide-shadow-bottom');
            //                 if (shadowBefore.length === 0) {
            //                     shadowBefore = $('<div class="swiper-slide-shadow-' + (s.isHorizontal() ? 'left' : 'top') + '"></div>');
            //                     slide.append(shadowBefore);
            //                 }
            //                 if (shadowAfter.length === 0) {
            //                     shadowAfter = $('<div class="swiper-slide-shadow-' + (s.isHorizontal() ? 'right' : 'bottom') + '"></div>');
            //                     slide.append(shadowAfter);
            //                 }
            //                 if (shadowBefore.length) shadowBefore[0].style.opacity = Math.max(-progress, 0);
            //                 if (shadowAfter.length) shadowAfter[0].style.opacity = Math.max(progress, 0);
            //             }
            //         }
            //         s.wrapper.css({
            //             '-webkit-transform-origin': '50% 50% -' + (s.size / 2) + 'px',
            //             '-moz-transform-origin': '50% 50% -' + (s.size / 2) + 'px',
            //             '-ms-transform-origin': '50% 50% -' + (s.size / 2) + 'px',
            //             'transform-origin': '50% 50% -' + (s.size / 2) + 'px'
            //         });

            //         if (s.params.cube.shadow) {
            //             if (s.isHorizontal()) {
            //                 cubeShadow.transform('translate3d(0px, ' + (s.width / 2 + s.params.cube.shadowOffset) + 'px, ' + (-s.width / 2) + 'px) rotateX(90deg) rotateZ(0deg) scale(' + (s.params.cube.shadowScale) + ')');
            //             }
            //             else {
            //                 var shadowAngle = Math.abs(wrapperRotate) - Math.floor(Math.abs(wrapperRotate) / 90) * 90;
            //                 var multiplier = 1.5 - (Math.sin(shadowAngle * 2 * Math.PI / 360) / 2 + Math.cos(shadowAngle * 2 * Math.PI / 360) / 2);
            //                 var scale1 = s.params.cube.shadowScale,
            //                     scale2 = s.params.cube.shadowScale / multiplier,
            //                     offset = s.params.cube.shadowOffset;
            //                 cubeShadow.transform('scale3d(' + scale1 + ', 1, ' + scale2 + ') translate3d(0px, ' + (s.height / 2 + offset) + 'px, ' + (-s.height / 2 / scale2) + 'px) rotateX(-90deg)');
            //             }
            //         }
            //         var zFactor = (s.isSafari || s.isUiWebView) ? (-s.size / 2) : 0;
            //         s.wrapper.transform('translate3d(0px,0,' + zFactor + 'px) rotateX(' + (s.isHorizontal() ? 0 : wrapperRotate) + 'deg) rotateY(' + (s.isHorizontal() ? -wrapperRotate : 0) + 'deg)');
            //     },
            //     setTransition: function (duration) {
            //         s.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);
            //         if (s.params.cube.shadow && !s.isHorizontal()) {
            //             s.container.find('.swiper-cube-shadow').transition(duration);
            //         }
            //     }
            // },
            // coverflow: {
            //     setTranslate: function () {
            //         var transform = s.translate;
            //         var center = s.isHorizontal() ? -transform + s.width / 2 : -transform + s.height / 2;
            //         var rotate = s.isHorizontal() ? s.params.coverflow.rotate: -s.params.coverflow.rotate;
            //         var translate = s.params.coverflow.depth;
            //         //Each slide offset from center
            //         for (var i = 0, length = s.slides.length; i < length; i++) {
            //             var slide = s.slides.eq(i);
            //             var slideSize = s.slidesSizesGrid[i];
            //             var slideOffset = slide[0].swiperSlideOffset;
            //             var offsetMultiplier = (center - slideOffset - slideSize / 2) / slideSize * s.params.coverflow.modifier;

            //             var rotateY = s.isHorizontal() ? rotate * offsetMultiplier : 0;
            //             var rotateX = s.isHorizontal() ? 0 : rotate * offsetMultiplier;
            //             // var rotateZ = 0
            //             var translateZ = -translate * Math.abs(offsetMultiplier);

            //             var translateY = s.isHorizontal() ? 0 : s.params.coverflow.stretch * (offsetMultiplier);
            //             var translateX = s.isHorizontal() ? s.params.coverflow.stretch * (offsetMultiplier) : 0;

            //             //Fix for ultra small values
            //             if (Math.abs(translateX) < 0.001) translateX = 0;
            //             if (Math.abs(translateY) < 0.001) translateY = 0;
            //             if (Math.abs(translateZ) < 0.001) translateZ = 0;
            //             if (Math.abs(rotateY) < 0.001) rotateY = 0;
            //             if (Math.abs(rotateX) < 0.001) rotateX = 0;

            //             var slideTransform = 'translate3d(' + translateX + 'px,' + translateY + 'px,' + translateZ + 'px)  rotateX(' + rotateX + 'deg) rotateY(' + rotateY + 'deg)';

            //             slide.transform(slideTransform);
            //             slide[0].style.zIndex = -Math.abs(Math.round(offsetMultiplier)) + 1;
            //             if (s.params.coverflow.slideShadows) {
            //                 //Set shadows
            //                 var shadowBefore = s.isHorizontal() ? slide.find('.swiper-slide-shadow-left') : slide.find('.swiper-slide-shadow-top');
            //                 var shadowAfter = s.isHorizontal() ? slide.find('.swiper-slide-shadow-right') : slide.find('.swiper-slide-shadow-bottom');
            //                 if (shadowBefore.length === 0) {
            //                     shadowBefore = $('<div class="swiper-slide-shadow-' + (s.isHorizontal() ? 'left' : 'top') + '"></div>');
            //                     slide.append(shadowBefore);
            //                 }
            //                 if (shadowAfter.length === 0) {
            //                     shadowAfter = $('<div class="swiper-slide-shadow-' + (s.isHorizontal() ? 'right' : 'bottom') + '"></div>');
            //                     slide.append(shadowAfter);
            //                 }
            //                 if (shadowBefore.length) shadowBefore[0].style.opacity = offsetMultiplier > 0 ? offsetMultiplier : 0;
            //                 if (shadowAfter.length) shadowAfter[0].style.opacity = (-offsetMultiplier) > 0 ? -offsetMultiplier : 0;
            //             }
            //         }

            //         //Set correct perspective for IE10
            //         if (s.browser.ie) {
            //             var ws = s.wrapper[0].style;
            //             ws.perspectiveOrigin = center + 'px 50%';
            //         }
            //     },
            //     setTransition: function (duration) {
            //         s.slides.transition(duration).find('.swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left').transition(duration);
            //     }
            // }
        };

        /*=========================
          Images Lazy Loading
          ===========================*/
        s.lazy = {
            initialImageLoaded: false,
            loadImageInSlide: function loadImageInSlide(index, loadInDuplicate) {
                if (typeof index === 'undefined') return;
                if (typeof loadInDuplicate === 'undefined') loadInDuplicate = true;
                if (s.slides.length === 0) return;

                var slide = s.slides.eq(index);
                var img = slide.find('.' + s.params.lazyLoadingClass + ':not(.' + s.params.lazyStatusLoadedClass + '):not(.' + s.params.lazyStatusLoadingClass + ')');

                if (slide.hasClass(s.params.lazyLoadingClass) && !slide.hasClass(s.params.lazyStatusLoadedClass) && !slide.hasClass(s.params.lazyStatusLoadingClass)) {
                    img = img.add(slide[0]);
                }
                if (img.length === 0) return;

                img.each(function () {
                    var _img = $(this);
                    _img.addClass(s.params.lazyStatusLoadingClass);
                    var background = _img.attr('data-background');
                    var src = _img.attr('data-src'),
                        srcset = _img.attr('data-srcset'),
                        sizes = _img.attr('data-sizes');
                    s.loadImage(_img[0], src || background, srcset, sizes, false, function () {
                        if (background) {
                            _img.css('background-image', 'url("' + background + '")');
                            _img.removeAttr('data-background');
                        } else {
                            if (srcset) {
                                _img.attr('srcset', srcset);
                                _img.removeAttr('data-srcset');
                            }
                            if (sizes) {
                                _img.attr('sizes', sizes);
                                _img.removeAttr('data-sizes');
                            }
                            if (src) {
                                _img.attr('src', src);
                                _img.removeAttr('data-src');
                            }
                        }

                        _img.addClass(s.params.lazyStatusLoadedClass).removeClass(s.params.lazyStatusLoadingClass);
                        slide.find('.' + s.params.lazyPreloaderClass + ', .' + s.params.preloaderClass).remove();
                        if (s.params.loop && loadInDuplicate) {
                            var slideOriginalIndex = slide.attr('data-swiper-slide-index');
                            if (slide.hasClass(s.params.slideDuplicateClass)) {
                                var originalSlide = s.wrapper.children('[data-swiper-slide-index="' + slideOriginalIndex + '"]:not(.' + s.params.slideDuplicateClass + ')');
                                s.lazy.loadImageInSlide(originalSlide.index(), false);
                            } else {
                                var duplicatedSlide = s.wrapper.children('.' + s.params.slideDuplicateClass + '[data-swiper-slide-index="' + slideOriginalIndex + '"]');
                                s.lazy.loadImageInSlide(duplicatedSlide.index(), false);
                            }
                        }
                        s.emit('onLazyImageReady', s, slide[0], _img[0]);
                    });

                    s.emit('onLazyImageLoad', s, slide[0], _img[0]);
                });
            },
            load: function load() {
                var i;
                var slidesPerView = s.params.slidesPerView;
                if (slidesPerView === 'auto') {
                    slidesPerView = 0;
                }
                if (!s.lazy.initialImageLoaded) s.lazy.initialImageLoaded = true;
                // if (s.params.watchSlidesVisibility) {
                //     s.wrapper.children('.' + s.params.slideVisibleClass).each(function () {
                //         s.lazy.loadImageInSlide($(this).index());
                //     });
                // }
                else {
                        if (slidesPerView > 1) {
                            for (i = s.activeIndex; i < s.activeIndex + slidesPerView; i++) {
                                if (s.slides[i]) s.lazy.loadImageInSlide(i);
                            }
                        } else {
                            s.lazy.loadImageInSlide(s.activeIndex);
                        }
                    }
                if (s.params.lazyLoadingInPrevNext) {
                    if (slidesPerView > 1 || s.params.lazyLoadingInPrevNextAmount && s.params.lazyLoadingInPrevNextAmount > 1) {
                        var amount = s.params.lazyLoadingInPrevNextAmount;
                        var spv = slidesPerView;
                        var maxIndex = Math.min(s.activeIndex + spv + Math.max(amount, spv), s.slides.length);
                        var minIndex = Math.max(s.activeIndex - Math.max(spv, amount), 0);
                        // Next Slides
                        for (i = s.activeIndex + slidesPerView; i < maxIndex; i++) {
                            if (s.slides[i]) s.lazy.loadImageInSlide(i);
                        }
                        // Prev Slides
                        for (i = minIndex; i < s.activeIndex; i++) {
                            if (s.slides[i]) s.lazy.loadImageInSlide(i);
                        }
                    } else {
                        var nextSlide = s.wrapper.children('.' + s.params.slideNextClass);
                        if (nextSlide.length > 0) s.lazy.loadImageInSlide(nextSlide.index());

                        var prevSlide = s.wrapper.children('.' + s.params.slidePrevClass);
                        if (prevSlide.length > 0) s.lazy.loadImageInSlide(prevSlide.index());
                    }
                }
            },
            onTransitionStart: function onTransitionStart() {
                if (s.params.lazyLoading) {
                    if (s.params.lazyLoadingOnTransitionStart || !s.params.lazyLoadingOnTransitionStart && !s.lazy.initialImageLoaded) {
                        s.lazy.load();
                    }
                }
            },
            onTransitionEnd: function onTransitionEnd() {
                if (s.params.lazyLoading && !s.params.lazyLoadingOnTransitionStart) {
                    s.lazy.load();
                }
            }
        };

        /*=========================
          Scrollbar
          ===========================*/
        // s.scrollbar = {
        //     isTouched: false,
        //     setDragPosition: function (e) {
        //         var sb = s.scrollbar;
        //         var x = 0, y = 0;
        //         var translate;
        //         var pointerPosition = s.isHorizontal() ?
        //             ((e.type === 'touchstart' || e.type === 'touchmove') ? e.targetTouches[0].pageX : e.pageX || e.clientX) :
        //             ((e.type === 'touchstart' || e.type === 'touchmove') ? e.targetTouches[0].pageY : e.pageY || e.clientY) ;
        //         var position = (pointerPosition) - sb.track.offset()[s.isHorizontal() ? 'left' : 'top'] - sb.dragSize / 2;
        //         var positionMin = -s.minTranslate() * sb.moveDivider;
        //         var positionMax = -s.maxTranslate() * sb.moveDivider;
        //         if (position < positionMin) {
        //             position = positionMin;
        //         }
        //         else if (position > positionMax) {
        //             position = positionMax;
        //         }
        //         position = -position / sb.moveDivider;
        //         s.updateProgress(position);
        //         s.setWrapperTranslate(position, true);
        //     },
        //     dragStart: function (e) {
        //         var sb = s.scrollbar;
        //         sb.isTouched = true;
        //         e.preventDefault();
        //         e.stopPropagation();

        //         sb.setDragPosition(e);
        //         clearTimeout(sb.dragTimeout);

        //         sb.track.transition(0);
        //         if (s.params.scrollbarHide) {
        //             sb.track.css('opacity', 1);
        //         }
        //         s.wrapper.transition(100);
        //         sb.drag.transition(100);
        //         s.emit('onScrollbarDragStart', s);
        //     },
        //     dragMove: function (e) {
        //         var sb = s.scrollbar;
        //         if (!sb.isTouched) return;
        //         if (e.preventDefault) e.preventDefault();
        //         else e.returnValue = false;
        //         sb.setDragPosition(e);
        //         s.wrapper.transition(0);
        //         sb.track.transition(0);
        //         sb.drag.transition(0);
        //         s.emit('onScrollbarDragMove', s);
        //     },
        //     dragEnd: function (e) {
        //         var sb = s.scrollbar;
        //         if (!sb.isTouched) return;
        //         sb.isTouched = false;
        //         if (s.params.scrollbarHide) {
        //             clearTimeout(sb.dragTimeout);
        //             sb.dragTimeout = setTimeout(function () {
        //                 sb.track.css('opacity', 0);
        //                 sb.track.transition(400);
        //             }, 1000);

        //         }
        //         s.emit('onScrollbarDragEnd', s);
        //         if (s.params.scrollbarSnapOnRelease) {
        //             s.slideReset();
        //         }
        //     },
        //     draggableEvents: (function () {
        //         if ((s.params.simulateTouch === false && !s.support.touch)) return s.touchEventsDesktop;
        //         else return s.touchEvents;
        //     })(),
        //     enableDraggable: function () {
        //         var sb = s.scrollbar;
        //         var target = s.support.touch ? sb.track : document;
        //         $(sb.track).on(sb.draggableEvents.start, sb.dragStart);
        //         $(target).on(sb.draggableEvents.move, sb.dragMove);
        //         $(target).on(sb.draggableEvents.end, sb.dragEnd);
        //     },
        //     disableDraggable: function () {
        //         var sb = s.scrollbar;
        //         var target = s.support.touch ? sb.track : document;
        //         $(sb.track).off(s.draggableEvents.start, sb.dragStart);
        //         $(target).off(s.draggableEvents.move, sb.dragMove);
        //         $(target).off(s.draggableEvents.end, sb.dragEnd);
        //     },
        //     set: function () {
        //         if (!s.params.scrollbar) return;
        //         var sb = s.scrollbar;
        //         sb.track = $(s.params.scrollbar);
        //         if (s.params.uniqueNavElements && typeof s.params.scrollbar === 'string' && sb.track.length > 1 && s.container.find(s.params.scrollbar).length === 1) {
        //             sb.track = s.container.find(s.params.scrollbar);
        //         }
        //         sb.drag = sb.track.find('.swiper-scrollbar-drag');
        //         if (sb.drag.length === 0) {
        //             sb.drag = $('<div class="swiper-scrollbar-drag"></div>');
        //             sb.track.append(sb.drag);
        //         }
        //         sb.drag[0].style.width = '';
        //         sb.drag[0].style.height = '';
        //         sb.trackSize = s.isHorizontal() ? sb.track[0].offsetWidth : sb.track[0].offsetHeight;

        //         sb.divider = s.size / s.virtualSize;
        //         sb.moveDivider = sb.divider * (sb.trackSize / s.size);
        //         sb.dragSize = sb.trackSize * sb.divider;

        //         if (s.isHorizontal()) {
        //             sb.drag[0].style.width = sb.dragSize + 'px';
        //         }
        //         else {
        //             sb.drag[0].style.height = sb.dragSize + 'px';
        //         }

        //         if (sb.divider >= 1) {
        //             sb.track[0].style.display = 'none';
        //         }
        //         else {
        //             sb.track[0].style.display = '';
        //         }
        //         if (s.params.scrollbarHide) {
        //             sb.track[0].style.opacity = 0;
        //         }
        //     },
        //     setTranslate: function () {
        //         if (!s.params.scrollbar) return;
        //         var diff;
        //         var sb = s.scrollbar;
        //         var translate = s.translate || 0;
        //         var newPos;

        //         var newSize = sb.dragSize;
        //         newPos = (sb.trackSize - sb.dragSize) * s.progress;
        //         if (s.rtl && s.isHorizontal()) {
        //             newPos = -newPos;
        //             if (newPos > 0) {
        //                 newSize = sb.dragSize - newPos;
        //                 newPos = 0;
        //             }
        //             else if (-newPos + sb.dragSize > sb.trackSize) {
        //                 newSize = sb.trackSize + newPos;
        //             }
        //         }
        //         else {
        //             if (newPos < 0) {
        //                 newSize = sb.dragSize + newPos;
        //                 newPos = 0;
        //             }
        //             else if (newPos + sb.dragSize > sb.trackSize) {
        //                 newSize = sb.trackSize - newPos;
        //             }
        //         }
        //         if (s.isHorizontal()) {
        //             if (s.support.transforms3d) {
        //                 sb.drag.transform('translate3d(' + (newPos) + 'px, 0, 0)');
        //             }
        //             else {
        //                 sb.drag.transform('translateX(' + (newPos) + 'px)');
        //             }
        //             sb.drag[0].style.width = newSize + 'px';
        //         }
        //         else {
        //             if (s.support.transforms3d) {
        //                 sb.drag.transform('translate3d(0px, ' + (newPos) + 'px, 0)');
        //             }
        //             else {
        //                 sb.drag.transform('translateY(' + (newPos) + 'px)');
        //             }
        //             sb.drag[0].style.height = newSize + 'px';
        //         }
        //         if (s.params.scrollbarHide) {
        //             clearTimeout(sb.timeout);
        //             sb.track[0].style.opacity = 1;
        //             sb.timeout = setTimeout(function () {
        //                 sb.track[0].style.opacity = 0;
        //                 sb.track.transition(400);
        //             }, 1000);
        //         }
        //     },
        //     setTransition: function (duration) {
        //         if (!s.params.scrollbar) return;
        //         s.scrollbar.drag.transition(duration);
        //     }
        // };

        /*=========================
          Controller
          ===========================*/
        s.controller = {
            // LinearSpline: function (x, y) {
            //     this.x = x;
            //     this.y = y;
            //     this.lastIndex = x.length - 1;
            //     // Given an x value (x2), return the expected y2 value:
            //     // (x1,y1) is the known point before given value,
            //     // (x3,y3) is the known point after given value.
            //     var i1, i3;
            //     var l = this.x.length;

            //     this.interpolate = function (x2) {
            //         if (!x2) return 0;

            //         // Get the indexes of x1 and x3 (the array indexes before and after given x2):
            //         i3 = binarySearch(this.x, x2);
            //         i1 = i3 - 1;

            //         // We have our indexes i1 & i3, so we can calculate already:
            //         // y2 := ((x2−x1) × (y3−y1)) ÷ (x3−x1) + y1
            //         return ((x2 - this.x[i1]) * (this.y[i3] - this.y[i1])) / (this.x[i3] - this.x[i1]) + this.y[i1];
            //     };

            //     var binarySearch = (function() {
            //         var maxIndex, minIndex, guess;
            //         return function(array, val) {
            //             minIndex = -1;
            //             maxIndex = array.length;
            //             while (maxIndex - minIndex > 1)
            //                 if (array[guess = maxIndex + minIndex >> 1] <= val) {
            //                     minIndex = guess;
            //                 } else {
            //                     maxIndex = guess;
            //                 }
            //             return maxIndex;
            //         };
            //     })();
            // },
            //xxx: for now i will just save one spline function to to
            // getInterpolateFunction: function(c){
            //     if(!s.controller.spline) s.controller.spline = s.params.loop ?
            //         new s.controller.LinearSpline(s.slidesGrid, c.slidesGrid) :
            //         new s.controller.LinearSpline(s.snapGrid, c.snapGrid);
            // },
            // setTranslate: function (translate, byController) {
            //    var controlled = s.params.control;
            //    var multiplier, controlledTranslate;
            //    function setControlledTranslate(c) {
            //         // this will create an Interpolate function based on the snapGrids
            //         // x is the Grid of the scrolled scroller and y will be the controlled scroller
            //         // it makes sense to create this only once and recall it for the interpolation
            //         // the function does a lot of value caching for performance
            //         translate = c.rtl && c.params.direction === 'horizontal' ? -s.translate : s.translate;
            //         if (s.params.controlBy === 'slide') {
            //             s.controller.getInterpolateFunction(c);
            //             // i am not sure why the values have to be multiplicated this way, tried to invert the snapGrid
            //             // but it did not work out
            //             controlledTranslate = -s.controller.spline.interpolate(-translate);
            //         }

            //         if(!controlledTranslate || s.params.controlBy === 'container'){
            //             multiplier = (c.maxTranslate() - c.minTranslate()) / (s.maxTranslate() - s.minTranslate());
            //             controlledTranslate = (translate - s.minTranslate()) * multiplier + c.minTranslate();
            //         }

            //         // if (s.params.controlInverse) {
            //         //     controlledTranslate = c.maxTranslate() - controlledTranslate;
            //         // }
            //         c.updateProgress(controlledTranslate);
            //         c.setWrapperTranslate(controlledTranslate, false, s);
            //         c.updateActiveIndex();
            //    }
            //    if (s.isArray(controlled)) {
            //        for (var i = 0; i < controlled.length; i++) {
            //            if (controlled[i] !== byController && controlled[i] instanceof Swiper) {
            //                setControlledTranslate(controlled[i]);
            //            }
            //        }
            //    }
            //    else if (controlled instanceof Swiper && byController !== controlled) {

            //        setControlledTranslate(controlled);
            //    }
            // },
            // setTransition: function (duration, byController) {
            //     var controlled = s.params.control;
            //     var i;
            //     function setControlledTransition(c) {
            //         c.setWrapperTransition(duration, s);
            //         if (duration !== 0) {
            //             c.onTransitionStart();
            //             c.wrapper.transitionEnd(function(){
            //                 if (!controlled) return;
            //                 if (c.params.loop && s.params.controlBy === 'slide') {
            //                     c.fixLoop();
            //                 }
            //                 c.onTransitionEnd();

            //             });
            //         }
            //     }
            //     if (s.isArray(controlled)) {
            //         for (i = 0; i < controlled.length; i++) {
            //             if (controlled[i] !== byController && controlled[i] instanceof Swiper) {
            //                 setControlledTransition(controlled[i]);
            //             }
            //         }
            //     }
            //     else if (controlled instanceof Swiper && byController !== controlled) {
            //         setControlledTransition(controlled);
            //     }
            // }
        };

        /*=========================
          Hash Navigation
          ===========================*/
        // s.hashnav = {
        //     onHashCange: function (e, a) {
        //         var newHash = document.location.hash.replace('#', '');
        //         var activeSlideHash = s.slides.eq(s.activeIndex).attr('data-hash');
        //         if (newHash !== activeSlideHash) {
        //             s.slideTo(s.wrapper.children('.' + s.params.slideClass + '[data-hash="' + (newHash) + '"]').index());
        //         }
        //     },
        //     attachEvents: function (detach) {
        //         var action = detach ? 'off' : 'on';
        //         $(window)[action]('hashchange', s.hashnav.onHashCange);
        //     },
        //     setHash: function () {
        //         if (!s.hashnav.initialized || !s.params.hashnav) return;
        //         if (s.params.replaceState && window.history && window.history.replaceState) {
        //             window.history.replaceState(null, null, ('#' + s.slides.eq(s.activeIndex).attr('data-hash') || ''));
        //         } else {
        //             var slide = s.slides.eq(s.activeIndex);
        //             var hash = slide.attr('data-hash') || slide.attr('data-history');
        //             document.location.hash = hash || '';
        //         }
        //     },
        //     init: function () {
        //         if (!s.params.hashnav || s.params.history) return;
        //         s.hashnav.initialized = true;
        //         var hash = document.location.hash.replace('#', '');
        //         if (!hash) return;
        //         var speed = 0;
        //         for (var i = 0, length = s.slides.length; i < length; i++) {
        //             var slide = s.slides.eq(i);
        //             var slideHash = slide.attr('data-hash') || slide.attr('data-history');
        //             if (slideHash === hash && !slide.hasClass(s.params.slideDuplicateClass)) {
        //                 var index = slide.index();
        //                 s.slideTo(index, speed, s.params.runCallbacksOnInit, true);
        //             }
        //         }
        //         if (s.params.hashnavWatchState) s.hashnav.attachEvents();
        //     },
        //     destroy: function () {
        //         if (s.params.hashnavWatchState) s.hashnav.attachEvents(true);
        //     }
        // };

        /*=========================
          History Api with fallback to Hashnav
          ===========================*/
        // s.history = {
        //     init: function () {
        //         if (!s.params.history) return;
        //         if (!window.history || !window.history.pushState) {
        //             s.params.history = false;
        //             s.params.hashnav = true;
        //             return;
        //         }
        //         s.history.initialized = true;
        //         this.paths = this.getPathValues();
        //         if (!this.paths.key && !this.paths.value) return;
        //         this.scrollToSlide(0, this.paths.value, s.params.runCallbacksOnInit);
        //         if (!s.params.replaceState) {
        //             window.addEventListener('popstate', this.setHistoryPopState);
        //         }
        //     },
        //     setHistoryPopState: function() {
        //         s.history.paths = s.history.getPathValues();
        //         s.history.scrollToSlide(s.params.speed, s.history.paths.value, false);
        //     },
        //     getPathValues: function() {
        //         var pathArray = window.location.pathname.slice(1).split('/');
        //         var total = pathArray.length;
        //         var key = pathArray[total - 2];
        //         var value = pathArray[total - 1];
        //         return { key: key, value: value };
        //     },
        //     setHistory: function (key, index) {
        //         if (!s.history.initialized || !s.params.history) return;
        //         var slide = s.slides.eq(index);
        //         var value = this.slugify(slide.attr('data-history'));
        //         if (!window.location.pathname.includes(key)) {
        //             value = key + '/' + value;
        //         }
        //         if (s.params.replaceState) {
        //             window.history.replaceState(null, null, value);
        //         } else {
        //             window.history.pushState(null, null, value);
        //         }
        //     },
        //     slugify: function(text) {
        //         return text.toString().toLowerCase()
        //             .replace(/\s+/g, '-')
        //             .replace(/[^\w\-]+/g, '')
        //             .replace(/\-\-+/g, '-')
        //             .replace(/^-+/, '')
        //             .replace(/-+$/, '');
        //     },
        //     scrollToSlide: function(speed, value, runCallbacks) {
        //         if (value) {
        //             for (var i = 0, length = s.slides.length; i < length; i++) {
        //                 var slide = s.slides.eq(i);
        //                 var slideHistory = this.slugify(slide.attr('data-history'));
        //                 if (slideHistory === value && !slide.hasClass(s.params.slideDuplicateClass)) {
        //                     var index = slide.index();
        //                     s.slideTo(index, speed, runCallbacks);
        //                 }
        //             }
        //         } else {
        //             s.slideTo(0, speed, runCallbacks);
        //         }
        //     }
        // };

        /*=========================
          Keyboard Control
          ===========================*/
        // function handleKeyboard(e) {
        //     if (e.originalEvent) e = e.originalEvent; //jquery fix
        //     var kc = e.keyCode || e.charCode;
        //     // Directions locks
        //     // if (!s.params.allowSwipeToNext && (s.isHorizontal() && kc === 39 || !s.isHorizontal() && kc === 40)) {
        //     //     return false;
        //     // }
        //     if (!s.params.allowSwipeToPrev && (s.isHorizontal() && kc === 37 || !s.isHorizontal() && kc === 38)) {
        //         return false;
        //     }
        //     if (e.shiftKey || e.altKey || e.ctrlKey || e.metaKey) {
        //         return;
        //     }
        //     if (document.activeElement && document.activeElement.nodeName && (document.activeElement.nodeName.toLowerCase() === 'input' || document.activeElement.nodeName.toLowerCase() === 'textarea')) {
        //         return;
        //     }
        //     if (kc === 37 || kc === 39 || kc === 38 || kc === 40) {
        //         var inView = false;
        //         //Check that swiper should be inside of visible area of window
        //         if (s.container.parents('.' + s.params.slideClass).length > 0 && s.container.parents('.' + s.params.slideActiveClass).length === 0) {
        //             return;
        //         }
        //         var windowScroll = {
        //             left: window.pageXOffset,
        //             top: window.pageYOffset
        //         };
        //         var windowWidth = window.innerWidth;
        //         var windowHeight = window.innerHeight;
        //         var swiperOffset = s.container.offset();
        //         if (s.rtl) swiperOffset.left = swiperOffset.left - s.container[0].scrollLeft;
        //         var swiperCoord = [
        //             [swiperOffset.left, swiperOffset.top],
        //             [swiperOffset.left + s.width, swiperOffset.top],
        //             [swiperOffset.left, swiperOffset.top + s.height],
        //             [swiperOffset.left + s.width, swiperOffset.top + s.height]
        //         ];
        //         for (var i = 0; i < swiperCoord.length; i++) {
        //             var point = swiperCoord[i];
        //             if (
        //                 point[0] >= windowScroll.left && point[0] <= windowScroll.left + windowWidth &&
        //                 point[1] >= windowScroll.top && point[1] <= windowScroll.top + windowHeight
        //             ) {
        //                 inView = true;
        //             }

        //         }
        //         if (!inView) return;
        //     }
        //     if (s.isHorizontal()) {
        //         if (kc === 37 || kc === 39) {
        //             if (e.preventDefault) e.preventDefault();
        //             else e.returnValue = false;
        //         }
        //         if ((kc === 39 && !s.rtl) || (kc === 37 && s.rtl)) s.slideNext();
        //         if ((kc === 37 && !s.rtl) || (kc === 39 && s.rtl)) s.slidePrev();
        //     }
        //     else {
        //         if (kc === 38 || kc === 40) {
        //             if (e.preventDefault) e.preventDefault();
        //             else e.returnValue = false;
        //         }
        //         if (kc === 40) s.slideNext();
        //         if (kc === 38) s.slidePrev();
        //     }
        // }
        // s.disableKeyboardControl = function () {
        //     s.params.keyboardControl = false;
        //     $(document).off('keydown', handleKeyboard);
        // };
        // s.enableKeyboardControl = function () {
        //     s.params.keyboardControl = true;
        //     $(document).on('keydown', handleKeyboard);
        // };

        //监听脱离可视区后取消自动播放
        s.enableObserveAutoPlay = function () {
            var clientHeight = document.documentElement.clientHeight;
            var containerHeight = s.container[0].offsetHeight;
            $(document).on('scroll', function (ev) {
                var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                var containerTop = getPos(s.container[0]).y;
                if (scrollTop > containerTop + containerHeight || containerTop + containerHeight > scrollTop + clientHeight) {
                    s.stopAutoplay();
                } else {
                    // if(!s.params.autoplayDisableOnInteraction){
                    s.startAutoplay();
                    // }
                }
            });

            function getPos(obj) {
                var x = obj.offsetLeft;
                var y = obj.offsetTop;
                while (obj.offsetParent) {
                    obj = obj.offsetParent;
                    x += obj.offsetLeft;
                    y += obj.offsetTop;
                }
                return {
                    x: x,
                    y: y
                };
            }
        };
        /*=========================
          Mousewheel Control
          ===========================*/
        // s.mousewheel = {
        //     event: false,
        //     lastScrollTime: (new window.Date()).getTime()
        // };
        // if (s.params.mousewheelControl) {

        //     s.mousewheel.event = (navigator.userAgent.indexOf('firefox') > -1) ?
        //         'DOMMouseScroll' :
        //         isEventSupported() ?
        //             'wheel' : 'mousewheel';
        // }

        // function isEventSupported() {
        //     var eventName = 'onwheel';
        //     var isSupported = eventName in document;

        //     if (!isSupported) {
        //         var element = document.createElement('div');
        //         element.setAttribute(eventName, 'return;');
        //         isSupported = typeof element[eventName] === 'function';
        //     }

        //     if (!isSupported &&
        //         document.implementation &&
        //         document.implementation.hasFeature &&
        //             // always returns true in newer browsers as per the standard.
        //             // @see http://dom.spec.whatwg.org/#dom-domimplementation-hasfeature
        //         document.implementation.hasFeature('', '') !== true ) {
        //         // This is the only way to test support for the `wheel` event in IE9+.
        //         isSupported = document.implementation.hasFeature('Events.wheel', '3.0');
        //     }

        //     return isSupported;
        // }

        // function handleMousewheel(e) {
        //     if (e.originalEvent) e = e.originalEvent; //jquery fix
        //     var delta = 0;
        //     var rtlFactor = s.rtl ? -1 : 1;

        //     var data = normalizeWheel( e );

        //     if (s.params.mousewheelForceToAxis) {
        //         if (s.isHorizontal()) {
        //             if (Math.abs(data.pixelX) > Math.abs(data.pixelY)) delta = data.pixelX * rtlFactor;
        //             else return;
        //         }
        //         else {
        //             if (Math.abs(data.pixelY) > Math.abs(data.pixelX)) delta = data.pixelY;
        //             else return;
        //         }
        //     }
        //     else {
        //         delta = Math.abs(data.pixelX) > Math.abs(data.pixelY) ? - data.pixelX * rtlFactor : - data.pixelY;
        //     }

        //     if (delta === 0) return;

        //     if (s.params.mousewheelInvert) delta = -delta;

        //     if (!s.params.freeMode) {
        //         if ((new window.Date()).getTime() - s.mousewheel.lastScrollTime > 60) {
        //             if (delta < 0) {
        //                 if ((!s.isEnd || s.params.loop) && !s.animating) {
        //                     s.slideNext();
        //                     s.emit('onScroll', s, e);
        //                 }
        //                 else if (s.params.mousewheelReleaseOnEdges) return true;
        //             }
        //             else {
        //                 if ((!s.isBeginning || s.params.loop) && !s.animating) {
        //                     s.slidePrev();
        //                     s.emit('onScroll', s, e);
        //                 }
        //                 else if (s.params.mousewheelReleaseOnEdges) return true;
        //             }
        //         }
        //         s.mousewheel.lastScrollTime = (new window.Date()).getTime();

        //     }
        //     else {
        //         //Freemode or scrollContainer:
        //         var position = s.getWrapperTranslate() + delta * s.params.mousewheelSensitivity;
        //         var wasBeginning = s.isBeginning,
        //             wasEnd = s.isEnd;

        //         if (position >= s.minTranslate()) position = s.minTranslate();
        //         if (position <= s.maxTranslate()) position = s.maxTranslate();

        //         s.setWrapperTransition(0);
        //         s.setWrapperTranslate(position);
        //         s.updateProgress();
        //         s.updateActiveIndex();

        //         if (!wasBeginning && s.isBeginning || !wasEnd && s.isEnd) {
        //             s.updateClasses();
        //         }

        //         if (s.params.freeModeSticky) {
        //             clearTimeout(s.mousewheel.timeout);
        //             s.mousewheel.timeout = setTimeout(function () {
        //                 s.slideReset();
        //             }, 300);
        //         }
        //         else {
        //             if (s.params.lazyLoading && s.lazy) {
        //                 s.lazy.load();
        //             }
        //         }
        //         // Emit event
        //         s.emit('onScroll', s, e);

        //         // Stop autoplay
        //         if (s.params.autoplay && s.params.autoplayDisableOnInteraction) s.stopAutoplay();

        //         // Return page scroll on edge positions
        //         if (position === 0 || position === s.maxTranslate()) return;
        //     }

        //     if (e.preventDefault) e.preventDefault();
        //     else e.returnValue = false;
        //     return false;
        // }
        // s.disableMousewheelControl = function () {
        //     if (!s.mousewheel.event) return false;
        //     var target = s.container;
        //     if (s.params.mousewheelEventsTarged !== 'container') {
        //         target = $(s.params.mousewheelEventsTarged);
        //     }
        //     target.off(s.mousewheel.event, handleMousewheel);
        //     return true;
        // };

        // s.enableMousewheelControl = function () {
        //     if (!s.mousewheel.event) return false;
        //     var target = s.container;
        //     if (s.params.mousewheelEventsTarged !== 'container') {
        //         target = $(s.params.mousewheelEventsTarged);
        //     }
        //     target.on(s.mousewheel.event, handleMousewheel);
        //     return true;
        // };

        /**
         * Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is
         * complicated, thus this doc is long and (hopefully) detailed enough to answer
         * your questions.
         *
         * If you need to react to the mouse wheel in a predictable way, this code is
         * like your bestest friend. * hugs *
         *
         * As of today, there are 4 DOM event types you can listen to:
         *
         *   'wheel'                -- Chrome(31+), FF(17+), IE(9+)
         *   'mousewheel'           -- Chrome, IE(6+), Opera, Safari
         *   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!
         *   'DOMMouseScroll'       -- FF(0.9.7+) since 2003
         *
         * So what to do?  The is the best:
         *
         *   normalizeWheel.getEventType();
         *
         * In your event callback, use this code to get sane interpretation of the
         * deltas.  This code will return an object with properties:
         *
         *   spinX   -- normalized spin speed (use for zoom) - x plane
         *   spinY   -- " - y plane
         *   pixelX  -- normalized distance (to pixels) - x plane
         *   pixelY  -- " - y plane
         *
         * Wheel values are provided by the browser assuming you are using the wheel to
         * scroll a web page by a number of lines or pixels (or pages).  Values can vary
         * significantly on different platforms and browsers, forgetting that you can
         * scroll at different speeds.  Some devices (like trackpads) emit more events
         * at smaller increments with fine granularity, and some emit massive jumps with
         * linear speed or acceleration.
         *
         * This code does its best to normalize the deltas for you:
         *
         *   - spin is trying to normalize how far the wheel was spun (or trackpad
         *     dragged).  This is super useful for zoom support where you want to
         *     throw away the chunky scroll steps on the PC and make those equal to
         *     the slow and smooth tiny steps on the Mac. Key data: This code tries to
         *     resolve a single slow step on a wheel to 1.
         *
         *   - pixel is normalizing the desired scroll delta in pixel units.  You'll
         *     get the crazy differences between browsers, but at least it'll be in
         *     pixels!
         *
         *   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This
         *     should translate to positive value zooming IN, negative zooming OUT.
         *     This matches the newer 'wheel' event.
         *
         * Why are there spinX, spinY (or pixels)?
         *
         *   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn
         *     with a mouse.  It results in side-scrolling in the browser by default.
         *
         *   - spinY is what you expect -- it's the classic axis of a mouse wheel.
         *
         *   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and
         *     probably is by browsers in conjunction with fancy 3D controllers .. but
         *     you know.
         *
         * Implementation info:
         *
         * Examples of 'wheel' event if you scroll slowly (down) by one step with an
         * average mouse:
         *
         *   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)
         *   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)
         *   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)
         *   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)
         *   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)
         *
         * On the trackpad:
         *
         *   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)
         *   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)
         *
         * On other/older browsers.. it's more complicated as there can be multiple and
         * also missing delta values.
         *
         * The 'wheel' event is more standard:
         *
         * http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents
         *
         * The basics is that it includes a unit, deltaMode (pixels, lines, pages), and
         * deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain
         * backward compatibility with older events.  Those other values help us
         * better normalize spin speed.  Example of what the browsers provide:
         *
         *                          | event.wheelDelta | event.detail
         *        ------------------+------------------+--------------
         *          Safari v5/OS X  |       -120       |       0
         *          Safari v5/Win7  |       -120       |       0
         *         Chrome v17/OS X  |       -120       |       0
         *         Chrome v17/Win7  |       -120       |       0
         *                IE9/Win7  |       -120       |   undefined
         *         Firefox v4/OS X  |     undefined    |       1
         *         Firefox v4/Win7  |     undefined    |       3
         *
         */
        // function normalizeWheel( /*object*/ event ) /*object*/ {
        //     // Reasonable defaults
        //     var PIXEL_STEP = 10;
        //     var LINE_HEIGHT = 40;
        //     var PAGE_HEIGHT = 800;

        //     var sX = 0, sY = 0,       // spinX, spinY
        //         pX = 0, pY = 0;       // pixelX, pixelY

        //     // Legacy
        //     if( 'detail' in event ) {
        //         sY = event.detail;
        //     }
        //     if( 'wheelDelta' in event ) {
        //         sY = -event.wheelDelta / 120;
        //     }
        //     if( 'wheelDeltaY' in event ) {
        //         sY = -event.wheelDeltaY / 120;
        //     }
        //     if( 'wheelDeltaX' in event ) {
        //         sX = -event.wheelDeltaX / 120;
        //     }

        //     // side scrolling on FF with DOMMouseScroll
        //     if( 'axis' in event && event.axis === event.HORIZONTAL_AXIS ) {
        //         sX = sY;
        //         sY = 0;
        //     }

        //     pX = sX * PIXEL_STEP;
        //     pY = sY * PIXEL_STEP;

        //     if( 'deltaY' in event ) {
        //         pY = event.deltaY;
        //     }
        //     if( 'deltaX' in event ) {
        //         pX = event.deltaX;
        //     }

        //     if( (pX || pY) && event.deltaMode ) {
        //         if( event.deltaMode === 1 ) {          // delta in LINE units
        //             pX *= LINE_HEIGHT;
        //             pY *= LINE_HEIGHT;
        //         } else {                             // delta in PAGE units
        //             pX *= PAGE_HEIGHT;
        //             pY *= PAGE_HEIGHT;
        //         }
        //     }

        //     // Fall-back if spin cannot be determined
        //     if( pX && !sX ) {
        //         sX = (pX < 1) ? -1 : 1;
        //     }
        //     if( pY && !sY ) {
        //         sY = (pY < 1) ? -1 : 1;
        //     }

        //     return {
        //         spinX: sX,
        //         spinY: sY,
        //         pixelX: pX,
        //         pixelY: pY
        //     };
        // }

        /*=========================
          Parallax
          ===========================*/
        // function setParallaxTransform(el, progress) {
        //     el = $(el);
        //     var p, pX, pY;
        //     var rtlFactor = s.rtl ? -1 : 1;

        //     p = el.attr('data-swiper-parallax') || '0';
        //     pX = el.attr('data-swiper-parallax-x');
        //     pY = el.attr('data-swiper-parallax-y');
        //     if (pX || pY) {
        //         pX = pX || '0';
        //         pY = pY || '0';
        //     }
        //     else {
        //         if (s.isHorizontal()) {
        //             pX = p;
        //             pY = '0';
        //         }
        //         else {
        //             pY = p;
        //             pX = '0';
        //         }
        //     }

        //     if ((pX).indexOf('%') >= 0) {
        //         pX = parseInt(pX, 10) * progress * rtlFactor + '%';
        //     }
        //     else {
        //         pX = pX * progress * rtlFactor + 'px' ;
        //     }
        //     if ((pY).indexOf('%') >= 0) {
        //         pY = parseInt(pY, 10) * progress + '%';
        //     }
        //     else {
        //         pY = pY * progress + 'px' ;
        //     }

        //     el.transform('translate3d(' + pX + ', ' + pY + ',0px)');
        // }
        // s.parallax = {
        //     setTranslate: function () {
        //         s.container.children('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(){
        //             setParallaxTransform(this, s.progress);

        //         });
        //         s.slides.each(function () {
        //             var slide = $(this);
        //             slide.find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function () {
        //                 var progress = Math.min(Math.max(slide[0].progress, -1), 1);
        //                 setParallaxTransform(this, progress);
        //             });
        //         });
        //     },
        //     setTransition: function (duration) {
        //         if (typeof duration === 'undefined') duration = s.params.speed;
        //         s.container.find('[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]').each(function(){
        //             var el = $(this);
        //             var parallaxDuration = parseInt(el.attr('data-swiper-parallax-duration'), 10) || duration;
        //             if (duration === 0) parallaxDuration = 0;
        //             el.transition(parallaxDuration);
        //         });
        //     }
        // };


        /*=========================
          Zoom
          ===========================*/
        // s.zoom = {
        //     // "Global" Props
        //     scale: 1,
        //     currentScale: 1,
        //     isScaling: false,
        //     gesture: {
        //         slide: undefined,
        //         slideWidth: undefined,
        //         slideHeight: undefined,
        //         image: undefined,
        //         imageWrap: undefined,
        //         zoomMax: s.params.zoomMax
        //     },
        //     image: {
        //         isTouched: undefined,
        //         isMoved: undefined,
        //         currentX: undefined,
        //         currentY: undefined,
        //         minX: undefined,
        //         minY: undefined,
        //         maxX: undefined,
        //         maxY: undefined,
        //         width: undefined,
        //         height: undefined,
        //         startX: undefined,
        //         startY: undefined,
        //         touchesStart: {},
        //         touchesCurrent: {}
        //     },
        //     velocity: {
        //         x: undefined,
        //         y: undefined,
        //         prevPositionX: undefined,
        //         prevPositionY: undefined,
        //         prevTime: undefined
        //     },
        //     // Calc Scale From Multi-touches
        //     getDistanceBetweenTouches: function (e) {
        //         if (e.targetTouches.length < 2) return 1;
        //         var x1 = e.targetTouches[0].pageX,
        //             y1 = e.targetTouches[0].pageY,
        //             x2 = e.targetTouches[1].pageX,
        //             y2 = e.targetTouches[1].pageY;
        //         var distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
        //         return distance;
        //     },
        //     // Events
        //     onGestureStart: function (e) {
        //         var z = s.zoom;
        //         if (!s.support.gestures) {
        //             if (e.type !== 'touchstart' || e.type === 'touchstart' && e.targetTouches.length < 2) {
        //                 return;
        //             }
        //             z.gesture.scaleStart = z.getDistanceBetweenTouches(e);
        //         }
        //         if (!z.gesture.slide || !z.gesture.slide.length) {
        //             z.gesture.slide = $(this);
        //             if (z.gesture.slide.length === 0) z.gesture.slide = s.slides.eq(s.activeIndex);
        //             z.gesture.image = z.gesture.slide.find('img, svg, canvas');
        //             z.gesture.imageWrap = z.gesture.image.parent('.' + s.params.zoomContainerClass);
        //             z.gesture.zoomMax = z.gesture.imageWrap.attr('data-swiper-zoom') || s.params.zoomMax ;
        //             if (z.gesture.imageWrap.length === 0) {
        //                 z.gesture.image = undefined;
        //                 return;
        //             }
        //         }
        //         z.gesture.image.transition(0);
        //         z.isScaling = true;
        //     },
        //     onGestureChange: function (e) {
        //         var z = s.zoom;
        //         if (!s.support.gestures) {
        //             if (e.type !== 'touchmove' || e.type === 'touchmove' && e.targetTouches.length < 2) {
        //                 return;
        //             }
        //             z.gesture.scaleMove = z.getDistanceBetweenTouches(e);
        //         }
        //         if (!z.gesture.image || z.gesture.image.length === 0) return;
        //         if (s.support.gestures) {
        //             z.scale = e.scale * z.currentScale;
        //         }
        //         else {
        //             z.scale = (z.gesture.scaleMove / z.gesture.scaleStart) * z.currentScale;
        //         }
        //         if (z.scale > z.gesture.zoomMax) {
        //             z.scale = z.gesture.zoomMax - 1 + Math.pow((z.scale - z.gesture.zoomMax + 1), 0.5);
        //         }
        //         if (z.scale < s.params.zoomMin) {
        //             z.scale =  s.params.zoomMin + 1 - Math.pow((s.params.zoomMin - z.scale + 1), 0.5);
        //         }
        //         z.gesture.image.transform('translate3d(0,0,0) scale(' + z.scale + ')');
        //     },
        //     onGestureEnd: function (e) {
        //         var z = s.zoom;
        //         if (!s.support.gestures) {
        //             if (e.type !== 'touchend' || e.type === 'touchend' && e.changedTouches.length < 2) {
        //                 return;
        //             }
        //         }
        //         if (!z.gesture.image || z.gesture.image.length === 0) return;
        //         z.scale = Math.max(Math.min(z.scale, z.gesture.zoomMax), s.params.zoomMin);
        //         z.gesture.image.transition(s.params.speed).transform('translate3d(0,0,0) scale(' + z.scale + ')');
        //         z.currentScale = z.scale;
        //         z.isScaling = false;
        //         if (z.scale === 1) z.gesture.slide = undefined;
        //     },
        //     onTouchStart: function (s, e) {
        //         var z = s.zoom;
        //         if (!z.gesture.image || z.gesture.image.length === 0) return;
        //         if (z.image.isTouched) return;
        //         if (s.device.os === 'android') e.preventDefault();
        //         z.image.isTouched = true;
        //         z.image.touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;
        //         z.image.touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;
        //     },
        //     onTouchMove: function (e) {
        //         var z = s.zoom;
        //         if (!z.gesture.image || z.gesture.image.length === 0) return;
        //         s.allowClick = false;
        //         if (!z.image.isTouched || !z.gesture.slide) return;

        //         if (!z.image.isMoved) {
        //             z.image.width = z.gesture.image[0].offsetWidth;
        //             z.image.height = z.gesture.image[0].offsetHeight;
        //             z.image.startX = s.getTranslate(z.gesture.imageWrap[0], 'x') || 0;
        //             z.image.startY = s.getTranslate(z.gesture.imageWrap[0], 'y') || 0;
        //             z.gesture.slideWidth = z.gesture.slide[0].offsetWidth;
        //             z.gesture.slideHeight = z.gesture.slide[0].offsetHeight;
        //             z.gesture.imageWrap.transition(0);
        //         }
        //         // Define if we need image drag
        //         var scaledWidth = z.image.width * z.scale;
        //         var scaledHeight = z.image.height * z.scale;

        //         if (scaledWidth < z.gesture.slideWidth && scaledHeight < z.gesture.slideHeight) return;

        //         z.image.minX = Math.min((z.gesture.slideWidth / 2 - scaledWidth / 2), 0);
        //         z.image.maxX = -z.image.minX;
        //         z.image.minY = Math.min((z.gesture.slideHeight / 2 - scaledHeight / 2), 0);
        //         z.image.maxY = -z.image.minY;

        //         z.image.touchesCurrent.x = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;
        //         z.image.touchesCurrent.y = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;

        //         if (!z.image.isMoved && !z.isScaling) {
        //             if (s.isHorizontal() &&
        //                 (Math.floor(z.image.minX) === Math.floor(z.image.startX) && z.image.touchesCurrent.x < z.image.touchesStart.x) ||
        //                 (Math.floor(z.image.maxX) === Math.floor(z.image.startX) && z.image.touchesCurrent.x > z.image.touchesStart.x)
        //                 ) {
        //                 z.image.isTouched = false;
        //                 return;
        //             }
        //             else if (!s.isHorizontal() &&
        //                 (Math.floor(z.image.minY) === Math.floor(z.image.startY) && z.image.touchesCurrent.y < z.image.touchesStart.y) ||
        //                 (Math.floor(z.image.maxY) === Math.floor(z.image.startY) && z.image.touchesCurrent.y > z.image.touchesStart.y)
        //                 ) {
        //                 z.image.isTouched = false;
        //                 return;
        //             }
        //         }
        //         e.preventDefault();
        //         e.stopPropagation();

        //         z.image.isMoved = true;
        //         z.image.currentX = z.image.touchesCurrent.x - z.image.touchesStart.x + z.image.startX;
        //         z.image.currentY = z.image.touchesCurrent.y - z.image.touchesStart.y + z.image.startY;

        //         if (z.image.currentX < z.image.minX) {
        //             z.image.currentX =  z.image.minX + 1 - Math.pow((z.image.minX - z.image.currentX + 1), 0.8);
        //         }
        //         if (z.image.currentX > z.image.maxX) {
        //             z.image.currentX = z.image.maxX - 1 + Math.pow((z.image.currentX - z.image.maxX + 1), 0.8);
        //         }

        //         if (z.image.currentY < z.image.minY) {
        //             z.image.currentY =  z.image.minY + 1 - Math.pow((z.image.minY - z.image.currentY + 1), 0.8);
        //         }
        //         if (z.image.currentY > z.image.maxY) {
        //             z.image.currentY = z.image.maxY - 1 + Math.pow((z.image.currentY - z.image.maxY + 1), 0.8);
        //         }

        //         //Velocity
        //         if (!z.velocity.prevPositionX) z.velocity.prevPositionX = z.image.touchesCurrent.x;
        //         if (!z.velocity.prevPositionY) z.velocity.prevPositionY = z.image.touchesCurrent.y;
        //         if (!z.velocity.prevTime) z.velocity.prevTime = Date.now();
        //         z.velocity.x = (z.image.touchesCurrent.x - z.velocity.prevPositionX) / (Date.now() - z.velocity.prevTime) / 2;
        //         z.velocity.y = (z.image.touchesCurrent.y - z.velocity.prevPositionY) / (Date.now() - z.velocity.prevTime) / 2;
        //         if (Math.abs(z.image.touchesCurrent.x - z.velocity.prevPositionX) < 2) z.velocity.x = 0;
        //         if (Math.abs(z.image.touchesCurrent.y - z.velocity.prevPositionY) < 2) z.velocity.y = 0;
        //         z.velocity.prevPositionX = z.image.touchesCurrent.x;
        //         z.velocity.prevPositionY = z.image.touchesCurrent.y;
        //         z.velocity.prevTime = Date.now();

        //         z.gesture.imageWrap.transform('translate3d(' + z.image.currentX + 'px, ' + z.image.currentY + 'px,0)');
        //     },
        //     onTouchEnd: function (s, e) {
        //         var z = s.zoom;
        //         if (!z.gesture.image || z.gesture.image.length === 0) return;
        //         if (!z.image.isTouched || !z.image.isMoved) {
        //             z.image.isTouched = false;
        //             z.image.isMoved = false;
        //             return;
        //         }
        //         z.image.isTouched = false;
        //         z.image.isMoved = false;
        //         var momentumDurationX = 300;
        //         var momentumDurationY = 300;
        //         var momentumDistanceX = z.velocity.x * momentumDurationX;
        //         var newPositionX = z.image.currentX + momentumDistanceX;
        //         var momentumDistanceY = z.velocity.y * momentumDurationY;
        //         var newPositionY = z.image.currentY + momentumDistanceY;

        //         //Fix duration
        //         if (z.velocity.x !== 0) momentumDurationX = Math.abs((newPositionX - z.image.currentX) / z.velocity.x);
        //         if (z.velocity.y !== 0) momentumDurationY = Math.abs((newPositionY - z.image.currentY) / z.velocity.y);
        //         var momentumDuration = Math.max(momentumDurationX, momentumDurationY);

        //         z.image.currentX = newPositionX;
        //         z.image.currentY = newPositionY;

        //         // Define if we need image drag
        //         var scaledWidth = z.image.width * z.scale;
        //         var scaledHeight = z.image.height * z.scale;
        //         z.image.minX = Math.min((z.gesture.slideWidth / 2 - scaledWidth / 2), 0);
        //         z.image.maxX = -z.image.minX;
        //         z.image.minY = Math.min((z.gesture.slideHeight / 2 - scaledHeight / 2), 0);
        //         z.image.maxY = -z.image.minY;
        //         z.image.currentX = Math.max(Math.min(z.image.currentX, z.image.maxX), z.image.minX);
        //         z.image.currentY = Math.max(Math.min(z.image.currentY, z.image.maxY), z.image.minY);

        //         z.gesture.imageWrap.transition(momentumDuration).transform('translate3d(' + z.image.currentX + 'px, ' + z.image.currentY + 'px,0)');
        //     },
        //     onTransitionEnd: function (s) {
        //         var z = s.zoom;
        //         if (z.gesture.slide && s.previousIndex !== s.activeIndex) {
        //             z.gesture.image.transform('translate3d(0,0,0) scale(1)');
        //             z.gesture.imageWrap.transform('translate3d(0,0,0)');
        //             z.gesture.slide = z.gesture.image = z.gesture.imageWrap = undefined;
        //             z.scale = z.currentScale = 1;
        //         }
        //     },
        //     // Toggle Zoom
        //     toggleZoom: function (s, e) {
        //         var z = s.zoom;
        //         if (!z.gesture.slide) {
        //             z.gesture.slide = s.clickedSlide ? $(s.clickedSlide) : s.slides.eq(s.activeIndex);
        //             z.gesture.image = z.gesture.slide.find('img, svg, canvas');
        //             z.gesture.imageWrap = z.gesture.image.parent('.' + s.params.zoomContainerClass);
        //         }
        //         if (!z.gesture.image || z.gesture.image.length === 0) return;

        //         var touchX, touchY, offsetX, offsetY, diffX, diffY, translateX, translateY, imageWidth, imageHeight, scaledWidth, scaledHeight, translateMinX, translateMinY, translateMaxX, translateMaxY, slideWidth, slideHeight;

        //         if (typeof z.image.touchesStart.x === 'undefined' && e) {
        //             touchX = e.type === 'touchend' ? e.changedTouches[0].pageX : e.pageX;
        //             touchY = e.type === 'touchend' ? e.changedTouches[0].pageY : e.pageY;
        //         }
        //         else {
        //             touchX = z.image.touchesStart.x;
        //             touchY = z.image.touchesStart.y;
        //         }

        //         if (z.scale && z.scale !== 1) {
        //             // Zoom Out
        //             z.scale = z.currentScale = 1;
        //             z.gesture.imageWrap.transition(300).transform('translate3d(0,0,0)');
        //             z.gesture.image.transition(300).transform('translate3d(0,0,0) scale(1)');
        //             z.gesture.slide = undefined;
        //         }
        //         else {
        //             // Zoom In
        //             z.scale = z.currentScale = z.gesture.imageWrap.attr('data-swiper-zoom') || s.params.zoomMax;
        //             if (e) {
        //                 slideWidth = z.gesture.slide[0].offsetWidth;
        //                 slideHeight = z.gesture.slide[0].offsetHeight;
        //                 offsetX = z.gesture.slide.offset().left;
        //                 offsetY = z.gesture.slide.offset().top;
        //                 diffX = offsetX + slideWidth/2 - touchX;
        //                 diffY = offsetY + slideHeight/2 - touchY;

        //                 imageWidth = z.gesture.image[0].offsetWidth;
        //                 imageHeight = z.gesture.image[0].offsetHeight;
        //                 scaledWidth = imageWidth * z.scale;
        //                 scaledHeight = imageHeight * z.scale;

        //                 translateMinX = Math.min((slideWidth / 2 - scaledWidth / 2), 0);
        //                 translateMinY = Math.min((slideHeight / 2 - scaledHeight / 2), 0);
        //                 translateMaxX = -translateMinX;
        //                 translateMaxY = -translateMinY;

        //                 translateX = diffX * z.scale;
        //                 translateY = diffY * z.scale;

        //                 if (translateX < translateMinX) {
        //                     translateX =  translateMinX;
        //                 }
        //                 if (translateX > translateMaxX) {
        //                     translateX = translateMaxX;
        //                 }

        //                 if (translateY < translateMinY) {
        //                     translateY =  translateMinY;
        //                 }
        //                 if (translateY > translateMaxY) {
        //                     translateY = translateMaxY;
        //                 }
        //             }
        //             else {
        //                 translateX = 0;
        //                 translateY = 0;
        //             }
        //             z.gesture.imageWrap.transition(300).transform('translate3d(' + translateX + 'px, ' + translateY + 'px,0)');
        //             z.gesture.image.transition(300).transform('translate3d(0,0,0) scale(' + z.scale + ')');
        //         }
        //     },
        //     // Attach/Detach Events
        //     attachEvents: function (detach) {
        //         var action = detach ? 'off' : 'on';

        //         if (s.params.zoom) {
        //             var target = s.slides;
        //             var passiveListener = s.touchEvents.start === 'touchstart' && s.support.passiveListener && s.params.passiveListeners ? {passive: true, capture: false} : false;
        //             // Scale image
        //             if (s.support.gestures) {
        //                 s.slides[action]('gesturestart', s.zoom.onGestureStart, passiveListener);
        //                 s.slides[action]('gesturechange', s.zoom.onGestureChange, passiveListener);
        //                 s.slides[action]('gestureend', s.zoom.onGestureEnd, passiveListener);
        //             }
        //             else if (s.touchEvents.start === 'touchstart') {
        //                 s.slides[action](s.touchEvents.start, s.zoom.onGestureStart, passiveListener);
        //                 s.slides[action](s.touchEvents.move, s.zoom.onGestureChange, passiveListener);
        //                 s.slides[action](s.touchEvents.end, s.zoom.onGestureEnd, passiveListener);
        //             }

        //             // Move image
        //             s[action]('touchStart', s.zoom.onTouchStart);
        //             s.slides.each(function (index, slide){
        //                 if ($(slide).find('.' + s.params.zoomContainerClass).length > 0) {
        //                     $(slide)[action](s.touchEvents.move, s.zoom.onTouchMove);
        //                 }
        //             });
        //             s[action]('touchEnd', s.zoom.onTouchEnd);

        //             // Scale Out
        //             s[action]('transitionEnd', s.zoom.onTransitionEnd);
        //             if (s.params.zoomToggle) {
        //                 s.on('doubleTap', s.zoom.toggleZoom);
        //             }
        //         }
        //     },
        //     init: function () {
        //         s.zoom.attachEvents();
        //     },
        //     destroy: function () {
        //         s.zoom.attachEvents(true);
        //     }
        // };

        /*=========================
          Plugins API. Collect all and init all plugins
          ===========================*/
        s._plugins = [];
        for (var plugin in s.plugins) {
            var p = s.plugins[plugin](s, s.params[plugin]);
            if (p) s._plugins.push(p);
        }
        // Method to call all plugins event/method
        s.callPlugins = function (eventName) {
            for (var i = 0; i < s._plugins.length; i++) {
                if (eventName in s._plugins[i]) {
                    s._plugins[i][eventName](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
                }
            }
        };

        /*=========================
          Events/Callbacks/Plugins Emitter
          ===========================*/
        function normalizeEventName(eventName) {
            if (eventName.indexOf('on') !== 0) {
                if (eventName[0] !== eventName[0].toUpperCase()) {
                    eventName = 'on' + eventName[0].toUpperCase() + eventName.substring(1);
                } else {
                    eventName = 'on' + eventName;
                }
            }
            return eventName;
        }
        s.emitterEventListeners = {};
        s.emit = function (eventName) {
            // Trigger callbacks
            if (s.params[eventName]) {
                s.params[eventName](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
            }
            var i;
            // Trigger events
            if (s.emitterEventListeners[eventName]) {
                for (i = 0; i < s.emitterEventListeners[eventName].length; i++) {
                    s.emitterEventListeners[eventName][i](arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
                }
            }
            // Trigger plugins
            if (s.callPlugins) s.callPlugins(eventName, arguments[1], arguments[2], arguments[3], arguments[4], arguments[5]);
        };
        s.on = function (eventName, handler) {
            eventName = normalizeEventName(eventName);
            if (!s.emitterEventListeners[eventName]) s.emitterEventListeners[eventName] = [];
            s.emitterEventListeners[eventName].push(handler);
            return s;
        };
        s.off = function (eventName, handler) {
            var i;
            eventName = normalizeEventName(eventName);
            if (typeof handler === 'undefined') {
                // Remove all handlers for such event
                s.emitterEventListeners[eventName] = [];
                return s;
            }
            if (!s.emitterEventListeners[eventName] || s.emitterEventListeners[eventName].length === 0) return;
            for (i = 0; i < s.emitterEventListeners[eventName].length; i++) {
                if (s.emitterEventListeners[eventName][i] === handler) s.emitterEventListeners[eventName].splice(i, 1);
            }
            return s;
        };
        // s.once = function(eventName, handler) {
        //     eventName = normalizeEventName(eventName);
        //     var _handler = function() {
        //         handler(arguments[0], arguments[1], arguments[2], arguments[3], arguments[4]);
        //         s.off(eventName, _handler);
        //     };
        //     s.on(eventName, _handler);
        //     return s;
        // };

        // Accessibility tools
        // s.a11y = {
        //     makeFocusable: function ($el) {
        //         $el.attr('tabIndex', '0');
        //         return $el;
        //     },
        //     addRole: function ($el, role) {
        //         $el.attr('role', role);
        //         return $el;
        //     },

        //     addLabel: function ($el, label) {
        //         $el.attr('aria-label', label);
        //         return $el;
        //     },

        //     disable: function ($el) {
        //         $el.attr('aria-disabled', true);
        //         return $el;
        //     },

        //     enable: function ($el) {
        //         $el.attr('aria-disabled', false);
        //         return $el;
        //     },

        //     onEnterKey: function (event) {
        //         if (event.keyCode !== 13) return;
        //         if ($(event.target).is(s.params.nextButton)) {
        //             s.onClickNext(event);
        //             if (s.isEnd) {
        //                 s.a11y.notify(s.params.lastSlideMessage);
        //             }
        //             else {
        //                 s.a11y.notify(s.params.nextSlideMessage);
        //             }
        //         }
        //         else if ($(event.target).is(s.params.prevButton)) {
        //             s.onClickPrev(event);
        //             if (s.isBeginning) {
        //                 s.a11y.notify(s.params.firstSlideMessage);
        //             }
        //             else {
        //                 s.a11y.notify(s.params.prevSlideMessage);
        //             }
        //         }
        //         if ($(event.target).is('.' + s.params.bulletClass)) {
        //             $(event.target)[0].click();
        //         }
        //     },

        //     liveRegion: $('<span class="' + s.params.notificationClass + '" aria-live="assertive" aria-atomic="true"></span>'),

        //     notify: function (message) {
        //         var notification = s.a11y.liveRegion;
        //         if (notification.length === 0) return;
        //         notification.html('');
        //         notification.html(message);
        //     },
        //     init: function () {
        //         // Setup accessibility
        //         if (s.params.nextButton && s.nextButton && s.nextButton.length > 0) {
        //             s.a11y.makeFocusable(s.nextButton);
        //             s.a11y.addRole(s.nextButton, 'button');
        //             s.a11y.addLabel(s.nextButton, s.params.nextSlideMessage);
        //         }
        //         if (s.params.prevButton && s.prevButton && s.prevButton.length > 0) {
        //             s.a11y.makeFocusable(s.prevButton);
        //             s.a11y.addRole(s.prevButton, 'button');
        //             s.a11y.addLabel(s.prevButton, s.params.prevSlideMessage);
        //         }

        //         $(s.container).append(s.a11y.liveRegion);
        //     },
        //     initPagination: function () {
        //         if (s.params.pagination && s.params.paginationClickable && s.bullets && s.bullets.length) {
        //             s.bullets.each(function () {
        //                 var bullet = $(this);
        //                 s.a11y.makeFocusable(bullet);
        //                 s.a11y.addRole(bullet, 'button');
        //                 s.a11y.addLabel(bullet, s.params.paginationBulletMessage.replace(/{{index}}/, bullet.index() + 1));
        //             });
        //         }
        //     },
        //     destroy: function () {
        //         if (s.a11y.liveRegion && s.a11y.liveRegion.length > 0) s.a11y.liveRegion.remove();
        //     }
        // };


        /*=========================
          Init/Destroy
          ===========================*/
        s.init = function () {
            if (s.params.loop) s.createLoop();
            s.updateContainerSize();
            s.updateSlidesSize();
            s.updatePagination();
            // if (s.params.scrollbar && s.scrollbar) {
            //     s.scrollbar.set();
            //     if (s.params.scrollbarDraggable) {
            //         s.scrollbar.enableDraggable();
            //     }
            // }
            // if (s.params.effect !== 'slide' && s.effects[s.params.effect]) {
            //     if (!s.params.loop) s.updateProgress();
            //     s.effects[s.params.effect].setTranslate();
            // }
            if (s.params.loop) {
                s.slideTo(s.params.initialSlide + s.loopedSlides, 0, s.params.runCallbacksOnInit);
            } else {
                s.slideTo(s.params.initialSlide, 0, s.params.runCallbacksOnInit);
                if (s.params.initialSlide === 0) {
                    // if (s.parallax && s.params.parallax) s.parallax.setTranslate();
                    if (s.lazy && s.params.lazyLoading) {
                        s.lazy.load();
                        s.lazy.initialImageLoaded = true;
                    }
                }
            }
            s.attachEvents();
            // if (s.params.observer && s.support.observer) {
            //     s.initObservers();
            // }
            // if (s.params.preloadImages && !s.params.lazyLoading) {
            //     s.preloadImages();
            // }
            // if (s.params.zoom && s.zoom) {
            //     s.zoom.init();
            // }
            if (s.params.autoplay) {
                s.startAutoplay();
            }
            if (s.params.observeAutoPlay) {
                if (s.enableObserveAutoPlay) s.enableObserveAutoPlay();
            }
            // if (s.params.keyboardControl) {
            //     if (s.enableKeyboardControl) s.enableKeyboardControl();
            // }
            // if (s.params.mousewheelControl) {
            //     if (s.enableMousewheelControl) s.enableMousewheelControl();
            // }
            // Deprecated hashnavReplaceState changed to replaceState for use in hashnav and history
            // if (s.params.hashnavReplaceState) {
            //     s.params.replaceState = s.params.hashnavReplaceState;
            // }
            // if (s.params.history) {
            //     if (s.history) s.history.init();
            // }
            // if (s.params.hashnav) {
            //     if (s.hashnav) s.hashnav.init();
            // }
            // if (s.params.a11y && s.a11y) s.a11y.init();
            s.emit('onInit', s);
        };

        // Cleanup dynamic styles
        s.cleanupStyles = function () {
            // Container
            s.container.removeClass(s.classNames.join(' ')).removeAttr('style');

            // Wrapper
            s.wrapper.removeAttr('style');

            // Slides
            if (s.slides && s.slides.length) {
                s.slides.removeClass([s.params.slideVisibleClass, s.params.slideActiveClass, s.params.slideNextClass, s.params.slidePrevClass].join(' ')).removeAttr('style').removeAttr('data-swiper-column').removeAttr('data-swiper-row');
            }

            // Pagination/Bullets
            if (s.paginationContainer && s.paginationContainer.length) {
                s.paginationContainer.removeClass(s.params.paginationHiddenClass);
            }
            if (s.bullets && s.bullets.length) {
                s.bullets.removeClass(s.params.bulletActiveClass);
            }

            // Buttons
            // if (s.params.prevButton) $(s.params.prevButton).removeClass(s.params.buttonDisabledClass);
            // if (s.params.nextButton) $(s.params.nextButton).removeClass(s.params.buttonDisabledClass);

            // Scrollbar
            // if (s.params.scrollbar && s.scrollbar) {
            //     if (s.scrollbar.track && s.scrollbar.track.length) s.scrollbar.track.removeAttr('style');
            //     if (s.scrollbar.drag && s.scrollbar.drag.length) s.scrollbar.drag.removeAttr('style');
            // }
        };

        // Destroy
        s.destroy = function (deleteInstance, cleanupStyles) {
            // Detach evebts
            s.detachEvents();
            // Stop autoplay
            s.stopAutoplay();
            // Disable draggable
            // if (s.params.scrollbar && s.scrollbar) {
            //     if (s.params.scrollbarDraggable) {
            //         s.scrollbar.disableDraggable();
            //     }
            // }
            // Destroy loop
            if (s.params.loop) {
                s.destroyLoop();
            }
            // Cleanup styles
            if (cleanupStyles) {
                s.cleanupStyles();
            }
            // Disconnect observer
            // s.disconnectObservers();

            // Destroy zoom
            // if (s.params.zoom && s.zoom) {
            //     s.zoom.destroy();
            // }
            // Disable keyboard/mousewheel
            // if (s.params.keyboardControl) {
            //     if (s.disableKeyboardControl) s.disableKeyboardControl();
            // }
            // if (s.params.mousewheelControl) {
            //     if (s.disableMousewheelControl) s.disableMousewheelControl();
            // }
            // Disable a11y
            // if (s.params.a11y && s.a11y) s.a11y.destroy();
            // Delete history popstate
            // if (s.params.history && !s.params.replaceState) {
            //     window.removeEventListener('popstate', s.history.setHistoryPopState);
            // }
            // if (s.params.hashnav && s.hashnav)  {
            //     s.hashnav.destroy();
            // }
            // Destroy callback
            s.emit('onDestroy');
            // Delete instance
            if (deleteInstance !== false) s = null;
        };

        s.init();

        // Return swiper instance
        return s;
    };

    /*==================================================
        Prototype
    ====================================================*/
    Swiper.prototype = {
        // isSafari: (function() {
        //     var ua = navigator.userAgent.toLowerCase();
        //     return (ua.indexOf('safari') >= 0 && ua.indexOf('chrome') < 0 && ua.indexOf('android') < 0);
        // })(),
        // isUiWebView: /(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),
        // isArray: function(arr) {
        //     return Object.prototype.toString.apply(arr) === '[object Array]';
        // },
        /*==================================================
        Browser
        ====================================================*/
        browser: {
            // ie: window.navigator.pointerEnabled || window.navigator.msPointerEnabled,
            // ieTouch: (window.navigator.msPointerEnabled && window.navigator.msMaxTouchPoints > 1) || (window.navigator.pointerEnabled && window.navigator.maxTouchPoints > 1),
            // lteIE9: (function() {
            //     // create temporary DIV
            //     var div = document.createElement('div');
            //     // add content to tmp DIV which is wrapped into the IE HTML conditional statement
            //     div.innerHTML = '<!--[if lte IE 9]><i></i><![endif]-->';
            //     // return true / false value based on what will browser render
            //     return div.getElementsByTagName('i').length === 1;
            // })()
        },
        /*==================================================
        Devices
        ====================================================*/
        device: function () {
            var ua = navigator.userAgent;
            var android = ua.match(/(Android);?[\s\/]+([\d.]+)?/);
            var ipad = ua.match(/(iPad).*OS\s([\d_]+)/);
            var ipod = ua.match(/(iPod)(.*OS\s([\d_]+))?/);
            var iphone = !ipad && ua.match(/(iPhone\sOS)\s([\d_]+)/);
            return {
                ios: ipad || iphone || ipod,
                android: android
            };
        }(),
        /*==================================================
        Feature Detection
        ====================================================*/
        support: {
            touch: window.Modernizr && Modernizr.touch === true || function () {
                return !!('ontouchstart' in window || window.DocumentTouch && document instanceof DocumentTouch);
            }(),

            transforms3d: window.Modernizr && Modernizr.csstransforms3d === true || function () {
                var div = document.createElement('div').style;
                return 'webkitPerspective' in div || 'MozPerspective' in div || 'OPerspective' in div || 'MsPerspective' in div || 'perspective' in div;
            }(),

            flexbox: function () {
                var div = document.createElement('div').style;
                var styles = 'alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient'.split(' ');
                for (var i = 0; i < styles.length; i++) {
                    if (styles[i] in div) return true;
                }
            }(),

            observer: function () {
                return 'MutationObserver' in window || 'WebkitMutationObserver' in window;
            }(),

            passiveListener: function () {
                var supportsPassive = false;
                try {
                    var opts = Object.defineProperty({}, 'passive', {
                        get: function get() {
                            supportsPassive = true;
                        }
                    });
                    window.addEventListener('testPassiveListener', null, opts);
                } catch (e) {}
                return supportsPassive;
            }(),

            gestures: function () {
                return 'ongesturestart' in window;
            }()
        },
        /*==================================================
        Plugins
        ====================================================*/
        plugins: {}
    };

    /*===========================
    Dom7 Library
    ===========================*/
    var Dom7 = function () {
        var Dom7 = function Dom7(arr) {
            var _this = this,
                i = 0;
            // Create array-like object
            for (i = 0; i < arr.length; i++) {
                _this[i] = arr[i];
            }
            _this.length = arr.length;
            // Return collection with methods
            return this;
        };
        var $ = function $(selector, context) {
            var arr = [],
                i = 0;
            if (selector && !context) {
                if (selector instanceof Dom7) {
                    return selector;
                }
            }
            if (selector) {
                // String
                if (typeof selector === 'string') {
                    var els,
                        tempParent,
                        html = selector.trim();
                    if (html.indexOf('<') >= 0 && html.indexOf('>') >= 0) {
                        var toCreate = 'div';
                        if (html.indexOf('<li') === 0) toCreate = 'ul';
                        if (html.indexOf('<tr') === 0) toCreate = 'tbody';
                        if (html.indexOf('<td') === 0 || html.indexOf('<th') === 0) toCreate = 'tr';
                        if (html.indexOf('<tbody') === 0) toCreate = 'table';
                        if (html.indexOf('<option') === 0) toCreate = 'select';
                        tempParent = document.createElement(toCreate);
                        tempParent.innerHTML = selector;
                        for (i = 0; i < tempParent.childNodes.length; i++) {
                            arr.push(tempParent.childNodes[i]);
                        }
                    } else {
                        if (!context && selector[0] === '#' && !selector.match(/[ .<>:~]/)) {
                            // Pure ID selector
                            els = [document.getElementById(selector.split('#')[1])];
                        } else {
                            // Other selectors
                            els = (context || document).querySelectorAll(selector);
                        }
                        for (i = 0; i < els.length; i++) {
                            if (els[i]) arr.push(els[i]);
                        }
                    }
                }
                // Node/element
                else if (selector.nodeType || selector === window || selector === document) {
                        arr.push(selector);
                    }
                    //Array of elements or instance of Dom
                    else if (selector.length > 0 && selector[0].nodeType) {
                            for (i = 0; i < selector.length; i++) {
                                arr.push(selector[i]);
                            }
                        }
            }
            return new Dom7(arr);
        };
        Dom7.prototype = {
            // Classes and attriutes
            addClass: function addClass(className) {
                if (typeof className === 'undefined') {
                    return this;
                }
                var classes = className.split(' ');
                for (var i = 0; i < classes.length; i++) {
                    for (var j = 0; j < this.length; j++) {
                        this[j].classList.add(classes[i]);
                    }
                }
                return this;
            },
            removeClass: function removeClass(className) {
                var classes = className.split(' ');
                for (var i = 0; i < classes.length; i++) {
                    for (var j = 0; j < this.length; j++) {
                        this[j].classList.remove(classes[i]);
                    }
                }
                return this;
            },
            hasClass: function hasClass(className) {
                if (!this[0]) return false;else return this[0].classList.contains(className);
            },
            // toggleClass: function(className) {
            //     var classes = className.split(' ');
            //     for (var i = 0; i < classes.length; i++) {
            //         for (var j = 0; j < this.length; j++) {
            //             this[j].classList.toggle(classes[i]);
            //         }
            //     }
            //     return this;
            // },
            attr: function attr(attrs, value) {
                if (arguments.length === 1 && typeof attrs === 'string') {
                    // Get attr
                    if (this[0]) return this[0].getAttribute(attrs);else return undefined;
                } else {
                    // Set attrs
                    for (var i = 0; i < this.length; i++) {
                        if (arguments.length === 2) {
                            // String
                            this[i].setAttribute(attrs, value);
                        } else {
                            // Object
                            for (var attrName in attrs) {
                                this[i][attrName] = attrs[attrName];
                                this[i].setAttribute(attrName, attrs[attrName]);
                            }
                        }
                    }
                    return this;
                }
            },
            removeAttr: function removeAttr(attr) {
                for (var i = 0; i < this.length; i++) {
                    this[i].removeAttribute(attr);
                }
                return this;
            },
            data: function data(key, value) {
                // if (typeof value === 'undefined') {
                //     // Get value
                //     if (this[0]) {
                //         var dataKey = this[0].getAttribute('data-' + key);
                //         if (dataKey) return dataKey;
                //         else if (this[0].dom7ElementDataStorage && (key in this[0].dom7ElementDataStorage)) return this[0].dom7ElementDataStorage[key];
                //         else return undefined;
                //     } else return undefined;
                // } else {
                // Set value
                for (var i = 0; i < this.length; i++) {
                    var el = this[i];
                    if (!el.dom7ElementDataStorage) el.dom7ElementDataStorage = {};
                    el.dom7ElementDataStorage[key] = value;
                }
                return this;
                // }
            },
            // Transforms
            transform: function transform(_transform) {
                for (var i = 0; i < this.length; i++) {
                    var elStyle = this[i].style;
                    elStyle.webkitTransform = elStyle.MsTransform = elStyle.msTransform = elStyle.MozTransform = elStyle.OTransform = elStyle.transform = _transform;
                }
                return this;
            },
            transition: function transition(duration) {
                if (typeof duration !== 'string') {
                    duration = duration + 'ms';
                }
                for (var i = 0; i < this.length; i++) {
                    var elStyle = this[i].style;
                    elStyle.webkitTransitionDuration = elStyle.MsTransitionDuration = elStyle.msTransitionDuration = elStyle.MozTransitionDuration = elStyle.OTransitionDuration = elStyle.transitionDuration = duration;
                }
                return this;
            },
            //Events
            on: function on(eventName, targetSelector, listener, capture) {
                function handleLiveEvent(e) {
                    var target = e.target;
                    if ($(target).is(targetSelector)) listener.call(target, e);else {
                        var parents = $(target).parents();
                        for (var k = 0; k < parents.length; k++) {
                            if ($(parents[k]).is(targetSelector)) listener.call(parents[k], e);
                        }
                    }
                }
                var events = eventName.split(' ');
                var i, j;
                for (i = 0; i < this.length; i++) {
                    if (typeof targetSelector === 'function' || targetSelector === false) {
                        // Usual events
                        if (typeof targetSelector === 'function') {
                            listener = arguments[1];
                            capture = arguments[2] || false;
                        }
                        for (j = 0; j < events.length; j++) {
                            this[i].addEventListener(events[j], listener, capture);
                        }
                    } else {
                        //Live events
                        for (j = 0; j < events.length; j++) {
                            if (!this[i].dom7LiveListeners) this[i].dom7LiveListeners = [];
                            this[i].dom7LiveListeners.push({ listener: listener, liveListener: handleLiveEvent });
                            this[i].addEventListener(events[j], handleLiveEvent, capture);
                        }
                    }
                }

                return this;
            },
            off: function off(eventName, targetSelector, listener, capture) {
                var events = eventName.split(' ');
                for (var i = 0; i < events.length; i++) {
                    for (var j = 0; j < this.length; j++) {
                        if (typeof targetSelector === 'function' || targetSelector === false) {
                            // Usual events
                            if (typeof targetSelector === 'function') {
                                listener = arguments[1];
                                capture = arguments[2] || false;
                            }
                            this[j].removeEventListener(events[i], listener, capture);
                        } else {
                            // Live event
                            if (this[j].dom7LiveListeners) {
                                for (var k = 0; k < this[j].dom7LiveListeners.length; k++) {
                                    if (this[j].dom7LiveListeners[k].listener === listener) {
                                        this[j].removeEventListener(events[i], this[j].dom7LiveListeners[k].liveListener, capture);
                                    }
                                }
                            }
                        }
                    }
                }
                return this;
            },
            // once: function(eventName, targetSelector, listener, capture) {
            //     var dom = this;
            //     if (typeof targetSelector === 'function') {
            //         targetSelector = false;
            //         listener = arguments[1];
            //         capture = arguments[2];
            //     }

            //     function proxy(e) {
            //         listener(e);
            //         dom.off(eventName, targetSelector, proxy, capture);
            //     }
            //     dom.on(eventName, targetSelector, proxy, capture);
            // },
            trigger: function trigger(eventName, eventData) {
                for (var i = 0; i < this.length; i++) {
                    var evt;
                    try {
                        evt = new window.CustomEvent(eventName, { detail: eventData, bubbles: true, cancelable: true });
                    } catch (e) {
                        evt = document.createEvent('Event');
                        evt.initEvent(eventName, true, true);
                        evt.detail = eventData;
                    }
                    this[i].dispatchEvent(evt);
                }
                return this;
            },
            transitionEnd: function transitionEnd(callback) {
                var events = ['webkitTransitionEnd', 'transitionend', 'oTransitionEnd', 'MSTransitionEnd', 'msTransitionEnd'],
                    i,
                    j,
                    dom = this;

                function fireCallBack(e) {
                    /*jshint validthis:true */
                    if (e.target !== this) return;
                    callback.call(this, e);
                    for (i = 0; i < events.length; i++) {
                        dom.off(events[i], fireCallBack);
                    }
                }
                if (callback) {
                    for (i = 0; i < events.length; i++) {
                        dom.on(events[i], fireCallBack);
                    }
                }
                return this;
            },
            // Sizing/Styles
            // width: function() {
            //     if (this[0] === window) {
            //         return window.innerWidth;
            //     } else {
            //         if (this.length > 0) {
            //             return parseFloat(this.css('width'));
            //         } else {
            //             return null;
            //         }
            //     }
            // },
            outerWidth: function outerWidth(includeMargins) {
                if (this.length > 0) {
                    if (includeMargins) return this[0].offsetWidth + parseFloat(this.css('margin-right')) + parseFloat(this.css('margin-left'));else return this[0].offsetWidth;
                } else return null;
            },
            // height: function() {
            //     if (this[0] === window) {
            //         return window.innerHeight;
            //     } else {
            //         if (this.length > 0) {
            //             return parseFloat(this.css('height'));
            //         } else {
            //             return null;
            //         }
            //     }
            // },
            outerHeight: function outerHeight(includeMargins) {
                if (this.length > 0) {
                    if (includeMargins) return this[0].offsetHeight + parseFloat(this.css('margin-top')) + parseFloat(this.css('margin-bottom'));else return this[0].offsetHeight;
                } else return null;
            },
            // offset: function() {
            //     if (this.length > 0) {
            //         var el = this[0];
            //         var box = el.getBoundingClientRect();
            //         var body = document.body;
            //         var clientTop = el.clientTop || body.clientTop || 0;
            //         var clientLeft = el.clientLeft || body.clientLeft || 0;
            //         var scrollTop = window.pageYOffset || el.scrollTop;
            //         var scrollLeft = window.pageXOffset || el.scrollLeft;
            //         return {
            //             top: box.top + scrollTop - clientTop,
            //             left: box.left + scrollLeft - clientLeft
            //         };
            //     } else {
            //         return null;
            //     }
            // },
            css: function css(props, value) {
                var i;
                if (arguments.length === 1) {
                    if (typeof props === 'string') {
                        if (this[0]) return window.getComputedStyle(this[0], null).getPropertyValue(props);
                    } else {
                        for (i = 0; i < this.length; i++) {
                            for (var prop in props) {
                                this[i].style[prop] = props[prop];
                            }
                        }
                        return this;
                    }
                }
                if (arguments.length === 2 && typeof props === 'string') {
                    for (i = 0; i < this.length; i++) {
                        this[i].style[props] = value;
                    }
                    return this;
                }
                return this;
            },

            //Dom manipulation
            each: function each(callback) {
                for (var i = 0; i < this.length; i++) {
                    callback.call(this[i], i, this[i]);
                }
                return this;
            },
            html: function html(_html) {
                if (typeof _html === 'undefined') {
                    return this[0] ? this[0].innerHTML : undefined;
                } else {
                    for (var i = 0; i < this.length; i++) {
                        this[i].innerHTML = _html;
                    }
                    return this;
                }
            },
            text: function text(_text) {
                if (typeof _text === 'undefined') {
                    if (this[0]) {
                        return this[0].textContent.trim();
                    } else return null;
                } else {
                    for (var i = 0; i < this.length; i++) {
                        this[i].textContent = _text;
                    }
                    return this;
                }
            },
            is: function is(selector) {
                if (!this[0]) return false;
                var compareWith, i;
                if (typeof selector === 'string') {
                    var el = this[0];
                    if (el === document) return selector === document;
                    if (el === window) return selector === window;

                    if (el.matches) return el.matches(selector);else if (el.webkitMatchesSelector) return el.webkitMatchesSelector(selector);else if (el.mozMatchesSelector) return el.mozMatchesSelector(selector);else if (el.msMatchesSelector) return el.msMatchesSelector(selector);else {
                        compareWith = $(selector);
                        for (i = 0; i < compareWith.length; i++) {
                            if (compareWith[i] === this[0]) return true;
                        }
                        return false;
                    }
                } else if (selector === document) return this[0] === document;else if (selector === window) return this[0] === window;else {
                    if (selector.nodeType || selector instanceof Dom7) {
                        compareWith = selector.nodeType ? [selector] : selector;
                        for (i = 0; i < compareWith.length; i++) {
                            if (compareWith[i] === this[0]) return true;
                        }
                        return false;
                    }
                    return false;
                }
            },
            index: function index() {
                if (this[0]) {
                    var child = this[0];
                    var i = 0;
                    while ((child = child.previousSibling) !== null) {
                        if (child.nodeType === 1) i++;
                    }
                    return i;
                } else return undefined;
            },
            eq: function eq(index) {
                if (typeof index === 'undefined') return this;
                var length = this.length;
                var returnIndex;
                if (index > length - 1) {
                    return new Dom7([]);
                }
                if (index < 0) {
                    returnIndex = length + index;
                    if (returnIndex < 0) return new Dom7([]);else return new Dom7([this[returnIndex]]);
                }
                return new Dom7([this[index]]);
            },
            insert: function insert(newChild, newIndex, nowIndex) {
                if (newIndex >= nowIndex) {
                    var i, j;
                    for (i = 0; i < this.length; i++) {

                        if (typeof newChild === 'string') {

                            var tempDiv = document.createElement('div');
                            tempDiv.innerHTML = newChild;
                            while (tempDiv.firstChild) {
                                if (newIndex > this[i].children.length) {
                                    this[i].appendChild(tempDiv.firstChild);
                                } else {
                                    this[i].insertBefore(tempDiv.firstChild, this[i].children[newIndex]);
                                }
                            }
                        } else if (newChild instanceof Dom7) {

                            for (j = 0; j < newChild.length; j++) {
                                this[i].appendChild(newChild[j]);
                            }
                        } else {
                            if (newIndex > this[i].children.length) {
                                this[i].appendChild(newChild);
                            } else {
                                this[i].insertBefore(newChild, this[i].children[newIndex]);
                            }
                        }
                    }
                    return this;
                } else {
                    var i, j;
                    for (i = 0; i < this.length; i++) {
                        if (typeof newChild === 'string') {

                            var tempDiv = document.createElement('div');
                            tempDiv.innerHTML = newChild;
                            for (j = tempDiv.childNodes.length - 1; j >= 0; j--) {
                                if (newIndex == 0) {
                                    this[i].insertBefore(tempDiv.childNodes[j], this[i].children[0]);
                                } else if (newIndex == nowIndex) {
                                    this[i].insertBefore(tempDiv.childNodes[j], this[i].children[nowIndex]);
                                } else {
                                    this[i].insertBefore(tempDiv.childNodes[j], this[i].children[newIndex]);
                                }
                            }
                        } else if (newChild instanceof Dom7) {
                            for (j = 0; j < newChild.length; j++) {
                                this[i].insertBefore(newChild[j], this[i].children[newIndex]);
                            }
                        } else {
                            this[i].insertBefore(newChild, this[i].children[newIndex]);
                        }
                    }
                    return this;
                }
            },
            append: function append(newChild) {
                var i, j;
                for (i = 0; i < this.length; i++) {
                    if (typeof newChild === 'string') {
                        var tempDiv = document.createElement('div');
                        tempDiv.innerHTML = newChild;
                        while (tempDiv.firstChild) {
                            this[i].appendChild(tempDiv.firstChild);
                        }
                    } else if (newChild instanceof Dom7) {
                        for (j = 0; j < newChild.length; j++) {
                            this[i].appendChild(newChild[j]);
                        }
                    } else {
                        this[i].appendChild(newChild);
                    }
                }
                return this;
            },
            prepend: function prepend(newChild) {
                var i, j;
                for (i = 0; i < this.length; i++) {
                    if (typeof newChild === 'string') {
                        var tempDiv = document.createElement('div');
                        tempDiv.innerHTML = newChild;
                        for (j = tempDiv.childNodes.length - 1; j >= 0; j--) {
                            this[i].insertBefore(tempDiv.childNodes[j], this[i].childNodes[0]);
                        }
                        // this[i].insertAdjacentHTML('afterbegin', newChild);
                    } else if (newChild instanceof Dom7) {
                        for (j = 0; j < newChild.length; j++) {
                            this[i].insertBefore(newChild[j], this[i].childNodes[0]);
                        }
                    } else {
                        this[i].insertBefore(newChild, this[i].childNodes[0]);
                    }
                }
                return this;
            },
            insertBefore: function insertBefore(selector) {
                var before = $(selector);
                for (var i = 0; i < this.length; i++) {
                    if (before.length === 1) {
                        before[0].parentNode.insertBefore(this[i], before[0]);
                    } else if (before.length > 1) {
                        for (var j = 0; j < before.length; j++) {
                            before[j].parentNode.insertBefore(this[i].cloneNode(true), before[j]);
                        }
                    }
                }
            },
            insertAfter: function insertAfter(selector) {
                var after = $(selector);
                for (var i = 0; i < this.length; i++) {
                    if (after.length === 1) {
                        after[0].parentNode.insertBefore(this[i], after[0].nextSibling);
                    } else if (after.length > 1) {
                        for (var j = 0; j < after.length; j++) {
                            after[j].parentNode.insertBefore(this[i].cloneNode(true), after[j].nextSibling);
                        }
                    }
                }
            },
            next: function next(selector) {
                if (this.length > 0) {
                    if (selector) {
                        if (this[0].nextElementSibling && $(this[0].nextElementSibling).is(selector)) return new Dom7([this[0].nextElementSibling]);else return new Dom7([]);
                    } else {
                        if (this[0].nextElementSibling) return new Dom7([this[0].nextElementSibling]);else return new Dom7([]);
                    }
                } else return new Dom7([]);
            },
            // nextAll: function(selector) {
            //     var nextEls = [];
            //     var el = this[0];
            //     if (!el) return new Dom7([]);
            //     while (el.nextElementSibling) {
            //         var next = el.nextElementSibling;
            //         if (selector) {
            //             if ($(next).is(selector)) nextEls.push(next);
            //         } else nextEls.push(next);
            //         el = next;
            //     }
            //     return new Dom7(nextEls);
            // },
            prev: function prev(selector) {
                if (this.length > 0) {
                    if (selector) {
                        if (this[0].previousElementSibling && $(this[0].previousElementSibling).is(selector)) return new Dom7([this[0].previousElementSibling]);else return new Dom7([]);
                    } else {
                        if (this[0].previousElementSibling) return new Dom7([this[0].previousElementSibling]);else return new Dom7([]);
                    }
                } else return new Dom7([]);
            },
            // prevAll: function(selector) {
            //     var prevEls = [];
            //     var el = this[0];
            //     if (!el) return new Dom7([]);
            //     while (el.previousElementSibling) {
            //         var prev = el.previousElementSibling;
            //         if (selector) {
            //             if ($(prev).is(selector)) prevEls.push(prev);
            //         } else prevEls.push(prev);
            //         el = prev;
            //     }
            //     return new Dom7(prevEls);
            // },
            // parent: function(selector) {
            //     var parents = [];
            //     for (var i = 0; i < this.length; i++) {
            //         if (selector) {
            //             if ($(this[i].parentNode).is(selector)) parents.push(this[i].parentNode);
            //         } else {
            //             parents.push(this[i].parentNode);
            //         }
            //     }
            //     return $($.unique(parents));
            // },
            parents: function parents(selector) {
                var parents = [];
                for (var i = 0; i < this.length; i++) {
                    var parent = this[i].parentNode;
                    while (parent) {
                        if (selector) {
                            if ($(parent).is(selector)) parents.push(parent);
                        } else {
                            parents.push(parent);
                        }
                        parent = parent.parentNode;
                    }
                }
                return $($.unique(parents));
            },
            find: function find(selector) {
                var foundElements = [];
                for (var i = 0; i < this.length; i++) {
                    var found = this[i].querySelectorAll(selector);
                    for (var j = 0; j < found.length; j++) {
                        foundElements.push(found[j]);
                    }
                }
                return new Dom7(foundElements);
            },
            children: function children(selector) {
                var children = [];
                for (var i = 0; i < this.length; i++) {
                    var childNodes = this[i].childNodes;

                    for (var j = 0; j < childNodes.length; j++) {
                        if (!selector) {
                            if (childNodes[j].nodeType === 1) children.push(childNodes[j]);
                        } else {
                            if (childNodes[j].nodeType === 1 && $(childNodes[j]).is(selector)) children.push(childNodes[j]);
                        }
                    }
                }
                return new Dom7($.unique(children));
            },
            remove: function remove() {
                for (var i = 0; i < this.length; i++) {
                    if (this[i].parentNode) this[i].parentNode.removeChild(this[i]);
                }
                return this;
            },
            add: function add() {
                var dom = this;
                var i, j;
                for (i = 0; i < arguments.length; i++) {
                    var toAdd = $(arguments[i]);
                    for (j = 0; j < toAdd.length; j++) {
                        dom[dom.length] = toAdd[j];
                        dom.length++;
                    }
                }
                return dom;
            }
        };
        $.fn = Dom7.prototype;
        $.unique = function (arr) {
            var unique = [];
            for (var i = 0; i < arr.length; i++) {
                if (unique.indexOf(arr[i]) === -1) unique.push(arr[i]);
            }
            return unique;
        };

        return $;
    }();

    /*===========================
     Get Dom libraries
     ===========================*/
    var swiperDomPlugins = ['jQuery', 'Zepto', 'Dom7'];
    for (var i = 0; i < swiperDomPlugins.length; i++) {
        if (window[swiperDomPlugins[i]]) {
            addLibraryPlugin(window[swiperDomPlugins[i]]);
        }
    }
    // Required DOM Plugins
    var domLib;
    if (typeof Dom7 === 'undefined') {
        domLib = window.Dom7 || window.Zepto || window.jQuery;
    } else {
        domLib = Dom7;
    }

    /*===========================
    Add .swiper plugin from Dom libraries
    ===========================*/
    function addLibraryPlugin(lib) {
        lib.fn.swiper = function (params) {
            var firstInstance;
            lib(this).each(function () {
                var s = new Swiper(this, params);
                if (!firstInstance) firstInstance = s;
            });
            return firstInstance;
        };
    }

    if (domLib) {
        if (!('transitionEnd' in domLib.fn)) {
            domLib.fn.transitionEnd = function (callback) {
                var events = ['webkitTransitionEnd', 'transitionend', 'oTransitionEnd', 'MSTransitionEnd', 'msTransitionEnd'],
                    i,
                    j,
                    dom = this;

                function fireCallBack(e) {
                    /*jshint validthis:true */
                    if (e.target !== this) return;
                    callback.call(this, e);
                    for (i = 0; i < events.length; i++) {
                        dom.off(events[i], fireCallBack);
                    }
                }
                if (callback) {
                    for (i = 0; i < events.length; i++) {
                        dom.on(events[i], fireCallBack);
                    }
                }
                return this;
            };
        }
        if (!('transform' in domLib.fn)) {
            domLib.fn.transform = function (transform) {
                for (var i = 0; i < this.length; i++) {
                    var elStyle = this[i].style;
                    elStyle.webkitTransform = elStyle.MsTransform = elStyle.msTransform = elStyle.MozTransform = elStyle.OTransform = elStyle.transform = transform;
                }
                return this;
            };
        }
        if (!('transition' in domLib.fn)) {
            domLib.fn.transition = function (duration) {
                if (typeof duration !== 'string') {
                    duration = duration + 'ms';
                }
                for (var i = 0; i < this.length; i++) {
                    var elStyle = this[i].style;
                    elStyle.webkitTransitionDuration = elStyle.MsTransitionDuration = elStyle.msTransitionDuration = elStyle.MozTransitionDuration = elStyle.OTransitionDuration = elStyle.transitionDuration = duration;
                }
                return this;
            };
        }
        if (!('outerWidth' in domLib.fn)) {
            domLib.fn.outerWidth = function (includeMargins) {
                if (this.length > 0) {
                    if (includeMargins) return this[0].offsetWidth + parseFloat(this.css('margin-right')) + parseFloat(this.css('margin-left'));else return this[0].offsetWidth;
                } else return null;
            };
        }
    }

    window.Swiper = Swiper;
})();
/*===========================
Swiper AMD Export
===========================*/
if (true) {
    module.exports = window.Swiper;
} else if (typeof define === 'function' && define.amd) {
    define([], function () {
        'use strict';

        return window.Swiper;
    });
}
//# sourceMappingURL=maps/swiper.js.map

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fastclick_js__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__zepto_js__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event_js__ = __webpack_require__(47);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__module_control_js__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__circle_js__ = __webpack_require__(46);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__extra_js__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_js__ = __webpack_require__(19);
/* unused harmony reexport default */
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_1__zepto_js__["a"]; });
/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_3__module_control_js__["a"]; });
/* unused harmony reexport FastClick */
/* unused harmony reexport Utils */
/* unused harmony reexport Zepto */
/* unused harmony reexport Page */
/* unused harmony reexport Event */








function init() {
  // 挂载全局命名空间，暴露 Circle.ready 函数与事件模块，
  // SINA_NEWS.event 模块阉割 showEvents 方法
  window.SINA_NEWS = window.SINA_NEWS || { ready: __WEBPACK_IMPORTED_MODULE_4__circle_js__["a" /* default */].ready, event: __WEBPACK_IMPORTED_MODULE_2__event_js__["a" /* event */] };

  __WEBPACK_IMPORTED_MODULE_5__extra_js__["a" /* default */].load();
}

init();



/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/*! Zepto 1.2.0
 * generated by @sina-mfe
 * modules: zepto event ajax form data callbacks deferred
 */
//     Zepto.js
//     (c) 2010-2016 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

var Zepto = function () {
  var undefined,
      key,
      $,
      classList,
      emptyArray = [],
      _concat = emptyArray.concat,
      _filter = emptyArray.filter,
      _slice = emptyArray.slice,
      document = window.document,
      elementDisplay = {},
      classCache = {},
      cssNumber = { 'column-count': 1, 'columns': 1, 'font-weight': 1, 'line-height': 1, 'opacity': 1, 'z-index': 1, 'zoom': 1 },
      fragmentRE = /^\s*<(\w+|!)[^>]*>/,
      singleTagRE = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
      tagExpanderRE = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,
      rootNodeRE = /^(?:body|html)$/i,
      capitalRE = /([A-Z])/g,


  // special attributes that should be get/set via method calls
  methodAttributes = ['val', 'css', 'html', 'text', 'data', 'width', 'height', 'offset'],
      adjacencyOperators = ['after', 'prepend', 'before', 'append'],
      table = document.createElement('table'),
      tableRow = document.createElement('tr'),
      containers = {
    'tr': document.createElement('tbody'),
    'tbody': table, 'thead': table, 'tfoot': table,
    'td': tableRow, 'th': tableRow,
    '*': document.createElement('div')
  },
      simpleSelectorRE = /^[\w-]*$/,
      class2type = {},
      toString = class2type.toString,
      zepto = {},
      camelize,
      uniq,
      tempParent = document.createElement('div'),
      propMap = {
    'tabindex': 'tabIndex',
    'readonly': 'readOnly',
    'for': 'htmlFor',
    'class': 'className',
    'maxlength': 'maxLength',
    'cellspacing': 'cellSpacing',
    'cellpadding': 'cellPadding',
    'rowspan': 'rowSpan',
    'colspan': 'colSpan',
    'usemap': 'useMap',
    'frameborder': 'frameBorder',
    'contenteditable': 'contentEditable'
  },
      isArray = Array.isArray || function (object) {
    return object instanceof Array;
  };

  zepto.matches = function (element, selector) {
    if (!selector || !element || element.nodeType !== 1) return false;
    var matchesSelector = element.matches || element.webkitMatchesSelector || element.mozMatchesSelector || element.oMatchesSelector || element.matchesSelector;
    if (matchesSelector) return matchesSelector.call(element, selector);
    // fall back to performing a selector:
    var match,
        parent = element.parentNode,
        temp = !parent;
    if (temp) (parent = tempParent).appendChild(element);
    match = ~zepto.qsa(parent, selector).indexOf(element);
    temp && tempParent.removeChild(element);
    return match;
  };

  function type(obj) {
    return obj == null ? String(obj) : class2type[toString.call(obj)] || "object";
  }

  function isFunction(value) {
    return type(value) == "function";
  }
  function isWindow(obj) {
    return obj != null && obj == obj.window;
  }
  function isDocument(obj) {
    return obj != null && obj.nodeType == obj.DOCUMENT_NODE;
  }
  function isObject(obj) {
    return type(obj) == "object";
  }
  function isPlainObject(obj) {
    return isObject(obj) && !isWindow(obj) && Object.getPrototypeOf(obj) == Object.prototype;
  }

  function likeArray(obj) {
    var length = !!obj && 'length' in obj && obj.length,
        type = $.type(obj);

    return 'function' != type && !isWindow(obj) && ('array' == type || length === 0 || typeof length == 'number' && length > 0 && length - 1 in obj);
  }

  function compact(array) {
    return _filter.call(array, function (item) {
      return item != null;
    });
  }
  function flatten(array) {
    return array.length > 0 ? $.fn.concat.apply([], array) : array;
  }
  camelize = function camelize(str) {
    return str.replace(/-+(.)?/g, function (match, chr) {
      return chr ? chr.toUpperCase() : '';
    });
  };
  function dasherize(str) {
    return str.replace(/::/g, '/').replace(/([A-Z]+)([A-Z][a-z])/g, '$1_$2').replace(/([a-z\d])([A-Z])/g, '$1_$2').replace(/_/g, '-').toLowerCase();
  }
  uniq = function uniq(array) {
    return _filter.call(array, function (item, idx) {
      return array.indexOf(item) == idx;
    });
  };

  function classRE(name) {
    return name in classCache ? classCache[name] : classCache[name] = new RegExp('(^|\\s)' + name + '(\\s|$)');
  }

  function maybeAddPx(name, value) {
    return typeof value == "number" && !cssNumber[dasherize(name)] ? value + "px" : value;
  }

  function defaultDisplay(nodeName) {
    var element, display;
    if (!elementDisplay[nodeName]) {
      element = document.createElement(nodeName);
      document.body.appendChild(element);
      display = getComputedStyle(element, '').getPropertyValue("display");
      element.parentNode.removeChild(element);
      display == "none" && (display = "block");
      elementDisplay[nodeName] = display;
    }
    return elementDisplay[nodeName];
  }

  function _children(element) {
    return 'children' in element ? _slice.call(element.children) : $.map(element.childNodes, function (node) {
      if (node.nodeType == 1) return node;
    });
  }

  function Z(dom, selector) {
    var i,
        len = dom ? dom.length : 0;
    for (i = 0; i < len; i++) {
      this[i] = dom[i];
    }this.length = len;
    this.selector = selector || '';
  }

  // `$.zepto.fragment` takes a html string and an optional tag name
  // to generate DOM nodes from the given html string.
  // The generated DOM nodes are returned as an array.
  // This function can be overridden in plugins for example to make
  // it compatible with browsers that don't support the DOM fully.
  zepto.fragment = function (html, name, properties) {
    var dom, nodes, container;

    // A special case optimization for a single tag
    if (singleTagRE.test(html)) dom = $(document.createElement(RegExp.$1));

    if (!dom) {
      if (html.replace) html = html.replace(tagExpanderRE, "<$1></$2>");
      if (name === undefined) name = fragmentRE.test(html) && RegExp.$1;
      if (!(name in containers)) name = '*';

      container = containers[name];
      container.innerHTML = '' + html;
      dom = $.each(_slice.call(container.childNodes), function () {
        container.removeChild(this);
      });
    }

    if (isPlainObject(properties)) {
      nodes = $(dom);
      $.each(properties, function (key, value) {
        if (methodAttributes.indexOf(key) > -1) nodes[key](value);else nodes.attr(key, value);
      });
    }

    return dom;
  };

  // `$.zepto.Z` swaps out the prototype of the given `dom` array
  // of nodes with `$.fn` and thus supplying all the Zepto functions
  // to the array. This method can be overridden in plugins.
  zepto.Z = function (dom, selector) {
    return new Z(dom, selector);
  };

  // `$.zepto.isZ` should return `true` if the given object is a Zepto
  // collection. This method can be overridden in plugins.
  zepto.isZ = function (object) {
    return object instanceof zepto.Z;
  };

  // `$.zepto.init` is Zepto's counterpart to jQuery's `$.fn.init` and
  // takes a CSS selector and an optional context (and handles various
  // special cases).
  // This method can be overridden in plugins.
  zepto.init = function (selector, context) {
    var dom;
    // If nothing given, return an empty Zepto collection
    if (!selector) return zepto.Z();
    // Optimize for string selectors
    else if (typeof selector == 'string') {
        selector = selector.trim();
        // If it's a html fragment, create nodes from it
        // Note: In both Chrome 21 and Firefox 15, DOM error 12
        // is thrown if the fragment doesn't begin with <
        if (selector[0] == '<' && fragmentRE.test(selector)) dom = zepto.fragment(selector, RegExp.$1, context), selector = null;
        // If there's a context, create a collection on that context first, and select
        // nodes from there
        else if (context !== undefined) return $(context).find(selector);
          // If it's a CSS selector, use it to select nodes.
          else dom = zepto.qsa(document, selector);
      }
      // If a function is given, call it when the DOM is ready
      else if (isFunction(selector)) return $(document).ready(selector);
        // If a Zepto collection is given, just return it
        else if (zepto.isZ(selector)) return selector;else {
            // normalize array if an array of nodes is given
            if (isArray(selector)) dom = compact(selector);
            // Wrap DOM nodes.
            else if (isObject(selector)) dom = [selector], selector = null;
              // If it's a html fragment, create nodes from it
              else if (fragmentRE.test(selector)) dom = zepto.fragment(selector.trim(), RegExp.$1, context), selector = null;
                // If there's a context, create a collection on that context first, and select
                // nodes from there
                else if (context !== undefined) return $(context).find(selector);
                  // And last but no least, if it's a CSS selector, use it to select nodes.
                  else dom = zepto.qsa(document, selector);
          }
    // create a new Zepto collection from the nodes found
    return zepto.Z(dom, selector);
  };

  // `$` will be the base `Zepto` object. When calling this
  // function just call `$.zepto.init, which makes the implementation
  // details of selecting nodes and creating Zepto collections
  // patchable in plugins.
  $ = function $(selector, context) {
    return zepto.init(selector, context);
  };

  function extend(target, source, deep) {
    for (key in source) {
      if (deep && (isPlainObject(source[key]) || isArray(source[key]))) {
        if (isPlainObject(source[key]) && !isPlainObject(target[key])) target[key] = {};
        if (isArray(source[key]) && !isArray(target[key])) target[key] = [];
        extend(target[key], source[key], deep);
      } else if (source[key] !== undefined) target[key] = source[key];
    }
  }

  // Copy all but undefined properties from one or more
  // objects to the `target` object.
  $.extend = function (target) {
    var deep,
        args = _slice.call(arguments, 1);
    if (typeof target == 'boolean') {
      deep = target;
      target = args.shift();
    }
    args.forEach(function (arg) {
      extend(target, arg, deep);
    });
    return target;
  };

  // `$.zepto.qsa` is Zepto's CSS selector implementation which
  // uses `document.querySelectorAll` and optimizes for some special cases, like `#id`.
  // This method can be overridden in plugins.
  zepto.qsa = function (element, selector) {
    var found,
        maybeID = selector[0] == '#',
        maybeClass = !maybeID && selector[0] == '.',
        nameOnly = maybeID || maybeClass ? selector.slice(1) : selector,
        // Ensure that a 1 char tag name still gets checked
    isSimple = simpleSelectorRE.test(nameOnly);
    return element.getElementById && isSimple && maybeID ? // Safari DocumentFragment doesn't have getElementById
    (found = element.getElementById(nameOnly)) ? [found] : [] : element.nodeType !== 1 && element.nodeType !== 9 && element.nodeType !== 11 ? [] : _slice.call(isSimple && !maybeID && element.getElementsByClassName ? // DocumentFragment doesn't have getElementsByClassName/TagName
    maybeClass ? element.getElementsByClassName(nameOnly) : // If it's simple, it could be a class
    element.getElementsByTagName(selector) : // Or a tag
    element.querySelectorAll(selector) // Or it's not simple, and we need to query all
    );
  };

  function filtered(nodes, selector) {
    return selector == null ? $(nodes) : $(nodes).filter(selector);
  }

  $.contains = document.documentElement.contains ? function (parent, node) {
    return parent !== node && parent.contains(node);
  } : function (parent, node) {
    while (node && (node = node.parentNode)) {
      if (node === parent) return true;
    }return false;
  };

  function funcArg(context, arg, idx, payload) {
    return isFunction(arg) ? arg.call(context, idx, payload) : arg;
  }

  function setAttribute(node, name, value) {
    value == null ? node.removeAttribute(name) : node.setAttribute(name, value);
  }

  // access className property while respecting SVGAnimatedString
  function className(node, value) {
    var klass = node.className || '',
        svg = klass && klass.baseVal !== undefined;

    if (value === undefined) return svg ? klass.baseVal : klass;
    svg ? klass.baseVal = value : node.className = value;
  }

  // "true"  => true
  // "false" => false
  // "null"  => null
  // "42"    => 42
  // "42.5"  => 42.5
  // "08"    => "08"
  // JSON    => parse if valid
  // String  => self
  function deserializeValue(value) {
    try {
      return value ? value == "true" || (value == "false" ? false : value == "null" ? null : +value + "" == value ? +value : /^[\[\{]/.test(value) ? $.parseJSON(value) : value) : value;
    } catch (e) {
      return value;
    }
  }

  $.type = type;
  $.isFunction = isFunction;
  $.isWindow = isWindow;
  $.isArray = isArray;
  $.isPlainObject = isPlainObject;

  $.isEmptyObject = function (obj) {
    var name;
    for (name in obj) {
      return false;
    }return true;
  };

  $.isNumeric = function (val) {
    var num = Number(val),
        type = typeof val === 'undefined' ? 'undefined' : _typeof(val);
    return val != null && type != 'boolean' && (type != 'string' || val.length) && !isNaN(num) && isFinite(num) || false;
  };

  $.inArray = function (elem, array, i) {
    return emptyArray.indexOf.call(array, elem, i);
  };

  $.camelCase = camelize;
  $.trim = function (str) {
    return str == null ? "" : String.prototype.trim.call(str);
  };

  // plugin compatibility
  $.uuid = 0;
  $.support = {};
  $.expr = {};
  $.noop = function () {};

  $.map = function (elements, callback) {
    var value,
        values = [],
        i,
        key;
    if (likeArray(elements)) for (i = 0; i < elements.length; i++) {
      value = callback(elements[i], i);
      if (value != null) values.push(value);
    } else for (key in elements) {
      value = callback(elements[key], key);
      if (value != null) values.push(value);
    }
    return flatten(values);
  };

  $.each = function (elements, callback) {
    var i, key;
    if (likeArray(elements)) {
      for (i = 0; i < elements.length; i++) {
        if (callback.call(elements[i], i, elements[i]) === false) return elements;
      }
    } else {
      for (key in elements) {
        if (callback.call(elements[key], key, elements[key]) === false) return elements;
      }
    }

    return elements;
  };

  $.grep = function (elements, callback) {
    return _filter.call(elements, callback);
  };

  if (window.JSON) $.parseJSON = JSON.parse;

  // Populate the class2type map
  $.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function (i, name) {
    class2type["[object " + name + "]"] = name.toLowerCase();
  });

  // Define methods that will be available on all
  // Zepto collections
  $.fn = {
    constructor: zepto.Z,
    length: 0,

    // Because a collection acts like an array
    // copy over these useful array functions.
    forEach: emptyArray.forEach,
    reduce: emptyArray.reduce,
    push: emptyArray.push,
    sort: emptyArray.sort,
    splice: emptyArray.splice,
    indexOf: emptyArray.indexOf,
    concat: function concat() {
      var i,
          value,
          args = [];
      for (i = 0; i < arguments.length; i++) {
        value = arguments[i];
        args[i] = zepto.isZ(value) ? value.toArray() : value;
      }
      return _concat.apply(zepto.isZ(this) ? this.toArray() : this, args);
    },

    // `map` and `slice` in the jQuery API work differently
    // from their array counterparts
    map: function map(fn) {
      return $($.map(this, function (el, i) {
        return fn.call(el, i, el);
      }));
    },
    slice: function slice() {
      return $(_slice.apply(this, arguments));
    },

    ready: function ready(callback) {
      // don't use "interactive" on IE <= 10 (it can fired premature)
      if (document.readyState === "complete" || document.readyState !== "loading" && !document.documentElement.doScroll) setTimeout(function () {
        callback($);
      }, 0);else {
        var handler = function handler() {
          document.removeEventListener("DOMContentLoaded", handler, false);
          window.removeEventListener("load", handler, false);
          callback($);
        };
        document.addEventListener("DOMContentLoaded", handler, false);
        window.addEventListener("load", handler, false);
      }
      return this;
    },
    get: function get(idx) {
      return idx === undefined ? _slice.call(this) : this[idx >= 0 ? idx : idx + this.length];
    },
    toArray: function toArray() {
      return this.get();
    },
    size: function size() {
      return this.length;
    },
    remove: function remove() {
      return this.each(function () {
        if (this.parentNode != null) this.parentNode.removeChild(this);
      });
    },
    each: function each(callback) {
      emptyArray.every.call(this, function (el, idx) {
        return callback.call(el, idx, el) !== false;
      });
      return this;
    },
    filter: function filter(selector) {
      if (isFunction(selector)) return this.not(this.not(selector));
      return $(_filter.call(this, function (element) {
        return zepto.matches(element, selector);
      }));
    },
    add: function add(selector, context) {
      return $(uniq(this.concat($(selector, context))));
    },
    is: function is(selector) {
      return this.length > 0 && zepto.matches(this[0], selector);
    },
    not: function not(selector) {
      var nodes = [];
      if (isFunction(selector) && selector.call !== undefined) this.each(function (idx) {
        if (!selector.call(this, idx)) nodes.push(this);
      });else {
        var excludes = typeof selector == 'string' ? this.filter(selector) : likeArray(selector) && isFunction(selector.item) ? _slice.call(selector) : $(selector);
        this.forEach(function (el) {
          if (excludes.indexOf(el) < 0) nodes.push(el);
        });
      }
      return $(nodes);
    },
    has: function has(selector) {
      return this.filter(function () {
        return isObject(selector) ? $.contains(this, selector) : $(this).find(selector).size();
      });
    },
    eq: function eq(idx) {
      return idx === -1 ? this.slice(idx) : this.slice(idx, +idx + 1);
    },
    first: function first() {
      var el = this[0];
      return el && !isObject(el) ? el : $(el);
    },
    last: function last() {
      var el = this[this.length - 1];
      return el && !isObject(el) ? el : $(el);
    },
    find: function find(selector) {
      var result,
          $this = this;
      if (!selector) result = $();else if ((typeof selector === 'undefined' ? 'undefined' : _typeof(selector)) == 'object') result = $(selector).filter(function () {
        var node = this;
        return emptyArray.some.call($this, function (parent) {
          return $.contains(parent, node);
        });
      });else if (this.length == 1) result = $(zepto.qsa(this[0], selector));else result = this.map(function () {
        return zepto.qsa(this, selector);
      });
      return result;
    },
    closest: function closest(selector, context) {
      var nodes = [],
          collection = (typeof selector === 'undefined' ? 'undefined' : _typeof(selector)) == 'object' && $(selector);
      this.each(function (_, node) {
        while (node && !(collection ? collection.indexOf(node) >= 0 : zepto.matches(node, selector))) {
          node = node !== context && !isDocument(node) && node.parentNode;
        }if (node && nodes.indexOf(node) < 0) nodes.push(node);
      });
      return $(nodes);
    },
    parents: function parents(selector) {
      var ancestors = [],
          nodes = this;
      while (nodes.length > 0) {
        nodes = $.map(nodes, function (node) {
          if ((node = node.parentNode) && !isDocument(node) && ancestors.indexOf(node) < 0) {
            ancestors.push(node);
            return node;
          }
        });
      }return filtered(ancestors, selector);
    },
    parent: function parent(selector) {
      return filtered(uniq(this.pluck('parentNode')), selector);
    },
    children: function children(selector) {
      return filtered(this.map(function () {
        return _children(this);
      }), selector);
    },
    contents: function contents() {
      return this.map(function () {
        return this.contentDocument || _slice.call(this.childNodes);
      });
    },
    siblings: function siblings(selector) {
      return filtered(this.map(function (i, el) {
        return _filter.call(_children(el.parentNode), function (child) {
          return child !== el;
        });
      }), selector);
    },
    empty: function empty() {
      return this.each(function () {
        this.innerHTML = '';
      });
    },
    // `pluck` is borrowed from Prototype.js
    pluck: function pluck(property) {
      return $.map(this, function (el) {
        return el[property];
      });
    },
    show: function show() {
      return this.each(function () {
        this.style.display == "none" && (this.style.display = '');
        if (getComputedStyle(this, '').getPropertyValue("display") == "none") this.style.display = defaultDisplay(this.nodeName);
      });
    },
    replaceWith: function replaceWith(newContent) {
      return this.before(newContent).remove();
    },
    wrap: function wrap(structure) {
      var func = isFunction(structure);
      if (this[0] && !func) var dom = $(structure).get(0),
          clone = dom.parentNode || this.length > 1;

      return this.each(function (index) {
        $(this).wrapAll(func ? structure.call(this, index) : clone ? dom.cloneNode(true) : dom);
      });
    },
    wrapAll: function wrapAll(structure) {
      if (this[0]) {
        $(this[0]).before(structure = $(structure));
        var children;
        // drill down to the inmost element
        while ((children = structure.children()).length) {
          structure = children.first();
        }$(structure).append(this);
      }
      return this;
    },
    wrapInner: function wrapInner(structure) {
      var func = isFunction(structure);
      return this.each(function (index) {
        var self = $(this),
            contents = self.contents(),
            dom = func ? structure.call(this, index) : structure;
        contents.length ? contents.wrapAll(dom) : self.append(dom);
      });
    },
    unwrap: function unwrap() {
      this.parent().each(function () {
        $(this).replaceWith($(this).children());
      });
      return this;
    },
    clone: function clone() {
      return this.map(function () {
        return this.cloneNode(true);
      });
    },
    hide: function hide() {
      return this.css("display", "none");
    },
    toggle: function toggle(setting) {
      return this.each(function () {
        var el = $(this);(setting === undefined ? el.css("display") == "none" : setting) ? el.show() : el.hide();
      });
    },
    prev: function prev(selector) {
      return $(this.pluck('previousElementSibling')).filter(selector || '*');
    },
    next: function next(selector) {
      return $(this.pluck('nextElementSibling')).filter(selector || '*');
    },
    html: function html(_html) {
      return 0 in arguments ? this.each(function (idx) {
        var originHtml = this.innerHTML;
        $(this).empty().append(funcArg(this, _html, idx, originHtml));
      }) : 0 in this ? this[0].innerHTML : null;
    },
    text: function text(_text) {
      return 0 in arguments ? this.each(function (idx) {
        var newText = funcArg(this, _text, idx, this.textContent);
        this.textContent = newText == null ? '' : '' + newText;
      }) : 0 in this ? this.pluck('textContent').join("") : null;
    },
    attr: function attr(name, value) {
      var result;
      return typeof name == 'string' && !(1 in arguments) ? 0 in this && this[0].nodeType == 1 && (result = this[0].getAttribute(name)) != null ? result : undefined : this.each(function (idx) {
        if (this.nodeType !== 1) return;
        if (isObject(name)) for (key in name) {
          setAttribute(this, key, name[key]);
        } else setAttribute(this, name, funcArg(this, value, idx, this.getAttribute(name)));
      });
    },
    removeAttr: function removeAttr(name) {
      return this.each(function () {
        this.nodeType === 1 && name.split(' ').forEach(function (attribute) {
          setAttribute(this, attribute);
        }, this);
      });
    },
    prop: function prop(name, value) {
      name = propMap[name] || name;
      return 1 in arguments ? this.each(function (idx) {
        this[name] = funcArg(this, value, idx, this[name]);
      }) : this[0] && this[0][name];
    },
    removeProp: function removeProp(name) {
      name = propMap[name] || name;
      return this.each(function () {
        delete this[name];
      });
    },
    data: function data(name, value) {
      var attrName = 'data-' + name.replace(capitalRE, '-$1').toLowerCase();

      var data = 1 in arguments ? this.attr(attrName, value) : this.attr(attrName);

      return data !== null ? deserializeValue(data) : undefined;
    },
    val: function val(value) {
      if (0 in arguments) {
        if (value == null) value = "";
        return this.each(function (idx) {
          this.value = funcArg(this, value, idx, this.value);
        });
      } else {
        return this[0] && (this[0].multiple ? $(this[0]).find('option').filter(function () {
          return this.selected;
        }).pluck('value') : this[0].value);
      }
    },
    offset: function offset(coordinates) {
      if (coordinates) return this.each(function (index) {
        var $this = $(this),
            coords = funcArg(this, coordinates, index, $this.offset()),
            parentOffset = $this.offsetParent().offset(),
            props = {
          top: coords.top - parentOffset.top,
          left: coords.left - parentOffset.left
        };

        if ($this.css('position') == 'static') props['position'] = 'relative';
        $this.css(props);
      });
      if (!this.length) return null;
      if (document.documentElement !== this[0] && !$.contains(document.documentElement, this[0])) return { top: 0, left: 0 };
      var obj = this[0].getBoundingClientRect();
      return {
        left: obj.left + window.pageXOffset,
        top: obj.top + window.pageYOffset,
        width: Math.round(obj.width),
        height: Math.round(obj.height)
      };
    },
    css: function css(property, value) {
      if (arguments.length < 2) {
        var element = this[0];
        if (typeof property == 'string') {
          if (!element) return;
          return element.style[camelize(property)] || getComputedStyle(element, '').getPropertyValue(property);
        } else if (isArray(property)) {
          if (!element) return;
          var props = {};
          var computedStyle = getComputedStyle(element, '');
          $.each(property, function (_, prop) {
            props[prop] = element.style[camelize(prop)] || computedStyle.getPropertyValue(prop);
          });
          return props;
        }
      }

      var css = '';
      if (type(property) == 'string') {
        if (!value && value !== 0) this.each(function () {
          this.style.removeProperty(dasherize(property));
        });else css = dasherize(property) + ":" + maybeAddPx(property, value);
      } else {
        for (key in property) {
          if (!property[key] && property[key] !== 0) this.each(function () {
            this.style.removeProperty(dasherize(key));
          });else css += dasherize(key) + ':' + maybeAddPx(key, property[key]) + ';';
        }
      }

      return this.each(function () {
        this.style.cssText += ';' + css;
      });
    },
    index: function index(element) {
      return element ? this.indexOf($(element)[0]) : this.parent().children().indexOf(this[0]);
    },
    hasClass: function hasClass(name) {
      if (!name) return false;
      return emptyArray.some.call(this, function (el) {
        return this.test(className(el));
      }, classRE(name));
    },
    addClass: function addClass(name) {
      if (!name) return this;
      return this.each(function (idx) {
        if (!('className' in this)) return;
        classList = [];
        var cls = className(this),
            newName = funcArg(this, name, idx, cls);
        newName.split(/\s+/g).forEach(function (klass) {
          if (!$(this).hasClass(klass)) classList.push(klass);
        }, this);
        classList.length && className(this, cls + (cls ? " " : "") + classList.join(" "));
      });
    },
    removeClass: function removeClass(name) {
      return this.each(function (idx) {
        if (!('className' in this)) return;
        if (name === undefined) return className(this, '');
        classList = className(this);
        funcArg(this, name, idx, classList).split(/\s+/g).forEach(function (klass) {
          classList = classList.replace(classRE(klass), " ");
        });
        className(this, classList.trim());
      });
    },
    toggleClass: function toggleClass(name, when) {
      if (!name) return this;
      return this.each(function (idx) {
        var $this = $(this),
            names = funcArg(this, name, idx, className(this));
        names.split(/\s+/g).forEach(function (klass) {
          (when === undefined ? !$this.hasClass(klass) : when) ? $this.addClass(klass) : $this.removeClass(klass);
        });
      });
    },
    scrollTop: function scrollTop(value) {
      if (!this.length) return;
      var hasScrollTop = 'scrollTop' in this[0];
      if (value === undefined) return hasScrollTop ? this[0].scrollTop : this[0].pageYOffset;
      return this.each(hasScrollTop ? function () {
        this.scrollTop = value;
      } : function () {
        this.scrollTo(this.scrollX, value);
      });
    },
    scrollLeft: function scrollLeft(value) {
      if (!this.length) return;
      var hasScrollLeft = 'scrollLeft' in this[0];
      if (value === undefined) return hasScrollLeft ? this[0].scrollLeft : this[0].pageXOffset;
      return this.each(hasScrollLeft ? function () {
        this.scrollLeft = value;
      } : function () {
        this.scrollTo(value, this.scrollY);
      });
    },
    position: function position() {
      if (!this.length) return;

      var elem = this[0],

      // Get *real* offsetParent
      offsetParent = this.offsetParent(),

      // Get correct offsets
      offset = this.offset(),
          parentOffset = rootNodeRE.test(offsetParent[0].nodeName) ? { top: 0, left: 0 } : offsetParent.offset();

      // Subtract element margins
      // note: when an element has margin: auto the offsetLeft and marginLeft
      // are the same in Safari causing offset.left to incorrectly be 0
      offset.top -= parseFloat($(elem).css('margin-top')) || 0;
      offset.left -= parseFloat($(elem).css('margin-left')) || 0;

      // Add offsetParent borders
      parentOffset.top += parseFloat($(offsetParent[0]).css('border-top-width')) || 0;
      parentOffset.left += parseFloat($(offsetParent[0]).css('border-left-width')) || 0;

      // Subtract the two offsets
      return {
        top: offset.top - parentOffset.top,
        left: offset.left - parentOffset.left
      };
    },
    offsetParent: function offsetParent() {
      return this.map(function () {
        var parent = this.offsetParent || document.body;
        while (parent && !rootNodeRE.test(parent.nodeName) && $(parent).css("position") == "static") {
          parent = parent.offsetParent;
        }return parent;
      });
    }

    // for now
  };$.fn.detach = $.fn.remove

  // Generate the `width` and `height` functions
  ;['width', 'height'].forEach(function (dimension) {
    var dimensionProperty = dimension.replace(/./, function (m) {
      return m[0].toUpperCase();
    });

    $.fn[dimension] = function (value) {
      var offset,
          el = this[0];
      if (value === undefined) return isWindow(el) ? el['inner' + dimensionProperty] : isDocument(el) ? el.documentElement['scroll' + dimensionProperty] : (offset = this.offset()) && offset[dimension];else return this.each(function (idx) {
        el = $(this);
        el.css(dimension, funcArg(this, value, idx, el[dimension]()));
      });
    };
  });

  function traverseNode(node, fun) {
    fun(node);
    for (var i = 0, len = node.childNodes.length; i < len; i++) {
      traverseNode(node.childNodes[i], fun);
    }
  }

  // Generate the `after`, `prepend`, `before`, `append`,
  // `insertAfter`, `insertBefore`, `appendTo`, and `prependTo` methods.
  adjacencyOperators.forEach(function (operator, operatorIndex) {
    var inside = operatorIndex % 2; //=> prepend, append

    $.fn[operator] = function () {
      // arguments can be nodes, arrays of nodes, Zepto objects and HTML strings
      var argType,
          nodes = $.map(arguments, function (arg) {
        var arr = [];
        argType = type(arg);
        if (argType == "array") {
          arg.forEach(function (el) {
            if (el.nodeType !== undefined) return arr.push(el);else if ($.zepto.isZ(el)) return arr = arr.concat(el.get());
            arr = arr.concat(zepto.fragment(el));
          });
          return arr;
        }
        return argType == "object" || arg == null ? arg : zepto.fragment(arg);
      }),
          parent,
          copyByClone = this.length > 1;
      if (nodes.length < 1) return this;

      return this.each(function (_, target) {
        parent = inside ? target : target.parentNode;

        // convert all methods to a "before" operation
        target = operatorIndex == 0 ? target.nextSibling : operatorIndex == 1 ? target.firstChild : operatorIndex == 2 ? target : null;

        var parentInDocument = $.contains(document.documentElement, parent);

        nodes.forEach(function (node) {
          if (copyByClone) node = node.cloneNode(true);else if (!parent) return $(node).remove();

          parent.insertBefore(node, target);
          if (parentInDocument) traverseNode(node, function (el) {
            if (el.nodeName != null && el.nodeName.toUpperCase() === 'SCRIPT' && (!el.type || el.type === 'text/javascript') && !el.src) {
              var target = el.ownerDocument ? el.ownerDocument.defaultView : window;
              target['eval'].call(target, el.innerHTML);
            }
          });
        });
      });
    };

    // after    => insertAfter
    // prepend  => prependTo
    // before   => insertBefore
    // append   => appendTo
    $.fn[inside ? operator + 'To' : 'insert' + (operatorIndex ? 'Before' : 'After')] = function (html) {
      $(html)[operator](this);
      return this;
    };
  });

  zepto.Z.prototype = Z.prototype = $.fn;

  // Export internal API functions in the `$.zepto` namespace
  zepto.uniq = uniq;
  zepto.deserializeValue = deserializeValue;
  $.zepto = zepto;

  return $;
}();

// If `$` is not yet defined, point it to `Zepto`
window.Zepto = Zepto;
window.$ === undefined && (window.$ = Zepto)

//     Zepto.js
//     (c) 2010-2016 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

;(function ($) {
  var _zid = 1,
      undefined,
      slice = Array.prototype.slice,
      isFunction = $.isFunction,
      isString = function isString(obj) {
    return typeof obj == 'string';
  },
      handlers = {},
      specialEvents = {},
      focusinSupported = 'onfocusin' in window,
      focus = { focus: 'focusin', blur: 'focusout' },
      hover = { mouseenter: 'mouseover', mouseleave: 'mouseout' };

  specialEvents.click = specialEvents.mousedown = specialEvents.mouseup = specialEvents.mousemove = 'MouseEvents';

  function zid(element) {
    return element._zid || (element._zid = _zid++);
  }
  function findHandlers(element, event, fn, selector) {
    event = parse(event);
    if (event.ns) var matcher = matcherFor(event.ns);
    return (handlers[zid(element)] || []).filter(function (handler) {
      return handler && (!event.e || handler.e == event.e) && (!event.ns || matcher.test(handler.ns)) && (!fn || zid(handler.fn) === zid(fn)) && (!selector || handler.sel == selector);
    });
  }
  function parse(event) {
    var parts = ('' + event).split('.');
    return { e: parts[0], ns: parts.slice(1).sort().join(' ') };
  }
  function matcherFor(ns) {
    return new RegExp('(?:^| )' + ns.replace(' ', ' .* ?') + '(?: |$)');
  }

  function eventCapture(handler, captureSetting) {
    return handler.del && !focusinSupported && handler.e in focus || !!captureSetting;
  }

  function realEvent(type) {
    return hover[type] || focusinSupported && focus[type] || type;
  }

  function add(element, events, fn, data, selector, delegator, capture) {
    var id = zid(element),
        set = handlers[id] || (handlers[id] = []);
    events.split(/\s/).forEach(function (event) {
      if (event == 'ready') return $(document).ready(fn);
      var handler = parse(event);
      handler.fn = fn;
      handler.sel = selector;
      // emulate mouseenter, mouseleave
      if (handler.e in hover) fn = function fn(e) {
        var related = e.relatedTarget;
        if (!related || related !== this && !$.contains(this, related)) return handler.fn.apply(this, arguments);
      };
      handler.del = delegator;
      var callback = delegator || fn;
      handler.proxy = function (e) {
        e = compatible(e);
        if (e.isImmediatePropagationStopped()) return;
        e.data = data;
        var result = callback.apply(element, e._args == undefined ? [e] : [e].concat(e._args));
        if (result === false) e.preventDefault(), e.stopPropagation();
        return result;
      };
      handler.i = set.length;
      set.push(handler);
      if ('addEventListener' in element) element.addEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture));
    });
  }
  function remove(element, events, fn, selector, capture) {
    var id = zid(element);(events || '').split(/\s/).forEach(function (event) {
      findHandlers(element, event, fn, selector).forEach(function (handler) {
        delete handlers[id][handler.i];
        if ('removeEventListener' in element) element.removeEventListener(realEvent(handler.e), handler.proxy, eventCapture(handler, capture));
      });
    });
  }

  $.event = { add: add, remove: remove };

  $.proxy = function (fn, context) {
    var args = 2 in arguments && slice.call(arguments, 2);
    if (isFunction(fn)) {
      var proxyFn = function proxyFn() {
        return fn.apply(context, args ? args.concat(slice.call(arguments)) : arguments);
      };
      proxyFn._zid = zid(fn);
      return proxyFn;
    } else if (isString(context)) {
      if (args) {
        args.unshift(fn[context], fn);
        return $.proxy.apply(null, args);
      } else {
        return $.proxy(fn[context], fn);
      }
    } else {
      throw new TypeError("expected function");
    }
  };

  $.fn.bind = function (event, data, callback) {
    return this.on(event, data, callback);
  };
  $.fn.unbind = function (event, callback) {
    return this.off(event, callback);
  };
  $.fn.one = function (event, selector, data, callback) {
    return this.on(event, selector, data, callback, 1);
  };

  var returnTrue = function returnTrue() {
    return true;
  },
      returnFalse = function returnFalse() {
    return false;
  },
      ignoreProperties = /^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,
      eventMethods = {
    preventDefault: 'isDefaultPrevented',
    stopImmediatePropagation: 'isImmediatePropagationStopped',
    stopPropagation: 'isPropagationStopped'
  };

  function compatible(event, source) {
    if (source || !event.isDefaultPrevented) {
      source || (source = event);

      $.each(eventMethods, function (name, predicate) {
        var sourceMethod = source[name];
        event[name] = function () {
          this[predicate] = returnTrue;
          return sourceMethod && sourceMethod.apply(source, arguments);
        };
        event[predicate] = returnFalse;
      });

      try {
        event.timeStamp || (event.timeStamp = Date.now());
      } catch (ignored) {}

      if (source.defaultPrevented !== undefined ? source.defaultPrevented : 'returnValue' in source ? source.returnValue === false : source.getPreventDefault && source.getPreventDefault()) event.isDefaultPrevented = returnTrue;
    }
    return event;
  }

  function createProxy(event) {
    var key,
        proxy = { originalEvent: event };
    for (key in event) {
      if (!ignoreProperties.test(key) && event[key] !== undefined) proxy[key] = event[key];
    }return compatible(proxy, event);
  }

  $.fn.delegate = function (selector, event, callback) {
    return this.on(event, selector, callback);
  };
  $.fn.undelegate = function (selector, event, callback) {
    return this.off(event, selector, callback);
  };

  $.fn.live = function (event, callback) {
    $(document.body).delegate(this.selector, event, callback);
    return this;
  };
  $.fn.die = function (event, callback) {
    $(document.body).undelegate(this.selector, event, callback);
    return this;
  };

  $.fn.on = function (event, selector, data, callback, one) {
    var autoRemove,
        delegator,
        $this = this;
    if (event && !isString(event)) {
      $.each(event, function (type, fn) {
        $this.on(type, selector, data, fn, one);
      });
      return $this;
    }

    if (!isString(selector) && !isFunction(callback) && callback !== false) callback = data, data = selector, selector = undefined;
    if (callback === undefined || data === false) callback = data, data = undefined;

    if (callback === false) callback = returnFalse;

    return $this.each(function (_, element) {
      if (one) autoRemove = function autoRemove(e) {
        remove(element, e.type, callback);
        return callback.apply(this, arguments);
      };

      if (selector) delegator = function delegator(e) {
        var evt,
            match = $(e.target).closest(selector, element).get(0);
        if (match && match !== element) {
          evt = $.extend(createProxy(e), { currentTarget: match, liveFired: element });
          return (autoRemove || callback).apply(match, [evt].concat(slice.call(arguments, 1)));
        }
      };

      add(element, event, callback, data, selector, delegator || autoRemove);
    });
  };
  $.fn.off = function (event, selector, callback) {
    var $this = this;
    if (event && !isString(event)) {
      $.each(event, function (type, fn) {
        $this.off(type, selector, fn);
      });
      return $this;
    }

    if (!isString(selector) && !isFunction(callback) && callback !== false) callback = selector, selector = undefined;

    if (callback === false) callback = returnFalse;

    return $this.each(function () {
      remove(this, event, callback, selector);
    });
  };

  $.fn.trigger = function (event, args) {
    event = isString(event) || $.isPlainObject(event) ? $.Event(event) : compatible(event);
    event._args = args;
    return this.each(function () {
      // handle focus(), blur() by calling them directly
      if (event.type in focus && typeof this[event.type] == "function") this[event.type]();
      // items in the collection might not be DOM elements
      else if ('dispatchEvent' in this) this.dispatchEvent(event);else $(this).triggerHandler(event, args);
    });
  };

  // triggers event handlers on current element just as if an event occurred,
  // doesn't trigger an actual event, doesn't bubble
  $.fn.triggerHandler = function (event, args) {
    var e, result;
    this.each(function (i, element) {
      e = createProxy(isString(event) ? $.Event(event) : event);
      e._args = args;
      e.target = element;
      $.each(findHandlers(element, event.type || event), function (i, handler) {
        result = handler.proxy(e);
        if (e.isImmediatePropagationStopped()) return false;
      });
    });
    return result;
  }

  // shortcut methods for `.bind(event, fn)` for each event type
  ;('focusin focusout focus blur load resize scroll unload click dblclick ' + 'mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave ' + 'change select keydown keypress keyup error').split(' ').forEach(function (event) {
    $.fn[event] = function (callback) {
      return 0 in arguments ? this.bind(event, callback) : this.trigger(event);
    };
  });

  $.Event = function (type, props) {
    if (!isString(type)) props = type, type = props.type;
    var event = document.createEvent(specialEvents[type] || 'Events'),
        bubbles = true;
    if (props) for (var name in props) {
      name == 'bubbles' ? bubbles = !!props[name] : event[name] = props[name];
    }event.initEvent(type, bubbles, true);
    return compatible(event);
  };
})(Zepto)

//     Zepto.js
//     (c) 2010-2016 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

;(function ($) {
  var jsonpID = +new Date(),
      document = window.document,
      key,
      name,
      rscript = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
      scriptTypeRE = /^(?:text|application)\/javascript/i,
      xmlTypeRE = /^(?:text|application)\/xml/i,
      jsonType = 'application/json',
      htmlType = 'text/html',
      blankRE = /^\s*$/,
      originAnchor = document.createElement('a');

  originAnchor.href = window.location.href;

  // trigger a custom event and return false if it was cancelled
  function triggerAndReturn(context, eventName, data) {
    var event = $.Event(eventName);
    $(context).trigger(event, data);
    return !event.isDefaultPrevented();
  }

  // trigger an Ajax "global" event
  function triggerGlobal(settings, context, eventName, data) {
    if (settings.global) return triggerAndReturn(context || document, eventName, data);
  }

  // Number of active Ajax requests
  $.active = 0;

  function ajaxStart(settings) {
    if (settings.global && $.active++ === 0) triggerGlobal(settings, null, 'ajaxStart');
  }
  function ajaxStop(settings) {
    if (settings.global && ! --$.active) triggerGlobal(settings, null, 'ajaxStop');
  }

  // triggers an extra global event "ajaxBeforeSend" that's like "ajaxSend" but cancelable
  function ajaxBeforeSend(xhr, settings) {
    var context = settings.context;
    if (settings.beforeSend.call(context, xhr, settings) === false || triggerGlobal(settings, context, 'ajaxBeforeSend', [xhr, settings]) === false) return false;

    triggerGlobal(settings, context, 'ajaxSend', [xhr, settings]);
  }
  function ajaxSuccess(data, xhr, settings, deferred) {
    var context = settings.context,
        status = 'success';
    settings.success.call(context, data, status, xhr);
    if (deferred) deferred.resolveWith(context, [data, status, xhr]);
    triggerGlobal(settings, context, 'ajaxSuccess', [xhr, settings, data]);
    ajaxComplete(status, xhr, settings);
  }
  // type: "timeout", "error", "abort", "parsererror"
  function ajaxError(error, type, xhr, settings, deferred) {
    var context = settings.context;
    settings.error.call(context, xhr, type, error);
    if (deferred) deferred.rejectWith(context, [xhr, type, error]);
    triggerGlobal(settings, context, 'ajaxError', [xhr, settings, error || type]);
    ajaxComplete(type, xhr, settings);
  }
  // status: "success", "notmodified", "error", "timeout", "abort", "parsererror"
  function ajaxComplete(status, xhr, settings) {
    var context = settings.context;
    settings.complete.call(context, xhr, status);
    triggerGlobal(settings, context, 'ajaxComplete', [xhr, settings]);
    ajaxStop(settings);
  }

  function ajaxDataFilter(data, type, settings) {
    if (settings.dataFilter == empty) return data;
    var context = settings.context;
    return settings.dataFilter.call(context, data, type);
  }

  // Empty function, used as default callback
  function empty() {}

  $.ajaxJSONP = function (options, deferred) {
    if (!('type' in options)) return $.ajax(options);

    var _callbackName = options.jsonpCallback,
        callbackName = ($.isFunction(_callbackName) ? _callbackName() : _callbackName) || 'Zepto' + jsonpID++,
        script = document.createElement('script'),
        originalCallback = window[callbackName],
        responseData,
        abort = function abort(errorType) {
      $(script).triggerHandler('error', errorType || 'abort');
    },
        xhr = { abort: abort },
        abortTimeout;

    if (deferred) deferred.promise(xhr);

    $(script).on('load error', function (e, errorType) {
      clearTimeout(abortTimeout);
      $(script).off().remove();

      if (e.type == 'error' || !responseData) {
        ajaxError(null, errorType || 'error', xhr, options, deferred);
      } else {
        ajaxSuccess(responseData[0], xhr, options, deferred);
      }

      window[callbackName] = originalCallback;
      if (responseData && $.isFunction(originalCallback)) originalCallback(responseData[0]);

      originalCallback = responseData = undefined;
    });

    if (ajaxBeforeSend(xhr, options) === false) {
      abort('abort');
      return xhr;
    }

    window[callbackName] = function () {
      responseData = arguments;
    };

    script.src = options.url.replace(/\?(.+)=\?/, '?$1=' + callbackName);
    document.head.appendChild(script);

    if (options.timeout > 0) abortTimeout = setTimeout(function () {
      abort('timeout');
    }, options.timeout);

    return xhr;
  };

  $.ajaxSettings = {
    // Default type of request
    type: 'GET',
    // Callback that is executed before request
    beforeSend: empty,
    // Callback that is executed if the request succeeds
    success: empty,
    // Callback that is executed the the server drops error
    error: empty,
    // Callback that is executed on request complete (both: error and success)
    complete: empty,
    // The context for the callbacks
    context: null,
    // Whether to trigger "global" Ajax events
    global: true,
    // Transport
    xhr: function xhr() {
      return new window.XMLHttpRequest();
    },
    // MIME types mapping
    // IIS returns Javascript as "application/x-javascript"
    accepts: {
      script: 'text/javascript, application/javascript, application/x-javascript',
      json: jsonType,
      xml: 'application/xml, text/xml',
      html: htmlType,
      text: 'text/plain'
    },
    // Whether the request is to another domain
    crossDomain: false,
    // Default timeout
    timeout: 0,
    // Whether data should be serialized to string
    processData: true,
    // Whether the browser should be allowed to cache GET responses
    cache: true,
    //Used to handle the raw response data of XMLHttpRequest.
    //This is a pre-filtering function to sanitize the response.
    //The sanitized response should be returned
    dataFilter: empty
  };

  function mimeToDataType(mime) {
    if (mime) mime = mime.split(';', 2)[0];
    return mime && (mime == htmlType ? 'html' : mime == jsonType ? 'json' : scriptTypeRE.test(mime) ? 'script' : xmlTypeRE.test(mime) && 'xml') || 'text';
  }

  function appendQuery(url, query) {
    if (query == '') return url;
    return (url + '&' + query).replace(/[&?]{1,2}/, '?');
  }

  // serialize payload and append it to the URL for GET requests
  function serializeData(options) {
    if (options.processData && options.data && $.type(options.data) != "string") options.data = $.param(options.data, options.traditional);
    if (options.data && (!options.type || options.type.toUpperCase() == 'GET' || 'jsonp' == options.dataType)) options.url = appendQuery(options.url, options.data), options.data = undefined;
  }

  $.ajax = function (options) {
    var settings = $.extend({}, options || {}),
        deferred = $.Deferred && $.Deferred(),
        urlAnchor,
        hashIndex;
    for (key in $.ajaxSettings) {
      if (settings[key] === undefined) settings[key] = $.ajaxSettings[key];
    }ajaxStart(settings);

    if (!settings.crossDomain) {
      urlAnchor = document.createElement('a');
      urlAnchor.href = settings.url;
      // cleans up URL for .href (IE only), see https://github.com/madrobby/zepto/pull/1049
      urlAnchor.href = urlAnchor.href;
      settings.crossDomain = originAnchor.protocol + '//' + originAnchor.host !== urlAnchor.protocol + '//' + urlAnchor.host;
    }

    if (!settings.url) settings.url = window.location.toString();
    if ((hashIndex = settings.url.indexOf('#')) > -1) settings.url = settings.url.slice(0, hashIndex);
    serializeData(settings);

    var dataType = settings.dataType,
        hasPlaceholder = /\?.+=\?/.test(settings.url);
    if (hasPlaceholder) dataType = 'jsonp';

    if (settings.cache === false || (!options || options.cache !== true) && ('script' == dataType || 'jsonp' == dataType)) settings.url = appendQuery(settings.url, '_=' + Date.now());

    if ('jsonp' == dataType) {
      if (!hasPlaceholder) settings.url = appendQuery(settings.url, settings.jsonp ? settings.jsonp + '=?' : settings.jsonp === false ? '' : 'callback=?');
      return $.ajaxJSONP(settings, deferred);
    }

    var mime = settings.accepts[dataType],
        headers = {},
        setHeader = function setHeader(name, value) {
      headers[name.toLowerCase()] = [name, value];
    },
        protocol = /^([\w-]+:)\/\//.test(settings.url) ? RegExp.$1 : window.location.protocol,
        xhr = settings.xhr(),
        nativeSetHeader = xhr.setRequestHeader,
        abortTimeout;

    if (deferred) deferred.promise(xhr);

    if (!settings.crossDomain) setHeader('X-Requested-With', 'XMLHttpRequest');
    setHeader('Accept', mime || '*/*');
    if (mime = settings.mimeType || mime) {
      if (mime.indexOf(',') > -1) mime = mime.split(',', 2)[0];
      xhr.overrideMimeType && xhr.overrideMimeType(mime);
    }
    if (settings.contentType || settings.contentType !== false && settings.data && settings.type.toUpperCase() != 'GET') setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');

    if (settings.headers) for (name in settings.headers) {
      setHeader(name, settings.headers[name]);
    }xhr.setRequestHeader = setHeader;

    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4) {
        xhr.onreadystatechange = empty;
        clearTimeout(abortTimeout);
        var result,
            error = false;
        if (xhr.status >= 200 && xhr.status < 300 || xhr.status == 304 || xhr.status == 0 && protocol == 'file:') {
          dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));

          if (xhr.responseType == 'arraybuffer' || xhr.responseType == 'blob') result = xhr.response;else {
            result = xhr.responseText;

            try {
              // http://perfectionkills.com/global-eval-what-are-the-options/
              // sanitize response accordingly if data filter callback provided
              result = ajaxDataFilter(result, dataType, settings);
              if (dataType == 'script') (1, eval)(result);else if (dataType == 'xml') result = xhr.responseXML;else if (dataType == 'json') result = blankRE.test(result) ? null : $.parseJSON(result);
            } catch (e) {
              error = e;
            }

            if (error) return ajaxError(error, 'parsererror', xhr, settings, deferred);
          }

          ajaxSuccess(result, xhr, settings, deferred);
        } else {
          ajaxError(xhr.statusText || null, xhr.status ? 'error' : 'abort', xhr, settings, deferred);
        }
      }
    };

    if (ajaxBeforeSend(xhr, settings) === false) {
      xhr.abort();
      ajaxError(null, 'abort', xhr, settings, deferred);
      return xhr;
    }

    var async = 'async' in settings ? settings.async : true;
    xhr.open(settings.type, settings.url, async, settings.username, settings.password);

    if (settings.xhrFields) for (name in settings.xhrFields) {
      xhr[name] = settings.xhrFields[name];
    }for (name in headers) {
      nativeSetHeader.apply(xhr, headers[name]);
    }if (settings.timeout > 0) abortTimeout = setTimeout(function () {
      xhr.onreadystatechange = empty;
      xhr.abort();
      ajaxError(null, 'timeout', xhr, settings, deferred);
    }, settings.timeout);

    // avoid sending empty string (#319)
    xhr.send(settings.data ? settings.data : null);
    return xhr;
  };

  // handle optional data/success arguments
  function parseArguments(url, data, success, dataType) {
    if ($.isFunction(data)) dataType = success, success = data, data = undefined;
    if (!$.isFunction(success)) dataType = success, success = undefined;
    return {
      url: url,
      data: data,
      success: success,
      dataType: dataType
    };
  }

  $.get = function () /* url, data, success, dataType */{
    return $.ajax(parseArguments.apply(null, arguments));
  };

  $.post = function () /* url, data, success, dataType */{
    var options = parseArguments.apply(null, arguments);
    options.type = 'POST';
    return $.ajax(options);
  };

  $.getJSON = function () /* url, data, success */{
    var options = parseArguments.apply(null, arguments);
    options.dataType = 'json';
    return $.ajax(options);
  };

  $.fn.load = function (url, data, success) {
    if (!this.length) return this;
    var self = this,
        parts = url.split(/\s/),
        selector,
        options = parseArguments(url, data, success),
        callback = options.success;
    if (parts.length > 1) options.url = parts[0], selector = parts[1];
    options.success = function (response) {
      self.html(selector ? $('<div>').html(response.replace(rscript, "")).find(selector) : response);
      callback && callback.apply(self, arguments);
    };
    $.ajax(options);
    return this;
  };

  var escape = encodeURIComponent;

  function serialize(params, obj, traditional, scope) {
    var type,
        array = $.isArray(obj),
        hash = $.isPlainObject(obj);
    $.each(obj, function (key, value) {
      type = $.type(value);
      if (scope) key = traditional ? scope : scope + '[' + (hash || type == 'object' || type == 'array' ? key : '') + ']';
      // handle data in serializeArray() format
      if (!scope && array) params.add(value.name, value.value);
      // recurse into nested objects
      else if (type == "array" || !traditional && type == "object") serialize(params, value, traditional, key);else params.add(key, value);
    });
  }

  $.param = function (obj, traditional) {
    var params = [];
    params.add = function (key, value) {
      if ($.isFunction(value)) value = value();
      if (value == null) value = "";
      this.push(escape(key) + '=' + escape(value));
    };
    serialize(params, obj, traditional);
    return params.join('&').replace(/%20/g, '+');
  };
})(Zepto)

//     Zepto.js
//     (c) 2010-2016 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

;(function ($) {
  $.fn.serializeArray = function () {
    var name,
        type,
        result = [],
        add = function add(value) {
      if (value.forEach) return value.forEach(add);
      result.push({ name: name, value: value });
    };
    if (this[0]) $.each(this[0].elements, function (_, field) {
      type = field.type, name = field.name;
      if (name && field.nodeName.toLowerCase() != 'fieldset' && !field.disabled && type != 'submit' && type != 'reset' && type != 'button' && type != 'file' && (type != 'radio' && type != 'checkbox' || field.checked)) add($(field).val());
    });
    return result;
  };

  $.fn.serialize = function () {
    var result = [];
    this.serializeArray().forEach(function (elm) {
      result.push(encodeURIComponent(elm.name) + '=' + encodeURIComponent(elm.value));
    });
    return result.join('&');
  };

  $.fn.submit = function (callback) {
    if (0 in arguments) this.bind('submit', callback);else if (this.length) {
      var event = $.Event('submit');
      this.eq(0).trigger(event);
      if (!event.isDefaultPrevented()) this.get(0).submit();
    }
    return this;
  };
})(Zepto)

//     Zepto.js
//     (c) 2010-2016 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

// The following code is heavily inspired by jQuery's $.fn.data()

;(function ($) {
  var data = {},
      dataAttr = $.fn.data,
      camelize = $.camelCase,
      exp = $.expando = 'Zepto' + +new Date(),
      emptyArray = [];

  // Get value from node:
  // 1. first try key as given,
  // 2. then try camelized key,
  // 3. fall back to reading "data-*" attribute.
  function getData(node, name) {
    var id = node[exp],
        store = id && data[id];
    if (name === undefined) return store || setData(node);else {
      if (store) {
        if (name in store) return store[name];
        var camelName = camelize(name);
        if (camelName in store) return store[camelName];
      }
      return dataAttr.call($(node), name);
    }
  }

  // Store value under camelized key on node
  function setData(node, name, value) {
    var id = node[exp] || (node[exp] = ++$.uuid),
        store = data[id] || (data[id] = attributeData(node));
    if (name !== undefined) store[camelize(name)] = value;
    return store;
  }

  // Read all "data-*" attributes from a node
  function attributeData(node) {
    var store = {};
    $.each(node.attributes || emptyArray, function (i, attr) {
      if (attr.name.indexOf('data-') == 0) store[camelize(attr.name.replace('data-', ''))] = $.zepto.deserializeValue(attr.value);
    });
    return store;
  }

  $.fn.data = function (name, value) {
    return value === undefined ?
    // set multiple values via object
    $.isPlainObject(name) ? this.each(function (i, node) {
      $.each(name, function (key, value) {
        setData(node, key, value);
      });
    }) :
    // get value from first element
    0 in this ? getData(this[0], name) : undefined :
    // set value on all elements
    this.each(function () {
      setData(this, name, value);
    });
  };

  $.data = function (elem, name, value) {
    return $(elem).data(name, value);
  };

  $.hasData = function (elem) {
    var id = elem[exp],
        store = id && data[id];
    return store ? !$.isEmptyObject(store) : false;
  };

  $.fn.removeData = function (names) {
    if (typeof names == 'string') names = names.split(/\s+/);
    return this.each(function () {
      var id = this[exp],
          store = id && data[id];
      if (store) $.each(names || store, function (key) {
        delete store[names ? camelize(this) : key];
      });
    });
  }

  // Generate extended `remove` and `empty` functions
  ;['remove', 'empty'].forEach(function (methodName) {
    var origFn = $.fn[methodName];
    $.fn[methodName] = function () {
      var elements = this.find('*');
      if (methodName === 'remove') elements = elements.add(this);
      elements.removeData();
      return origFn.call(this);
    };
  });
})(Zepto)

//     Zepto.js
//     (c) 2010-2016 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.

;(function ($) {
  // Create a collection of callbacks to be fired in a sequence, with configurable behaviour
  // Option flags:
  //   - once: Callbacks fired at most one time.
  //   - memory: Remember the most recent context and arguments
  //   - stopOnFalse: Cease iterating over callback list
  //   - unique: Permit adding at most one instance of the same callback
  $.Callbacks = function (options) {
    options = $.extend({}, options);

    var memory,
        // Last fire value (for non-forgettable lists)
    _fired,
        // Flag to know if list was already fired
    firing,
        // Flag to know if list is currently firing
    firingStart,
        // First callback to fire (used internally by add and fireWith)
    firingLength,
        // End of the loop when firing
    firingIndex,
        // Index of currently firing callback (modified by remove if needed)
    list = [],
        // Actual callback list
    stack = !options.once && [],
        // Stack of fire calls for repeatable lists
    fire = function fire(data) {
      memory = options.memory && data;
      _fired = true;
      firingIndex = firingStart || 0;
      firingStart = 0;
      firingLength = list.length;
      firing = true;
      for (; list && firingIndex < firingLength; ++firingIndex) {
        if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {
          memory = false;
          break;
        }
      }
      firing = false;
      if (list) {
        if (stack) stack.length && fire(stack.shift());else if (memory) list.length = 0;else Callbacks.disable();
      }
    },
        Callbacks = {
      add: function add() {
        if (list) {
          var start = list.length,
              add = function add(args) {
            $.each(args, function (_, arg) {
              if (typeof arg === "function") {
                if (!options.unique || !Callbacks.has(arg)) list.push(arg);
              } else if (arg && arg.length && typeof arg !== 'string') add(arg);
            });
          };
          add(arguments);
          if (firing) firingLength = list.length;else if (memory) {
            firingStart = start;
            fire(memory);
          }
        }
        return this;
      },
      remove: function remove() {
        if (list) {
          $.each(arguments, function (_, arg) {
            var index;
            while ((index = $.inArray(arg, list, index)) > -1) {
              list.splice(index, 1);
              // Handle firing indexes
              if (firing) {
                if (index <= firingLength) --firingLength;
                if (index <= firingIndex) --firingIndex;
              }
            }
          });
        }
        return this;
      },
      has: function has(fn) {
        return !!(list && (fn ? $.inArray(fn, list) > -1 : list.length));
      },
      empty: function empty() {
        firingLength = list.length = 0;
        return this;
      },
      disable: function disable() {
        list = stack = memory = undefined;
        return this;
      },
      disabled: function disabled() {
        return !list;
      },
      lock: function lock() {
        stack = undefined;
        if (!memory) Callbacks.disable();
        return this;
      },
      locked: function locked() {
        return !stack;
      },
      fireWith: function fireWith(context, args) {
        if (list && (!_fired || stack)) {
          args = args || [];
          args = [context, args.slice ? args.slice() : args];
          if (firing) stack.push(args);else fire(args);
        }
        return this;
      },
      fire: function fire() {
        return Callbacks.fireWith(this, arguments);
      },
      fired: function fired() {
        return !!_fired;
      }
    };

    return Callbacks;
  };
})(Zepto)

//     Zepto.js
//     (c) 2010-2016 Thomas Fuchs
//     Zepto.js may be freely distributed under the MIT license.
//
//     Some code (c) 2005, 2013 jQuery Foundation, Inc. and other contributors

;(function ($) {
  var slice = Array.prototype.slice;

  function Deferred(func) {
    var tuples = [
    // action, add listener, listener list, final state
    ["resolve", "done", $.Callbacks({ once: 1, memory: 1 }), "resolved"], ["reject", "fail", $.Callbacks({ once: 1, memory: 1 }), "rejected"], ["notify", "progress", $.Callbacks({ memory: 1 })]],
        _state = "pending",
        _promise = {
      state: function state() {
        return _state;
      },
      always: function always() {
        deferred.done(arguments).fail(arguments);
        return this;
      },
      then: function then() /* fnDone [, fnFailed [, fnProgress]] */{
        var fns = arguments;
        return Deferred(function (defer) {
          $.each(tuples, function (i, tuple) {
            var fn = $.isFunction(fns[i]) && fns[i];
            deferred[tuple[1]](function () {
              var returned = fn && fn.apply(this, arguments);
              if (returned && $.isFunction(returned.promise)) {
                returned.promise().done(defer.resolve).fail(defer.reject).progress(defer.notify);
              } else {
                var context = this === _promise ? defer.promise() : this,
                    values = fn ? [returned] : arguments;
                defer[tuple[0] + "With"](context, values);
              }
            });
          });
          fns = null;
        }).promise();
      },

      promise: function promise(obj) {
        return obj != null ? $.extend(obj, _promise) : _promise;
      }
    },
        deferred = {};

    $.each(tuples, function (i, tuple) {
      var list = tuple[2],
          stateString = tuple[3];

      _promise[tuple[1]] = list.add;

      if (stateString) {
        list.add(function () {
          _state = stateString;
        }, tuples[i ^ 1][2].disable, tuples[2][2].lock);
      }

      deferred[tuple[0]] = function () {
        deferred[tuple[0] + "With"](this === deferred ? _promise : this, arguments);
        return this;
      };
      deferred[tuple[0] + "With"] = list.fireWith;
    });

    _promise.promise(deferred);
    if (func) func.call(deferred, deferred);
    return deferred;
  }

  $.when = function (sub) {
    var resolveValues = slice.call(arguments),
        len = resolveValues.length,
        i = 0,
        remain = len !== 1 || sub && $.isFunction(sub.promise) ? len : 0,
        deferred = remain === 1 ? sub : Deferred(),
        progressValues,
        progressContexts,
        resolveContexts,
        updateFn = function updateFn(i, ctx, val) {
      return function (value) {
        ctx[i] = this;
        val[i] = arguments.length > 1 ? slice.call(arguments) : value;
        if (val === progressValues) {
          deferred.notifyWith(ctx, val);
        } else if (! --remain) {
          deferred.resolveWith(ctx, val);
        }
      };
    };

    if (len > 1) {
      progressValues = new Array(len);
      progressContexts = new Array(len);
      resolveContexts = new Array(len);
      for (; i < len; ++i) {
        if (resolveValues[i] && $.isFunction(resolveValues[i].promise)) {
          resolveValues[i].promise().done(updateFn(i, resolveContexts, resolveValues)).fail(deferred.reject).progress(updateFn(i, progressContexts, progressValues));
        } else {
          --remain;
        }
      }
    }
    if (!remain) deferred.resolveWith(resolveContexts, resolveValues);
    return deferred.promise();
  };

  $.Deferred = Deferred;
})(Zepto);

/* harmony default export */ __webpack_exports__["a"] = (Zepto);

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__css_reset_css__ = __webpack_require__(69);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__css_reset_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__css_reset_css__);


/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var suda_pageId = 0,
    //页面id	
suda_per = 100,
    suda_ver = '',
    //抽样概率
suda_addRequestTime = false,
    //打开请求link时的当前时间
suda_sessionId = "Apache",
    suda_domainRoot = "",
    suda_cookie_sessionId = "",
    suda_userId = "ustat",
    suda_statuId = "statuid",
    suda_cookie_userID = "",
    suda_cookie_statuId = '',
    suda_pageRef = document.referrer,
    //当前的referer
suda_pageUrl = document.URL,
    //当前url
prtl = 'https:' == window.location.protocol ? 'https://' : 'http://',
    domain = 'beacon.sina.com.cn',
    suda_mapAajx_url = prtl + domain + '/b.gif',
    suda_hash = '';
window.sudaMapConfig = window.sudaMapConfig || {};
if (suda_pageRef == "") {
	suda_pageRef = "newpage";
}
/*
 * url处理,去掉"#"
 */
function getRealUrl(pUrl, changeHash) {
	var ps = 0;
	ps = pUrl.indexOf("#");
	if (ps > 0) {
		if (changeHash) suda_hash = pUrl.substring(ps);
		return pUrl.substring(0, ps);
	} else {
		if (changeHash) suda_hash = '';
		return pUrl;
	}
}
function filter(pUrl) {
	var ps = 0;
	ps = pUrl.indexOf("#");
	if (ps > 0) {
		if (changeHash) suda_hash = pUrl.substring(ps);
		return pUrl.substring(0, ps);
	} else {
		if (changeHash) suda_hash = '';
		return pUrl;
	}
}

/*
 * 获取被点击元素的文本
 */
function getText(pHtml) {
	var ps = 0,
	    pe = 0,
	    pstr = pHtml;
	while (1) {
		ps = pstr.indexOf("<");
		pe = pstr.indexOf(">", ps);
		if (ps >= 0 && pe >= 0 && pe > ps) {
			pstr = pstr.substring(0, ps) + pstr.substring(pe + 1, pstr.length);
		} else {
			break;
		}
	}
	return pstr;
}

/*
 * 获取域名
 */
function getDomainRoot() {
	//已经保存直接返回
	if ("" != suda_domainRoot) return suda_domainRoot;

	var _suds_cmp_domainRoot = "";
	var _suds_cmp_pageUrl = suda_pageUrl.toLowerCase();

	var pe = _suds_cmp_pageUrl.indexOf("sina.");
	if (pe > 0) {
		//sina.cn
		_suds_cmp_domainRoot = "sina.cn";
	} else {
		//取第一个.和/之间的部分作为域名
		var ps = _suds_cmp_pageUrl.indexOf(".");
		if (ps > 0) {
			ps = ps + 1;
		} else {
			return "";
		}

		pe = _suds_cmp_pageUrl.indexOf("/", ps);
		if (pe < 0) {
			pe = _suds_cmp_pageUrl.length;
		}

		_suds_cmp_domainRoot = _suds_cmp_pageUrl.substring(ps, pe);
	}
	suda_domainRoot = _suds_cmp_domainRoot;
	return _suds_cmp_domainRoot;
}

/*
 * 设置cookie，expires 是有效期
 */
function setCookie(ckName, ckValue, expires) {
	if (ckValue != null) {
		var _suds_cmp_domainRoot = getDomainRoot();
		if ("undefined" == expires || null == expires) {
			document.cookie = ckName + "=" + ckValue + "; domain=" + _suds_cmp_domainRoot + "; path=/";
		} else {
			var now = new Date();
			var time = now.getTime();
			time = time + 86400000 * expires;
			now.setTime(time);
			time = now.getTime();
			document.cookie = ckName + "=" + ckValue + "; domain=" + _suds_cmp_domainRoot + "; expires=" + now.toUTCString() + "; path=/";
		}
	}
}

/*
 * 检查apache session_id
 */
function checkSudsClickMapSessionId() {
	var ckTmp = window.getCookie(suda_sessionId) || '';
	if ("" == ckTmp) {
		var now = new Date();
		ckTmp = Math.random() * 10000000000000 + "." + now.getTime();
		setCookie(suda_sessionId, ckTmp);
	}
	return ckTmp;
}
/*
 * SUDA统计初始化
 */
function sudaCountInit() {
	//随机数抽样
	var r_num = Math.floor(Math.random() * 100);

	//判断是否被抽中  
	if (r_num < suda_per) {

		window.suda = true;

		//获取cookie信息
		if ("" == suda_cookie_sessionId) {
			suda_cookie_sessionId = checkSudsClickMapSessionId(suda_sessionId);
		}
		if ("" == suda_cookie_userID) {
			suda_cookie_userID = window.getCookie(suda_userId);
		}
		if ("" == suda_cookie_statuId) {
			suda_cookie_statuId = window.getCookie(suda_statuId);
		}

		try {
			//通过document 判断是否是IE
			//是IE
			if (!document.addEventListener) {
				document.attachEvent("onclick", sudaClickMap); //鼠标点击时触发此事件
				window.attachEvent('onload', sudaFrameClick); //为frame绑定事件
			}
			//非IE浏览器，火狐
			else {
					document.addEventListener("click", sudaClickMap, false);
					window.addEventListener('load', sudaFrameClick, false);
				}
		} catch (ex) {}

		suda_pageRef = escape(getRealUrl(window.document.referrer));
		suda_pageUrl = escape(getRealUrl(window.document.URL));
	} else {
		return 0;
	}
}

/*
 * 发送请求
 */
function sudaSend(clickInfo, linkHref, aTargetType, SIMAdata) {
	var uId = '';
	if (typeof sudaMapConfig.uId != 'undefined') {
		uId = sudaMapConfig.uId;
	}

	if (typeof sudaMapConfig.addRequestTime != 'undefined') {
		suda_addRequestTime = sudaMapConfig.addRequestTime;
	}

	var strSudsClickMapQuest = suda_pageUrl + "|*|" + clickInfo + "|*|" + suda_cookie_sessionId + "|*|" + suda_cookie_userID + "|*|" + suda_pageRef + "|*|" + suda_pageId + "|*|" + uId + "|*|" + suda_cookie_statuId;

	var url = suda_mapAajx_url + "?" + strSudsClickMapQuest;
	var oImg = new Image();
	oImg.src = url;
	//发sima
	window.SIMA(SIMAdata);

	//如果是A对象，那么重新启动跳转
	var tmpLink = linkHref.toLocaleLowerCase();
	if (linkHref && tmpLink.indexOf('javascript:') == -1) {
		setTimeout(function () {
			//为性能统计提供兼容,增加请求时间和用户标识（随机）
			if (suda_addRequestTime) {
				var curTime = new Date().getTime(),
				    userId = 'user' + curTime + Math.random().toString().slice(2),
				    conn = linkHref.indexOf('?') > -1 ? '&' : '?';
				linkHref = linkHref + conn + 'clicktime=' + curTime + '&userid=' + userId;
			}

			if (aTargetType == '_blank') {
				var ua = window.navigator.userAgent.toLowerCase();

				if (/ucbrowser/i.test(ua)) {

					window.location.href = 'ext:wo:' + linkHref + suda_hash;
				} else if (/qqbrowser/i.test(ua)) {
					window.location.href = linkHref + suda_hash;
				} else {
					window.open(linkHref + suda_hash);
				}
			} else {
				window.location.href = linkHref + suda_hash;
			}
		}, 200);
	}
}

/*
 * 获取某类型的父对象
 */
function getParentNode(o, name, max) {
	var i = 0;
	for (i; i < max; i++) {
		if (!o.parentNode || o == document) {
			return null;
		}
		o = o.parentNode;
		if (name == o.tagName) {
			break;
		}
	}
	if (i >= max) {
		return null;
	} else {
		return o;
	}
}

/*
 * 点击地图时执行
 */
function sudaClickMap(e) {

	var o = e.srcElement || e.target;

	if (o == null && o == document) {
		return false;
	}

	var targetType = "",
	    //类型
	targetTitle = "",
	    //标题
	targetHref = "",
	    //链接
	currLinkObj = '',
	    //A对象
	aTargetType = ''; //A对象打开类型

	//判断对象类型，找到对象上级A对象。
	if ("A" == o.tagName) {

		//链接
		targetType = 'txt';
		targetTitle = getText(o.innerHTML);
		targetHref = getRealUrl(o.href, true);
		aTargetType = o.getAttribute("target");
		currLinkObj = o;
	} else if ("IMG" == o.tagName) {

		targetType = 'img';
		targetTitle = o.alt;
		//向上找链接
		var obj = getParentNode(o, 'A', 8);
		if (obj) {
			targetHref = getRealUrl(obj.href, true);
			aTargetType = obj.getAttribute("target");
			currLinkObj = obj;
		}
	} else {
		targetType = 'txt';
		targetTitle = getText(o.innerHTML);
		//向上找链接
		var _obj = getParentNode(o, 'A', 8);
		if (_obj) {
			targetHref = getRealUrl(_obj.href, true);
			aTargetType = _obj.getAttribute("target");
			currLinkObj = _obj;
		}
	}

	var sudaName = '',
	    type = o.tagName,
	    //当前对象类型
	index = '',
	    isNotMatch = false;

	try {
		for (var i = 0; i < 10; i++) {
			//检查是否根节点
			if (o == document) {
				break;
			}
			//检查是否存在统计标签
			var tag = o.getAttribute('data-sudaclick');

			if (tag) {
				var targetTagName = o.getAttribute('data-sudatagname');
				if (targetTagName) {
					isNotMatch = true;
					var targetTagNames = targetTagName.split(',');
					targetTagNames.forEach(function (tagName) {

						if (tagName.toUpperCase() == type) {
							isNotMatch = false;
						}
					});
				}

				sudaName = tag;
				//计算当前对象的序列
				var allObj = o.getElementsByTagName('A');
				for (var n = 0; n < allObj.length; n++) {
					if (allObj[n].innerHTML == currLinkObj.innerHTML) {
						index = n;
						break;
					}
				}
				break;
			}
			if (!o.parentNode) {
				break;
			} else {
				o = o.parentNode;
			}
		}
	} catch (ex) {}
	if (isNotMatch) {
		return;
	}

	//是统计模块，发起请求
	if (sudaName) {
		if (targetHref) {
			e.preventDefault(); //先阻止默认
		}

		//针对长title的内容进行截断处理
		if (targetTitle && targetTitle.length > 30) {
			targetTitle = targetTitle.substr(0, 30);
		}

		var now = new Date();
		var currTime = now.getTime();

		targetHref = targetHref.replace(/(\r\n)|(\n)|(\t)|(\<)|(\>)/gmi, "");
		sudaName = suda_ver ? sudaName + '_' + suda_ver : sudaName; //添加version


		var SIMAdata = {
			"data": {
				"index": index,
				"aid": sudaName,
				"url": encodeURIComponent(targetHref)
			},
			"action": '_click'
		};
		var clickInfo = "t=" + targetType + ",s=" + targetTitle + ",h=" + escape(targetHref) + ",ct=" + currTime + ",aid=" + sudaName + "-" + index + "|";
		sudaSend(clickInfo, targetHref, aTargetType, SIMAdata);
	}
}
/*
 * 在frame中suda统计初始化
 */
function sudaFrameClick() {
	sudaFrameClickWin(window);
}

/*
 * 递归绑定frame中的事件
 */
function sudaFrameClickWin(win) {
	var frm = win.frames;
	for (var i = 0; i < frm.length; i++) {
		try {
			if (frm[i].location != "") {
				if (frm[i].document != null) {
					if (!document.addEventListener) {
						frm[i].document.detachEvent("onclick", sudaClickMap);
						frm[i].document.attachEvent("onclick", sudaClickMap);
					} else {
						frm[i].document.removeEventListener("click", sudaClickMap, false);
						frm[i].document.addEventListener("click", sudaClickMap, false);
					}
					sudaFrameClickWin(frm[i]);
				}
			}
		} catch (e) {}
	}
}

/*
 * SUDA公开的统计方法
 * suda统计初始化：pid：页面id;  per: 抽样率
 */
var init = function init(pid, per, version) {
	var argsLen = arguments.length;
	if (argsLen > 0) {
		suda_pageId = pid;
		suda_per = per;
		suda_ver = version;
		if (typeof window.getUserInfo === 'function') {
			window.getUserInfo(function (re) {
				if (re && re.uid) {
					window.sudaMapConfig.uId = re.uid;
				}
				sudaCountInit();
			}, true);
		} else {
			sudaCountInit();
		}
	}
};

/*
 * SUDA公开的统计方法
 * suda统计初始化：pid：页面id;  per: 抽样率
	var	obj = {
				'name': sudaName,		// 不可省， 统计对象的名称
				'type': 'img/txt/btn',	// 可省， 统计对象的类型，目前只区分img、txt、btn三种
				'title': title,			// 可省， 统计对象的标题或摘要
				'index': index+1,		// 可省， 统计对象在整个区域中的索引。
				'href' : A链接地址
			}
 */
var suda_count = function suda_count(obj) {
	if (!obj.name) {
		return false;
	}

	if (!obj.type) {
		obj.type = 'btn';
	}
	if (!obj.title) {
		obj.title = '';
	}
	if (!obj.index) {
		obj.index = 0;
	}
	if (!obj.href) {
		obj.href = '';
	}

	var targetHref = '',
	    aTargetType = '',
	    currTime = new Date().getTime(),
	    clickInfo = "t=" + obj.type + ",s=" + obj.title + ",h=" + escape(obj.href) + ",ct=" + currTime + ",aid=" + obj.name + "-" + obj.index + "|";

	if (obj.target == undefined) {
		aTargetType = '';
	} else {
		aTargetType = obj.target;
	}

	sudaSend(clickInfo, targetHref, aTargetType);
};

function platform() {
	var ua = window.navigator.userAgent.toLowerCase();
	return (/iphone|ipad|ipod/.test(ua) ? "ios" : "android"
	);
}
function getUid(fn) {
	if (window.checkLogin()) {
		window.getUserInfo(function (re) {
			fn && fn(re.uid || '');
		});
	} else {
		fn && fn('');
	}
}
function getRK() {
	var time = new Date().getTime();
	var random = Math.random();
	return "" + time + "_" + random;
}

function createRequest(url) {
	var img = new Image();
	img.src = url;
}

function getAccesstype() {
	return "";
}

function getUserId() {

	var guid = void 0,
	    uid = void 0;
	if (typeof window.getCookie === 'function') {
		//alert(document.cookie)
		guid = window.getCookie(suda_userId) || '';
	}
	if (_typeof(window.userInfo) === 'object') {
		uid = userInfo.uid || '';
	}
	return (uid || '') + ';' + (guid || '');
}
function getMethod(method) {
	switch (method) {
		case "_click":
		case "click":
			return "CLICK";
			break;
		case "_exposure":
		case "exposure":
		case "_loadmore":
		case "loadmore":
			return "SLIDE";
			break;
		case "_up":
		case "up":
			return "POLLUP";
			break;
		case "_down":
		case "down":
			return "POLLDOWN";
			break;
		default:
			return "";
			break;
	}
}
function filter(data) {
	for (var i in data) {
		if (typeof data[i] == "string") {
			data[i] = data[i].replace(/(\r\n)|(\n)|(\t)|(\<)|(\>)/gmi, "");
		}
	}
	return data;
}
if (typeof Object.assign != 'function') {
	Object.assign = function (target, varArgs) {
		// .length of function is 2

		if (target == null) {
			// TypeError if undefined or null
			throw new TypeError('Cannot convert undefined or null to object');
		}

		var to = Object(target);

		for (var index = 1; index < arguments.length; index++) {
			var nextSource = arguments[index];

			if (nextSource != null) {
				// Skip over if undefined or null
				for (var nextKey in nextSource) {
					// Avoid bugs when hasOwnProperty is shadowed
					if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
						to[nextKey] = nextSource[nextKey];
					}
				}
			}
		}
		return to;
	};
}
var SIMA = function SIMA(option) {

	if (!option || !option.action || !option.data) {
		return;
	}
	var channel = window.location.href.match(/\w+\.sina\.cn/) || "";
	channel = channel ? channel[0].split('.')[0] : "";

	var method = getMethod(option.action);

	var os = platform(),
	    rk = getRK(),
	    accesstype = getAccesstype();

	if (!option.pk) {
		if (option.data.cre || option.data.mod) {
			option.pk = "187522";
		} else {
			option.pk = "187523";
		}
	}

	getUid(function (uid) {
		option.data.uid = getUserId();
		var json = {

			"_pk": option.pk, //表id
			"_src": "web", //web 标识浏览器 app server
			"_rk": rk, //日志唯一标识
			"_v": "1.0",
			"_cp": {
				"os": os, //操作系统  
				"uid": uid, //uid
				"accesstype": accesstype, //网络类型 手浪取不到
				"device_id": window.getCookie(suda_userId) || ''
			},
			"_ep": [{
				"attribute": filter(option.data), //日志主体 arr OR   json
				"channel": channel ? "wap_" + channel : "", //频道
				"ek": option.action || "", //事件名
				"ref": encodeURIComponent(getRealUrl(window.document.referrer.indexOf('baidu') == -1 ? window.document.referrer : 'baidu.com')) || "",
				"et": "custom", //事件主体 
				"src": option.src || encodeURIComponent(getRealUrl(window.location.href)) || "",
				"method": method, //针对主体的方法
				"timestamp": new Date().getTime() //时间

			}]
			// if(window.SIMAconfig && window.SIMAconfig.reset){
			// 	for (let i in window.SIMAconfig.reset){
			// 		json[i] = Object.assign(json[i], window.SIMAconfig.reset[i]);
			// 	}

			// } 
			// if(window.SIMAconfig && window.SIMAconfig.ext){
			// 	json._ep[0].attribute = Object.assign(json._ep[0].attribute, window.SIMAconfig.ext);

			// } 

		};createRequest(prtl + domain + '/mrt.gif?' + JSON.stringify(json));
	});
};
SIMA.init = init;
SIMA.suda_count = suda_count;
window.suda_count = suda_count;
window.SIMA = SIMA;

/* harmony default export */ __webpack_exports__["a"] = (SIMA);

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

// jshint esversion:6



var doc = document;
var win = window;

var dynamicNav = function () {
  function dynamicNav() {
    _classCallCheck(this, dynamicNav);

    this.fixBoxDom = $("#j_dynamicNav");
    this.feedBoxDom = $("#j_card_tnews");
    this.changeFixBox = $("#j_changeFixBox");
    if (this.fixBoxDom.length == 0) return false;
    if (!SM.data.channels) return false;
    this.init();
  }

  _createClass(dynamicNav, [{
    key: "init",
    value: function init() {
      this.scrollPage();
    }
  }, {
    key: "scrollPage",
    value: function scrollPage() {
      document.addEventListener('scroll', debounce(this.scrollEnd.bind(this)));
      document.addEventListener('scroll', this.scrollNav.bind(this));
    }
  }, {
    key: "scrollNav",
    value: function scrollNav() {
      if (this.feedBoxDom.get(0).getBoundingClientRect().top <= 0) {
        if (!this.changeFixBox.hasClass("hide")) return false;
        if (this.fixBoxDom.html() != '') {
          this.changeFixBox.removeClass("hide");
        }
      } else {
        if (this.changeFixBox.hasClass("hide")) return false;
        this.changeFixBox.addClass("hide");
      }
    }
  }, {
    key: "scrollEnd",
    value: function scrollEnd() {
      var _this = this;

      var self = this;
      var feedItemDom = self.feedBoxDom.find("a");
      var len = feedItemDom.length;
      var fixNavDom = self.fixBoxDom;
      var chArr = '';
      var channelList = SM.data.channels;
      // 下划线
      // for (let i = len-1; i >= 0; i --) {
      //   let feedTop = feedItemDom.eq(i).get(0).getBoundingClientRect().top + feedItemDom.eq(i).height();
      //   if (feedTop <= fixNavDom.height()) {
      // 上划线
      for (var i = 0; i < len; i++) {
        var feedTop = feedItemDom.eq(i).get(0).getBoundingClientRect().top;
        if (feedTop >= fixNavDom.height()) {
          for (var p = 0, plen = channelList.length; p < plen; p++) {
            var reChArr = ' ';
            var chHost = channelList[p].title.url.split("/")[2].split("?")[0];
            var feedHref = feedItemDom.eq(i).attr("href");
            if (chHost == "video.sina.cn") {
              reChArr = "v.sina.cn";
            }
            if (feedHref) {
              // 看点特殊处理方式
              if (feedHref.indexOf("k.sina.cn") != -1 || feedHref.indexOf("kandian.sina.cn") != -1) {
                var _ret = function () {
                  var kandianCh = _this.getUrlParam(feedHref, "from");
                  var kandianSub = _this.getUrlParam(feedHref, "subch");
                  if (!kandianCh) {
                    // 栏目值匹配
                    if (kandianSub) {
                      var autoStr = 'nauto,bauto,uauto,cauto,iauto,oauto'.split(",");
                      var sportStr = 'cnfootball,global,nba,cba,tennis,run,golf,chess,f1,winter,horse,olympic,vollyball,pingpang,billiardball,fight,bodybuilding,gaming,osport'.split(",");
                      var entStr = 'star,film,tv,variety,music,krent,jpent,oent'.split(",");
                      var gameStr = 'comprehensivegame,onlinegame,mobilegame,esport,htmlgame,egame,vrgame,tvgame,ogame'.split(",");
                      kandianCh = 'news';

                      autoStr.forEach(function (value) {
                        if (value == kandianSub) {
                          kandianCh = 'auto';
                        }
                      });
                      sportStr.forEach(function (value) {
                        if (value == kandianSub) {
                          kandianCh = 'sport';
                        }
                      });
                      entStr.forEach(function (value) {
                        if (value == kandianSub) {
                          kandianCh = 'ent';
                        }
                      });
                      gameStr.forEach(function (value) {
                        if (value == kandianSub) {
                          kandianCh = 'game';
                        }
                      });
                    } else {
                      kandianCh = 'news';
                    }
                  }
                  if (kandianCh) {
                    for (var k = 0, klen = channelList.length; k < plen; k++) {
                      if (channelList[k].title.url.indexOf(kandianCh) != -1) {
                        chArr = { name: channelList[k].title.title, link: channelList[k].title.url, subtitle: channelList[k].subtitle };
                        self.appendNav(chArr);
                        return {
                          v: false
                        };
                      }
                    }
                    for (var _k = 0, _klen = channelList.length; _k < plen; _k++) {
                      if (channelList[_k].title.url.indexOf("news") != -1) {
                        chArr = { name: channelList[_k].title.title, link: channelList[_k].title.url, subtitle: channelList[_k].subtitle };
                        self.appendNav(chArr);
                        return {
                          v: false
                        };
                      }
                    }
                  } else {
                    for (var _k2 = 0, _klen2 = channelList.length; _k2 < plen; _k2++) {
                      if (channelList[_k2].title.url.indexOf("news") != -1) {
                        chArr = { name: channelList[_k2].title.title, link: channelList[_k2].title.url, subtitle: channelList[_k2].subtitle };
                        self.appendNav(chArr);
                        return {
                          v: false
                        };
                      }
                    }
                  }
                }();

                if ((typeof _ret === "undefined" ? "undefined" : _typeof(_ret)) === "object") return _ret.v;
              }
              if (feedHref.indexOf(chHost) != -1 || feedHref.indexOf(reChArr) != -1) {
                chArr = { name: channelList[p].title.title, link: channelList[p].title.url, subtitle: channelList[p].subtitle };
                self.appendNav(chArr);
                return false;
              }
            }
          }
        }
      }
    }
  }, {
    key: "getUrlParam",
    value: function getUrlParam() {
      var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
      var name = arguments[1];

      var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)');
      var urlStr = url.split("?")[1] || url.split("?")[0] || url;
      var value = urlStr.match(reg);
      return value === null ? null : decodeURI(value[2]);
    }
  }, {
    key: "appendNav",
    value: function appendNav(navFixArr) {
      var linkStr = '';
      var active = '';
      var hostName = navFixArr.link.split("//")[1].split('.')[0];
      linkStr += '<a href="' + navFixArr.link + '" data-sudaclick="' + hostName + '" class="fl_iq_nav_a active">' + navFixArr.name + '</a>';
      navFixArr.subtitle.forEach(function (nav, i) {
        if (i <= 3) {
          linkStr += '<a href="' + nav.url + '" data-sudaclick="' + hostName + i + '" class="fl_iq_nav_a ' + active + '">' + nav.title + '</a>';
        }
      }, this);
      if (this.fixBoxDom.html() == linkStr) return false;
      this.fixBoxDom.html(linkStr);
      // setTimeout(function(){
      //   this.fixBoxDom.removeClass("active")
      // }.bind(this),1000)
      this.scrollNav();
    }
  }]);

  return dynamicNav;
}();

function debounce(method) {
  var delay = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100;

  var timer = null;
  return function () {
    var _this2 = this;

    var args = arguments;
    clearTimeout(timer);

    timer = setTimeout(function () {
      method.apply(_this2, args);
    }, delay);
  };
}
var dynamicNavObj = new dynamicNav();
/* unused harmony default export */ var _unused_webpack_default_export = (dynamicNavObj);

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_lazyload__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__template_js__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_ua__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_exposure__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_exposure___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_exposure__);
// import ucJssdk from './uc_jssdk.js';





var indexNum = false;
var ucFeedData = '';
var isOnladData = false;
var posItem = [];
var orderNum = 0;
var isConsole = location.href.indexOf("ucDebug=1") != -1 ? true : false;
var UTP = window.UTPJSSDK || function () {};
var utp = new UTP({});
var ucFeed = {
  getSmartPos: function getSmartPos() {
    var feedUcNum = [];
    if (SM && SM.data && SM.data.qudao && SM.data.qudao.all_pos && SM.data.qudao.all_pos.feed) {
      var ucPos = SM.data.qudao.all_pos.feed.uc;
      if (ucPos && ucPos.length != 0) {
        feedUcNum = ucPos;
      }
    }
    var ucFeedObj = [];
    if (feedUcNum && Array.isArray(feedUcNum)) {
      for (var uci = 0; uci < feedUcNum.length; uci++) {
        //置顶特殊处理
        if (SM && SM.data && SM.data.feed[0] && SM.data.feed[0].length && feedUcNum[uci] >= SM.data.feed[0].length) {
          feedUcNum[uci] = feedUcNum[uci] - SM.data.feed[0].length;
        }
        if (feedUcNum[uci] <= 1) {
          feedUcNum[uci] = 1;
        }
        ucFeedObj.push({ "num": parseInt(feedUcNum[uci]) - 1, "isload": true });
      }
    }
    return ucFeedObj;
  },
  getTouchPos: function getTouchPos() {
    var feedUcNum = [];
    if (SM && SM.data && SM.data.qudao && SM.data.qudao.all_pos && SM.data.qudao.all_pos.touch) {
      var ucPos = SM.data.qudao.all_pos.touch.uc;
      if (ucPos && ucPos.length != 0) {
        feedUcNum = ucPos;
      }
    }
    var ucFeedObj = [];
    if (feedUcNum && Array.isArray(feedUcNum)) {
      for (var uci = 0; uci < feedUcNum.length; uci++) {
        if (feedUcNum[uci] <= 1) {
          feedUcNum[uci] = 1;
        }
        ucFeedObj.push({ "num": parseInt(feedUcNum[uci]) - 1, "isload": true });
      }
    }
    return ucFeedObj;
  },
  init: function init(dom, pos) {

    if (!window.UTPJSSDK) return;
    if (__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_ua__["a" /* default */].platformInfo.client == 'uc' || __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_ua__["a" /* default */].platformInfo.system != 'android') {
      return false;
    }
    var self = this;
    posItem.push({ "order": orderNum, "pos": pos });
    // posItem.push(pos);
    orderNum++;
    $(window).on("ucJsonpOnload", function () {
      isOnladData = true;
      self.adaptWork();
    });

    if (isOnladData) {
      self.adaptWork();
      return false;
    }

    if (indexNum || posItem.length === 0) return false;

    this.dom = dom || 'j_card_intenews';
    utp.load({
      cid: 112,
      limit: 4
    }).then(function (ads) {
      if (ads && ads.result && Array.isArray(ads.result) && ads.result.length > 0) {
        ucFeedData = ads.result;
        $(window).trigger("ucJsonpOnload");
      }
      if (isConsole) {
        console.log(ads, "ucFeed返回数据");
      }
    }).catch(function (err) {
      console.log(err, "ucfeed加载失败！");
    });
    indexNum = true;
  },
  adaptWork: function adaptWork() {
    var self = this;
    if (ucFeedData.length == 0 || posItem.length == 0) return false;
    for (var k = 0; k < posItem.length; k++) {
      if (!ucFeedData[posItem[k].order]) continue;
      self.adapt(ucFeedData[posItem[k].order], posItem[k].pos);
    }
    posItem = [];
  },
  adapt: function adapt(data, pos) {
    var info = {};
    var self = this;
    info.title = data.title || '';
    info.link = data.circle_page || '';
    info.adid = data.adid || '';
    info.comment = 0;
    var htmlsrt = '';
    if (Array.isArray(data.AssetImages) && data.AssetImages.length >= 3) {
      info.imgs = [];
      for (var i = 0; i < 3; i++) {
        info.imgs.push(data.AssetImages[i].url.replace("http:", "https:"));
      }
      if (self.dom == 'j_card_intenews') {
        info.tag = '<mark class="cm_mark cm_mark_r">图集</mark>';
        var dataObj = {
          info: info,
          type: "feeduc"
        };
        htmlsrt = __WEBPACK_IMPORTED_MODULE_1__template_js__["a" /* default */].Ztemplate.threePicFnTem(dataObj);
      } else {
        htmlsrt = __WEBPACK_IMPORTED_MODULE_1__template_js__["a" /* default */].get3PicsFeedStr("feeduc", info, false, false, true);
      }
    } else {
      info.img = data.AssetImages[0] && data.AssetImages[0].url.replace("http:", "https:") || '';
      if (self.dom == 'j_card_intenews') {
        var dataObj = {
          info: info,
          type: "feeduc"
        };
        htmlsrt = __WEBPACK_IMPORTED_MODULE_1__template_js__["a" /* default */].Ztemplate.picTxtFnTem(dataObj);
      } else {
        htmlsrt = __WEBPACK_IMPORTED_MODULE_1__template_js__["a" /* default */].getCommonFeedStr("feeduc", info, false, false, true);
      }
    }

    $("#" + self.dom).children("a").eq(pos).get(0).insertAdjacentHTML("beforeBegin", htmlsrt);
    self.resetAD($("#" + self.dom).children("a").eq(pos));
    __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_lazyload__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_lazyload__["a" /* default */].currentLazy();
    var ucFeedDom = $("#" + self.dom).children("a").eq(pos).get(0);
    var ucFeedArr = [];
    ucFeedArr.push(ucFeedDom);
    __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_exposure___default.a.pushListeningEle(ucFeedArr, function (arr) {
      window.SIMA({
        action: "_exposure",
        pk: '187523',
        data: {
          "index": pos,
          "aid": "ucFeed",
          "url": encodeURIComponent(info.link)
        }
      });
    });
    $("#" + self.dom).children("a").eq(pos).on('click', function () {
      window.SIMA({
        action: "_click",
        pk: '187523',
        data: {
          "index": pos,
          "aid": "ucFeed",
          "url": encodeURIComponent(info.link)
        }
      });
      utp.click(info.adid);
    });
  },
  resetAD: function resetAD(targetEle) {
    var index = targetEle.index() + 1;
    var domBox = {};
    if ($('#j_card_intenews').length == 0) {
      domBox = $("#j_card_like_feed");
    } else {
      domBox = $("#j_card_intenews");
    }
    var feeds = domBox.children();
    for (var i = index; i < feeds.length; i++) {
      if (feeds.eq(i).data("style") == 'client') {
        feeds.eq(i).insertBefore(feeds.eq(i).prev());
      }
    }
  }
};
/* harmony default export */ __webpack_exports__["a"] = (ucFeed);

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
//     

// import wintip from 'wintip'

function parentA(from, to) {
  if (!from) return false;
  if (from.nodeName == 'A') {
    return from;
  } else if (from == to) {
    return false;
  } else {
    return parentA(from.parentNode, to);
  }
}

var getTime = function getTime() {
  return new Date().getTime();
};

var backforward = {

  randNum: 0,

  // 函数队列
  queue: [],

  //浏览器ua
  UA: window.navigator.userAgent.toLocaleLowerCase(),

  isInitiated: false,

  shouldCompensatePV: function shouldCompensatePV() {

    if (!shouldUseTargetBlank(this.randNum)) {
      return false;
    }

    var detail = this.testUA();

    var DIRECTINSERT = detail.browser == 'vivobrowser' || detail.browser == 'huaweibrowser' || detail.browser == 'xiaomibrowser' || detail.browser == 'chrome';

    if (DIRECTINSERT) {
      return true;
    } else {
      return false;
    }
  },

  testUA: function testUA() {
    var ua = this.UA;
    var detail = {
      browser: '',
      platform: ''
    };

    if (/iphone|ipod|ipad/.test(ua)) {

      //ios设备
      detail.platform = 'ios';
      if (/ucbrowser/.test(ua)) {

        detail.browser = 'ucbrowser';
      } else if (/baidubrowser/.test(ua)) {
        detail.browser = 'baidubrowser';
      } else if (/mqqbrowser/.test(ua)) {
        detail.browser = 'mqqbrowser';
      } else if (/micromessenger/.test(ua)) {
        detail.browser = 'weixinapp';
      } else if (/baiduboxapp/.test(ua)) {
        detail.browser = 'baiduapp';
      } else if (/weibo/.test(ua)) {
        detail.browser = 'weiboapp';
      } else if (!/chrome/.test(ua)) {
        detail.browser = 'other';
      }
    } else {

      //android设备
      detail.platform = 'android';

      if (/vivobrowser/.test(ua)) {
        detail.browser = 'vivobrowser';
      } else if (/xiaomi/.test(ua)) {
        detail.browser = 'xiaomibrowser';
      } else if (/oppobrowser/.test(ua)) {
        detail.browser = 'oppobrowser';
      } else if (/mqqbrowser/.test(ua)) {
        detail.browser = 'mqqbrowser';
      } else if (/ucbrowser/.test(ua)) {
        detail.browser = 'ucbrowser';
      } else if (/baidubrowser/.test(ua)) {
        detail.browser = 'baidubrowser';
      } else if (/huawei/.test(ua)) {

        //TODO 这里可能有问题 需要进一步解决 有可能误判

        detail.browser = 'huaweibrowser';
      } else if (/micromessenger/.test(ua)) {
        detail.browser = 'weixinapp';
      } else if (/baiduboxapp/.test(ua)) {
        detail.browser = 'baiduapp';
      } else if (/weibo/.test(ua)) {
        detail.browser = 'weiboapp';
      } else {
        detail.browser = 'chrome';
      }
    }

    return detail;
  },

  bind: function bind(fn) {

    /**
     * 定时器根据时延判定是否回退
     * 
     */
    function intervalBackforward() {
      var now = getTime();
      var diff = now - window.backforward_lastInterval;
      window.backforward_lastInterval = now;
      // console.log('强插回退间隔 ::::::' + diff)
      if (diff > 3000) {
        // don't trigger on small stutters less than 1000ms
        fn && fn();
      }
    }

    var timmer = void 0;

    var detail = this.testUA();

    // wintip(detail)

    //判断直接强插
    var DIRECTINSERT = detail.browser == 'vivobrowser' || detail.browser == 'huaweibrowser' || detail.browser == 'xiaomibrowser' || detail.browser == 'chrome';

    //判断使用pageshow api
    var CANUSEPAGESHOW = detail.platform == 'android' && (detail.browser == 'ucbrowser' || detail.browser == 'mqqbrowser');

    var shouldUseTB = shouldUseTargetBlank(this.randNum);

    if (DIRECTINSERT && shouldUseTB) {
      var addTargetBlank = function addTargetBlank(arr) {

        //判断arr是否有效
        if (arr.length && 'forEach' in arr) {

          arr.forEach(function (node) {

            var href = node.getAttribute('href');

            if (!href || href.indexOf('javascript') >= 0) {
              return;
            }

            node.setAttribute('target', '_blank');
          });
        }
      };

      // wintip('直接强插')

      window.addEventListener('click', function (e) {
        if (document.body && parentA(e.target, document.body)) {
          setTimeout(function () {
            fn && fn();
          }, 800);
        }
      });

      //TODO 添加target="_blank"

      //非vivo
      if (detail.browser !== 'vivobrowser') {

        document.addEventListener('DOMNodeInserted', function (e) {
          var arr = void 0;

          switch (e.target.tagName) {
            case undefined:
              return;
            case "A":
              arr = [e.target];
              break;
            default:
              arr = e.target.querySelectorAll('a');
          }
          addTargetBlank(arr);
        }, false);
      }

      // chrome加上沉浸式状态栏meta

      if (detail.browser == 'chrome') {
        var metaTag = document.createElement('meta');
        metaTag.setAttribute('content', '#15adf6');
        metaTag.setAttribute('name', 'theme-color');

        document.head && document.head.appendChild(metaTag);
      }
    } else if ('onpageshow' in window && 'onpagehide' in window && (CANUSEPAGESHOW || !shouldUseTB)) {

      // wintip('pageshow')
      //支持pageshow和pagehide且能够正常使用bfcache的浏览器

      // console.log(':::::绑定pageshow::::::');
      window.addEventListener('pageshow', function (e) {
        // console.log(e.persisted, '::::::回退参数');
        if (e.persisted) {

          // console.log('::::直接执行回退::::');
          fn && fn();
        } else {
          // console.log('::::单次检测回退::::');
          intervalBackforward();
        }
      }, false);
      window.addEventListener('pagehide', function (e) {
        window.backforward_lastInterval = getTime();
      }, false);
    } else {

      // wintip('定时器')
      //其他情况使用定时器检测

      // console.log(':::::开启回退定时器:::::')
      timmer = setInterval(intervalBackforward, 800);
    }
  },
  add: function add(fn) {
    if (typeof fn == "function") {
      this.queue.push(fn);
    }
  },
  /**
   * 绑定事件，根据不同浏览器进行不同处理
   * 
   */
  init: function init() {

    this.randNum = Math.random();

    // 如果初始化过，直接返回
    if (this.isInitiated) {
      return;
    }

    window.backforward_lastInterval = new Date().getTime();

    window.backforward.bind(function () {
      // console.log('回退成功');

      setTimeout(function () {

        window.backforward.queue.forEach(function (fn) {
          fn && fn();
        });
      }, 300);
    });

    // 绑定回退刷新上报相关事件
    this.bindBackRefreshMethod();

    this.isInitiated = true;
  },
  bindBackRefreshMethod: function bindBackRefreshMethod() {

    //visibilitychange事件可能会有很多种情况触发

    // window.addEventListener("pagehide", handleVisibilityChange)
    window.addEventListener("pageshow", handleVisibilityChange);
    // document.addEventListener('visibilitychange', handleVisibilityChange, false)
  }

  /**
   * 回退刷新上报
   * 
   * @param {Event} e 
   */
};function handleVisibilityChange(e) {

  var navType = performance.navigation.type;
  if (navType == 2) {

    if (!window.backRefreshFlag) {

      //TODO 上报
      if (window.SIMA) {
        var clickInfo = {
          'type': 'bfcache',
          'name': 'backforward refresh', //当前点击的aid关键字 自定义
          'title': '回退刷新统计', //中文说明
          'index': 0 //索引  如果是单个为0即可
        };
        if (window.SIMA.suda_count) {
          window.SIMA.suda_count(clickInfo);
        }
      };
    }
  } else {
    window.backRefreshFlag = true;
  }
}

/**
 * 判断在几率下是否灰度
 * 
 * @param {number} rate 
 * @returns {boolean} 
 */
function shouldGrayScale(rate, rand) {

  if (rand < rate) {
    return true;
  } else {
    return false;
  }
}

/**
 * 判断是否使用target blank和直接强插
 * 
 * @returns {boolean} 
 */
function shouldUseTargetBlank(randNum) {
  //灰度策略
  var nowTime = new Date();

  var date = nowTime.getDate();

  var endTime = new Date('2017-9-21');

  if (nowTime.getTime() > endTime.getTime()) {
    return false;
  } else if (date == 18 && shouldGrayScale(0.8, randNum)) {
    return true;
  } else if (date == 19 && shouldGrayScale(0.7, randNum)) {
    return true;
  } else if (date == 20 && shouldGrayScale(0.5, randNum)) {
    return true;
  }

  return false;
}

window.backforward = backforward;

/* harmony default export */ __webpack_exports__["a"] = (backforward);

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var ua = window.navigator.userAgent.toLowerCase();
var os = /iphone|ipad|ipod/.test(ua) ? "ios" : "android";
var keyArr = ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"];
var n = 0;
var _et = {};
var prtl = 'https:' == window.location.protocol ? 'https://' : 'http://';
function getUid(fn) {
    if (window.checkLogin()) {
        window.getUserInfo(function (re) {
            fn && fn(re.uid || '');
        });
    } else {
        fn && fn('');
    }
}
function getfp() {
    return window.getCookie('fingerprint') || '';
}
function getustat() {
    return window.getCookie('ustat') || '';
}

function createRequest(url) {
    var img = new Image();
    img.src = url;
}

function filter(pUrl) {
    return pUrl.indexOf('#') == -1 ? pUrl : pUrl.split('#')[0];
}
if (typeof Object.assign != 'function') {
    Object.assign = function (target, varArgs) {
        // .length of function is 2

        if (target == null) {
            // TypeError if undefined or null
            throw new TypeError('Cannot convert undefined or null to object');
        }

        var to = Object(target);

        for (var index = 1; index < arguments.length; index++) {
            var nextSource = arguments[index];

            if (nextSource != null) {
                // Skip over if undefined or null
                for (var nextKey in nextSource) {
                    // Avoid bugs when hasOwnProperty is shadowed
                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                        to[nextKey] = nextSource[nextKey];
                    }
                }
            }
        }
        return to;
    };
}

function getEP(option) {

    var channel = window.location.href.match(/\w+\.sina\.cn/) || "";
    channel = channel ? channel[0].split('.')[0] : "";
    _et[option.ek] ? _et[option.ek]++ : _et[option.ek] = 1;

    return [keyArr[n++] + "=" + new Date().getTime(), //timestamp
    keyArr[n++] + "=" + encodeURIComponent(option.method), //method
    keyArr[n++] + "=" + (channel ? "wap_" + channel : ""), //channel
    keyArr[n++] + "=" + encodeURIComponent(option.ek), //ek
    keyArr[n++] + "=" + encodeURIComponent(option.src || filter(window.location.href) || ""), keyArr[n++] + "=" + _et[option.ek], //et
    keyArr[n++] + "=" + encodeURIComponent(JSON.stringify(option.data)) //attribute
    ].join('&');
}
function getCP(uid) {

    return [keyArr[n++] + "=" + encodeURIComponent(getustat()), //ustat              
    keyArr[n++] + "=" + os, keyArr[n++] + "=" + uid, //uid
    keyArr[n++] + "=" + encodeURIComponent(ua) //
    ].join('&');
}
function getData(option) {
    var arr = [];
    for (var i in option.data[0]) {
        arr.push(keyArr[n++] + "=" + option.data[0][i]);
    }

    return arr.join('&');
}

var sinaLog = function sinaLog(option) {

    if (!option || !option.method || !option.ek || !option.data || option.data.length == 0) {
        return {
            msg: '参数不足'
        };
    }

    getUid(function (uid) {
        n = 0;

        var str = [keyArr[n++] + "=error", keyArr[n++] + "=" + option.pk || '', //_pk
        keyArr[n++] + "=web", //web 标识浏览器 app server _src
        getCP(uid), getEP(option), getData(option)].join("&");

        createRequest(prtl + 'log.sina.cn/sle.gif?' + str);
    });
};
window.sinaLog = sinaLog;
/* harmony default export */ __webpack_exports__["a"] = (sinaLog);

/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var UA = function () {
  function UA() {
    _classCallCheck(this, UA);
  }

  _createClass(UA, [{
    key: 'UA',
    get: function get() {
      return this._UA || (this._UA = navigator.userAgent);
    },
    set: function set(val) {
      return null;
    }
  }, {
    key: 'platformInfo',
    get: function get() {
      var UAIDS = {
        client: {
          weibo: 'weibo',
          weixin: 'micromessenger',
          qq: 'mqqbrowser',
          uc: 'uc'
        },
        system: {
          ios: 'ios',
          android: 'android'
        }
      };
      var UA = this.UA;
      var regKeys = [],
          matches = [],
          ret = {};
      Object.keys(UAIDS).forEach(function (_type) {
        regKeys = regKeys.concat(Object.keys(UAIDS[_type]).map(function (item) {
          return UAIDS[_type][item];
        }));
      });
      matches = UA.toLowerCase().match(new RegExp('(' + regKeys.join('|') + ')+', 'ig'));
      if (matches && matches.length > 0) {
        Object.keys(UAIDS).forEach(function (_type) {
          var item = UAIDS[_type],
              matcher = 'other',
              key = null;
          Object.keys(item).some(function (key) {
            if (matches.indexOf(item[key]) !== -1) {
              matcher = key;
              return true;
            }
            return false;
          });
          ret[_type] = matcher;
        });
      }
      if (ret.system !== 'android') {
        ret.system = 'ios';
      }

      this._platformInfo = ret;

      return this._platformInfo;
    },
    set: function set(val) {
      return null;
    }
  }]);

  return UA;
}();

var ua = new UA();

/* harmony default export */ __webpack_exports__["a"] = (ua);

/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var getCallupId = function getCallupId(url) {
    var info = void 0;
    //检查是否为comos新闻
    var domain = getDomain(url);
    info = getComosInfo(url, domain);

    if (info) {
        return info;
    }

    //财经头条
    info = getCjTopInfo(url, domain);
    if (info) {
        return info;
    }

    //检查是否为博客
    info = getBlogInfo(url, domain);
    if (info) {
        return info;
    }

    //检查是否为高清图
    info = getHdpicInfo(url, domain);
    if (info) {
        return info;
    }

    //检查是否为媒体平台新闻
    info = getMpInfo(url, domain);
    if (info) {
        return info;
    }

    return false;
};
//获取媒体平台信息
//http://mp.sina.com.cn/media_web/controllers/article.php?uid=1626398840&article_id=60f0e078001000004&fromsinago=1
var getMpInfo = function getMpInfo(url, domain) {

    if (domain != 'kandian' && domain != 'k') {
        return false;
    }
    var arr = url.match('\/article\_([0-9a-zA-Z]+)_([0-9a-zA-Z]+)\.html');

    if (arr && arr[1] && arr[2]) {

        var type_tag = arr[2].substring(0, 1);
        /*
        if($type_tag=='p'){
            $mp_id = $matchs[1] . '-' . $matchs[2] . '-hdpic-mp';
        }else
        */
        if (type_tag == 'm') {
            return arr[1] + '-' + arr[2] + '-video-mp';
        } else {
            return arr[1] + '-' + arr[2] + '-cms-mp';
        }
    }
    return false;
};
var getComosInfo = function getComosInfo(url, domain) {

    //从comos链接中截取出文档ID
    var arr = url.match('\-i([a-z]{7}[0-9]{7})');

    var docId = arr ? arr[1] : '';
    if (docId && domain) {
        //原创正文模板
        var info = getOriginalArticleInfo(url, docId, domain);
        if (info) {
            return info;
        }
        //检查是否来自手浪“新浪头条”
        info = getConsiceArticleInfo(url, docId, domain);
        if (info) {
            return info;
        }

        if (domain == 'v') {
            domain = "video";
        }

        return docId + '-comos-' + domain + '-cms';
    }
};

// 获取原创正文模板信息
// http://sinanews.sina.cn/2014-07-09/yc-ianfzhnw1618885.shtml?cID=6280
var getOriginalArticleInfo = function getOriginalArticleInfo(url, docId, domain) {

    if (domain != 'yd') {
        return false;
    }
    var mid = getAgt(url, 'mid') || 0;

    return docId + '-' + mid + '-comos-original';
};

// 获取精编正文信息
// http://top.sina.cn/fashion/2014-04-11/tnews-ianfzhne5912860.d.html
var getConsiceArticleInfo = function getConsiceArticleInfo(url, docId, domain) {

    if (domain != 'top') {
        return false;
    }

    return docId + '-comos-consice';
};
/*
     * 财经头条文章
     */
var getCjTopInfo = function getCjTopInfo(url, domain) {

    if (domain == 'cj') {
        var arr = url.match('\/article\/detail\/([0-9a-zA-Z]+)\/([0-9a-zA-Z]+)');

        if (arr && arr[1] && arr[2]) {
            return arr[1] + '-' + arr[2] + '-cj-cjtop';
        }
    }
    return false;
};

//分析是否为博客信息
var getBlogInfo = function getBlogInfo(url, domain) {

    var nid = getBlogNid(url, domain);
    if (!nid) {
        return false;
    }
    return nid + '-blog';
};
//获得blog的nid
var getBlogNid = function getBlogNid(url, domain) {

    if (domain != 'blog') {
        return false;
    }
    var arr = url.match('dpool\/blog\/s\/blog_(.*?).html');

    if (arr && arr[1]) {
        return arr[1];
    }
    return false;
};

//获取高清图信息
var getHdpicInfo = function getHdpicInfo(url, domain) {

    if (domain != 'photo') {
        return false;
    }
    var arr = url.match('album_[0-9]_([0-9_]*)\.htm');
    if (arr && arr[1]) {
        //新的高清图页静态化后的链接：http://photo.sina.cn/album_4_704_109720.html

        return arr[1].replace(/\_/g, '-') + '-hdpic';
    }

    return false;
};

var getDomain = function getDomain(url) {
    var arr = url.match('\:\/\/([a-zA-Z0-9\.]{0,61})\.sina\.cn');
    return arr ? arr[1] : '';
};
var getAgt = function getAgt(url, key) {
    if (url.indexOf(key) == -1) {
        return '';
    }
    var str = url.split('?')[1];
    var arr1 = str.split('&');
    for (var i = 0; i < arr1.length; i++) {
        var arr2 = arr1[i].split('=');
        if (arr2[0] == key) {
            return arr2[1];
        }
    }
    return '';
};
/* harmony default export */ __webpack_exports__["a"] = (getCallupId);

/***/ }),
/* 17 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Wifi = function () {
  function Wifi() {
    _classCallCheck(this, Wifi);

    this.re = { result: null, ori: null };
  }

  _createClass(Wifi, [{
    key: 'wifi',
    value: function wifi(cb) {
      var plat = this.platformInfo;
      switch (plat.client) {
        case 'weixin':
        case 'QQ':
          this.weixin(cb);
          break;
        case 'weibo':
          this.weibo(cb);

          break;
        default:
          this.other(cb);
          break;
      }
    }
  }, {
    key: 'weixin',
    value: function weixin(cb) {
      var ua = this.UA;
      if (/NetType/.test(ua)) {
        //手Q，微信路线
        var type = ua.match(/NetType\/(\S*)/);
        this.re.ori = type[1];
        if (type[1].toLowerCase() == 'wifi') {
          this.re.result = 'wifi';
        }
      } else {
        // QQ浏览器路线
        this.other(cb);
      }
      cb(this.re);
    }
  }, {
    key: 'weibo',
    value: function weibo(cb) {
      var _this = this;

      if (this.platformInfo.system == 'android') {
        this.other(cb);
      } else {
        setTimeout(function () {
          if (typeof WeiboJSBridge == 'undefined') return;
          // document.addEventListener("WeiboJSBridgeReady", function(){
          WeiboJSBridge.invoke("getNetworkType", { "param": "value" }, function (params, success, error) {
            // alert(success)                 
            if (success && params.network_type.toLowerCase() == 'wifi') {
              _this.re.ori = params.network_type.toString();
              _this.re.result = 'wifi';
              // resolve(this.re);
              cb(_this.re);
            } else {
              // resolve(this.re);
              // alert(this.re)
              _this.re.ori = params.network_type.toString();
              cb(_this.re);
            }
          });
        }, 300);
      }
    }
  }, {
    key: 'other',
    value: function other(cb) {
      var connection = window.navigator.connection;
      if (connection && connection.type) {

        this.re.ori = connection.type.toString();
        if (connection.type.toString().toLowerCase() == 'wifi' || parseInt(connection.type) == 5) {
          this.re.result = 'wifi';
        }
      }
      cb(this.re);
    }
  }, {
    key: 'UA',
    get: function get() {
      return this._UA || (this._UA = navigator.userAgent);
    },
    set: function set(val) {
      return null;
    }
  }, {
    key: 'platformInfo',
    get: function get() {
      if (!this._platformInfo) {
        var UAIDS = {
          client: {
            weibo: 'weibo',
            weixin: 'micromessenger',
            QQ: 'qq',
            uc: 'uc'
          },
          system: {
            ios: 'ios',
            android: 'android'
          }
        };
        var UA = this.UA;
        var regKeys = [],
            matches = [],
            ret = {};
        Object.keys(UAIDS).forEach(function (_type) {
          regKeys = regKeys.concat(Object.keys(UAIDS[_type]).map(function (item) {
            return UAIDS[_type][item];
          }));
        });
        matches = UA.toLowerCase().match(new RegExp('(' + regKeys.join('|') + ')+', 'ig'));
        if (matches && matches.length > 0) {
          Object.keys(UAIDS).forEach(function (_type) {
            var item = UAIDS[_type],
                matcher = 'other',
                key = null;
            Object.keys(item).some(function (key) {
              if (matches.indexOf(item[key]) !== -1) {
                matcher = key;
                return true;
              }
              return false;
            });
            ret[_type] = matcher;
          });
        }
        if (ret.system !== 'android') {
          ret.system = 'ios';
        }

        this._platformInfo = ret;
      }
      return this._platformInfo;
    },
    set: function set(val) {
      return null;
    }
  }]);

  return Wifi;
}();

var wifi = new Wifi();

/* harmony default export */ __webpack_exports__["a"] = (wifi);

/***/ }),
/* 18 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return getEl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return runtime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return context; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return registerRuntime; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return destroyRuntime; });
var SID = 'mr-type';

var runtime = {
  // 模块实例集合
  // 在继承了 BaseModule 的组件对象实例化时注册
  // 在 ModuleFactory 自动绑定 DOM 组件时注册
  // {
  //   Foo: [  // 键值为 class name
  //     {
  //        el: Element,
  //        obj: foo,
  //        src: 'obj'
  //     },
  //     {
  //        el: Element,
  //        obj: foo,
  //        src: 'dom'
  //     },
  //     ...
  //   ],
  //   Bar: [{bar1}, {bar2}, ...]
  // }
  instancePool: {
    get length() {
      return Object.keys(runtime.instancePool).length - 1;
    }
  },

  // 模块构造器数集合，由 BaseModule.regist 注册
  // {<typeName>: <Class>}
  // {
  //   foo: class Foo,
  //   bar: class Bar
  // }
  classPool: {}
};

var context = {
  // 支持原生对象，Zepto对象，CSS 选择器
  getInstance: function getInstance(selector) {
    var results = queryInstances(selector);

    switch (results.length) {
      case 0:
        return null;
      case 1:
        return results[0]['obj'];
      default:
        return results.map(function (mod) {
          return mod.obj;
        });
    }
  },


  /**
   * 获取所有通过 BaseModule.regist 注册的类
   * @return {Array} [{class: 'Foo', typeName: 'foo'}]
   */
  showProtoes: function showProtoes() {
    return Object.keys(runtime.classPool).map(function (name) {
      return {
        class: runtime.classPool[name].name,
        typeName: name
      };
    });
  },
  getProto: function getProto(typeName) {
    return runtime.classPool[typeName];
  },
  destroy: function destroy(obj) {}
};

/**
 * 将组件初始化后的实例对象注册到 runtime 的实例池中
 * @param  {Module Object} obj 组件对象
 * @param  {Element} el  组件绑定的原生 DOM 元素
 */
function registerRuntime(obj, el) {
  var className = obj.constructor.name;
  var conf = {
    obj: obj,
    el: el,
    className: className,
    index: getInitedObjIndex(className, el)
  };

  if (conf.index > -1) {
    console.warn(el);
    throw new Error('同一元素不可绑定多个对象');
  } else if (hasInstanceType(className)) {
    patchInstance(conf);
  } else {
    addInstance(conf);
  }
  // console.log(el)
}

function addInstance(ins) {
  Object.defineProperty(runtime.instancePool, ins.className, {
    value: [{
      obj: ins.obj,
      el: ins.el,
      src: ins.el['__src'] === 'dom' ? 'dom' : 'obj'
    }],
    writable: false,
    enumerable: true
  });
}

function patchInstance(ins) {
  runtime.instancePool[ins.className].push({
    obj: ins.obj,
    el: ins.el,
    src: ins.el['__src'] === 'dom' ? 'dom' : 'obj'
  });
}

// function replaceInstance(ins) {
//   const instanceList = getInstancesByClassName(ins.className)

//   if (ins.el['__src'] !== 'dom') {
//     instanceList[ins.index].obj = ins.obj
//   }
// }

function hasInstanceType(className) {
  return runtime.instancePool.hasOwnProperty(className);
}

// 根据查找某类别下绑定的实例，未找到索引时，返回 -1
function getInitedObjIndex(className, el) {
  if (!hasInstanceType(className)) return -1;

  var instanceList = getInstancesByClassName(className);

  for (var i = 0; i < instanceList.length; i++) {
    if (instanceList[i].el.isEqualNode(el)) return i;
  }

  return -1;
}

// 当为 dom list 时取第一个元素，包装为 Zepto 对象
// el 非法时，返回 undefined
function getEl(el) {
  var p = function p($el) {
    return $el.length > 0 ? ($el['__ck'] = true, $el) : void 0;
  };

  switch (true) {
    case el instanceof Element:
      return p($(el));
    case el instanceof NodeList:
      return p($(el[0]));
    case el instanceof HTMLCollection:
      return p($(el[0]));
    case el && el['__ck']:
      return el; // $el
    default:
      return p($($(el).get(0))); // Zepto
  }
}

// el 参数类型安全，兼容原生 Element 与 Zepto 对象
function getTypeNameByDOM($el) {
  return $el ? $el.attr(SID) : $el;
}

function getClassNameByDOM($el) {
  var typeName = getTypeNameByDOM($el);
  var MClass = context.getProto(typeName);
  return MClass && MClass.name;
}

function getInstancesByClassName(name) {
  var objs = runtime.instancePool[name];

  // 始终返回数组，方便遍历使用
  return typeof objs === 'undefined' ? [] : objs;
}

function getInstancesByDOM($el) {
  var className = getClassNameByDOM($el);
  return getInstancesByClassName(className);
}

function queryInstances(selector) {
  var $el = getEl(selector);
  var instanceList = getInstancesByDOM($el);

  return instanceList.filter(function (mod) {
    return mod.el.isEqualNode($el[0]);
  });
}

function destroyRuntime(obj) {
  console.log('destroy', obj);
}



/***/ }),
/* 19 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export q */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return load; });
/* unused harmony export random */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return getUrlParam; });
/* unused harmony export isWechat */
/* unused harmony export limitStr */
/* unused harmony export storage */
/* unused harmony export isEmpty */
/* unused harmony export testEmail */
/* unused harmony export likeNumber */
/* unused harmony export checkCookie */
/* unused harmony export getCookie */
/* unused harmony export setCookie */
/* unused harmony export delCookie */
/* unused harmony export parseDate */
/* unused harmony export throttle */
/* unused harmony export realTime */
/* unused harmony export reformNum */
/* unused harmony export Touch */
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/**
 * 返回指定精度整型随机数
 * @param  {Number} min 左边距
 * @param  {Number} max 右边距
 * @return {Number}   指定范围随机数
 * random(1, 3)  // 1 | 2 | 3
 */
function random() {
  var min = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;
  var max = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;

  return Math.floor(Math.random() * (max - min + 1) + min);
}

/**
 * 原生选择器
 * @return {Element} 匹配元素列表
 * e.g.
 * q('.name')  // Element
 * q('.name', '.profile')  // Element
 */
function q() {
  return document.querySelectorAll.apply(document, arguments);
}

/**
 * 获取url参数
 * @param  {String} name 参数名
 * @return {String}      参数值
 * e.g.
 * // http://www.vv314.com?type=1&id=1
 * getUrlParam('id')  // 1
 * getUrlParam('name')  // null
 */
function getUrlParam(name) {
  var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)');
  var value = window.location.search.substr(1).match(reg);

  return value === null ? null : decodeURI(value[2]);
}

/**
 * 判断是否为微信浏览器
 * @return {Boolean}
 */
function isWechat() {
  var ua = navigator.userAgent.toLowerCase();
  return ua.match(/MicroMessenger/i) === 'micromessenger';
}

/**
 * 字符串超出截取，以省略号结尾
 * @param  {String} str    待截取字符串
 * @param  {Number} maxlength 长度
 * @return {String}        截取结果
 * e.g.
 * limitStr('abcdefg', 4) // abcd...
 */
function limitStr(str, maxlength) {
  return str.length > maxlength ? str.substr(0, maxlength) + '...' : str;
}

/**
 * 设置/获取 localStorage
 * 当 value 缺省时为获取数据, value 为对象时,执行序列化
 * @param  {String} name  数据名
 * @param  {String} [value] 数据项
 * e.g.
 * storage('goodid')  // 获取 goodid
 * storage('profile', {name: fish, gender: 1})  // 存储 profile
 */
function storage(name, value) {
  var data = '';

  if (arguments.length === 1) {
    data = localStorage.getItem(name);
    try {
      return JSON.parse(data);
    } catch (e) {
      return data;
    }
  } else {
    localStorage.setItem(name, (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object' ? JSON.stringify(value) : value);
  }
}

/**
 * 判断字符串、数组、对象内容是否为空
 * @param  {String | Obejct}  obj  数据源
 * @return {Boolean}  判断结果
 * e.g.
 * isEmpty('')  // true
 * isEmpty([])  // true
 * isEmpty({})  // true
 * isEmpty({name: 'fish'})  // false
 */
function isEmpty(obj) {
  switch (typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) {
    case 'undefined':
      return true;
    case 'string':
      return !obj.length;
    case 'object':
      return obj === null || !Object.keys(obj).length;
  }
}

/**
 * 判断是否为数字或数字字符串
 * @param  {Number | String} 数据
 * @return {Boolean}       判断结果
 * e.g.
 * likeNumber(5)  // true
 * likeNumber('8')  // true
 * likeNumber('2a')  // false
 */
function likeNumber(value) {
  return !isNaN(Number(value));
}

/**
 * 邮箱格式验证
 * @param  {String} email  email地址
 * @return {Boolean}  验证结果
 * e.g.
 * vaildEmail('vv314@foxmail.com')  // true
 */
function testEmail(email) {
  var emailRegex = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;

  return emailRegex.test(email);
}

/**
 * 检查 cookie 是否可用
 * @return {Boolean} true: 支持  false: 不支持
 */
function checkCookie() {
  // 现代浏览器已支持 cookieEnabled
  return !!window.navigator.cookieEnabled;
}

/**
 * 获取 Cookie
 * @param  {String} name  cookie名称
 * @return {String}
 * e.g.
 * // cookie: name=fish
 * getCookie('name')  // fish
 * getCookie('age')  // ''
 */
function getCookie(name) {
  var reg = new RegExp(name + '=(.*?)($|;)');
  var value = reg.exec(document.cookie);

  return value === null ? '' : decodeURI(value[1]);
}

/**
 * 设置 Cookie
 * @param {String} name   cookie 名
 * @param {String} value  cookie 值
 * @param {Number} days   有效时间
 * @param {String} domain 域名
 */
function setCookie(name, value) {
  var days = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 15;
  var domain = arguments[3];

  var exp = new Date();
  var domainStr = domain ? 'domain=' + domain : '';

  exp.setDate(exp.getDate() + days);
  // 调用 encodeURI 对中文及特殊符号编码
  document.cookie = name + '=' + encodeURI(value) + ';expires=' + exp + ';path=/;' + domainStr;
}

/**
 * 删除 Cookie
 * @param {String} name  cookie 名称
 * @param {String} domain  域名
 */
function delCookie(name, domain) {
  setCookie(name, '', -1, domain);
}

/**
 * 格式化时间
 * @param  {Date} dateObj Date 对象或时间戳
 * @return {Object}
 */
function parseDate(dateObj) {
  var f = function f(n) {
    return n > 9 ? n : '0' + n;
  };
  var date = dateObj instanceof Date ? dateObj : new Date(dateObj);
  return {
    y: date.getFullYear(),
    M: f(date.getMonth() + 1),
    d: f(date.getDate()),
    h: f(date.getHours()),
    m: f(date.getMinutes()),
    s: f(date.getSeconds())
  };
}

/**
 * 节流函数
 * @param  {Function} method 函数
 * @param  {Number} delay   间隔时间
 * @return {Function}        新函数
 */
function throttle(method, delay) {
  var timer = null;

  return function () {
    var _this = this;

    var args = arguments;
    clearTimeout(timer);

    timer = setTimeout(function () {
      method.apply(_this, args);
    }, delay);
  };
}

/**
 * 显示时钟
 * @param  {Function} cb         回调函数
 * @param  {Number}   freshTime 刷新时间，毫秒
 * @return {Object}             由 parseDate 返回的时间对象
 */
function realTime(cb, freshTime) {
  cb(parseDate(new Date()));

  return setInterval(function () {
    cb(parseDate(new Date()));
  }, freshTime || 1000);
}

/**
 * 格式化评论数
 * @param  {Number} num [description]
 * @return {String}     [description]
 *
 * e.g
 * reformNum(10000)  // 1万
 */
function reformNum() {
  var num = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

  var result = num;

  if (!num) return 0;

  if (num >= 1000000) {
    result = Math.floor(num / 10000) + '万';
  } else if (num >= 10000) {
    result = Number((num / 10000).toFixed(1)) + '万';
  }

  return result;
}

function LoadProto() {
  function load(src, callback) {
    load.js(src, callback);
  }

  load.js = function (src, callback) {
    var id = getIdBySrc(src);
    var el = document.getElementById(id);

    if (el) {
      callback();
    } else {
      el = document.createElement('script');
      el.id = id;
      el.src = src;

      el.addEventListener('load', function (event) {
        callback(null, event);
      });

      el.addEventListener('error', callback);

      document.body.appendChild(el);
    }

    return el;
  };

  load.series = function (urls, callback) {
    var url = urls.shift();

    if (url) {
      load(url, function (error) {
        error ? callback(error) : load.series(urls, callback);
      });
    } else {
      callback();
    }
  };

  load.parallel = function (urls, callback) {
    var i = urls.length;
    var done = void 0;
    var func = function func(error) {
      --i;
      if (!i && !done || error) {
        done = true;
        callback(error);
      }
    };

    urls.forEach(function (url) {
      return load(url, func);
    });
  };

  function getIdBySrc(src) {
    var isStr = typeof src === 'string';
    var num = void 0,
        sub = void 0;

    if (!isStr) return;

    if (~src.indexOf(':')) {
      src += '-join';
    }

    num = src.lastIndexOf('/') + 1;
    sub = src.substr(src, num);
    return src.replace(sub, '').replace(/\./g, '-');
  }

  return load;
}

// 加载单个脚本
// load('https://sina.cn/a.js', callback)
//
// 串行加载脚本
// load.series(['https://sina.cn/a.js', 'https://sina.cn/b.js'], callback)
//
// 并行加载脚本
// load.parallel(['https://sina.cn/a.js', 'https://sina.cn/b.js'], callback)
var load = new LoadProto();

/**
 * 检测手势方向
 *
 * e.g
 * var touch = new Touch()
 *
 * touch.listen('#app', function(direction) {
 *   console.log(direction)
 * })
 */

var Touch = function () {
  function Touch() {
    var threshold = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 20;

    _classCallCheck(this, Touch);

    this.isMobile = 'ontouchstart' in window;
    this.threshold = threshold;
  }

  _createClass(Touch, [{
    key: '_getAngle',
    value: function _getAngle(x, y) {
      return Math.atan2(y, x) * 180 / Math.PI;
    }
  }, {
    key: 'start',
    value: function start(e) {
      this.startX = this.isMobile ? e.touches[0].pageX : e.x;
      this.startY = this.isMobile ? e.touches[0].pageY : e.y;
    }
  }, {
    key: 'end',
    value: function end(e) {
      this.endX = this.isMobile ? e.changedTouches[0].pageX : e.x;
      this.endY = this.isMobile ? e.changedTouches[0].pageY : e.y;

      return this._getDirection();
    }
  }, {
    key: '_getDirection',
    value: function _getDirection() {
      var angX = this.endX - this.startX;
      var angY = this.endY - this.startY;
      var result = 'none';

      // 如果滑动距离太短
      if (Math.abs(angX) < this.threshold && Math.abs(angY) < this.threshold) return result;

      var angle = this._getAngle(angX, angY);

      if (angle >= -135 && angle <= -45) {
        result = 'up';
      } else if (angle > 45 && angle < 135) {
        result = 'down';
      } else if (angle >= 135 && angle <= 180 || angle >= -180 && angle < -135) {
        result = 'left';
      } else if (angle >= -45 && angle <= 45) {
        result = 'right';
      }

      return result;
    }
  }, {
    key: 'listen',
    value: function listen(selector, handle) {
      var _this2 = this;

      var touchEventsDesktop = { start: 'mousedown', end: 'mouseup' };

      if (window.navigator.pointerEnabled) {
        touchEventsDesktop = { start: 'pointerdown', end: 'pointerup' };
      } else if (window.navigator.msPointerEnabled) {
        touchEventsDesktop = { start: 'MSPointerDown', end: 'MSPointerUp' };
      }

      var touchEvent = {
        start: this.isMobile ? 'touchstart' : touchEventsDesktop.start,
        end: this.isMobile ? 'touchend' : touchEventsDesktop.end
      };

      $(selector).on(touchEvent.start, this.start.bind(this));
      $(selector).on(touchEvent.end, function (e) {
        return handle(_this2.end(e));
      });
    }
  }]);

  return Touch;
}();



/***/ }),
/* 20 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapt_js__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__template_js__ = __webpack_require__(1);
// jshint esversion:6





var doc = document;
var win = window;

var stick = {
  init: function init(selector) {
    var str = selector || "#j_card_yaowen";
    this.entry = str;
    this.stick();
  },
  stick: function stick() {

    // 插入置顶
    if (SM && SM.data && SM.data.feed) {
      var pos = 0;
      if (SM.data.feed[0]) {
        for (var i = 0; i < SM.data.feed[0].length; i++) {
          var str = this.info2str(SM.data.feed[0][i]);
          __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].appendToYaowen(str, pos++);
        }
      }

      if (SM.data.feed[1]) {
        var storage = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].storage.getSession('stick') || '';
        for (var j = 0; j < SM.data.feed[1].length; j++) {
          var str = this.info2str(SM.data.feed[1][j]);
          var info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adaptInfo(SM.data.feed[1][j], 'stick');

          if (storage.indexOf(info.link) != -1) {
            continue;
          }
          pos = SM.data.feed[1][j].pos;
          if (pos > 0) {
            pos -= 1;
          }

          if (this.entry == '#j_card_intenews' && pos > 0 && SM.data.feed[0] && SM.data.feed[0].length) {
            if (pos > SM.data.feed[0].length) {
              pos = pos - SM.data.feed[0].length;
            } else {
              pos = 0;
            }
          }

          __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].appendToCard(str, pos, this.entry);
          storage += info.link + ';';
        }

        if (storage) {
          __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].storage.setSession('stick', storage);
        }
      }
    }
    // 插入单条新闻
    if (SM && SM.data && SM.data.yaowenpos) {

      for (var k = 0; k < SM.data.yaowenpos.length; k++) {
        var str = this.info2str(SM.data.yaowenpos[k]);
        pos = SM.data.yaowenpos[k].pos;
        if (pos > 0) {
          pos -= 1;
        }

        __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].appendToCard(str, pos, this.entry);
      }
    }
    // 插入专题
    if (SM && SM.data && SM.data.zt_card) {
      SM.data.zt_card.forEach(this.insetCellZT.bind(this));
    }
  },
  info2str: function info2str(info) {
    var str = '';
    var info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adaptInfo(info, 'stick');
    info = this.tagZT(info);
    if (document.querySelector('#j_card_intenews')) {
      if (info.imgs) {
        for (var j = 0; j < info.imgs.length; j++) {
          info.imgs[j] = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.imgs[j], '230_154', true);
        }
      }
      return __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].Ztemplate.selectFnTem({ info: info });
    } else {
      return __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].getFeedStr('stick', info, str);
    }
  },
  insetCellZT: function insetCellZT(cellInfo) {
    var _newsList = cellInfo.newslist || [];

    //若插入的位置、标题、feed异常，则不插入
    if (!cellInfo.pos || !cellInfo.title || _newsList.length <= 0 || !__WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */]) {
      return;
    }

    var pos = parseInt(cellInfo.pos - 1);
    var ztCardStr = [];
    var tmpFeedStr = '';
    var _placeStr = 'ZT_FEED';

    //插入专题card
    var prevFeed = document.querySelector(this.entry).children[pos];
    if (prevFeed && !prevFeed.classList.contains('s_card_sp')) {
      ztCardStr.push('<section class="s_card_sp" style="border-top: .2rem solid #e8e8e8;">');
    } else {
      ztCardStr.push('<section class="s_card_sp">');
    }

    ztCardStr.push('<section class="special_box"><a href="' + cellInfo.url + '"><mark class="special_cate">' + cellInfo.tag + '</mark>' + cellInfo.title + '</a></section>');
    ztCardStr.push(_placeStr);
    cellInfo.enter_tag && ztCardStr.push('<a href="' + cellInfo.url + '"><ins class="special_most" title="' + cellInfo.title + '">' + cellInfo.enter_tag + '</ins></a>');
    ztCardStr.push('</section>');

    for (var j = 0; j < _newsList.length; j++) {
      var str = '';
      var info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adaptInfo(_newsList[j], 'stick');
      info = this.tagZT(info);
      //是否是智能版 
      if (document.querySelector('#j_card_intenews')) {
        if (info.imgs) {
          for (var j = 0; j < info.imgs.length; j++) {
            info.imgs[j] = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.imgs[j], '230_154', true);
          }
        }
        tmpFeedStr += __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].Ztemplate.selectFnTem({ info: info });
      } else {
        tmpFeedStr += __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].getFeedStr('stick', info, str);
      }
    }
    __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].appendToCard(ztCardStr.join('').replace(_placeStr, tmpFeedStr), pos, this.entry);
  },
  tagZT: function tagZT(info) {
    if (info.link.indexOf('_zt/') != -1 || info.link.indexOf('zt_d/') != -1) {
      if (document.querySelector('#j_card_intenews')) {
        info.tag = '<mark class="cm_mark cm_mark_r">专题</mark>';
      } else {
        info.tag = "专题";
      }
      info.nocomment = true;
    }
    return info;
  }

};

/* harmony default export */ __webpack_exports__["a"] = (stick);

/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/* jshint esversion:6 */
var doc = document;
var win = window;

function getUrlParam() {
  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
  var name = arguments[1];

  var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)');
  var urlStr = url.split("?")[1] || url.split("?")[0] || url;
  var value = urlStr.match(reg);
  return value === null ? null : decodeURI(value[2]);
}
var track = {
  init: function init() {
    return {
      action: '',
      t: 1, //random
      uid: '', //uid,guid
      info: '', //信息流info
      mod: '',
      cre: ''
    };
  },
  ElemExpose: function ElemExpose(doms, overwrite, url) {
    var exposeCnf = track.init();
    var infoArr = [];

    if (doms[0]) {
      exposeCnf.mod = getUrlParam(doms[0].href, "mod") || getUrlParam(doms[0].dataset.href, "mod") || exposeCnf.mod;
      exposeCnf.cre = getUrlParam(doms[0].href, "cre") || getUrlParam(doms[0].dataset.href, "cre") || exposeCnf.cre;
    }
    doms.forEach(function (index) {
      if (!index.dataset.info) {
        return;
      }
      if (url) {
        var nextDom = $(index).next().find("a");
        var prevDom = $(index).prev().find("a");

        if (nextDom.data("href") && nextDom.data("href").indexOf("sax") != -1) {
          window.SIMA({
            action: "_exposead",
            pk: '187522',
            data: {
              "cre": getUrlParam(url, "cre"), "info": $(index).data("info"), "mod": getUrlParam(url, "mod"), "action": "exposead", "adinfo": nextDom.data("info"), "loc": "up", "type": "home"
            }
          });
        }

        if (prevDom.data("href") && prevDom.data("href").indexOf("sax") != -1) {
          window.SIMA({
            action: "_exposead",
            pk: '187522',
            data: {
              "cre": getUrlParam(url, "cre"), "info": $(index).data("info"), "mod": getUrlParam(url, "mod"), "action": "exposead", "adinfo": prevDom.data("info"), "loc": "down", "type": "home"
            }
          });
        }
      }
      infoArr.push(index.dataset.info);
    });
    if (infoArr.length == 0) {
      return;
    }
    exposeCnf.action = 'expose';
    exposeCnf.uid = track.getUid();
    exposeCnf.t = parseInt(Math.random() * 10);
    exposeCnf.info = infoArr.join(';');

    overwrite && $.extend(exposeCnf, overwrite);
    window.SIMA({
      action: "_exposure",
      data: exposeCnf
    });
  },
  ElemClick: function ElemClick(doms, overwrite, url) {

    doms.forEach(function (dom) {
      dom.addEventListener('click', function () {
        if (!this.dataset.info) {
          return;
        }
        var exposeCnf = track.init();
        exposeCnf.action = 'click';
        exposeCnf.uid = track.getUid();
        exposeCnf.info = this.dataset.info;
        exposeCnf.mod = getUrlParam(this.href, "mod") || getUrlParam(this.dataset.href, "mod") || exposeCnf.mod;
        exposeCnf.cre = getUrlParam(this.href, "cre") || getUrlParam(this.dataset.href, "cre") || exposeCnf.cre;
        exposeCnf.t = parseInt(Math.random() * 10);
        if (!exposeCnf.info) {
          return;
        }
        if (url) {
          var nextDom = $(this).next().find("a");
          var prevDom = $(this).prev().find("a");
          if (nextDom.data("href") && nextDom.data("href").indexOf("sax") != -1) {
            window.SIMA({
              action: "_clickad",
              pk: '187522',
              data: {
                "cre": getUrlParam(url, "cre"), "info": $(this).data("info"), "mod": getUrlParam(url, "mod"), "action": "clickad", "adinfo": nextDom.data("info"), "loc": "up", "type": "home"
              }
            });
          }
          if (prevDom.data("href") && prevDom.data("href").indexOf("sax") != -1) {
            // debugger
            window.SIMA({
              action: "_clickad",
              pk: '187522',
              data: {
                "cre": getUrlParam(url, "cre"), "info": $(this).data("info"), "mod": getUrlParam(url, "mod"), "action": "clickad", "adinfo": prevDom.data("info"), "loc": "down", "type": "home"
              }
            });
          }
        }
        overwrite && $.extend(exposeCnf, overwrite);
        window.SIMA({
          "action": "_click",
          "data": exposeCnf
        });
      }, false);
    });
  },
  getUid: function getUid() {
    return function () {
      var guid, uid;
      if (typeof window.getCookie === 'function') {
        //alert(document.cookie)
        guid = getCookie('ustat') || '';
      }
      if (_typeof(window.userInfo) === 'object') {
        uid = userInfo.uid || '';
      }
      return (uid || '') + ';' + (guid || '');
    }();
  },
  getMod: function getMod(str) {
    if (str) {
      return this.match(str, 'mod');
    }
    return '';
  },
  getCre: function getCre(str) {
    if (str) {
      return this.match(str, 'cre');
    }
    return '';
  },
  match: function match(str, name) {
    var reg = new RegExp(name + "\=(.*?)\&");
    var r = str.match(reg);
    if (r != null) {
      return r[1];
    }
    return '';
  },
  log: function log(src) {
    if (window.location.protocol == 'http:') {
      var imgObj = new Image();
      imgObj.src = src;
    }
  }
};

/* harmony default export */ __webpack_exports__["a"] = (track);

/***/ }),
/* 22 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var doc = document;
var win = window;

var AddHistoryUrl = function () {
  function AddHistoryUrl(obj) {
    _classCallCheck(this, AddHistoryUrl);

    obj = obj ? obj : {};
    // 浏览器回退的地址
    this.wm = '';
    this.channelUrl = obj.channelUrl || location.protocol + '//' + location.host + this.routeName() + this.wmValue() + 'chname=' + this.channelName();
    this.startTime = 0;
    this.endTime = 0;
    this.blackListArray = ['wm=3206', 'wm=3255', 'wm=3242', 'wm=3208', 'wm=3315', 'wm=3312', 'wm=3402', '51xiancheng.com', '3g.cn', 'baidu'];

    this.init();
  }

  _createClass(AddHistoryUrl, [{
    key: 'init',
    value: function init() {
      this.goReturnChannel();
    }

    // 执行回退操作

  }, {
    key: 'goReturnChannel',
    value: function goReturnChannel() {
      this.startTime = new Date().getTime();
      if (this.HasHistoryUrl()) {
        if (this.isOldAdd() && this.isChannel() && this.isHomeSource()) {
          console.log('oncehis');
          var hostLink = this.channelUrl + '&times=1';
          var liveLink = location.href;
          if (this.isHomeId()) {
            // 浪首特定逻辑处理
            hostLink = location.search ? location.href + '&urlHistory=sina' : location.href + '?vt=4&urlHistory=sina';
          }
          history.replaceState(null, '', hostLink);
          history.pushState('', '', liveLink);
          window.addEventListener('popstate', function () {
            this.endTime = new Date().getTime();
            if (this.endTime - this.startTime > 200) {
              location.reload();
            }
          }.bind(this));
        } else if (!this.isHomeId() && !this.isOldAdd()) {
          console.log('twicehis');
          var hostLink = this.channelUrl + '&times=2';
          var liveLink = location.href;
          history.replaceState(null, '', hostLink);
          history.pushState('', '', liveLink);
          window.addEventListener('popstate', function () {
            this.endTime = new Date().getTime();
            if (this.endTime - this.startTime > 200) {
              location.reload();
            }
          }.bind(this));
        }
      }
    }
  }, {
    key: 'routeName',
    value: function routeName() {
      var routeStr = '/intercept.d.html/?';
      var hostName = location.hostname;
      // 图集页路由更改;
      if (hostName == 'photo.sina.cn' || hostName == 'k.sina.cn') {
        routeStr = '/intercept_d.html/?';
      }
      return routeStr;
    }

    //判断是否添加回退功能

  }, {
    key: 'HasHistoryUrl',
    value: function HasHistoryUrl() {
      return history.pushState && !appType.Utils.isSinaNews() && !appType.Utils.isQQ() && !appType.Utils.isWeibo() && this.backEnd() && this.isBlackList() && this.isStopHis();
    }
  }, {
    key: 'wmValue',
    value: function wmValue() {
      if (this.getUrlString('wm') != '' && this.getUrlString('wm') != null) {
        this.wm = 'wm=' + this.getUrlString('wm') + '&';
      }
      return this.wm;
    }

    // 获取地址栏的参数

  }, {
    key: 'getUrlString',
    value: function getUrlString(paraName) {
      var reg = new RegExp('(^|&)' + paraName + '=([^&]*)(&|$)', 'i');
      var r = window.location.search.substr(1).match(reg);
      if (r != null) return r[2];
      return null;
    }

    // 获取网址的名称标识

  }, {
    key: 'channelName',
    value: function channelName() {
      var hostname = location.hostname;
      return hostname.split('.')[0];
    }
  }, {
    key: 'isBlackList',
    value: function isBlackList() {
      var _this = this;
      var blackList = _this.blackListArray;
      var blackListLen = blackList.length;
      for (var i = 0; i < blackListLen; i++) {
        if (blackList[i].indexOf('wm=') >= 0 && doc.location.href.indexOf(blackList[i]) >= 0) {
          return false;
        } else if (doc.referrer.indexOf(blackList[i]) >= 0) {
          return false;
        }
      }
      return true;
    }
  }, {
    key: 'isHomeId',
    value: function isHomeId() {
      // 浪首屏蔽二次回退功能
      return location.hostname == 'sina.cn';
    }
  }, {
    key: 'isChannel',
    value: function isChannel() {
      return doc.referrer.indexOf(this.channelName()) == -1;
    }
  }, {
    key: 'backEnd',
    value: function backEnd() {
      return doc.location.href.indexOf('backToHome=') == -1;
    }
  }, {
    key: 'isOldAdd',
    value: function isOldAdd() {
      return doc.location.href.indexOf('urlHistory=' + this.channelName()) == -1;
    }
  }, {
    key: 'isStopHis',
    value: function isStopHis() {
      return doc.location.href.indexOf("his=0") == -1;
    }
  }, {
    key: 'isHomeSource',
    value: function isHomeSource() {
      return doc.referrer.indexOf('sina.cn') == -1;
    }
  }]);

  return AddHistoryUrl;
}();

var appType = {};
appType.Utils = {
  _UA: navigator.userAgent.toLowerCase(),
  UAIdentify: {
    weibo: 'weibo',
    qq: 'qq/',
    sinanews: 'sinanews'
  },
  isInclude: function isInclude(allStr, str) {
    return allStr.indexOf(str) > -1;
  },
  isSinaNews: function isSinaNews() {
    var _all = this.UAIdentify,
        _isSinaNews = this.isInclude(this._UA, _all.sinanews);
    if (_isSinaNews) {
      return true;
    } else {
      return false;
    }
  },
  isWeibo: function isWeibo() {
    var _all = this.UAIdentify,
        _isWeibo = this.isInclude(this._UA, _all.weibo);
    if (_isWeibo) {
      return true;
    }
    return false;
  },
  isQQ: function isQQ() {
    var _all = this.UAIdentify,
        _isQQ = this.isInclude(this._UA, _all.qq);
    if (_isQQ) {
      return true;
    } else {
      return false;
    }
  }
};

window.addEventListener('load', function () {
  var addHistory = new AddHistoryUrl();
  window.addEventListener('pageshow', function () {
    addHistory.startTime = new Date().getTime();
  });
});

/* unused harmony default export */ var _unused_webpack_default_export = (AddHistoryUrl);

/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_css__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__css_index_css__ = __webpack_require__(71);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__css_index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__css_index_css__);



/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_fingerprint__ = __webpack_require__(43);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_evercookie__ = __webpack_require__(41);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_utils__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__murmurHash3__ = __webpack_require__(52);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__murmurHash3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__murmurHash3__);
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };




// import hash from './hash';


var _Utils_ = {
  setCookie: function setCookie(key, value, expire, path, domain, extra) {
    var appendArr = [];
    appendArr.push(key + "=" + escape(value));
    if (expire) {
      var date = new Date();
      date.setTime(Date.now() + expire);
      appendArr.push("expires=" + date.toGMTString());
    }
    path && appendArr.push("path=" + path);
    domain && appendArr.push("domain=" + domain);
    extra && appendArr.push(extra);
    doc.cookie = appendArr.join(";");
  },
  getCookie: function getCookie(key) {
    if (!key) {
      console.log('missing key, get cookie abort!');
      return '';
    }
    key = key.replace(/([\.\[\]\$])/g, "\\$1");
    var mathReg = new RegExp(key + '=([^;]*)?;', 'i');
    var cookieCache = document.cookie + ';';
    return cookieCache.match(mathReg) ? unescape(RegExp.$1) : '';
  },
  getUrlParam: function getUrlParam(name, url) {
    var _search = '';
    _search = url && url.split('?').length > 1 && url.split('?')[1] || window.location.search;
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象]
    var r = _search.substr(1).match(reg); //匹配目标参数
    if (r != null) return unescape(r[2]);
    return null; //返回参数值
  },
  ajax: function ajax(options) {
    options = options || {};
    options.type = (options.type || "GET").toUpperCase();
    options.dataType = options.dataType || "json";
    var params = _Utils_.formatParams(options.data);
    if (window.XMLHttpRequest) {
      var xhr = new XMLHttpRequest();
    } else {
      var xhr = new ActiveXObject('Microsoft.XMLHTTP');
    }
    //接收 - 第三步
    xhr.onreadystatechange = function () {
      if (xhr.readyState == 4) {
        var status = xhr.status;
        if (status >= 200 && status < 300) {
          options.success && options.success(xhr.responseText, xhr.responseXML);
        } else {
          options.fail && options.fail(status);
        }
      }
    };
    //连接 和 发送 - 第二步
    if (options.type == "GET") {
      xhr.open("GET", options.url + "?" + params, true);
      xhr.send(null);
    } else if (options.type == "POST") {
      xhr.open("POST", options.url, true);
      //设置表单提交时的内容类型
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xhr.send(params);
    }
  },
  //格式化参数
  formatParams: function formatParams(data) {
    var arr = [];
    for (var name in data) {
      arr.push(encodeURIComponent(name) + "=" + encodeURIComponent(data[name]));
    }
    arr.push(("v=" + Math.random()).replace(".", ""));
    return arr.join("&");
  }
};

function sendInfo(_fpInfo) {
  //指纹测试接口            
  var url = "https://log.sina.cn/fp/";
  // $.ajaxSettings.beforeSend = function (xhr) {
  //     xhr.withCredentials = true;
  // };
  __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_utils__["a" /* $ */].ajax({
    type: 'POST',
    url: url,
    data: _fpInfo,
    xhrFields: {
      withCredentials: true
    },
    success: function success(data) {
      try {
        data = typeof data == 'string' ? JSON.parse(data) : data;
        if (data && data.code == '200' && data.vid) {
          __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_evercookie__["a" /* default */].set('SINAVID', data.vid);
        }
      } catch (e) {
        console.log(e);
      }
    }
  });
  // $.post(url, _fpInfo, function (data) {
  //     try {
  //         data = (typeof data == 'string') ? JSON.parse(data) : data;
  //         if ((data && data.code == '200' && data.vid)) {
  //             ec.set('SINAVID', data.vid)
  //         }
  //     } catch (e) {
  //         console.log(e);
  //     }
  // })
}

function dataHandling(allFpInfo, result) {
  if (_typeof(result[0]) !== 'object' || _typeof(result[1]) !== 'object') {
    return;
  }

  // 需要发送前hash处理的字段
  var needHash = ["user_agent", "js_fonts", "webgl", "canvas"];
  var fpdetail = [];

  /**数据处理生成hash**/
  // ua不从fingerprint里取
  var deleteObj = {
    // delete1: [],
    delete2: ["user_agent", "available_resolution", "adblock", "has_lied_languages", "has_lied_resolution", "has_lied_os", "has_lied_browser", "regular_plugins", "do_not_track"]
  };

  var valueObj = {
    // delete1: [],
    delete2: []
  };

  var fp_ua = null;
  result[1].details && result[1].details.forEach(function (item) {
    // 格式化数据
    if (item.value === true) {
      item.value = 1;
    } else if (item.value === false) {
      item.value = 0;
    } else {}

    // fpdetail信息集合
    var temp_value = item.value;
    if (typeof temp_value.join !== "undefined") {
      temp_value = temp_value.join(";");
    } else {
      temp_value = temp_value;
    }
    if (needHash.indexOf(item.key) !== -1) {
      fpdetail.push(__WEBPACK_IMPORTED_MODULE_3__murmurHash3___default.a.x64.hash128(temp_value, 31));
    } else {
      fpdetail.push(temp_value);
    }

    // 处理需要删除的key
    for (var key in deleteObj) {
      if (deleteObj[key].indexOf(item.key) === -1) {
        // ua单独计算
        if (typeof item.value.join !== "undefined") {
          valueObj[key].push(item.value.join(";"));
        } else {
          valueObj[key].push(item.value);
        }
      }
    }
  });

  var ua = navigator.userAgent.replace(/nettype\/.*\s/g, '');
  allFpInfo['ua'] = ua;
  var fp_ua = __WEBPACK_IMPORTED_MODULE_3__murmurHash3___default.a.x64.hash128(ua, 31);
  var fp_others = __WEBPACK_IMPORTED_MODULE_3__murmurHash3___default.a.x64.hash128(valueObj.delete2.join("~~~"), 31);
  // fp把ua单独拆出来计算
  allFpInfo['fp'] = fp_ua + '_' + fp_others;

  // fpua 计算 fp + ua 的信息
  // valueObj.delete2.unshift(ua);
  var fpuaList = [ua];
  fpuaList.push.apply(fpuaList, valueObj.delete2);
  allFpInfo['fpua'] = __WEBPACK_IMPORTED_MODULE_3__murmurHash3___default.a.x64.hash128(fpuaList.join("~~~"), 31);
  allFpInfo['fpdetail'] = fpdetail.join(",");

  sendInfo(allFpInfo);
  if (window.location.href.indexOf('debug=1') != -1) {
    console.log(valueObj.delete2);
    console.log(fpuaList);
    console.log(allFpInfo);
  }
}

function init() {
  var _mDocConfig = typeof __docConfig != 'undefined' && __docConfig || {},
      _config = {
    url: _mDocConfig && _mDocConfig.__docUrl || document.location.href || '',
    title: document.title || '',
    uid: typeof userInfo != 'undefined' && userInfo && userInfo.uid || ''
  };

  var allFpInfo = {
    c: '1', // 固定参数
    uid: _config.uid
    // referrer: document.referrer
  };

  try {
    // evercookie获取
    __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_evercookie__["a" /* default */].setRetryTime(7);
    if (Promise && Promise.all) {
      var p1 = new Promise(function (resolve) {
        __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_evercookie__["a" /* default */].getMany(['SINAVID'], function (result) {
          resolve(result);
        });
      });
      var p2 = new Promise(function (resolve) {
        __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_fingerprint__["a" /* default */].init('all', function (result) {
          resolve(result);
        });
      });
      Promise.all([p1, p2]).then(function (result) {
        dataHandling(allFpInfo, result);
      }).catch(function (e) {
        console.log(e);
      });
    } else {
      var totalResult = [];
      __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_evercookie__["a" /* default */].getMany(['SINAVID'], function (result1) {
        totalResult.push(result1);
        __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_fingerprint__["a" /* default */].init('all', function (result2) {
          totalResult.push(result2);
          try {
            dataHandling(allFpInfo, totalResult);
          } catch (e) {
            console.log(e);
          }
        });
      });
    }
  } catch (e) {
    console.log(e);
  }
}

/* harmony default export */ __webpack_exports__["a"] = (init);

/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapt_js__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__track_js__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cardExpose_js__ = __webpack_require__(57);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_lazyload__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__template_js__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__stick_js__ = __webpack_require__(20);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__mfelibs_base_tools_exposure__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__mfelibs_base_tools_exposure___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__mfelibs_base_tools_exposure__);









var isHTTPS = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isHTTPS();
var doc = document;
var cardPageCount = {
  "local": -1
};
var localAPIDOmain = isHTTPS ? 'https://interface.sina.cn' : 'http://interface.sina.cn';
var asyncCardInfo = {
  local: {
    host: localAPIDOmain + "/dfz/outside/wap/news/langshou_feed_data_routerv2.d.json?xc=1",
    cardId: "j_card_local",
    navName: "微博",
    navUrl: "https://m.weibo.cn/?vt=4&pos=108"
  }
};
var navlocal = {
  getLocal: function getLocal() {
    return __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getSearchValue("df");
  },
  init: function init() {
    // if(!document.querySelector("#j_top_nav")) return false;
    var that = this;
    var local = this.getLocal();
    var url = asyncCardInfo.local.host;
    if (local) {
      url += "&df=" + local;
    }
    __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].jsonp(url, function () {
      that.callback.apply(this, arguments);
      __WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_lazyload__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_lazyload__["a" /* default */].currentLazy();
    }.bind(this), function () {
      that.cbError("local");
    });
  },
  callback: function callback(data) {
    this.execLocal(data, "local", "j_card_local");
  },
  cbError: function cbError(cardType) {

    if (cardType == "local") {
      this.updateNavInfo(asyncCardInfo.local.navName, asyncCardInfo.local.navUrl, false);
    }
    var card = doc.querySelector("#j_card_" + cardType);
    __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].addClass(card, "hide");
  },
  execLocal: function execLocal(data, cardType, cardId) {

    if (!(data && data.retData && data.retData.dfz && data.retData.dfz.list)) {
      this.updateNavInfo(false, false, true);
      this.showGoToChannel(cardType);
      return;
    }
    var dfzname = data.retData.dfz.nav && data.retData.dfz.nav.title || false;
    var dfzurl = data.retData.dfz.nav && data.retData.dfz.nav.url || false;

    this.updateNavInfo(dfzname, dfzurl, true);

    if (!document.getElementById(cardId)) {
      return false;
    }
    var len = data.retData.dfz.list.length;

    if (len == 0) {
      this.showGoToChannel(cardType);
      return;
    }

    var i = 0;
    var hdstr = "";
    var bdstr = "";
    var info = null;
    var moreUrl = '';
    var card = doc.querySelector("#" + cardId);

    if (cardPageCount[cardType] == -1) {
      this.localToYaowen(data, cardType);

      info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adaptTitleInfo(data, cardType);
      moreUrl = info.title.url;
      hdstr += __WEBPACK_IMPORTED_MODULE_5__template_js__["a" /* default */].getCommonTitleStr(cardType, info);
    }

    if (data.retData.xc && data.retData.xc.list.length >= 2) {
      info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adapt2PicsInfo(data.retData.xc, 'xc');

      bdstr += __WEBPACK_IMPORTED_MODULE_5__template_js__["a" /* default */].get2PicsFeedStr(cardType, info);
    }

    for (i = 0; i < len; i++) {

      info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adaptInfo(data.retData.dfz.list[i], cardType);

      bdstr = __WEBPACK_IMPORTED_MODULE_5__template_js__["a" /* default */].getFeedStr(cardType, info, bdstr);
    }

    bdstr = this.getFeedBodyStr(bdstr, moreUrl, cardType);

    this.appendToCard(hdstr + bdstr, card);

    cardPageCount[cardType]++;

    this.showEle(card);
  },
  updateNavInfo: function updateNavInfo(name, url, isError) {
    //    
    if (document.querySelector("#j_top_nav")) {
      var navDom = document.querySelector("#j_top_nav").querySelectorAll(".hd_nav_a");
      var navStr = '';
      for (var i = 0, len = navDom.length; i < len; i++) {
        if (navDom[i].innerHTML == "") {
          if (name && url && isError) {
            navStr += '<a class="hd_nav_a" data-sudaclick="nav_dfz" href="' + url + '" title="' + name + '">' + name + '</a>';
          } else {
            navStr += '<a class="hd_nav_a" href="' + asyncCardInfo.local.navUrl + '" title="' + asyncCardInfo.local.navName + '">' + asyncCardInfo.local.navName + '</a>';
          }
        } else {
          navStr += navDom[i].outerHTML;
        }
      }
      document.querySelector("#j_top_nav").innerHTML = navStr;
    } else if (document.querySelector("#j_navScroll")) {
      var navDom = document.querySelector("#j_navScroll").querySelector(".sw_c2").querySelectorAll("a");
      var navItemDom = document.querySelector("#j_navScroll").querySelectorAll(".sw_c3");
      var navStr = '';
      for (var i = 0, len = navDom.length; i < len; i++) {
        if (navDom[i].innerHTML == "") {
          if (name && url && isError) {
            navStr += '<li class="sw_c3"><a class="show" data-sudaclick="nav_dfz" href="' + url + '" title="' + name + '">' + name + '</a></li>';
          } else {
            '<li class="sw_c3"><a class="show" href="' + asyncCardInfo.local.navUrl + '" title="' + asyncCardInfo.local.navName + '">' + asyncCardInfo.local.navName + '</a></li>';
          }
        } else {
          navStr += navItemDom[i].outerHTML;
        }
      }
      document.querySelector("#j_navScroll").querySelector(".sw_c2").innerHTML = navStr;
    }
  },
  showGoToChannel: function showGoToChannel(cardType) {
    var card = doc.querySelector("#j_card_" + cardType);
    if (!card) {
      return;
    }
    var titleDom = card.querySelector('.main_tit');
    if (!titleDom) {
      return;
    }
    var title = titleDom.innerHTML;
    var url = titleDom.parentNode.href;
    var url_more = titleDom.parentNode.getAttribute('data-href');

    // var tips = '<a href="' + (url_more || url) + '" class="more_btn">进入' + title + '<span class="more_icon icon_open goto"></span></a>';

    var tips = '<a href="' + (url_more || url) + '" class="more_btn">点击查看更多<span class="more_icon icon_open goto"></span></a>';

    card.querySelector('.f_more_tips').innerHTML = tips;
  },
  localToYaowen: function localToYaowen(data, cardType) {
    var len = data.retData.yaowen.list.length;
    var i = 0;

    var info = null;
    var pos = [8, 9];
    for (i = 0; i < pos.length; i++) {
      var str = "";
      info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adaptInfo(data.retData.yaowen.list[i], cardType);

      if (info.imgNum && info.imgNum > 3) {
        str += __WEBPACK_IMPORTED_MODULE_5__template_js__["a" /* default */].get3PicsFeedStr(cardType, info);
      } else {
        str += __WEBPACK_IMPORTED_MODULE_5__template_js__["a" /* default */].getCommonFeedStr(cardType, info);
      }

      __WEBPACK_IMPORTED_MODULE_5__template_js__["a" /* default */].appendToYaowen(str, pos[i]);
      this.resetAD(pos[i]);
    }
  },
  resetAD: function resetAD(pos) {
    var index = pos;
    var feeds = $('#j_card_yaowen').children();
    if ($('#j_card_yaowen').length == 0) return false;
    for (var i = index; i < feeds.length; i++) {
      if (feeds.eq(i).html().indexOf('广告') != -1) {
        feeds.eq(i).insertBefore(feeds.eq(i).prev());
      }
    }
  },
  appendToCard: function appendToCard(str, card, expose) {
    var tempThis = this;

    function needExpose(str, card) {
      var ctn = doc.createElement('div');

      ctn.innerHTML = str;

      var feeds = ctn.childNodes;
      var i = 0;
      var len = feeds.length;
      var arr = [];

      for (i = 0; i < len; i++) {
        __WEBPACK_IMPORTED_MODULE_7__mfelibs_base_tools_exposure___default.a.pushListeningEle([feeds[i]], function (index) {
          return function () {
            tempThis.sendLikeExpose(index);
          };
        }(tempThis.count), false);

        tempThis.count++;

        arr.push(feeds[i]);
      }

      while (feeds.length > 0) {

        card.appendChild(feeds[0]);
      }

      __WEBPACK_IMPORTED_MODULE_7__mfelibs_base_tools_exposure___default.a.pushListeningEle(arr, function (feeds) {
        __WEBPACK_IMPORTED_MODULE_2__track_js__["a" /* default */].ElemExpose(feeds);
      }, false);
      __WEBPACK_IMPORTED_MODULE_2__track_js__["a" /* default */].ElemClick(Array.prototype.slice.call(arr));
    }

    function notNeedExpose(str, card) {
      card.innerHTML = str;
    }

    if (expose) {
      needExpose(str, card);
    } else {
      notNeedExpose(str, card);
    }
  },
  getFeedBodyStr: function getFeedBodyStr(result, moreUrl, cardType) {
    var str = '';
    str += '<section class="s_card_it">';
    str += result;
    str += '<a href="' + moreUrl + '" data-sudaclick="card_more_' + cardType + '"><ins class="most" title="点击查看更多">点击查看更多<span class="most_ic"></span></ins></a>';
    str += '</section>';
    return str;
  },
  showEle: function showEle(ele) {
    __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].removeClass(ele, "hide");
  }
};
/* harmony default export */ __webpack_exports__["a"] = (navlocal);

/***/ }),
/* 26 */
/***/ (function(module, exports) {

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

!function (t, e) {
  var n = { _listeningEles: [], timer: 0, _init: function _init() {
      this._bindEvent();
    }, _bindEvent: function _bindEvent() {
      this._scrollListener(t, { timeEnd: this._checkExposeure.bind(this), timeStart: this._checkExposeureStart.bind(this) }), t.addEventListener("resize", { timeEnd: this._checkExposeure.bind(this), timeStart: this._checkExposeureStart.bind(this) }, !1);
    }, _checkExposeure: function _checkExposeure() {
      var t = this,
          e = 0,
          n = this._listeningEles,
          i = this._listeningEles.length,
          s = [],
          l = 0,
          r = 0,
          o = 500;for (e = 0; i > e; e++) {
        o = n[e].threshold;for (var c = 0; c < n[e].listeningEles.length; c++) {
          l++, n[e].listeningEles[c].canRepeat || !n[e].listeningEles[c].doneOnce ? this._calculateTime(n[e].listeningEles[c], "end", o) && (s.push(n[e].listeningEles[c].ele), n[e].listeningEles[c].doneOnce = !0) : r++;
        }s.length > 0 && (n[e].action && n[e].action(s), s = []);
      }setTimeout(function () {
        t.scroll_lock = !1;
      }, 300), l == r && clearInterval(t.timer);
    }, _checkExposeureStart: function _checkExposeureStart() {
      var t = 0,
          e = this._listeningEles,
          n = this._listeningEles.length,
          i = 500;for (t = 0; n > t; t++) {
        i = e[t].threshold;for (var s = 0; s < e[t].listeningEles.length; s++) {
          (e[t].listeningEles[s].canRepeat || !e[t].listeningEles[s].doneOnce) && this._calculateTime(e[t].listeningEles[s], "start", i);
        }
      }
    }, _calculateTime: function _calculateTime(e, n, i) {
      if (!e.ele) return !1;var s = 0,
          l = t.screen.height,
          i = i,
          s = 0,
          r = e.ele.getBoundingClientRect(),
          o = 10;return "start" == n && (r.top > 0 && r.top < l - o ? e.startTop || (e.startTop = Date.now()) : e.startTop = null), "end" == n && r.top > 0 && r.top < l - o && null != e.startTop && (e.startEnd = Date.now(), s = e.startEnd - e.startTop), s > i ? !0 : void 0;
    }, pushListeningEle: function pushListeningEle(t, e, n, i) {
      var s = {},
          l = this,
          r = {},
          o = [],
          i = i || 500;t.forEach(function (t) {
        s.ele = t, s.canRepeat = n ? !0 : !1, s.doneOnce = !1, s.startTop = null, s.endTop = null, r = l._clone(s), o.push(r);
      }), l._listeningEles.push({ listeningEles: o, action: e, threshold: i }), l._checkExposeureStart.call(l);
    }, _actionFactory: function _actionFactory(t) {
      var e = typeof t === "undefined" ? "undefined" : _typeof(t);return "function" == e ? t : "string" == e ? function () {
        var e = t.indexOf("?") > -1 ? t + "&timestamp=" + new Date().valueOf() : t + "?timestamp=" + new Date().valueOf(),
            n = new Image();n.src = e;
      } : null;
    }, scroll_lock: !1, _scrollListener: function _scrollListener(t, e) {
      function n() {
        i.scroll_lock || (i.scroll_lock = !0, l.timeStart && l.timeStart());
      }var i = this;if (!t || "object" != (typeof e === "undefined" ? "undefined" : _typeof(e))) throw new Error("scrollListener needs a object parameter.");for (var s = ["timeEnd", "timeStart"], l = {}, r = 0; r < s.length; r++) {
        l[s[r]] = e[s[r]] || null;
      }t.addEventListener("scroll", n.bind(this), !1), t.addEventListener("touchend", function () {
        l.timeStart && l.timeStart();
      }, !1);new Date(1970, 0, 1, 0, 0, 0);i.timer = setInterval(function () {
        l.timeEnd && l.timeEnd();
      }, 500);
    }, _clone: function _clone(t) {
      var e = null,
          n = this;switch (this._getType(t)) {case "object":
          e = {}, Object.keys(t).forEach(function (i) {
            e[i] = n._clone(t[i]);
          });break;case "array":
          e = [], t.forEach(function (t) {
            e.push(n._clone(t));
          });break;default:
          e = t;}return e;
    }, _getType: function _getType(t) {
      var e = typeof t === "undefined" ? "undefined" : _typeof(t);return "object" === e ? Object.prototype.toString.call(t).match(/\[object (.*)\]/) ? RegExp.$1.toLowerCase() : "other" : e;
    } };n._init(), t.newExposure = n;
}(window, document);

/***/ }),
/* 27 */
/***/ (function(module, exports) {

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

try {

    window.prtl = {

        type: 'https:' == window.location.protocol ? 'https' : 'http',

        prefix: 'https:' == window.location.protocol ? 'https://' : 'h' + 't' + 't' + 'p' + '://',

        cUrlSelf: function cUrlSelf(url, const_url) {

            var index_url = url.indexOf('https'),
                re_url = url,
                const_url = const_url;

            if (index_url == -1) {

                re_url = url = url.replace('h' + 't' + 't' + 'p' + '://', window.prtl.prefix);

                if (typeof const_url == 'undefined') return re_url;

                const_url.forEach(function (element) {

                    if (!element.http || !element.https) {

                        console.log('const_url参数不符合规范');
                    }

                    var reg = eval("/" + element.http + "/i");

                    if (reg.test(url)) {

                        re_url = url.replace(reg, window.prtl.type == 'http' ? element.http : element.https);
                    }
                });
            }

            return re_url;
        },

        cUrlAuto: function cUrlAuto(url) {

            var index_url = url.indexOf('https'),
                re_url = url,
                const_url;

            if (window.httpsjson && window.httpsjson.prtldomain) {

                const_url = window.httpsjson.prtldomain;
            } else {

                return;
            }

            if (index_url == -1) {

                re_url = url = url.replace('h' + 't' + 't' + 'p' + '://', window.prtl.prefix);

                if (typeof const_url == 'undefined') return re_url;

                const_url.forEach(function (element) {

                    if (!element.http || !element.https) {

                        console.log('const_url参数不符合规范');
                    }

                    var reg = eval("/" + element.http + "/i");

                    if (reg.test(url)) {

                        re_url = url.replace(reg, window.prtl.type == 'http' ? element.http : element.https);
                    }
                });
            }

            return re_url;
        },

        cUrlByCutSize: function cUrlByCutSize(url, size) {

            var index_url = url.indexOf('https'),
                re_url = url;

            if (index_url == -1 && window.prtl.type == 'https') {

                re_url = 'https://z' + Math.floor(Math.random() * 10) + '.sinaimg.cn/auto/resize?img=' + re_url + size;

                console.log('zc*' + url);
            }

            return re_url;
        }

    };
} catch (e) {
    console["error" in console ? "error" : "log"](e, "httpsSupport.js");
}

try {
    String.prototype.MD5 = function (bit) {

        var sMessage = this;

        function RotateLeft(lValue, iShiftBits) {
            return lValue << iShiftBits | lValue >>> 32 - iShiftBits;
        }

        function AddUnsigned(lX, lY) {

            var lX4, lY4, lX8, lY8, lResult;

            lX8 = lX & 0x80000000;

            lY8 = lY & 0x80000000;

            lX4 = lX & 0x40000000;

            lY4 = lY & 0x40000000;

            lResult = (lX & 0x3FFFFFFF) + (lY & 0x3FFFFFFF);

            if (lX4 & lY4) return lResult ^ 0x80000000 ^ lX8 ^ lY8;

            if (lX4 | lY4) {

                if (lResult & 0x40000000) return lResult ^ 0xC0000000 ^ lX8 ^ lY8;else return lResult ^ 0x40000000 ^ lX8 ^ lY8;
            } else return lResult ^ lX8 ^ lY8;
        }

        function F(x, y, z) {
            return x & y | ~x & z;
        }

        function G(x, y, z) {
            return x & z | y & ~z;
        }

        function H(x, y, z) {
            return x ^ y ^ z;
        }

        function I(x, y, z) {
            return y ^ (x | ~z);
        }

        function FF(a, b, c, d, x, s, ac) {

            a = AddUnsigned(a, AddUnsigned(AddUnsigned(F(b, c, d), x), ac));

            return AddUnsigned(RotateLeft(a, s), b);
        }

        function GG(a, b, c, d, x, s, ac) {

            a = AddUnsigned(a, AddUnsigned(AddUnsigned(G(b, c, d), x), ac));

            return AddUnsigned(RotateLeft(a, s), b);
        }

        function HH(a, b, c, d, x, s, ac) {

            a = AddUnsigned(a, AddUnsigned(AddUnsigned(H(b, c, d), x), ac));

            return AddUnsigned(RotateLeft(a, s), b);
        }

        function II(a, b, c, d, x, s, ac) {

            a = AddUnsigned(a, AddUnsigned(AddUnsigned(I(b, c, d), x), ac));

            return AddUnsigned(RotateLeft(a, s), b);
        }

        function ConvertToWordArray(sMessage) {

            var lWordCount;

            var lMessageLength = sMessage.length;

            var lNumberOfWords_temp1 = lMessageLength + 8;

            var lNumberOfWords_temp2 = (lNumberOfWords_temp1 - lNumberOfWords_temp1 % 64) / 64;

            var lNumberOfWords = (lNumberOfWords_temp2 + 1) * 16;

            var lWordArray = Array(lNumberOfWords - 1);

            var lBytePosition = 0;

            var lByteCount = 0;

            while (lByteCount < lMessageLength) {

                lWordCount = (lByteCount - lByteCount % 4) / 4;

                lBytePosition = lByteCount % 4 * 8;

                lWordArray[lWordCount] = lWordArray[lWordCount] | sMessage.charCodeAt(lByteCount) << lBytePosition;

                lByteCount++;
            }

            lWordCount = (lByteCount - lByteCount % 4) / 4;

            lBytePosition = lByteCount % 4 * 8;

            lWordArray[lWordCount] = lWordArray[lWordCount] | 0x80 << lBytePosition;

            lWordArray[lNumberOfWords - 2] = lMessageLength << 3;

            lWordArray[lNumberOfWords - 1] = lMessageLength >>> 29;

            return lWordArray;
        }

        function WordToHex(lValue) {

            var WordToHexValue = "",
                WordToHexValue_temp = "",
                lByte,
                lCount;

            for (lCount = 0; lCount <= 3; lCount++) {

                lByte = lValue >>> lCount * 8 & 255;

                WordToHexValue_temp = "0" + lByte.toString(16);

                WordToHexValue = WordToHexValue + WordToHexValue_temp.substr(WordToHexValue_temp.length - 2, 2);
            }

            return WordToHexValue;
        }

        var x = Array();

        var k, AA, BB, CC, DD, a, b, c, d;

        var S11 = 7,
            S12 = 12,
            S13 = 17,
            S14 = 22;

        var S21 = 5,
            S22 = 9,
            S23 = 14,
            S24 = 20;

        var S31 = 4,
            S32 = 11,
            S33 = 16,
            S34 = 23;

        var S41 = 6,
            S42 = 10,
            S43 = 15,
            S44 = 21;

        // Steps 1 and 2. Append padding bits and length and convert to words 

        x = ConvertToWordArray(sMessage);

        // Step 3. Initialise 

        a = 0x67452301;b = 0xEFCDAB89;c = 0x98BADCFE;d = 0x10325476;

        // Step 4. Process the message in 16-word blocks 

        for (k = 0; k < x.length; k += 16) {

            AA = a;BB = b;CC = c;DD = d;

            a = FF(a, b, c, d, x[k + 0], S11, 0xD76AA478);

            d = FF(d, a, b, c, x[k + 1], S12, 0xE8C7B756);

            c = FF(c, d, a, b, x[k + 2], S13, 0x242070DB);

            b = FF(b, c, d, a, x[k + 3], S14, 0xC1BDCEEE);

            a = FF(a, b, c, d, x[k + 4], S11, 0xF57C0FAF);

            d = FF(d, a, b, c, x[k + 5], S12, 0x4787C62A);

            c = FF(c, d, a, b, x[k + 6], S13, 0xA8304613);

            b = FF(b, c, d, a, x[k + 7], S14, 0xFD469501);

            a = FF(a, b, c, d, x[k + 8], S11, 0x698098D8);

            d = FF(d, a, b, c, x[k + 9], S12, 0x8B44F7AF);

            c = FF(c, d, a, b, x[k + 10], S13, 0xFFFF5BB1);

            b = FF(b, c, d, a, x[k + 11], S14, 0x895CD7BE);

            a = FF(a, b, c, d, x[k + 12], S11, 0x6B901122);

            d = FF(d, a, b, c, x[k + 13], S12, 0xFD987193);

            c = FF(c, d, a, b, x[k + 14], S13, 0xA679438E);

            b = FF(b, c, d, a, x[k + 15], S14, 0x49B40821);

            a = GG(a, b, c, d, x[k + 1], S21, 0xF61E2562);

            d = GG(d, a, b, c, x[k + 6], S22, 0xC040B340);

            c = GG(c, d, a, b, x[k + 11], S23, 0x265E5A51);

            b = GG(b, c, d, a, x[k + 0], S24, 0xE9B6C7AA);

            a = GG(a, b, c, d, x[k + 5], S21, 0xD62F105D);

            d = GG(d, a, b, c, x[k + 10], S22, 0x2441453);

            c = GG(c, d, a, b, x[k + 15], S23, 0xD8A1E681);

            b = GG(b, c, d, a, x[k + 4], S24, 0xE7D3FBC8);

            a = GG(a, b, c, d, x[k + 9], S21, 0x21E1CDE6);

            d = GG(d, a, b, c, x[k + 14], S22, 0xC33707D6);

            c = GG(c, d, a, b, x[k + 3], S23, 0xF4D50D87);

            b = GG(b, c, d, a, x[k + 8], S24, 0x455A14ED);

            a = GG(a, b, c, d, x[k + 13], S21, 0xA9E3E905);

            d = GG(d, a, b, c, x[k + 2], S22, 0xFCEFA3F8);

            c = GG(c, d, a, b, x[k + 7], S23, 0x676F02D9);

            b = GG(b, c, d, a, x[k + 12], S24, 0x8D2A4C8A);

            a = HH(a, b, c, d, x[k + 5], S31, 0xFFFA3942);

            d = HH(d, a, b, c, x[k + 8], S32, 0x8771F681);

            c = HH(c, d, a, b, x[k + 11], S33, 0x6D9D6122);

            b = HH(b, c, d, a, x[k + 14], S34, 0xFDE5380C);

            a = HH(a, b, c, d, x[k + 1], S31, 0xA4BEEA44);

            d = HH(d, a, b, c, x[k + 4], S32, 0x4BDECFA9);

            c = HH(c, d, a, b, x[k + 7], S33, 0xF6BB4B60);

            b = HH(b, c, d, a, x[k + 10], S34, 0xBEBFBC70);

            a = HH(a, b, c, d, x[k + 13], S31, 0x289B7EC6);

            d = HH(d, a, b, c, x[k + 0], S32, 0xEAA127FA);

            c = HH(c, d, a, b, x[k + 3], S33, 0xD4EF3085);

            b = HH(b, c, d, a, x[k + 6], S34, 0x4881D05);

            a = HH(a, b, c, d, x[k + 9], S31, 0xD9D4D039);

            d = HH(d, a, b, c, x[k + 12], S32, 0xE6DB99E5);

            c = HH(c, d, a, b, x[k + 15], S33, 0x1FA27CF8);

            b = HH(b, c, d, a, x[k + 2], S34, 0xC4AC5665);

            a = II(a, b, c, d, x[k + 0], S41, 0xF4292244);

            d = II(d, a, b, c, x[k + 7], S42, 0x432AFF97);

            c = II(c, d, a, b, x[k + 14], S43, 0xAB9423A7);

            b = II(b, c, d, a, x[k + 5], S44, 0xFC93A039);

            a = II(a, b, c, d, x[k + 12], S41, 0x655B59C3);

            d = II(d, a, b, c, x[k + 3], S42, 0x8F0CCC92);

            c = II(c, d, a, b, x[k + 10], S43, 0xFFEFF47D);

            b = II(b, c, d, a, x[k + 1], S44, 0x85845DD1);

            a = II(a, b, c, d, x[k + 8], S41, 0x6FA87E4F);

            d = II(d, a, b, c, x[k + 15], S42, 0xFE2CE6E0);

            c = II(c, d, a, b, x[k + 6], S43, 0xA3014314);

            b = II(b, c, d, a, x[k + 13], S44, 0x4E0811A1);

            a = II(a, b, c, d, x[k + 4], S41, 0xF7537E82);

            d = II(d, a, b, c, x[k + 11], S42, 0xBD3AF235);

            c = II(c, d, a, b, x[k + 2], S43, 0x2AD7D2BB);

            b = II(b, c, d, a, x[k + 9], S44, 0xEB86D391);

            a = AddUnsigned(a, AA);b = AddUnsigned(b, BB);c = AddUnsigned(c, CC);d = AddUnsigned(d, DD);
        }

        if (bit == 32) {

            return WordToHex(a) + WordToHex(b) + WordToHex(c) + WordToHex(d);
        } else {

            return WordToHex(b) + WordToHex(c);
        }
    };

    window.getNewPortal = function () {

        var newPortal = 'sinanews' + parseInt(Math.random() * 10);

        return 's' + newPortal.MD5();
    };
} catch (e) {
    console["error" in console ? "error" : "log"](e, "MD5.js");
}

try {
    //触发打开呼起浮层

    //_sinaCallEvent.trigger('sina_open_native',config);

    /**
    
    **若要对外调用，可设置参数如下：
    
      var config = {
    
        "iosInstallUrl":""+window.prtl.prefix+"interface.sina.cn/wap_api/ls/jump_client.d.html?k=82",
    
        "androidInstallUrl":""+window.prtl.prefix+"interface.sina.cn/wap_api/ls/jump_client.d.html?k=82",
    
        "iosNativeUrl":"sinanews://news.sina.cn",
    
        "androidNativeUrl":"sinanews://news.sina.cn",
    
        "openByWeixin":""+window.prtl.prefix+"a.app.qq.com/o/simple.jsp?pkgname=com.sina.news",
    
        "setOpenTrackUrl":"",
    
        "setDownloadTrackUrl":""
    
      }
    
      备注：参数不全时，字段可为空或者省略此参数
    
      _sinaCallEvent.trigger('sina_open_native',config);
    
    **/

    (function (win, doc) {

        var _urlDefault = '';

        win.getFromUrl = false;

        /**
          * 事件的绑定和触发
          **/

        win._callEventCom = {};

        win._callReadyEvent = {};

        win._sinaCallEvent = {

            on: function on(ev, callback) {

                var hasProperty = win._callEventCom.hasOwnProperty(ev),
                    isReadyInner = win._callReadyEvent.hasOwnProperty(ev);

                if (!hasProperty) {

                    win._callEventCom[ev] = callback;
                }

                if (isReadyInner) {

                    _sinaCallEvent.trigger(ev, win._callReadyEvent[ev]);

                    delete win._callReadyEvent[ev];
                }
            },

            trigger: function trigger(ev, params) {

                var hasProperty = win._callEventCom.hasOwnProperty(ev);

                if (hasProperty) {

                    win._callEventCom[ev](params);
                } else {

                    win._callReadyEvent[ev] = params;
                }
            }

        };

        win.sendSudaLog = function (sudaName) {

            var obj = {

                'name': sudaName,

                'type': '',

                'title': '',

                'index': '',

                'href': '' };

            if (typeof win.suds_count == 'function' || win.suds_count) {

                win.suds_count && win.suds_count(obj);
            }
        };

        /**
          *公用模块
          *包含获取UA／客户端判断
          **/

        win.Utils = {

            _UA: navigator.userAgent.toLowerCase() || '',

            UAIdentify: {

                weibo: 'weibo',

                qq: 'qq',

                uc: 'ucbrowser/',

                weixin: "micromessenger",

                chrome: 'chrome',

                sinanews: 'sinanews',

                aliPay: 'alipayclient',

                ios9: 'iphone os 9_',

                IOSFLAG: 'cpu iphone os ',

                IOSWeiboFlag: "iphone__os__"

            },

            getIOSVersion: function getIOSVersion() {

                var ua = this._UA,
                    _all = this.UAIdentify,
                    _version = ua.split(_all.IOSFLAG) || ua.split(_all.IOSWeiboFlag),
                    _vstr = '';

                _vstr = function (v) {

                    if (v.length > 1) {

                        var tempV = v[1].replace(/_/ig, '.');

                        return parseInt(tempV);
                    } else {

                        return 0;
                    }
                }(_version);

                return _vstr;
            },

            getWeiboVersion: function getWeiboVersion() {

                var ua = this._UA,
                    _all = this.UAIdentify,
                    _version = ua.split('__' + _all.weibo + '__'),
                    _vstr = _version.length > 1 ? _version[1] : '0.0.0';

                return this.getVersion(_vstr);
            },

            getVersion: function getVersion(str) {

                var arr = str.split('.'),
                    version = 0;

                version = parseFloat(arr[0] + '.' + parseInt(arr[1]));

                return version;
            },

            isInclude: function isInclude(allStr, str) {

                return allStr.indexOf(str) > -1;
            },

            isUC: function isUC() {

                var _all = this.UAIdentify,
                    _isUC = this.isInclude(this._UA, _all.uc);

                if (_isUC) {

                    return true;
                } else {

                    return false;
                }
            },

            isSinaNews: function isSinaNews() {

                var _all = this.UAIdentify,
                    _isSinaNews = this.isInclude(this._UA, _all.sinanews);

                if (_isSinaNews) {

                    return true;
                } else {

                    return false;
                }
            },

            isWeibo: function isWeibo() {

                var _all = this.UAIdentify,
                    _isWeibo = this.isInclude(this._UA, _all.weibo);

                if (_isWeibo) {

                    return true;
                }

                return false;
            },

            isQQ: function isQQ() {

                var _all = this.UAIdentify,
                    _isQQ = this.isInclude(this._UA, _all.qq);

                if (_isQQ) {

                    return true;
                }

                return false;
            },

            isWeixin: function isWeixin() {

                var _all = this.UAIdentify,
                    _isWeixin = this.isInclude(this._UA, _all.weixin);

                if (_isWeixin) {

                    return true;
                } else {

                    return false;
                }
            },

            isChrome: function isChrome() {

                var _all = this.UAIdentify,
                    _isChrome = this.isInclude(this._UA, _all.chrome);

                if (_isChrome) {

                    return true;
                } else {

                    return false;
                }
            },

            isAliPay: function isAliPay() {

                var _all = this.UAIdentify,
                    _isAliPay = this.isInclude(this._UA, _all.aliPay);

                if (_isAliPay) {

                    return true;
                } else {

                    return false;
                }
            },

            isIOS9: function isIOS9() {

                var _all = this.UAIdentify,


                //_isIos9 = this.isInclude(this._UA,_all.IOSFLAG),

                _version = this.getIOSVersion();

                //var ua = this._UA;

                if (_version >= 9) {

                    return true;
                } else {

                    return false;
                }
            },

            /**
               * [_UA 检测平台]
               * @return string [ios|android| ]
               */

            _system: function _system() {

                var ua = this._UA;

                //var android = ua.match(/Android/i);

                //if (ua.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)) {

                if (ua.match(/iphone|ipod/ig)) {

                    return 'ios';
                } else {

                    return 'android';
                }
            },

            getFullNumber: function getFullNumber(pos) {

                !!!pos && (pos = 1);

                var _len = pos.toString().length,
                    _pos = '';

                if (_len < 3) {

                    pos = ('000' + pos).substr(-3, 3);
                }

                return pos;
            }

            /**
            * 呼起模块，不再内部做业务处理，只做呼起相关逻辑处理
              **/

        };var RedirectToNative = {

            openTimer: null,

            /**
              * iosNativeUrl: string 必选 ios app上自定义的url scheme） 如 taobao://home(淘宝首页) etao://item?nid=xxx（一淘商品详情页）
              * androidNativeUrl: string 必选 android app自定义的url scheme
              * iosInstallUrl: string 必选 ios app store里的安装地址
              * androidInstallUrl: string 必选 android app的apk地址
              * package: string 可选 默认com.taobao.taobao android的包名，如淘宝为com.taobao.taobao，etao为com.taobao.etao
              * iosOpenTime: int 可选默认800ms， 启动ios客户端所需时间，一般ios平台整体性能不错，打开速度较快
              * androidOpenTime: int 可选默认2000ms，启动android客户端所需时间，android系统性能参差不齐所需启动时间也不齐，和android客户端本身启动时间也有关，比如3.0版本启动一淘客户端就平均比淘宝客户端要慢200ms
              */

            init: function init(_config) {

                var self = this,
                    isWeixin = Utils.isWeixin(),
                    isChrome = Utils.isChrome(),
                    isIOS9 = Utils.isIOS9(),
                    isQQ = !isWeixin && Utils.isQQ(),
                    isWeibo = Utils.isWeibo(),
                    isUC = Utils.isUC(),
                    config = _config || {},
                    isHttp = true;

                self.platform = Utils._system();

                self.openByWeixin = config.openByWeixin || _urlDefault;

                isQQ = !!(isQQ && self.openByWeixin) || _urlDefault;

                self.isNotScheme = !!config.isNotScheme;

                self.targetEl = config.targetEl || null;

                self._position = Utils.getFullNumber(config.position);

                self.position = !!config.calluptype && (config.calluptype || '') + self._position || '001';

                Track.sendClickTrack(self.position);

                //触发场景还原事件

                _sinaCallEvent.trigger('sina_scence_restore', []);

                // pc下什么都不处理,pc访问下可能href可以链接去其他地址

                if (!self.platform) return;

                if (self.platform == 'ios') {

                    self.installUrl = config.iosInstallUrl || _urlDefault;

                    self.nativeUrl = config.iosNativeUrl || _urlDefault;

                    var isDownloadUrl = self.installUrl.match(/(\S*)(d\.php\?k\=)(\S*)/);

                    self.openTime = config.iosOpenTime || 800;

                    if (isWeibo && self.installUrl && isDownloadUrl) {

                        self.installUrl += "&sinainternalbrowser=external";
                    }
                } else {

                    self.installUrl = config.androidInstallUrl || _urlDefault;

                    self.nativeUrl = config.androidNativeUrl || _urlDefault;

                    self.openTime = config.androidOpenTime || (isWeibo ? 1500 : 2000);
                }

                isHttp = self.nativeUrl.indexOf('' + window.prtl.prefix + '') > -1;

                //只有android下的chrome要用intent协议唤起native

                // if (self.platform != 'ios' && isChrome && !isWeibo && !isHttp && !isUC && !isQQ && !isWeixin) {

                //   self.nativeUrl = self._hackChrome();

                // }

                //IOS9通用链接跳转

                self._goIOS9Native(config);
            },

            /**
               * _hackChrome 只有android下的chrome要用intent协议唤起native
               * https://developers.google.com/chrome/mobile/docs/intents
               * @return {[type]} 
               */

            _hackChrome: function _hackChrome() {

                var self = this;

                var startTime = Date.now();

                if (self.nativeUrl == _urlDefault || !self.nativeUrl) {

                    return _urlDefault;
                }

                var paramUrlarr = self.nativeUrl.split('://'),
                    scheme = paramUrlarr[0],
                    schemeUrl = paramUrlarr[1];

                return 'intent://' + schemeUrl + '#Intent;scheme=' + scheme + ';end';

                // win.location = 'intent://' + schemeUrl + '#Intent;scheme=' + scheme + ';end';
            },

            /**
               * _goIOS9Native 是否为IOS9通用链接跳转
               * @return {[type]} 
               */

            _goIOS9Native: function _goIOS9Native(config) {

                var self = this,
                    isWeixin = Utils.isWeixin(),
                    isChrome = Utils.isChrome(),
                    isIOS9 = Utils.isIOS9(),
                    isQQ = !isWeixin && Utils.isQQ(),
                    isWeibo = Utils.isWeibo(),
                    isUC = Utils.isUC();

                //为IOS9，且不为微博、微信、qq、通用链接不为空，则直接跳转

                if (isIOS9 && config.ios9Url && !isWeibo && !isWeixin && !isQQ) {

                    window.location.href = config.ios9Url;

                    return;
                }

                if (isIOS9 && config.ios9Weixin && (isQQ || isWeixin)) {

                    window.location.href = config.ios9Weixin;

                    return;
                }

                //qq && 微信 && android，直接跳转应用宝

                if ((isQQ || isWeixin) && self.platform == 'android' && !!self.openByWeixin && !self.isNotScheme) {

                    self.openByWeixin += self.openByWeixin.indexOf('?') < 0 ? '?' : '';

                    var _appBaoParams = self.openByWeixin.indexOf('app.qq.com') > 0 ? '&android_schema=' + encodeURIComponent(self.nativeUrl) : '';

                    win.location.href = self.openByWeixin + _appBaoParams;

                    return;
                }

                //若不为通用链接，则跳转正常呼起

                self._gotoNative();
            },

            /**
               * [_gotoNative 跳转至native，native超时打不开就去下载]
               * @return 
               */

            _gotoNative: function _gotoNative() {

                var self = this,
                    isIOS9 = Utils.isIOS9(),
                    isWeibo = Utils.isWeibo(),
                    isUC = Utils.isUC(),
                    isAliPay = Utils.isAliPay(),
                    isAndroid = Utils._system() == 'android',
                    startTime = Date.now();

                if (isIOS9 && !!self.installUrl && !self.isNotScheme && !isWeibo && !isUC) {

                    self._gotoDownload(startTime);

                    return;
                } else if (!!self.nativeUrl) {

                    //呼起链接不为空，则如果是IOS9&&微博则直接使用scheme呼起，否则使用iframe调用scheme呼起

                    if (isIOS9 && isWeibo || self.isNotScheme) {

                        window.location.href = self.nativeUrl;
                    } else {

                        var newPortal = window.getNewPortal();

                        var newScheme = self.nativeUrl.match(/sinanews:\/\//ig) && self.nativeUrl.replace(/sinanews:\/\//ig, newPortal + '://');

                        if (isUC && isAndroid && newScheme) {

                            self.goScheme(newScheme);
                        } else {

                            self.goScheme(self.nativeUrl);
                        }
                    }
                }

                self._checkWBDownload();
            },

            goScheme: function goScheme(src) {

                if (!src) {
                    return;
                }

                var body = document.body,
                    tag = 'iframe';

                newNode = document.createElement(tag);

                newNode.id = 'J_redirectNativeFrame';

                newNode.style.display = 'none';

                newNode.style.width = "1px";

                newNode.style.height = "1px";

                newNode.border = "none";

                newNode.src = src;

                if (!body) {

                    setTimeout(function () {

                        body.appendChild(newNode);
                    }, 0);
                } else {

                    body.appendChild(newNode);
                }
            },

            /**
               * [_checkWBDownload 判断是否去下载]
               * @param  {[type]} 
               * @return 
               */

            _checkWBDownload: function _checkWBDownload(newNode) {

                var self = this,
                    startTime = Date.now(),
                    _installStatus = { installed: 1, downloaded: 2, unDownload: 3 };

                //获取当前安装状态

                window.wbInstallInfo = parseInt(window.wbInstallInfo || 0);

                var newDownloadUrl = '',
                    isWBValid = window.wbDownloadAPI && window.wbDownloadAPI.APIValid();

                if (window.wbDownloadAPI) {

                    //若微博版本低于6.12则返回false

                    if (window.wbInstallInfo && window.wbInstallInfo != 1 || !window.wbInstallInfo) {

                        window.wbDownloadAPI.getInstallInfo(function (re) {

                            window.wbInstallInfo = parseInt(re);
                        });
                    }

                    newDownloadUrl = window.wbDownloadAPI.wbSchemeUrl();
                }

                //判断若已经安装，则直接返回，不去下载

                if (window.wbInstallInfo == 1) {
                    return;
                }

                //非微博或不符合新版微博下载进度的情况

                if (!isWBValid) {

                    //if(!wbInstallInfo){

                    self.openTimer && clearTimeout(self.openTimer);

                    self.openTimer = setTimeout(function () {

                        try {

                            newNode && doc.body.removeChild(newNode);
                        } catch (e) {

                            console.log(e.message);
                        }

                        self._gotoDownload(startTime);

                        /**
                           * 测试时间设置小于800ms时，在android下的UC浏览器会打开native app时并下载apk，
                           * 测试android+UC下打开native的时间最好大于800ms;
                           */
                    }, self.openTime);

                    //}else if(wbInstallInfo && wbInstallInfo.status!=_installStatus.installed){
                } else {

                    //为最新微博6.12及以上版本，但返回状态不为安装状态时,立即下载

                    try {

                        doc.body.removeChild(newNode);
                    } catch (e) {

                        console.log(e.message);
                    }

                    self._gotoDownload(startTime, newDownloadUrl);
                }
            },

            /**
               * [_gotoInstall 去下载]
               * @param  {[type]} startTime [开始时间]
               * @return 
               */

            _gotoDownload: function _gotoDownload(startTime, newDownloadUrl) {

                var self = this;

                var endTime = Date.now(),
                    platform = Utils._system(),
                    isWeibo = Utils.isWeibo(),
                    isAndroid = platform == 'android' && endTime - startTime < self.openTime + 500,
                    isIOS = platform == 'ios';

                //清除锁

                _sinaCallEvent && _sinaCallEvent.trigger('sina_clear_lock');

                //触发下载事件

                _sinaCallEvent && _sinaCallEvent.trigger('wb_call_float', self.targetEl);

                if ((isAndroid || isIOS) && !!self.installUrl) {

                    Track.sendDownloadTrack(self.position);

                    if (win.newsAppActivity && win.newsAppActivity.trigger && isAndroid && isWeibo) {

                        win.newsAppActivity.trigger('callupDownload', []);
                    }

                    win.location.href = !!newDownloadUrl && newDownloadUrl || self.installUrl;

                    //触发下载进度条

                    _sinaCallEvent && _sinaCallEvent.trigger('get_wb_progress', self.targetEl);

                    return;
                }
            }

        };

        // function _log(txt){

        //   document.body.innerHTML =txt+'<br />'+ document.body.innerHTML;

        // }

        // function visibilitychange(event){

        //   try{

        //     var hidden = event.target.webkitHidden;

        //     hidden && RedirectToNative.openTimer && clearTimeout(RedirectToNative.openTimer);

        //     // _log('visibilitychange');

        //   }catch(e){

        //     console.log(e.message);

        //   }

        // }

        // document.addEventListener('visibilitychange', visibilitychange, false);

        // document.addEventListener('webkitvisibilitychange', visibilitychange, false);

        // window.addEventListener('pagehide', function () {

        //     RedirectToNative.openTimer && clearTimeout(RedirectToNative.openTimer);

        //     // _log('pagehide');

        // }, false);

        /*
          *[Track] 点击情况统计
          *包含点击统计，下载统计
          */

        var Track = {

            click: '' + window.prtl.prefix + 'open.api.sina.cn/count/appview',

            download: '',

            trackUrl: {},

            setClickTrackUrl: function setClickTrackUrl(url) {

                this.trackUrl.click = url;
            },

            setDownloadTrackUrl: function setDownloadTrackUrl(url) {

                this.trackUrl.download = url;
            },

            goTrack: function goTrack(url) {

                var B = document.getElementsByTagName("head")[0],
                    C = document.createElement("script"),
                    _url = url,
                    isMark = Utils.isInclude('?');

                if (!_url) {

                    return false;
                }

                // _url += isMark?'&':'?';

                C.src = _url + isMark ? '&' : '?' + 't=' + new Date().getTime();

                C.onload = function () {

                    C.onload = null;

                    C.parentNode.removeChild(C);
                };

                B.appendChild(C);
            },

            sendClickTrack: function sendClickTrack(position) {

                this.goTrack(this.trackUrl.click);

                window._sinaCallEvent.trigger('sina_suda_action', 'click_' + position);
            },

            sendDownloadTrack: function sendDownloadTrack(position) {

                this.goTrack(this.trackUrl.download);

                window._sinaCallEvent.trigger('sina_suda_action', 'callfail_' + position);

                window._sinaCallEvent.trigger('sina_callfail');
            }

            /**
              *插入微信提示浮层
              **/

        };var wxShareIco = 'j_callupTips_bg',
            hideWeixinTimer = null,
            systems = { ios: 'ios', android: 'android' },
            _callupTips = win.callupTips || {

            android: '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/dae7ff0c/20151013/popup_android.png',

            ios: '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/dae7ff0c/20151013/popup_ios.png'

        };

        function showWeiXinTips() {

            var _$wxBox = doc.querySelector('.' + wxShareIco),
                section = doc.createElement('section');

            if (!_$wxBox) {

                var arr = new Array(),
                    src = "" + window.prtl.prefix + "u1.sinaimg.cn/upload/2014/12/19/102181.png",
                    width = 100,
                    mySystem = Utils._system();

                if (_callupTips) {

                    if (mySystem == systems.android) src = _callupTips.android;

                    if (mySystem == systems.ios) src = _callupTips.ios;

                    width = '100%';
                }

                arr.push('<a class="j_share_wx" href="javascript:;">');

                arr.push('<span></span>');

                arr.push('</a>');

                arr.push('<a class="goback" href="javascript:;">');

                arr.push('</a>');

                arr.push('<div class="share_bg ' + wxShareIco + '" style="position:fixed;display:block;left:0;top:0;width:100%;height:100%;z-index:1009; background:rgba(0,0,0,.6);-webkit-animation:opacityIn 1s .2s ease both;">');

                arr.push('<p class="share_icon" style="clear:both; padding:10px; text-align:right;height:100%;background-position: right top; -webkit-animation:rotateUp 1s .8s ease both;z-index:9999;"><img src="' + src + '" alt="" width="' + width + '" /></p>');

                arr.push('</div>');

                section.innerHTML = arr.join('');

                doc.body.appendChild(section);

                _$wxBox = doc.querySelector('.' + wxShareIco);

                _$wxBox.onclick = function () {

                    if (_$wxBox.style.display != "none") {

                        _$wxBox.style.display = "none";

                        _sinaCallEvent && _sinaCallEvent.trigger('sina_clear_lock');
                    }
                };
            } else {

                _$wxBox = doc.querySelector('.' + wxShareIco);

                _$wxBox.style.display = "block";
            }
        }

        // var addStatisticsK = {

        //   keyListOrder : ['media','domain','channel','type','position','timeStamp','url'],

        //   getURLParamter : function(){

        //     var search = document.location.search,

        //       isCUDomain = search.indexOf('cu_domain')>-1,

        //       isCUType = search.indexOf('cu_type')>-1,

        //       isCUPos = search.indexOf('cu_pos')>-1;

        //     function GetQueryString(name) {  

        //       var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");  

        //       var r = window.location.search.substr(1).match(reg);  //获取url中"?"符后的字符串并正则匹配

        //       var context = "";  

        //       if (r != null)  

        //            context = r[2];  

        //       reg = null;  

        //       r = null;  

        //       return context == null || context == "" || context == "undefined" ? "" : context;  

        //     }

        //     if(isCUPos){

        //       return {

        //         domain : GetQueryString('cu_domain'),

        //         type : GetQueryString('cu_type'),

        //         channel : GetQueryString('cu_channel') || GetQueryString('cu_domain'),

        //         pos : GetQueryString('cu_pos')

        //       };

        //     }

        //     return false;

        //   },

        //   //获取URL中用于统计的信息

        //   fromUrlInfo : function(){

        //     var _domain = document.domain,

        //       _docUrl = window.location.href,

        //       _fromInfo = {

        //         media : 'sinawap',

        //         domain : _domain.split('.')[0],

        //         channel : 'news',

        //         type  : 'index',

        //         position : '0000',

        //         timeStamp : (new Date()).getTime(),

        //         url : _docUrl

        //       };

        //     try{

        //       _fromInfo.url = encodeURIComponent(_docUrl);

        //     }catch(e){

        //       console.log('k value not encodeURIComponent');  

        //     }

        //     if(typeof(__docConfig) != 'undefined'){

        //       _fromInfo.domain  = __docConfig.__tj_sch || _fromInfo.domain;

        //       _fromInfo.channel = __docConfig.__tj_ch || _fromInfo.domain;

        //       _fromInfo.type    = 'article';

        //     }

        //     return _fromInfo;

        //   },

        //   getNativeUrl : function(nativeUrl){

        //     var self = this,

        //       schemeHead = 'sinanews://',

        //       isSinanews = nativeUrl.indexOf(schemeHead)>-1,

        //       noParamK = !nativeUrl.match(/(sinanews:\/\/)(\S*)(k\=)(\S*)/),

        //       hasParam = nativeUrl.length > schemeHead.length,

        //       _keyListOrder = self.keyListOrder,

        //       _fromInfo = self.fromUrlInfo(),

        //       _keyArr = [],

        //       joinMark = '',

        //       _paramterFromUrl = self.getURLParamter();

        //     //从当前url中获取k字段

        //     if(!window.getFromUrl && _paramterFromUrl){

        //       _fromInfo.domain  = _paramterFromUrl.domain || _fromInfo.domain;

        //       _fromInfo.channel   = _paramterFromUrl.channel || _fromInfo.channel;

        //       _fromInfo.type    = _paramterFromUrl.type || _fromInfo.type;

        //       _fromInfo.position  = _paramterFromUrl.pos || _fromInfo.position;       

        //       window.getFromUrl = true;

        //     }

        //     //若呼起链接中缺少k字段，则从url众获取，并添加

        //     if(isSinanews && noParamK ){

        //       for(var o in _keyListOrder){

        //         var _name = _keyListOrder[o];

        //         _keyArr.push(_fromInfo[_name]);

        //       }

        //       if(hasParam){

        //         joinMark = '::';

        //       }

        //       nativeUrl += joinMark +'k='+ _keyArr.join('*');

        //     }

        //     return nativeUrl;

        //   },

        //   init :function(config){

        //     var self = this,

        //       _config = config || {};

        //     if(_config.iosNativeUrl === _config.androidNativeUrl ){

        //       _config.iosNativeUrl = _config.androidNativeUrl = self.getNativeUrl(_config.iosNativeUrl);

        //     }

        //     else{

        //       _config.iosNativeUrl = self.getNativeUrl(_config.iosNativeUrl);

        //       _config.androidNativeUrl = self.getNativeUrl(_config.androidNativeUrl);       

        //     }

        //     return _config;

        //   },

        // }

        win.sinaOpenNative = function (config) {

            var _config = config || {};

            RedirectToNative.init(_config);

            //统计信息统计

            _config.setOpenTrackUrl != 'undefined' && Track.setClickTrackUrl(_config.setOpenTrackUrl);

            _config.setDownloadTrackUrl != 'undefined' && Track.setDownloadTrackUrl(_config.setDownloadTrackUrl);
        };

        function init() {

            //绑定触发事件

            //showWeiXinTips();

            _sinaCallEvent.on('sina_direct_open', sinaOpenNative);

            _sinaCallEvent.on('sina_suda_action', sendSudaLog);
        }

        init();
    })(window, document);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "CallNativeCom_2.js");
}

try {
    /*
    * @author tingling 
    * @date 20170407
    * @fileoverview 下载Lite小包，获取下载包地址，并配置呼起参数；
    * @function 实现小包场景还原功能，即在未呼起的情况下，
    */

    (function (win, doc) {

        //判断条件配置

        var _conditions = [{ _type: true, _match: /android/ig }, { _type: false, _match: /sinanews/ig }];

        var _tmpClass = 'getLiteInfo';

        //小工具

        var _utils = {

            _$: function _$(element) {

                var $tmp = doc.querySelector(element);

                return $tmp;
            },

            _$A: function _$A(element) {

                var $tmp = doc.querySelectorAll(element);

                return $tmp && Array.prototype.slice.call($tmp) || [];
            },

            _typeof: function _typeof(obj) {

                return Array.prototype.toString.call(obj).toLowerCase().replace(/(\[object\s|\])/g, '');
            },

            _setAttr: function _setAttr(dom, params) {

                if (!dom || this._typeof(params) != 'object') {
                    return;
                }

                var item = null;

                for (var o in params) {

                    item = params[o];

                    dom.setAttribute(o, item);
                }
            },

            _ajaxJsonp: function _ajaxJsonp(url) {

                if (!url) {
                    return;
                }

                var _$script = doc.createElement('script');

                _$script.src = url;

                _$script.className = _tmpClass;

                doc.body.appendChild(_$script);
            },

            _removeDom: function _removeDom(element) {

                var _tmps = this._$A(element);

                _tmps.forEach(function (item) {

                    document.body.removeChild(item);
                });
            }

        };

        var _bindTimer = null;

        var _bindDelay = 1;

        //设置lite包信息，并绑定事件

        var _setLite = {

            isStart: false,

            channel: '',

            getChannel: function getChannel() {

                try {

                    this.channel = document.location.host.split('.')[0];

                    return this.channel;
                } catch (e) {

                    console.log('get Chennel error!');

                    return false;
                }
            },

            setInfo: function setInfo(info) {

                //{"code":0,"msg":"success","downloadUrl":"http://sinanewslitepack.sina.cn/package/20170407/7efa768e9c48f989ca055c9357ff53d5.apk","link":'http://v.sina.cn/weibo_ugc/2017-04-06/detail-ifyecfnu7522018.d.html?cre=tianyi&mod=whome&loc=6&r=25&doct=0&rfunc=35&tj=none&s=0&tr=25&vt=4&pos=108'}

                if (!info.url) {
                    return;
                }

                if (info.url.match(/javascript\:/ig)) {

                    info.url = '';
                }

                info.url = decodeURIComponent(info.url || '').replace(/&amp;/ig, '&');

                var _channel = this.channel || this.getChannel() || 'sina';

                var _$dom = _utils._$('[href=\"' + info.url + '\"]') || _utils._$('[href=\"' + info.url.replace('&', '&amp;') + '\"]');

                // debugger

                _$dom && _utils._setAttr(_$dom, {

                    'href': 'javascript:;',

                    'data-app': "news",

                    'data-domain': _channel,

                    'data-channel': _channel,

                    'data-type': "H5",

                    'data-kid': '',

                    'data-calluptype': "H5",

                    'data-url': info.url || "http://sina.cn",

                    'data-golink': info.downloadUrl || info.url || "http://sina.cn",

                    'class': _$dom.className + ' j_call_nativeLite'

                });

                // debugger

                _bindTimer = setTimeout(function () {

                    _sinaCallEvent.trigger('sina_bind_target');

                    _utils._removeDom('.' + _tmpClass);
                }, _bindDelay * 1000);
            }

        };

        //获取Lite包下载地址信息

        var getLiteInfo = {

            ajaxUrl: 'http://sinanewslitepack.sina.cn/litepack/index?callback=setLiteInfo&url=',

            targetClass: '.j_nativeLiteCell',

            getAllTarget: function getAllTarget() {

                var self = this;

                // debugger

                _utils._$A(this.targetClass).forEach(function (item, index) {

                    //http://sinanewslitepack.sina.cn/litepack/index?callback=setLiteInfo&url=http%3A%2F%2Fcj.sina.cn%2Farticle%2Fnormal_detail%3Furl%3Dhttp%3A%2F%2Ftech.sina.com.cn%2Fit%2F2017-04-07%2Fdoc-ifyecfnu7574268.shtml%26cre%3Dtianyi%26mod%3Dwhome%26loc%3D5%26r%3D25%26doct%3D0%26rfunc%3D35%26tj%3Dnone%26s%3D0%26tr%3D25%26cret%3Dtech%26vt%3D4%26pos%3D108     

                    //  console.log('getLite:'+item);

                    var _url = item.getAttribute('href').replace(/&amp;/ig, '&');

                    var _binded = item.getAttribute('bind-target') === 'binded';

                    if (!_url || _binded) {
                        return;
                    }

                    _utils._setAttr(item, {

                        'data-position': index

                    });

                    // _utils._ajaxJsonp(self.ajaxUrl+encodeURIComponent(_url));

                    var _info = {

                        code: 0,

                        msg: 'success',

                        downloadUrl: ['h', 't', 't', 'p'].join('') + '://down.apps.sina.cn/sinasrc/44/fd/3bad3b9a25d3539a1776a356c788fd44.apk',

                        url: _url

                    };

                    win.setLiteInfo(_info);
                });
            },

            init: function init() {

                this.getAllTarget();
            }

        };

        //判断必须是android，且不为微博、腾讯系

        function getPower() {

            var _ua = navigator.userAgent.toLocaleLowerCase(),
                _isPermit = true;

            _conditions.forEach(function (item) {

                var _result = _ua.match(item._match);

                _isPermit && (_isPermit = item._type ? !!_result : !_result);
            });

            return _isPermit;
        }

        //初始化

        function _init() {

            if (!getPower()) {
                return;
            }

            getLiteInfo.init();
        }

        win.setLiteInfo = _setLite.setInfo.bind(_setLite);

        try {

            _init();

            _sinaCallEvent && _sinaCallEvent.on('sina_lite_init', _init);
        } catch (e) {

            console.log(e.message);
        }
    })(window, document);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "getLite.js");
}

try {
    //触发打开呼起浮层

    //_sinaCallEvent.trigger('sina_open_native',config);

    /**
    
    var _SACONFIG = {
    
    		// domain : 'news',
    
    		// type : 'index',
    
    		position: '1000'
    
    	};
    
    主要用于处理新闻客户端添加的k参数
    
    1/监听j_call_native点击事件，需要根据情况判断呼起规则，点击呼起客户端(k参数取自dom结构参数)
    
    2/所有的新闻客户端k参数选取
    
    备注：
    
    优先级：
    
    监听Dom点击时：dom参数>_SACONFIG>docConfig>Url
    
    push : _SACONFIG>docConfig>Url
    
    其他: url>_SACONFIG>docConfig
    
    **/

    (function (win, doc) {

        var _urlDefault = '',
            _sudaName = 'sinanews',
            _saConfig = typeof _SACONFIG !== 'undefined' && _SACONFIG || {},
            clickInternal = 3 * 1000,
            loading = 0,
            isDebug = !!doc.location.href.match(/debug\=1/ig);

        win.getFromUrl = false;

        /**
        *自动添加点击事件，并获取k参数
          **/

        var getClickTargetInfo = {

            domClass: ['j_call_native', 'j_call_nativeLite'],

            dataName: { docid: null, callupid: null, globalswitch: '0', media: 'sinawap', app: null, domain: null,

                channel: null, type: null, calluptype: '', position: null, url: null, downloadk: null,

                golink: '', clicksuda: '', weiboSlience: '' },

            getDomInfo: function getDomInfo(dom) {

                var _className = dom.className,
                    domInfo = {},
                    domData = dom.dataset;

                //data-params='{"id": "-news-event-live","livetype":"","type":"","vid": ""}' 

                // domInfo.isCallNative = _className.indexOf(this.domClass)>-1;

                domInfo.isCallNative = _className.match(eval('/' + this.domClass.join('|') + '/ig'));

                if (domInfo.isCallNative) {

                    // data-paramsid="2016qglh0302" data-paramslivetype="event" data-paramstype="" data-paramsvid="174964"

                    //大事件直播参数

                    domInfo.paramsid = domData['paramsid'] || '';

                    domInfo.paramslivetype = domData['paramslivetype'] || '';

                    domInfo.paramstype = domData['paramstype'] || ''; //'',share,discuss

                    domInfo.paramsvid = domData['paramsvid'] || '';

                    domInfo.paramsmatchid = domData['paramsmatchid'] || '';

                    domInfo.docid = domData['docid']; //将废弃

                    domInfo.callupid = domData['callupid'];

                    domInfo.globalSwitch = domData['globalswitch'] || '0'; //取全局docid的开关

                    domInfo.downloadswitch = domData['downloadswitch'] || '1';

                    domInfo.media = domData['media'] || 'sinawap';

                    domInfo.app = domData['app'];

                    domInfo.domain = domData['domain'];

                    domInfo.channel = domData['channel'];

                    domInfo.type = domData['type'];

                    domInfo.calluptype = domData['calluptype'] || '';

                    domInfo.position = getPos(domData['position']);

                    //android 620前存在问题，url中携带“url”字样，导致android客户端打开h5，解析url存在问题

                    //ios不可以编码，否则打开页面为空白页

                    //手动将链接中的url替换成ur\\l

                    domInfo.url = (domData['url'] || '').replace(/url/ig, 'ur\\l');

                    domInfo.downloadk = domData['downloadk']; //将废弃

                    domInfo.kid = domData['kid'];

                    domInfo.golink = domData['golink'] || '', domInfo.clickSuda = domData['clicksuda'] || '';

                    domInfo.weiboSlience = domData['weiboslience'] || '';

                    domInfo.locked = !!parseInt(domData['locked']) || false;

                    //domInfo.position 	= domInfo.calluptype+domInfo._position;

                    //获取当前点击的dom对象

                    domInfo.targetEl = dom;
                }

                function getPos(pos) {

                    !!!pos && (pos = 1);

                    var _len = pos.toString().length,
                        _pos = '';

                    if (_len < 3) {

                        pos = ('000' + pos).substr(-3, 3);
                    }

                    return pos;
                }

                return domInfo;
            },

            findDom: function findDom(dom) {

                var maxDeep = 10,
                    domInfo = {};

                for (var o = 0; o < maxDeep; o++) {

                    domInfo.info = this.getDomInfo(dom);

                    if (domInfo.info.isCallNative) {

                        domInfo.dom = dom;

                        break;
                    } else {

                        dom = dom.parentElement;
                    }
                }

                return domInfo;
            },

            findTargetInfo: function findTargetInfo(dom) {

                var domInfo = this.findDom(dom);

                return domInfo && domInfo.info || null;
            },

            bindEventForApp: function bindEventForApp(obj, ev, fn) {

                if (!document.addEventListener) {

                    obj.attachEvent(ev, fn);
                } else {

                    obj.addEventListener(ev, fn, true);
                }
            },

            stopDefault: function stopDefault(e) {

                e = e || window.event;

                if (e.preventDefault) {

                    e.preventDefault();

                    //e.stopPropagation();
                } else {

                    e.returnValue = false;

                    //e.cancelBubble = true;
                }
            },

            addLock: function addLock(dom) {

                // var domInfo = this.findDom(dom);	        

                // domInfo && domInfo.dom && domInfo.dom.setAttribute('data-locked','1');

                window.callLocked = true;

                setTimeout(function () {

                    _sinaCallEvent && _sinaCallEvent.trigger('sina_clear_lock');
                }, clickInternal);
            },

            bindTarget: function bindTarget($obj) {

                var self = this;

                this.bindEventForApp($obj, 'click', function (e) {

                    var dom = e.target,
                        targetInfo = self.findTargetInfo(dom),
                        now = new Date().getTime(),
                        isLock = window.callLocked || false;

                    //if(targetInfo.isCallNative && (now - loading) > clickInternal){ 

                    if (targetInfo.isCallNative && !isLock) {

                        loading = now;

                        self.addLock(dom);

                        self.open_or_download_app(targetInfo);
                    }

                    self.stopDefault(e);
                });
            },

            getParamsStr: function getParamsStr(params) {

                var allStr = '{';

                for (var o in params) {

                    allStr += '\"' + o + '\":\"' + params[o] + '\"\,';
                }

                allStr = allStr.slice(0, -1);

                return allStr + '}';
            },

            sinaHead: {

                // news	: {type:'news',head:'sinanews',ios9Https:''+window.prtl.prefix+(isDebug?'langshou_api.dev.sina.cn/public/Callup.php':'sapi.sina.cn/Callup.php')},

                news: { type: 'news', head: 'sinanews', ios9Https: '' + window.prtl.prefix + 'sapi.sina.cn/Callup.php' },

                sports: { type: 'sports', head: 'sinasports', ios9Https: '' }

            },

            getSchemeInfo: function getSchemeInfo(type) {

                var _info = {},
                    _sinaHead = this.sinaHead;

                switch (type) {

                    case _sinaHead.sports.type:

                        _info.name = _sinaHead.sports.type;

                        _info.head = _sinaHead.sports.head;

                        _info.ios9Https = _sinaHead.sports.ios9Https;

                        _info.downloadUrl = '' + window.prtl.prefix + 'sports.sina.cn/app_download.d.html?id=1';

                        _info.wxUrl = '' + window.prtl.prefix + 'sports.sina.cn/app_download.d.html?id=1';

                        break;

                    default:

                        _info.name = _sinaHead.news.type;

                        _info.head = _sinaHead.news.head;

                        _info.ios9Https = _sinaHead.news.ios9Https;

                        //_info.wxUrl = ''+window.prtl.prefix+'a.app.qq.com/o/simple.jsp?pkgname=com.sina.news&ckey=CK1346428841879';

                        _info.wxUrl = ['h', 't', 't', 'p'].join('') + '://a.app.qq.com/o/simple.jsp?pkgname=com.sina.news&ckey=CK1346428841879';

                        //http://a.app.qq.com/o/simple.jsp?pkgname=com.sina.news&ckey=CK1346428841879

                        break;

                }

                return _info;
            },

            pageType: { event: 'event', h5: 'h5', doc: 'doc' },

            open_or_download_app: function open_or_download_app(config) {

                var data = {},
                    cid,
                    kid,
                    _config = config || _saConfig,
                    jumpConfig = {},
                    app = config.app || 'news',
                    _schemeInfo = this.getSchemeInfo(app) || {},
                    isDomDocId = typeof config != 'undefined' && (config.callupid != undefined && config.callupid.length > 0 || config.docid != undefined && config.docid.length > 0),
                    isConfigDoc = typeof __docConfig != 'undefined' && (__docConfig.__callupId != undefined && __docConfig.__callupId.length > 0 || __docConfig.__docId != undefined && __docConfig.__docId.length > 0),
                    isH5Url = typeof config != 'undefined' && _config.url != undefined && _config.url.length > 0,
                    isDownloadK = typeof config != 'undefined' && config.downloadk != undefined && config.downloadk,
                    isGolink = typeof config != 'undefined' && config.golink != undefined && config.golink.length > 0,
                    isEvent = typeof config != 'undefined' && config.paramsid,
                    isKid = typeof config != 'undefined' && config.kid != undefined && config.kid;

                var nativeUrl = "",
                    params = '',
                    golink = '',
                    schemeParams = "",
                    paramsStr = "",
                    ios9Url = '',
                    onlyParams = "",
                    ios9Params = '',
                    _type = '',
                    _pageType = this.pageType;

                if (isEvent) {
                    _type = _pageType.event;
                }

                if (isH5Url && !isEvent) {
                    _type = _pageType.h5;
                }

                if (isDomDocId || !!parseInt(config.globalSwitch) && isConfigDoc) {
                    _type = _pageType.doc;
                }

                //scheme参数不能

                switch (_type) {

                    //大事件参数

                    case _pageType.event:

                        params = {

                            "id": config.paramsid,

                            "livetype": config.paramslivetype,

                            "type": config.paramstype,

                            "vid": config.paramsvid,

                            "matchid": config.paramsmatchid

                        };

                        ios9Params = "params=" + encodeURIComponent(this.getParamsStr(params));

                        schemeParams = "params=" + this.getParamsStr(params);

                        break;

                    //h5参数

                    //notice:h5在scheme呼起中参数使用url=XXX方式，在ios9呼起中使用params={url:XXX}方式

                    case _pageType.h5:

                        params = { "url": _config.url };

                        ios9Params = "params=" + encodeURIComponent(this.getParamsStr(params));

                        schemeParams = "url=" + _config.url;

                        break;

                    //正文参数

                    //notice：正文在scheme中参数使用params=XXX或newsid=XXX方式均可，在IOS9中使用newsid=XXX方式

                    case _pageType.doc:

                        var _newsid = '';

                        _newsid = config.callupid || config.docid + '-comos-news-cms';

                        if (_newsid.indexOf('-') <= 0 && typeof __docConfig != 'undefined') {

                            _newsid = __docConfig.__callupId || __docConfig.__docId + '-comos-news-cms';
                        }

                        params = {

                            "id": _newsid,

                            "type": config.paramstype || ''

                        };

                        ios9Params = "newsid=" + _newsid;

                        schemeParams = "params=" + this.getParamsStr(params);

                        break;

                    default:

                        schemeParams = "ch=news_toutiao";

                        break;

                }

                //获取scheme呼起url

                nativeUrl = _schemeInfo.head + "://" + schemeParams;

                if (_schemeInfo.ios9Https) {

                    ios9Url = _schemeInfo.ios9Https + "?" + (ios9Params ? ios9Params : schemeParams);
                }

                data = {

                    iosNativeUrl: nativeUrl,

                    androidNativeUrl: nativeUrl,

                    ios9Url: ios9Url,

                    weixn: _schemeInfo.wxUrl

                };

                //若存在golink则会跳转链接

                if (isGolink) {

                    golink = config.golink;

                    data.weixn = config.golink;

                    //添加golink参数，当需要golink时，将此参数配置到ios9Url中	

                    //data.ios9Url && (data.ios9Url += '&golinkUrl='+encodeURIComponent(golink));

                    data.ios9Url && (data.ios9Url = _schemeInfo.ios9Https + "?golinkUrl=" + encodeURIComponent(golink) + "&" + (ios9Params ? ios9Params : schemeParams));

                    //需要配置IOS9微信打开参数

                    data.ios9Weixin = data.ios9Url;
                } else {

                    var _sinaHead = this.sinaHead;

                    switch (_schemeInfo.name) {

                        case _sinaHead.sports.type:

                            if (_schemeInfo.downloadUrl) {

                                golink = data.weixn = _schemeInfo.downloadUrl;

                                !config.weiboSlience && (config.weiboSlience = _schemeInfo.downloadUrl);
                            }

                            break;

                        default:

                            //需要统计下载渠道，需要dom中设置参数data-downloadk

                            //isDownloadK && (golink = ''+window.prtl.prefix+'interface.sina.cn/wap_api/ls/jump_client.d.html?k='+config.downloadk);

                            isDownloadK && (golink = 'https://interface.sina.cn/wap_api/ls/jump_client.d.html?k=' + config.downloadk);

                            isKid && (golink = 'https://so.sina.cn/palmnews/?id=' + config.kid);

                            //需要配置IOS9微信打开参数

                            //data.ios9Url && (data.ios9Weixin = data.ios9Url + '&golinkUrl='+encodeURIComponent(data.weixn));

                            data.ios9Url && (data.ios9Weixin = _schemeInfo.ios9Https + "?golinkUrl=" + encodeURIComponent(data.weixn) + "&" + (ios9Params ? ios9Params : schemeParams));

                            break;

                    }

                    //若既无downloadK，也无golink，则呼起不成功，不做处理
                }

                //若不需要下载，则配置golink为null,不跳转下载		

                if (parseInt(config.downloadswitch) < 1) {

                    //data.ios9Url && (data.ios9Url += '&downloadswitch=0');

                    data.ios9Url && (data.ios9Url = _schemeInfo.ios9Https + "?golinkUrl=" + encodeURIComponent(golink) + '&downloadswitch=0' + "&" + (ios9Params ? ios9Params : schemeParams));
                }

                jumpConfig = {

                    iosNativeUrl: data.iosNativeUrl, //参数负责呼起

                    androidNativeUrl: data.androidNativeUrl,

                    downloadswitch: config.downloadswitch || '1', //参数负责下载

                    iosInstallUrl: golink,

                    androidInstallUrl: golink,

                    ios9Url: data.ios9Url,

                    ios9Weixin: data.ios9Weixin,

                    weiboSlience: config.weiboSlience,

                    openByWeixin: data.weixn,

                    isType: 'DOM',

                    paramsK: _config,

                    calluptype: config.calluptype,

                    position: config.position,

                    targetEl: config.targetEl

                };

                window._sinaCallEvent.trigger('sina_open_native', jumpConfig);

                //window._sinaCallEvent.trigger('sina_suda_action','click_'+config.position);
            },

            joinLikeArray: function joinLikeArray(list) {

                var reList = [];

                list.forEach(function (item) {

                    var $tmp = document.querySelectorAll('.' + item);

                    Array.prototype.push.apply(reList, Array.prototype.slice.call($tmp));
                });

                return reList;
            },

            init: function init() {

                // var nativeAppBox = doc.body.querySelectorAll('.'+this.domClass),

                var nativeAppBox = this.joinLikeArray(this.domClass),
                    o = 0,
                    self = this;

                while (nativeAppBox && o < nativeAppBox.length) {

                    // var _items = nativeAppBox.item(o),

                    var _items = nativeAppBox[o],
                        _status = _items.getAttribute('bind-target'),
                        href = _items.getAttribute('href'),
                        pos = _items.getAttribute('position');

                    if (!_status) {

                        //替换a中href属性，放置其在IOS9.2自动跳转而不呼起客户端，并将值放置到data-golink中

                        if (href) {

                            !href.match(/javascript\:/ig) && _items.setAttribute('data-golink', href);

                            _items.setAttribute('href', 'javascript:void(0);');

                            !pos && _items.setAttribute('position', '1');
                        }

                        self.bindTarget(_items);

                        _items.setAttribute('bind-target', 'binded');
                    }

                    o++;
                }
            }

        };

        window.clearAllLocked = function () {

            window.callLocked = false;
        };

        window.bindTarget = function () {

            getClickTargetInfo.init();
        };

        /*
        
        新闻客户端呼起，添加k统计信息
        
        */

        var addStatisticsK = {

            config: {},

            //weiboSlience : ''+window.prtl.prefix+'interface.sina.cn/wap_api/ls/jump_client.d.html?k=178&cu_pos=0&cu_domain=news&cu_type=article',

            //weiboSlience : 'sinaweibo://install?url=sinaweibo%3A%2F%2Fsilence%3Fsilence_package_name%3Dcom.sina.news%26silence_version_code%3D493116%26silence_md5%3Ddcb2920d013c8e92a0610d6936b6ccc8%26slience_appid%3D84475&action=sinaweibo%3A%2F%2Fsilence%3Fsilence_package_name%3Dcom.sina.news%26silence_version_code%3D493116%26silence_md5%3Ddcb2920d013c8e92a0610d6936b6ccc8%26slience_appid%3D84475&packagename=com.sina.news&silence_package_name=com.sina.news&silence_version_code=4931116&silence_md5=dcb2920d013c8e92a0610d6936b6ccc8&slience_appid=84475',

            weiboSlience: 'sinaweibo://appsdownload?APPID=84475',

            TYPE: { dom: 'DOM', push: 'PUSH', other: 'OTHER' },

            keyListOrder: ['media', 'domain', 'channel', 'type', 'position', 'timeStamp', 'url'],

            //获取url中的统计参数

            getURLParams: function getURLParams() {

                var search = document.location.search,
                    isCUDomain = search.indexOf('cu_domain') > -1,
                    isCUType = search.indexOf('cu_type') > -1,
                    isCUPos = search.indexOf('cu_pos') > -1;

                function GetQueryString(name) {

                    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");

                    var r = window.location.search.substr(1).match(reg); //获取url中"?"符后的字符串并正则匹配

                    var context = "";

                    if (r != null) context = r[2];

                    reg = null;

                    r = null;

                    return context == null || context == "" || context == "undefined" ? "" : context;
                }

                if (isCUPos) {

                    return {

                        domain: GetQueryString('cu_domain'),

                        type: GetQueryString('cu_type'),

                        channel: GetQueryString('cu_channel') || GetQueryString('cu_domain'),

                        position: GetQueryString('cu_pos')

                    };
                }

                return false;
            },

            //获取SACOFIG／docConfig／默认值

            getAutoParams: function getAutoParams() {

                var _saConfig = typeof _SACONFIG != 'undefined' && _SACONFIG || '',
                    _fromUrlParams = this.getURLParams(),
                    //参数取自url,

                _kInfo = {

                    media: _saConfig && _saConfig.media || 'sinawap',

                    domain: _saConfig && _saConfig.domain || document.domain.split('.')[0],

                    channel: _saConfig && _saConfig.channel || 'news',

                    type: _saConfig && _saConfig.type || 'index',

                    position: _saConfig && _saConfig.position || '0000',

                    timeStamp: new Date().getTime(),

                    url: _saConfig && _saConfig.url || window.location.href

                };

                if (typeof __docConfig != 'undefined') {

                    _kInfo.domain = __docConfig.__tj_sch || _kInfo.domain;

                    _kInfo.channel = __docConfig.__tj_ch || _kInfo.domain;

                    _kInfo.type = __docConfig.__tj_type || 'article';
                }

                //从当前url中获取k字段

                if (!window.getFromUrl && _fromUrlParams) {

                    _kInfo.domain = _fromUrlParams.domain || _kInfo.domain;

                    _kInfo.channel = _fromUrlParams.channel || _kInfo.channel;

                    _kInfo.type = _fromUrlParams.type || _kInfo.type;

                    _kInfo.position = _fromUrlParams.position || _kInfo.pos;

                    window.getFromUrl = true;
                }

                return _kInfo;
            },

            //判断类型，并获取相应的k参数

            getKInfo: function getKInfo() {

                var _params = this.config,
                    _config = this.config,
                    isType = _config.isType,
                    _fAuto = this.getAutoParams(),
                    //参数取自页面配置

                _fConfig = typeof _config.paramsK !== 'undefined' && _config.paramsK || '';

                //不全的参数从auto参数中获取

                _params['media'] = _fConfig && _fConfig.media || _fAuto.media;

                _params['domain'] = _fConfig && _fConfig.domain || _fAuto.domain;

                _params['channel'] = _fConfig && _fConfig.channel || _fAuto.channel;

                _params['type'] = _fConfig && _fConfig.type || _fAuto.type;

                _params['position'] = _fConfig && _fConfig.position || _fAuto.position;

                _params['timeStamp'] = new Date().getTime();

                _params['url'] = _fConfig && _fConfig.url || _fAuto.url;

                return _params;
            },

            //将k统计参数添加到schemeUrl中

            getNativeUrl: function getNativeUrl(_nativeUrl) {

                var self = this,
                    schemeHead = 'sinanews://',
                    sportsHead = 'sinasports://',
                    ios9Head = isDebug ? 'langshou_api.dev.sina.cn/public/Callup.php' : 'sapi.sina.cn/Callup.php',
                    nativeUrl = _nativeUrl || '',
                    isSinanews = nativeUrl.indexOf(schemeHead) > -1 || nativeUrl.indexOf(ios9Head) > -1 || nativeUrl.indexOf(sportsHead) > -1,
                    noParamK = !nativeUrl.match(/(sinanews:\/\/)(\S*)(k\=)(\S*)/) || !nativeUrl.match(/(sinasports:\/\/)(\S*)(k\=)(\S*)/) || !nativeUrl.match(/(api.sina.cn\/Callup.php)(\S*)(k\=)/),
                    hasParam = nativeUrl.length > schemeHead.length,
                    _keyListOrder = self.keyListOrder,
                    _keyInfo = self.getKInfo(),
                    _keyArr = [],
                    joinMark = '';

                //若呼起链接中缺少k字段，则从url众获取，并添加

                if (isSinanews && noParamK) {

                    var _tmp = '';

                    for (var o in _keyListOrder) {

                        var _name = _keyListOrder[o];

                        _tmp = _keyInfo[_name];

                        if (_name.match(/url|ref/)) {

                            _tmp = encodeURIComponent(_keyInfo[_name]);
                        }

                        if (_name == 'position') {

                            _tmp = (_keyInfo.calluptype || '') + _keyInfo.position;
                        }

                        _keyArr.push(_tmp);
                    }

                    if (hasParam) {

                        joinMark = '::';
                    }

                    nativeUrl += joinMark + 'k=' + _keyArr.join('*');
                }

                return nativeUrl;
            },

            getUniqKey: function getUniqKey(key) {

                var code = ['A', 'z', 'C', 'E', 'd', 'H', 'j', 'v', 'k', 'L'],
                    timestamp = new Date().getTime();

                function getRandomCode() {

                    var org = '' + parseInt(Math.random() * 10000);

                    return [].map.call(org, function (item) {

                        return code[item];
                    }).join('');
                }

                key = key || '';

                return key + getRandomCode() + timestamp;
            },

            getInstallUrl: function getInstallUrl(_installUrl) {

                var _config = this.getAutoParams(),
                    installUrl = _installUrl || '';

                if (!installUrl) {

                    return installUrl;
                }

                if (installUrl.indexOf('?') <= -1) {

                    installUrl += '?';
                }

                if (installUrl.indexOf('cu_pos=') <= -1) {

                    //installUrl += '&cu_pos=' + _config.position + '&cu_domain='+_config.domain+'&cu_type='+_config.type+'&r='+this.getUniqKey();

                    installUrl += '&cu_pos=' + _config.position + '&cu_domain=' + _config.domain + '&cu_type=' + _config.type;
                }

                return installUrl;
            },

            getAndroidInstallUrl: function getAndroidInstallUrl(_installUrl, weiboUrl) {

                var self = this,
                    _slienceUrl = weiboUrl || self.weiboSlience,
                    isWeibo = Utils.isWeibo(),
                    weiboVersion = Utils.getWeiboVersion(),
                    isAndroid = Utils._system() == 'android',
                    isDefaultDownload = _installUrl.match(/jump_client.d.html|so.sina.cn\/palmnews|app\/download|app\_download/g);

                if (!!isDefaultDownload && isWeibo && isAndroid && weiboVersion >= 6) {

                    return _slienceUrl;
                } else {

                    return self.getInstallUrl(_installUrl);
                }
            },

            toAddNewsStaticParams: function toAddNewsStaticParams(config) {

                var _config = config || {},
                    isPush = typeof _config.isPush !== 'undefined' && _config.isPush,
                    installUrl = _config.installUrl || _config.installUrl || '',
                    nextDownApp = installUrl.match(/(\S*)(d\.php\?k\=)(\S*)/),
                    self = this,
                    _isContainDownloadSwitch = _config.hasOwnProperty('downloadswitch');

                //为唤起客户端添加统计参数，新闻针对新闻客户端

                if (_config.iosNativeUrl === _config.androidNativeUrl) {

                    _config.iosNativeUrl = _config.androidNativeUrl = self.getNativeUrl(_config.iosNativeUrl);
                } else {

                    _config.iosNativeUrl = self.getNativeUrl(_config.iosNativeUrl);

                    _config.androidNativeUrl = self.getNativeUrl(_config.androidNativeUrl);
                }

                if (_isContainDownloadSwitch && parseInt(_config.downloadswitch) || !_isContainDownloadSwitch) {

                    //若为push，则在需要跳转的链接后添加统计参数（新闻客户端）			

                    _config.iosInstallUrl = self.getInstallUrl(_config.iosInstallUrl);

                    _config.androidInstallUrl = self.getAndroidInstallUrl(_config.androidInstallUrl, _config.weiboSlience);

                    _config.ios9Url = self.getNativeUrl(_config.ios9Url);

                    _config.ios9Weixin = self.getNativeUrl(_config.ios9Weixin);
                } else {

                    _config.iosInstallUrl = _config.androidInstallUrl = '';

                    //不下载时，将通用链接下载开关打开

                    //需判断原有是否包含开关

                    if (_config.ios9Url && !_config.ios9Url.match(/downloadswitch=0/ig)) {

                        var _connect = _config.ios9Url.match(/\?/ig) ? '&' : '?';

                        _config.ios9Url += _connect + 'downloadswitch=0';
                    }
                }

                return _config;
            },

            init: function init(config) {

                var _config = config || {},
                    newsHead = 'sinanews://',
                    sportsHead = 'sinasports://',
                    nativeUrl = _config.androidNativeUrl || _config.iosNativeUrl || '',
                    isSina = nativeUrl.indexOf(newsHead) > -1 || nativeUrl.indexOf(sportsHead) > -1;

                this.config = _config;

                if (isSina) {

                    _config = this.toAddNewsStaticParams(_config);
                }

                return _config;
            }

        };

        win.goOpenNative = function (config) {

            var _config = addStatisticsK.init(config) || {};

            _sinaCallEvent.trigger('sina_direct_open', _config);
        };

        function init() {

            //绑定监听事件

            //getClickTargetInfo.init();

            _sinaCallEvent.on('sina_bind_target', bindTarget);

            _sinaCallEvent.trigger('sina_bind_target');

            _sinaCallEvent.on('sina_clear_lock', clearAllLocked);

            //绑定触发事件

            _sinaCallEvent.on('sina_open_native', goOpenNative);
        }

        init();
    })(window, document);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "OpenApp.js");
}

try {
    /**
    //插入push
    //window._sinaCallEvent.trigger('sina_build_native');
    //清除push
    //window._sinaCallEvent.trigger('ina_clear_native');
    //open之后，如果下次获取的为相同的新闻，则不显示
    //逻辑更新为，以18点为分界时间，上下午各展示一次，无论是否点击打开
    **/

    (function (win, doc) {

        var isTimeOver = false,
            keyListOrder = ['media', 'domain', 'channel', 'type', 'position', 'timeStamp', 'url'];

        var Push = {

            id: '_' + new Date().getTime(),

            isGetPushInfo: false,

            isPushOpen: false,

            pushInfo: {

                url: 'http://top.sina.cn/hot_news_mip.d.html',

                title: {

                    am: '每日最热24小时新闻，点击查看>>>',

                    pm: '24小时热门新闻有更新，点击查看>>>'

                },

                artid: ''

            },

            dividTime: 18,

            isEmpty: function isEmpty(objBox) {

                var i = 0,
                    _obj = objBox || {};

                for (var o in _obj) {

                    i++;
                }

                if (i > 0) {

                    return false;
                } else {

                    return true;
                }
            },

            createElement: function createElement(tag, attributes, content) {

                var newNode = doc.createElement(tag),
                    _attr = attributes;

                if (!this.isEmpty(_attr)) {

                    for (var o in _attr) {

                        newNode.setAttribute(o, _attr[o]);
                    }
                }

                if (content) {

                    newNode.innerHTML = content;
                }

                return newNode;
            },

            insertPush: function insertPush(info) {

                var section = this.createElement('section'),
                    self = this,
                    closeBtn = null,
                    openBtn = null,
                    _t = runTemplate.tinyTemplateParser(Template.Push.HomeV8, { info: info });

                section.innerHTML = _t;

                //section.setAttribute('style','position:fixed;bottom:50px;width:100%;height:50px;z-index:999;background-color:rgba(0,0,0,0.7)');

                doc.body.appendChild(section);

                closeBtn = section.querySelector('.close'), openBtn = section.querySelector('.open');

                if (closeBtn) {

                    closeBtn.onclick = function () {

                        self.closePush();

                        sendSudaLog('sinanews_homev8_close');
                    };
                }

                if (openBtn) {

                    openBtn.onclick = function () {

                        self.openApp();

                        sendSudaLog('sinanews_homev8_open');

                        // self.closePush();

                        // sendSudaLog('sinanews_homev8_close');

                        //不需要记录，只有本次关闭，下次依然会打开

                        //更改为，初始化时，每天上下午各记录一次，即，只展示一次，无论点过与否

                        // self.set_disable_record();
                    };
                }
            },

            changePushShow: function changePushShow(isShow) {

                var section = doc.querySelector('#' + this.id),
                    scale = isShow ? 1 : -1;

                if (section) {

                    if (scale > 0) {

                        section.style['display'] = 'block';
                    } else {

                        setTimeout(function () {

                            section.style['display'] = 'none';
                        }, 600);
                    }

                    //section.style['transform'] = 'translate3d('+scale*100+'%,0,0)';

                    section.style['-webkit-transform'] = 'translate3d(' + scale * 100 + '%,0,0)';
                }
            },

            openPush: function openPush() {

                //获取展示状态

                this.isAbleDisplay = this.enable_disp();

                //去掉从localStorage中读取权限的功能

                if (this.isGetPushInfo && !this.isPushOpen && isTimeOver && this.isAbleDisplay) {

                    this.changePushShow(true);

                    this.isPushOpen = true;
                }
            },

            uid: 'push_open',

            isAbleDisplay: true,

            enable_disp: function enable_disp() {

                var self = this;

                try {

                    var PCRecord = null;

                    if (!!localStorage.sina_push) {

                        PCRecord = JSON.parse(localStorage.sina_push);
                    }

                    // console.log('get_sina_push:'+PCRecord[self.uid]+'/'+self.pushInfo.artid);

                    if (PCRecord && PCRecord[self.uid]) {

                        if (PCRecord[self.uid] == self.pushInfo.artid) {

                            return false;
                        }

                        delete PCRecord[self.uid];
                    }

                    localStorage.sina_push = JSON.stringify(PCRecord);
                } catch (err) {

                    console.log(err);
                }

                return true;
            },

            set_disable_record: function set_disable_record() {

                var self = this;

                try {

                    var PCRecord = localStorage.sina_push;

                    if (PCRecord == 'null') {

                        PCRecord = '{}';
                    }

                    PCRecord = JSON.parse(PCRecord);

                    PCRecord[self.uid] = self.pushInfo.artid;

                    localStorage.sina_push = JSON.stringify(PCRecord);

                    // console.log('set_sina_push:'+PCRecord[self.uid]);
                } catch (err) {

                    console.log(err);
                }
            },

            closePush: function closePush(_isNotShow) {

                this.isAbleDisplay = !_isNotShow;

                if (this.isPushOpen) {

                    this.changePushShow(false);

                    this.isPushOpen = false;
                }
            },

            openApp: function openApp() {

                var jumpConfig = {},
                    _pushInfo = this.pushInfo,
                    _newsid = _pushInfo.artid || '',
                    nativeUrl = 'sinanews://',
                    nextLinkParams = '',
                    installUrl = _pushInfo.url;

                if (!!installUrl) {

                    window.location.href = installUrl;
                }
            },

            setPushInfo: function setPushInfo() {

                var self = this;

                try {

                    var isPM = new Date().getHours() >= self.dividTime;

                    self.isGetPushInfo = true;

                    self.pushInfo.artid = isPM ? 'PM' : 'AM';

                    return {

                        id: self.id,

                        url: self.pushInfo.url,

                        title: isPM ? self.pushInfo.title.pm : self.pushInfo.title.am

                    };
                } catch (e) {

                    console.log(e);
                }

                return null;
            },

            startPush: function startPush(info) {

                var self = this,
                    _waitTime = 0.5,
                    _pushInfo = this.setPushInfo();

                //若未获取到push信息，则直接退出

                if (!_pushInfo) {
                    return;
                }

                //插入push节点

                self.insertPush(_pushInfo);

                setTimeout(function () {

                    isTimeOver = true;

                    //展示push

                    self.openPush();

                    //不需要记录，只有本次关闭，下次依然会打开

                    self.set_disable_record();
                }, _waitTime * 1000);
            },

            init: function init(info) {

                this.setPushInfo();
            }

        };

        function sendSudaLog(sudaName) {

            var obj = {

                'name': sudaName,

                'type': '',

                'title': '',

                'index': '',

                'href': '' };

            if (typeof win.suds_count == 'function' || win.suds_count) {

                win.suds_count && win.suds_count(obj);
            }
        }

        //win.updateInfo = Push.setPushInfo.bind(Push);

        win.openPush = Push.startPush.bind(Push);

        win.closePush = Push.closePush.bind(Push);

        function init() {

            win._sinaCallEvent.on('sina_open_push', openPush);

            win._sinaCallEvent.on('sina_close_push', closePush);
        }

        init();
    })(window, document);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "Push_homev8.js");
}

try {
    (function (w, d) {

        var _id = '_' + new Date().getTime();

        function setStyle(node, str) {

            var styleMaps, styleCache;

            styleCache = node.style;

            if (typeof str === 'string' && str !== '') {

                styleMaps = str.split(';');

                styleMaps.forEach(function (item) {

                    var tmp;

                    if (item !== '') {

                        tmp = item.split(':');

                        if (styleCache.hasOwnProperty(tmp[0])) {

                            styleCache[tmp[0]] = tmp[1];
                        }
                    }
                });
            }
        }

        function addDomTempbz(pos) {

            try {

                var section = d.createElement('section'),
                    open = null,
                    close = null,
                    _t = '',
                    allfs = getAllPlatformStatus(),
                    isBlog = allfs.isBlog,
                    _sudaName = allfs.name,
                    data = getResources(pos),
                    info = {};

                section.setAttribute('style', 'max-width: 768px;margin: 0 auto;');

                info = data;

                info.id = _id;

                if (pos === floatPosition.top) {

                    _t = Template.Banner.Top;

                    d.body.insertBefore(section, d.body.firstChild);
                } else {

                    _t = Template.Banner.Bottom;

                    d.body.appendChild(section);
                }

                if (typeof __pushConfig != 'undefined' && __pushConfig.hasOwnProperty('__bannerImg')) {

                    section.innerHTML = '<img class="open" style="width:100%" src="' + __pushConfig.__bannerImg + '">';
                } else {

                    section.innerHTML = runTemplate.tinyTemplateParser(_t, { info: info });
                }

                //section.innerHTML = runTemplate.tinyTemplateParser(_t,{info:info});

                close = section.querySelector('.close'), open = section.querySelector('.open');

                if (close) {

                    close.onclick = function () {

                        if (!isBlog) {

                            set_disable_record(pageUid);
                        }

                        if (section.parentNode) {

                            section.parentNode.removeChild(section);

                            window._sinaCallEvent.trigger('sina_suda_action', _sudaName + '_close');
                        }
                    };
                }

                if (open) {

                    open.onclick = function () {

                        var now = new Date().getTime();

                        if (now - loading > clickInternal) {

                            loading = now;

                            open_or_download_app();
                        }
                    };
                }
            } catch (e) {

                console.log(e);
            }
        }

        function addDom(pos) {

            try {

                var section = d.createElement('section'),
                    open = null,
                    close = null,
                    _t = '',
                    allfs = getAllPlatformStatus(),
                    isBlog = allfs.isBlog,
                    _sudaName = allfs.name,
                    data = getResources(pos),
                    info = {};

                info = data;

                info.id = _id;

                if (pos === floatPosition.top) {

                    _t = Template.Banner.Top;

                    d.body.insertBefore(section, d.body.firstChild);
                } else {

                    _t = Template.Banner.Bottom;

                    d.body.appendChild(section);
                }

                section.innerHTML = runTemplate.tinyTemplateParser(_t, { info: info });

                close = section.querySelector('.close'), open = section.querySelector('.open');

                if (close) {

                    close.onclick = function () {

                        if (!isBlog) {

                            set_disable_record(pageUid);
                        }

                        if (section.parentNode) {

                            section.parentNode.removeChild(section);

                            window._sinaCallEvent.trigger('sina_suda_action', _sudaName + '_close');
                        }
                    };
                }

                if (open) {

                    open.onclick = function () {

                        var now = new Date().getTime();

                        if (now - loading > clickInternal) {

                            loading = now;

                            open_or_download_app();
                        }
                    };
                }
            } catch (e) {

                console.log(e);
            }
        }

        function getResources(pos) {

            var data = {},
                allfs = getAllPlatformStatus(),
                isFinance = allfs.isFinance,
                isNews = allfs.isNews,
                isSports = allfs.isSports,
                isBlog = allfs.isBlog;

            if (isFinance) {

                // 财经

                data = {

                    logo: '' + window.prtl.prefix + 'www.sinaimg.cn/cj/2015/0824/U10832P31DT20150824180645.png',

                    title: '新浪财经',

                    content: '新浪财经客户端，让赚钱更轻松',

                    background: '' + window.prtl.prefix + 'www.sinaimg.cn/cj/2015/0824/U10832P31DT20150824180612.jpg',

                    color: '#fdaf38',

                    type: 'finance'

                };
            } else if (isSports) {

                // 体育

                data = {

                    logo: '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/dae7ff0c/20151010/sport_logo.png',

                    title: '新浪体育',

                    content: '赛事直播 体坛资讯 尽在新浪体育',

                    background: '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/dae7ff0c/20151010/bg_1.jpg',

                    type: 'sports'

                };

                if (pos == floatPosition.top) {

                    data.color = '#b23636';
                } else {

                    data.color = '#f84c4b';
                }
            } else if (isBlog) {

                // 博客

                data = {

                    logo: '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/dae7ff0c/20151021/blog.png',

                    title: '新浪博客',

                    content: '博客全新版本，手机同步写博文',

                    background: '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/dae7ff0c/20151010/bg_1.jpg',

                    type: 'blog'

                };

                data.color = '#E87B55';
            } else {

                // 新闻

                data = {

                    logo: '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/dae7ff0c/20151010/logo.jpg',

                    title: '新浪新闻客户端',

                    content: '第一时间获取全球新闻资讯',

                    background: '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/dae7ff0c/20151010/bg_1.jpg',

                    type: 'news'

                };

                if (pos == floatPosition.top) {

                    data.color = '#b23636';
                } else {

                    data.color = '#f84c4b';
                }
            }

            return data;
        }

        function today() {

            var dateObj = new Date();

            return dateObj.toDateString();
        }

        function enable_disp(uid) {

            try {

                var PCRecord = null;

                PCRecord = JSON.parse(localStorage.sina_pro_cover);

                if (PCRecord && PCRecord[uid]) {

                    if (PCRecord[uid] == today()) {

                        return false;
                    }

                    delete PCRecord[uid];
                }

                localStorage.sina_pro_cover = JSON.stringify(PCRecord);
            } catch (err) {

                //console.log(err);

            }

            return true;
        }

        function set_disable_record(uid) {

            try {

                var PCRecord = localStorage.sina_pro_cover;

                PCRecord = JSON.parse(PCRecord);

                if (Object.prototype.toString.call(PCRecord) != '[object Object]') {

                    PCRecord = {};
                }

                PCRecord[uid] = today();

                localStorage.sina_pro_cover = JSON.stringify(PCRecord);
            } catch (err) {

                //console.log(err);

            }
        }

        function isArticle() {

            if (window.location.href.indexOf('.d.html') != -1) {

                return true;
            } else {

                return false;
            }
        }

        function isHrefInclude(str) {

            var href = window.location.href,
                _allUrl = str.split('|');

            for (var i = 0, len = _allUrl.length; i < len; i++) {

                if (href.indexOf(_allUrl[i]) > -1) {

                    return true;
                }
            }

            return false;
        }

        function getSpecialAppType() {

            return typeof _saConfig.app != 'undefined' && _saConfig.app || '';
        }

        function getAllPlatformStatus(config) {

            var specialType = getSpecialAppType(),
                _config = config || {},
                isFinance = _config.app == testPlatform.finance,
                isNews = _config.app == testPlatform.news,
                isSports = _config.app == testPlatform.sports,
                isBlog = _config.app == testPlatform.blog,
                isTop = _config.app == testPlatform.top;

            if (!isFinance && !isNews && !isSports && !isBlog) {

                isTop = isHrefInclude(allPlatfrom.top) || specialType == testPlatform.top, isFinance = isHrefInclude(allPlatfrom.finance) || specialType == testPlatform.finance, isNews = isHrefInclude(allPlatfrom.news) || specialType == testPlatform.news, isSports = isHrefInclude(allPlatfrom.sports) || specialType == testPlatform.sports || isTop && isHrefInclude('/' + testPlatform.sports), isBlog = isHrefInclude(allPlatfrom.blog) || specialType == testPlatform.blog;
            }

            return {

                name: isFinance && testPlatform.finance || isNews && testPlatform.news || isSports && testPlatform.sports || isBlog && testPlatform.blog,

                isFinance: isFinance,

                isNews: isNews,

                isSports: isSports,

                isBlog: isBlog

            };
        }

        function getParamsStr(params) {

            var allStr = '{';

            for (var o in params) {

                allStr += '\"' + o + '\":\"' + params[o] + '\"\,';
            }

            allStr = allStr.slice(0, -1);

            return allStr + '}';
        }

        function open_or_download_app(config) {

            var data = {},
                cid,
                kid,
                allfs = getAllPlatformStatus(config),
                isFinance = allfs.isFinance,
                isNews = allfs.isNews,
                isSports = allfs.isSports,
                isBlog = allfs.isBlog,
                _config = config || _saConfig,
                _sudaName = allfs.name,
                jumpConfig = {},
                golink = '',
                isDoc = typeof __docConfig != 'undefined' && (__docConfig.__callupId != undefined && __docConfig.__callupId.length > 0 || __docConfig.__docId != undefined && __docConfig.__docId.length > 0);

            if (isFinance) {

                data = {

                    iosNativeUrl: 'sinafinance://com.sina.stock.url.identifier?parameter=',

                    androidNativeUrl: 'sinafinance://type=1&',

                    weixn: '' + window.prtl.prefix + 'a.app.qq.com/o/simple.jsp?pkgname=cn.com.sina.finance'

                };

                if (isArticle()) {

                    cid = '144';
                } else {

                    cid = '145';
                }
            } else if (isSports) {

                var isQudao = isHrefInclude('from=qudao'),
                    _isArticle = isArticle() && !isQudao,
                    hash = typeof __docConfig != 'undefined' && __docConfig.__sportsShortURL || '';

                if (_isArticle) {

                    data = {

                        iosNativeUrl: 'sinasports://type=2&hash=' + hash,

                        androidNativeUrl: 'sinasports://type=2&hash=' + hash

                    };
                } else {

                    data = {

                        iosNativeUrl: 'sinasports://newsid=',

                        androidNativeUrl: 'sinasports://newsid='

                    };
                }

                if (isArticle()) {

                    cid = '51';
                } else {

                    cid = '233';
                }

                data.weixn = '' + window.prtl.prefix + 'a.app.qq.com/o/simple.jsp?pkgname=cn.com.sina.sports';
            } else if (isBlog) {

                var jumptype = typeof scope != 'undefined' && 'udetail' || 'app',
                    articleid = '',
                    bloguid = typeof scope != 'undefined' && scope.bloguid || '',
                    nativeUrl = 'sinablog://blog.sina.com.cn?from=sinacn&jumptype=' + jumptype + '&articleid=' + articleid + '&bloguid=' + bloguid;

                data = {

                    iosNativeUrl: nativeUrl,

                    androidNativeUrl: nativeUrl,

                    weixn: '' + window.prtl.prefix + 'a.app.qq.com/o/simple.jsp?pkgname=com.sina.sinablog'

                };

                cid = '236';
            } else {

                var url_str = "",
                    _newsid = "",
                    docid = "",
                    params = {};

                if (isDoc) {

                    //_newsid = __docConfig.__callupId+'-comos-news-cms';

                    _newsid = __docConfig.__callupId || __docConfig.__docId + '-comos-news-cms';

                    url_str = "newsid=" + _newsid;

                    params = { id: _newsid };
                }

                data = {

                    iosNativeUrl: 'sinanews://' + url_str,

                    androidNativeUrl: 'sinanews://' + url_str,

                    weixn: '' + window.prtl.prefix + 'a.app.qq.com/o/simple.jsp?pkgname=com.sina.news'

                };

                cid = '82';

                kid = '145';

                golink = '' + window.prtl.prefix + 'so.sina.cn/palmnews/?id=' + kid;

                ios9Url = '' + window.prtl.prefix + 'sapi.sina.cn/Callup.php?params=' + encodeURIComponent(getParamsStr(params));

                ios9Weixin = '' + window.prtl.prefix + 'sapi.sina.cn/Callup.php?params=' + encodeURIComponent(getParamsStr(params)) + '&golinkUrl=' + encodeURIComponent(data.weixn);
            }

            golink = golink || '' + window.prtl.prefix + 'interface.sina.cn/wap_api/ls/jump_client.d.html?k=' + cid;

            jumpConfig = {

                iosInstallUrl: golink,

                androidInstallUrl: golink,

                iosNativeUrl: data.iosNativeUrl,

                androidNativeUrl: data.androidNativeUrl,

                openByWeixin: data.weixn,

                ios9Weixin: ios9Weixin,

                ios9Url: ios9Url

            };

            window._sinaCallEvent.trigger('sina_open_native', jumpConfig);

            window._sinaCallEvent.trigger('sina_suda_action', _sudaName + '_open');
        }

        //获取pageUid

        function getPageUid() {

            var curUrl = window.location.href,
                isQudao = isHrefInclude('from=qudao'),
                _isArticle = isArticle() && !isQudao,
                isMark = isHrefInclude('?'),
                _pageUid = isMark && curUrl.match(/((http|https|file)\:\/\/=?)(\S*)(?=\?)/)[2] || !isMark && curUrl.match(/((http|https|file)\:\/\/=?)(\S*)/)[2];

            if (_isArticle && typeof __docConfig != 'undefined' && __docConfig && __docConfig.__docId) {

                _pageUid = __docConfig.__docId;
            } else if (isQudao) {

                _pageUid = curUrl.replace('' + window.prtl.prefix + '', '');
            }

            return _pageUid;
        }

        function getPermitURL() {

            var curUrl = location.href,
                isPermitURL = true;

            for (var o in forbidURL) {

                isPermitURL = curUrl.indexOf(forbidURL[o]) == -1;

                if (!isPermitURL) {

                    return false;
                }
            }

            return isPermitURL;
        }

        function getPermitAd() {
            //1不显示，0显示

            var isPermitAd = 0;

            if (typeof __docConfig != 'undefined') {

                isPermitAd = __docConfig.__isClearAd;
            }

            return isPermitAd;
        }

        //获取浮层是否又被插入权限,需要从localstorage判断和全局进行判断

        function getPermitPage() {

            var isPermitURL = getPermitURL(),
                isNewsApp = Utils.isSinaNews(),
                isForbiden = typeof _FORBIDEN_APP_FLOAT != 'undefined' && _FORBIDEN_APP_FLOAT,
                isPermitAd = getPermitAd(),
                _pageUid = getPageUid(),
                isDisplayPromote = enable_disp(_pageUid);

            pageUid = _pageUid;

            return !isForbiden && isDisplayPromote && isPermitURL && !isNewsApp && !isPermitAd;
        }

        function getPureUrl() {

            var curUrl = location.href,
                isMark = isHrefInclude('?'),
                pureUrl = isMark && curUrl.match(/(=?)(\S*)(?=\?)/)[2] || !isMark && curUrl.match(/(=?)(\S*)/)[2];

            return pureUrl;
        }

        //初始化

        function initDom() {

            var curUrl = location.href,
                hasComment = typeof __docConfig != "undefined" || typeof CMNT != "undefined" || document.querySelector('.foot_comment'),
                isDisplayPermit = getPermitPage();

            _saConfig.url = _saConfig.docUrl || getPureUrl();

            try {

                if (isDisplayPermit) {

                    if (hasComment) {

                        _saConfig.position = POSITION.TOP;

                        addDomTempbz(floatPosition.top);
                    } else {

                        _saConfig.position = POSITION.BOTTOM;

                        addDom(floatPosition.bottom);
                    }
                }
            } catch (e) {

                console.log(e);
            }
        }

        window.clearFloat = function () {

            //var _float = document.querySelector('[promote_float]');

            var _float = document.querySelector('#' + _id);

            if (_float) {

                _float.parentNode.removeChild(_float);
            }
        };

        function init() {

            try {

                _sinaCallEvent.on('sina_clear_native', clearFloat);

                _sinaCallEvent.on('sina_build_native', initDom);
            } catch (e) {

                console.log(e);
            }
        }

        var allPlatfrom = { finance: 'finance.sina.cn', news: 'news.sina.cn',

            sports: 'sports.sina.cn', blog: 'blog.sina.cn',

            top: 'top.sina.cn' },
            floatPosition = { top: 'top', bottom: 'bottom' },
            testPlatform = { finance: 'finance', news: 'news', sports: 'sports', blog: 'blog', top: 'top' },
            keyListOrder = ['media', 'domain', 'channel', 'type', 'position', 'timeStamp', 'url'],
            forbidURL = ['wm=3206'],
            pageUid = null,
            loading = 0,
            clickInternal = 10000,
            POSITION = { TOP: '0', BOTTOM: '1', OTHER: '2' },
            _saConfig = typeof _SACONFIG != 'undefined' && _SACONFIG || {};

        init();
    })(window, document);

    //触发插入呼起浮层事件

    //_sinaCallEvent.trigger('sina_build_native');

    //触发清除呼起浮层事件

    //_sinaCallEvent.trigger('sina_clear_native');

    //触发呼起事件

    //_sinaCallEvent.trigger('sina_open_native',config);

    //触发发送log事件，请将sudaName写到第二个参数中

    //_sinaCallEvent.trigger('sina_suda_action',sudaName);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "FloatCom.js");
}

try {
    var Template = {

        Push: {

            HomeV8: '<div id="<% info.id %>" style="position: fixed;left:-101%;right:-101%;width:101%;bottom:0;z-index:300; -webkit-transition: -webkit-transform .5s ease;transition:transform .5s ease;height: 42px;line-height: 42px;color: #fff;font-size: 15px;background: rgba(24, 46, 211, 0.85);text-overflow: ellipsis;overflow: hidden;"><a href="javascript:void(0)" class="open" title="新浪网 手机新浪网 首页 新闻 热点新闻" style="display: block;width:100%;padding:0 39px 0 33px;white-space: nowrap;text-overflow: ellipsis;overflow: hidden;color:#fff; background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAY1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+aRQ2gAAAAIHRSTlMAHvizBc/HupdPSyIN7+nV0Z9pXUQXCPDf3suagkVDOZzYauIAAACmSURBVDjL7dTJDsIgFIXhSsskdrTWWc/7P6URY6RygaYxxoX/+ltcINxsfkZupZkCBQAxBeJeUhW6tVD1cbfe4Vm9DLNVDjdVhJzAOBmQOd47kq6DHzXnUBGwpg4Mqp6akEr5sCIh9+8GZKUHN6Dz4OIPvwo7hNLjByyDcD+4sEW4k+OuiMTM69dzxMqzXwuPPgiZdSwNGwsPaaiJpUN3bhi/ZPO7AZllTCsBScc9AAAAAElFTkSuQmCC) no-repeat;background-size:18px 18px;background-position:10px 12px;"><% info.title %></a><a class="close" style="display: inline-block;height:100%;float:right;width:14px;padding:0 10px 0 15px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcBAMAAACAI8KnAAAAGFBMVEUAAAD///////////////////////////8jfp1fAAAAB3RSTlMA1BUWwJST7D2/cAAAAHVJREFUGNOl0MEJgDAMBdCiE1gPvVYn0CHUBRzBBQqC62v4n3zBg4f20CZ5JYGEn3NkBs1q9xaZDqfdc8nA1NvTpggsUyALyUQyUEwkj0TO6ITW5wJ6itn6nF/4tIpCG+RsoZWEqDmiKBTjQfm7nN1Xt4SqcwPBZRLM5YzcdwAAAABJRU5ErkJggg==) no-repeat;background-size:14px 14px;background-position:center;position:absolute;top:0;right:0;" href="JavaScript:void(0)" title="新浪网 手机新浪网 首页 新闻 热点新闻"></a></div>',

            Bottom: '<aside id="<% info.id %>" style="position:fixed;font-size:12px;left:-101%;right:-101%;width:101%;bottom:0;z-index:300; -webkit-transition: -webkit-transform .5s ease;transition:transform .5s ease;"><div style="clear: both;position: relative;background: rgba(0,0,0,.6);padding: 7px 10px;color: #fff;-webkit-animation: fadeIn 1s .2s ease both;line-height: 18px;"><div style="position: absolute;right: 10px;top: 50%;transform: translateY(-50%);-webkit-transform: translateY(-50%);z-index: 400;cursor: pointer;" class="close"><img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjI2cHgiIGhlaWdodD0iMjZweCIgdmlld0JveD0iMCAwIDI2IDI2IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNiAyNiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBvcGFjaXR5PSIwLjUiIGZpbGw9IiNGRkZGRkYiIGQ9Ik0xNC45MzUsMTNsMTAuMjUzLDEwLjI1M2MwLjU4NiwwLjU4NiwwLjU4NiwxLjUzNSwwLDIuMTIxcy0xLjUzNiwwLjU4Ni0yLjEyMSwwDQoJTDEyLjgxNCwxNS4xMjFMMi41NjEsMjUuMzc0Yy0wLjU4NiwwLjU4Ni0xLjUzNSwwLjU4Ni0yLjEyMSwwcy0wLjU4Ni0xLjUzNiwwLTIuMTIxTDEwLjY5MiwxM0wwLjQzOSwyLjc0Nw0KCWMtMC41ODYtMC41ODYtMC41ODYtMS41MzUsMC0yLjEyMXMxLjUzNi0wLjU4NiwyLjEyMSwwbDEwLjI1MywxMC4yNTNMMjMuMDY3LDAuNjI2YzAuNTg2LTAuNTg2LDEuNTM1LTAuNTg2LDIuMTIxLDANCglzMC41ODYsMS41MzYsMCwyLjEyMUwxNC45MzUsMTN6Ii8+DQo8L3N2Zz4NCg==" width="20"></div><div style="overflow: hidden;background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjUycHgiIGhlaWdodD0iNTJweCIgdmlld0JveD0iMCAwIDUyIDUyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MiA1MiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBmaWxsPSIjRkZGRkZGIiBkPSJNNDIuNzE4LDExLjMxOGwtMS41MTEtMi42MTdsNi45MjctMy45OTlsMS41MTEsMi42MTdMNDIuNzE4LDExLjMxOHogTTE3LjUsMzYuNWwxNSw5di0xOHYtM3YtMThsLTE1LDkNCglsLTIuNzU2LTIuMjU3TDM1LjUsMC41djI1djI2TDE0Ljc0NCwzOC43NEwxNy41LDM2LjV6IE0xLjUwNSwxMi40ODdoMTEuOTkzdjI3LjAwOUgxLjUwNVYxMi40ODd6IE00LjQ5MywzNi41MDhoNi4wMTZWMTUuNTA1SDQuNDkzDQoJVjM2LjUwOHogTTQxLjUwNSwyNS40ODJoNy45OTl2My4wMjJoLTcuOTk5VjI1LjQ4MnogTTQ5LjQ5LDQ0LjcybC0xLjQzMywyLjc2NWwtNi41NjgtNC4yMjZsMS40MzMtMi43NjVMNDkuNDksNDQuNzJ6Ii8+DQo8L3N2Zz4NCg==) no-repeat left center;background-size: 25px;padding: 0 0 0 35px;height: 36px;margin-right:32px;" class="open"><h4 style="font-size: 14px;font-weight: normal;height: 36px;display: -webkit-box;-webkit-line-clamp: 2;-webkit-box-orient: vertical;overflow: hidden;-webkit-box-pack: center;"><% info.title %></h4></div></div></aside>'

        },

        Banner: {

            Bottom: '<div id="<% info.id %>" style="position: fixed; bottom: 0px; left: 0px; right: 0px; z-index: 999; width: 100%; -webkit-user-select: none; background-color: rgba(0, 0, 0, 0.4);"><aside style="position: relative; padding: 0px 5px 0px 62px; height: 50px; text-decoration: none; color: rgb(255, 255, 255);"><img src="<% info.logo %>" style="position: absolute; top: 7px; left: 20px; width: 36px; border-radius: 5px;"><p style="margin: 0px; font-size: 16px; line-height: 16px; padding: 6px 0px 0px;"><% info.title %></p><p style="margin: 0px; font-size: 10px; line-height: 10px; opacity: 0.6; padding: 7px 0px 0px;"><% info.content %></p><a href="javascript:void(0)" style="right: 51px; position: absolute; top: 11px; width: 55px; height: 28px; color: rgb(255, 255, 255); font-weight: bold; font-size: 15px; line-height: 28px; text-align: center; background-color: <% info.color %>" class="open">打开</a></aside><div style="position: absolute; right: 0px; top: 0px; height: 50px; width: 45px; z-index: 10;" class="close"><i style="position:absolute; left:20px; top:15px; width:2px; height:17px; background-color:#fff; display:inline-block;-webkit-transform: rotate(-45deg);"></i><i style="position:absolute;left:20px;top:15px;width:2px;height:17px;background-color:#fff;display:inline-block;-webkit-transform: rotate(45deg);"></i></div></div>',

            Top: '<section id="<% info.id %>" style="padding: 5px 0px; width: 100%; background-image: url(<% info.background %>);"><aside style="position: relative; padding: 0px 5px 0px 62px; height: 50px; text-decoration: none; color: rgb(255, 255, 255);"><img src="<% info.logo %>" style="position: absolute; top: 7px; left: 20px; width: 36px; border-radius: 5px;"><p style="margin: 0px; font-size: 16px; line-height: 16px; padding: 6px 0px 0px;"><% info.title %></p><p style="margin: 0px; font-size: 10px; line-height: 10px; opacity: 0.6; padding: 7px 0px 0px;"><% info.content %></p><a href="javascript:void(0)" style="right: 12px; position: absolute; top: 11px; width: 55px; height: 28px; color: rgb(255, 255, 255); font-weight: bold; font-size: 15px; line-height: 28px; text-align: center; background-color: <% info.color %>" class="open">打开</a></aside></section>'

        },

        RedBag: '<section id="<% info.id %>"><aside style="position: fixed;right: 10px;bottom: 142px;z-index: 300;"><img src="' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'n.sinaimg.cn' : 'ns.sinaimg.cn') + '/default/dae7ff0c/20151231/red_enter_1.png" alt="" style="vertical-align: top;width: 60px;" class="show" data-sudaclick="<% info.sudaShow %>"/></aside><div class="layer" style="position: fixed;display:none;left: 0;right: 0;top: 0;bottom: 0;z-index: 9999;"><div class="redbg" style="position: fixed;top: 0;right: 0;bottom: 0;left: 0;background: rgba(0,0,0,.7);z-index: 200;"></div> <div style="position: fixed; z-index: 400; left: 50%; top: 45%;transform: translateY(-50%) translateX(-50%);-webkit-transform: translateY(-50%) translateX(-50%);"><div style="position: relative;"> <img src="' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'mjs.sinaimg.cn' : 'mjss.sinaimg.cn') + '/wap/online/public/images/redBag/bag_tips.png" alt="" style="width: 268px;vertical-align: top;"/> <a href="javascript:void(0);" title="关闭" class="close"  data-sudaclick="<% info.sudaClose %>"style="position: absolute; z-index: 300; right: 0px; top: 50px; background: #f94734; color: #fff; font-style: 24px; display: inline-block; width: 28px; height: 28px; text-align: center; line-height: 28px; border-radius: 50%; font-family: Arial;">X</a> <a href="<% info.nextlink %>" title="马上抢" class="open"  data-sudaclick="<% info.sudaOpen %>"style="position: absolute; left: 40px; right: 40px; z-index: 500; bottom: 50px; height: 34px; line-height: 34px; text-indent: 999em; overflow: hidden;">马上抢</a> </div> </div> </div></section>',

        AddToHome: {

            ucbooktips: '<section class="remindmd_ios_info" style=" bottom: 200px; right:0px;z-index:125 ;   position: fixed;    display: block;    background: #439df9;    border-radius: 5px;    padding: 8px 0;">        <p class="info" style="    padding: 0 15px;    font-size: 12px;    line-height: 18px;    color: #fff;    text-align: justify;">点击"手机桌面"</p>        <span class="mark_icon" style="    width: 25px;    height: 10px;    position: absolute;    bottom: -10px;    left: 50%;    margin-left: -14px;    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAUCAYAAADPym6aAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NkEwOUJDRjFGQkU1MTFFNUFFQzhGN0I5RjQxNjVDNTgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkEwOUJDRjJGQkU1MTFFNUFFQzhGN0I5RjQxNjVDNTgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2QTA5QkNFRkZCRTUxMUU1QUVDOEY3QjlGNDE2NUM1OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2QTA5QkNGMEZCRTUxMUU1QUVDOEY3QjlGNDE2NUM1OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoPJDecAAAF1SURBVHjaYnGe+zORgYFBC4h1gVgbiGUYhgZ4AsRXgfgyEF9jARLz0RQIA7EdEDsAsRcQqwwSh98B4m1AfACIDwPxG2RJRmCMEDJAD4hDgDhxAGLrCTSg1wDxJXwKmYgwDGRAHRArAHEgNDRoDQ5D7VKA2n2JkAYmEgz/C8QboMnOA4hP08ADp6Fm20Ht+kusRiYyLdwJxOZAnAbEH6nggY9Qs8yhZpMMmCiw/D8QzwZifQpj5zTUjNlQMxno7REYeAjE9kC8lgy966B6H1LqCCYqpe3vQBwGxJNJ0DMFiEOhehkGi0dA4B8Q5wPxUiLUgtTkQfUwDDaPwPJNMhCfwaPmDFTNf2paTG2PgACoho0C4m9Y5L5B5X5S21JaeAQEbgNxOxbxdqgcw1DxCAj0AvFzJD6I3Ucry2jpEVBpNA2JPw1Hchv0HgGBedCS6R+UTTPAQmOPPENqZD4byh4BgV2g7gKtLaGHR44PF49coUcPDCDAAIWXS/BU6xWHAAAAAElFTkSuQmCC) no-repeat 0 0;    background-size: 25px 10px;"></span>    </section>',

            uc: '<section style="left:50%;margin-left:-82px;position: fixed; z-index:125 ;   bottom: 0;    margin-left: -82px;    width: 164px;    height: 80px;    border-radius: 5px;    background-color: #439df9;">        <p class="info" style="padding: 0 15px;    font-size: 12px;    line-height: 18px;    color: #fff;    position: absolute;text-align: justify;    padding-top: 10px;">点击"确定"，添加手机新浪网快捷方式到手机主屏</p>        <a href="javascript:;" style="    margin: 47px auto 0;    font-size: 10px;    text-align: center;    display: block;    width: 66px;    top: 6px;height: 18px;    line-height: 18px;    border-radius: 8px;    position: relative;color: #439df9;    background-color: #fff;" class="add">确定</a>        <a href="javascript:;" style="    position: absolute;    top: -6px;    right: -6px;    display: block;    text-align: center;    font-size: 14px;    width: 14px;    height: 14px;    line-height: 14px;    border: 1px solid #439df9;    color: #439df9;    background: #fff;    border-radius: 50%;" class="close">×</a>        </section>',

            uc_ios: '<section style="left:50%;margin-left:-82px;position: fixed; z-index:125 ;   bottom: 0;    margin-left: -82px;    width: 164px;    height: 80px;    border-radius: 5px;    background-color: #439df9;">        <p class="info" style="padding: 0 21px;    font-size: 12px;    line-height: 18px;    color: #fff;    position: absolute;text-align: justify;    padding-top: 10px;">点击"确定"，添加手机新浪网快捷方式到书签</p>        <a href="javascript:;" style="    margin: 45px auto 0;    font-size: 10px;    text-align: center;    display: block;    width: 66px;    height: 18px;    position: relative;top: 10px;line-height: 18px;    border-radius: 8px;    color: #439df9;    background-color: #fff;" class="add">确定</a>        <a href="javascript:;" style="    position: absolute;    top: -6px;    right: -6px;    display: block;    text-align: center;    font-size: 14px;    width: 14px;    height: 14px;    line-height: 14px;    border: 1px solid #439df9;    color: #439df9;    background: #fff;    border-radius: 50%;" class="close">×</a>        </section>',

            chrome: '<section style="position: fixed; right:21px;top: 0;   width: 127px;   height: 68px;   background: url(' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'mjs.sinaimg.cn' : 'mjss.sinaimg.cn') + '/wap/online/public/NPH/v1/images/ios_remind_bg2.png) no-repeat 0 0;   background-size: 127px 68px;   z-index: 125;" class="">  <a href="javascript:;" style="  width: 14px;   height: 14px;   text-align: center;   font-size: 14px;   line-height: 14px;   color: #fff;   position: absolute;   bottom: 4px;   right: 4px;" class="close">×</a>   </section>',

            safari: '<section class="addtohome-safari"  style="left:50%;z-index:125 ;margin-left:-82px;position: fixed;bottom: 0;width: 164px;height: 78px;background: url(' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'mjs.sinaimg.cn' : 'mjss.sinaimg.cn') + '/wap/online/public/NPH/v1/images/ios_remind_bg.png) no-repeat 0 0; background-size: 163px 77px;"><a href="javascript:;" class="close" style="    font-size: 14px;line-height: 14px;color: #fff;position: absolute;top: 6px;right: 6px;">×</a></section>'

        }

    };
} catch (e) {
    console["error" in console ? "error" : "log"](e, "Template.js");
}

try {
    /**
    * @新科技频道-手机新浪网
    * @requires 
    * @author tingling 'Template.js'
    * @date 2015-12-14
    */

    (function (win, doc) {

        var RunTemplate = {

            getType: function getType(obj) {

                var tmp = typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);

                return tmp === 'object' ? Object.prototype.toString.call(obj).match(/\[object (.*)\]/) ? RegExp.$1.toLowerCase() : 'other' : tmp;
            },

            tinyTemplateParser: function tinyTemplateParser(template, data) {

                var getType = this.getType;

                return getType(template) === 'string' ? template.replace(/<%\s?([\[\]\.A-Za-z0-9_]+)\s?%>/g, function (total, match) {

                    var tarVal = data,
                        missing = false;

                    if (match && tarVal) {

                        match.split('.').forEach(function (key) {

                            var matchers;

                            if (key && !missing) {

                                matchers = key.match(/(\w+)(\[(\d)+\])?/);

                                if (matchers) {

                                    if (tarVal[matchers[1]]) {

                                        tarVal = tarVal[matchers[1]];

                                        if (matchers[2] && matchers[3]) {

                                            if (tarVal[matchers[3]]) {

                                                tarVal = tarVal[matchers[3]];
                                            } else {

                                                missing = true;
                                            }
                                        }
                                    } else {

                                        missing = true;
                                    }
                                }
                            }
                        });
                    }

                    return missing || tarVal === data ? '' : getType(tarVal) !== 'string' ? JSON.stringify(tarVal) : tarVal;
                }) : '';
            }

        };

        window.runTemplate = RunTemplate;
    })(window, document);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "Render.js");
}

try {
    //@require("./httpsSupport.js");

    /**
    
     * @新科技频道-手机新浪网
    
     * @requires "sina", "zepto.js"
    
     * @author yuanfeng
    
     * @date 2015-06-12
    
     */

    (function (win, doc) {

        var util = {

            debug: true,

            version: '0.0.1',

            setCookie: function setCookie(key, value, expire, path, domain, extra) {

                var appendArr = [];

                appendArr.push(key + "=" + escape(value));

                if (expire) {

                    var date = new Date();

                    date.setTime(Date.now() + expire * 3600000);

                    appendArr.push("expires=" + date.toGMTString());
                }

                path && appendArr.push("path=" + path);

                domain && appendArr.push("domain=" + domain);

                extra && appendArr.push(extra);

                doc.cookie = appendArr.join(";");
            },

            getCookie: function getCookie(key) {

                if (!key) {

                    console.log('missing key, get cookie abort!');

                    return '';
                }

                key = key.replace(/([\.\[\]\$])/g, "\\$1");

                var mathReg = new RegExp(key + '=([^;]*)?;', 'i');

                var cookieCache = doc.cookie + ';';

                return cookieCache.match(mathReg) ? RegExp.$1 : '';
            },

            deleteCookie: function deleteCookie(key) {

                doc.cookie = m + "=;expires=Fri, 31 Dec 1999 23:59:59 GMT;";
            },

            log: function log(msg, level) {

                msg = (typeof msg === 'string' ? msg : JSON.stringify(msg)) + ' in ' + (this._name || 'default');

                if (level === 'err') {

                    if (this._debug) {

                        debugger;

                        return console.error(msg);
                    }

                    throw new Error(msg);
                }

                if (['debug', 'log'].indexOf(level) !== -1 && !this._debug) {

                    return;
                }

                level in console && typeof console[level] === 'function' ? console[level](msg) : console.log('[' + level + ']' + msg);
            },

            // extend: function(){

            // }

            parseQs: function parseQs(url) {

                var ret = {};

                if (url) {

                    var urlArr = url.split('?');

                    urlArr[1] && urlArr[1].split('&').forEach(function (item) {

                        var keyValue = item && item.split('=');

                        if (keyValue && keyValue.length === 2) {

                            ret[keyValue[0]] = keyValue[1];
                        }
                    });
                }

                return ret;
            },

            get curHost() {

                if (!this._host) {

                    var tmp;

                    this._host = win.location.hostname || (tmp = win.location.match(/https?:\/\/([a-zA-Z\.]+)\/?/)) && tmp[1];
                }

                return this._host;
            },

            set curHost(val) {

                return;
            },

            get UA() {

                this._ua = this._ua || win.navigator.userAgent;

                return this._ua;
            },

            set UA(val) {

                return null;
            },

            get platformBrowserInfo() {

                !this._UAIDS && (this.platformBrowserInfo = null);

                if (!this._plaformInfo) {

                    var UAIDS = this._UAIDS,
                        regKeys = [],
                        matches = [],
                        ret = {};

                    Object.keys(UAIDS).forEach(function (_type) {

                        regKeys = regKeys.concat(Object.keys(UAIDS[_type]).map(function (item) {

                            return UAIDS[_type][item];
                        }));
                    });

                    matches = this.UA.toLowerCase().match(new RegExp('(' + regKeys.join('|') + ')+', 'g'));

                    if (matches.length > 0) {

                        ret = {};

                        Object.keys(UAIDS).forEach(function (_type) {

                            var item = UAIDS[_type],
                                matcher = 'other',
                                key = null;

                            for (key in item) {

                                if (item.hasOwnProperty(key) && matches.indexOf(item[key]) !== -1) {

                                    matcher = key;

                                    break;
                                }
                            }

                            ret[_type] = matcher;
                        });
                    }

                    //spec

                    if (ret.platform !== 'other') {

                        ret.system = 'ios';
                    }

                    //判断ios下的chrome

                    if (ret.system == 'ios') {

                        if (new RegExp("crios").test(this.UA.toLocaleLowerCase()) == true) {

                            ret.browser = "chrome";
                        }
                    }

                    this._plaformInfo = ret;
                }

                return this._plaformInfo;
            },

            set platformBrowserInfo(val) {

                this._UAIDS = {

                    browser: {

                        firefox: 'firefox',

                        ie: 'msie',

                        qq: 'mqqbrowser',

                        uc: 'ucbrowser',

                        chrome: 'chrome',

                        baidu: 'baidu'

                    },

                    client: {

                        weibo: 'weibo',

                        weixin: 'micromessenger',

                        qq: 'qq'

                    },

                    platform: {

                        iphone: 'iphone',

                        ipod: 'ipod',

                        ipad: 'ipad'

                    },

                    system: {

                        ios: 'ios',

                        android: 'android'

                    }

                };

                return null;
            }

        };

        var WorkFlower = function WorkFlower(cnf) {

            this.init(cnf);
        };

        WorkFlower.prototype = {

            constructor: WorkFlower,

            init: function init(cnf) {

                if (cnf) {

                    this.name = cnf.name;
                }
            },

            pushTask: function pushTask(func) {

                if (typeof func === 'string') {

                    var taskMap = this.taskMap;

                    taskMap.hasOwnProperty(func) && (this.queue = taskMap[func]);
                } else {

                    func && (this.queue = func);
                }
            },

            run: function run() {

                !this.flag && this.then({});
            },

            then: function then(params) {

                next = this.queue;

                if (next) {

                    this.flag = true;

                    return next(this.then.bind(this), params);
                }

                this.flag = false;
            },

            addTask: function addTask(func, taskName, isAsync) {

                taskName = taskName || 'WFTask' + this.length;

                this.taskMap = [taskName, function (then, params) {

                    return isAsync ? func(then, params) : then(func(params));
                }];

                this.length++;

                return taskName;
            },

            get stats() {

                !this._stat && (this._stat = {});

                return this._stat;
            },

            set stats(val) {

                this._stat = this._stat || {

                    curTask: null,

                    isBreak: false,

                    gotoTask: null

                };
            },

            get length() {

                return this._len || 0;
            },

            set length(val) {

                return typeof val === 'number' && (this._len = val);
            },

            get taskMap() {

                return this._taskMap || {};
            },

            set taskMap(val) {

                this._taskMap = this._taskMap || {};

                if (val && val.length == 2) {

                    if (this._taskMap.hasOwnProperty(val[0])) {

                        throw new Error('duplicate defined task!');

                        return;
                    }

                    this._taskMap[val[0]] = val[1];
                }
            },

            get queue() {

                return this._queue.shift();
            },

            set queue(val) {

                (this._queue = this._queue || []).push(val);
            }

        };

        var _id = '_' + new Date().getTime() + 'ath',
            _isLock = false;

        Date.prototype.Format = function (fmt) {
            //author: meizz 

            var o = {

                "M+": this.getMonth() + 1, //月份 

                "d+": this.getDate()

            };

            if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));

            for (var k in o) {

                if (new RegExp("(" + k + ")").test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : ("00" + o[k]).substr(("" + o[k]).length));
            }return fmt;
        };

        var checkDateRule = {

            allowWeek: [0, 1, 2, 3, 4, 5, 6, 7],

            setMark: function setMark() {

                util.setCookie('sinaWapAddToHome_SetTime', new Date().Format('yyyy-MM-dd'), 720, '/', '.sina.cn');
            },

            //返回是否需要显示

            checkRule: function checkRule() {

                var curWeek = parseInt(new Date().getDay());

                var today = new Date().Format('yyyy-MM-dd');

                var lastFlag = util.getCookie('sinaWapAddToHome_SetTime') || '0';

                var flag = window['addToHomeEnable'] || true;

                return flag && this.allowWeek.indexOf(curWeek) > -1 && lastFlag != today;
            }

        };

        function checkRequre(params) {

            if (!_isLock) {

                //通过url判断是否是通过桌面主屏进入的

                var localurl = location.href.toLocaleLowerCase();

                if (localurl.indexOf('wm=desktop') > 0 || localurl.indexOf('wm=qbmi') > 0 || localurl.indexOf('wm=qbma') > 0 || localurl.indexOf('wm=ubmi') > 0 || localurl.indexOf('wm=ubma') > 0) {

                    _isLock = false;

                    return null;
                }

                _isLock = true;

                var platform = util.platformBrowserInfo;

                var addRecord;

                try {

                    addRecord = JSON.parse(win.localStorage['sinaWapAddToHome']);
                } catch (err) {

                    addRecord = {};
                }

                var isAdd = util.getCookie('sinaWapAddToHome') || '0';

                //var curHost = util.curHost;

                addRecord.isAdd = util.getCookie('sinaWapAddToHome') === '1' || addRecord.isAdd || false;

                addRecord.lastOpen = addRecord.lastOpen || {};

                var qs = util.parseQs(win.location.href);

                //若已添加到主屏，且不为活动，则直接return null

                if (addRecord.isAdd && !params.hasOwnProperty('isActivity')) {

                    _isLock = false;

                    return null;
                }

                if ((qs['sou'] === 'weibo' || checkDateRule.checkRule()) && platform.browser === 'uc' || params.hasOwnProperty('isActivity') && params['isActivity'] == 1) {

                    var ua = util.UA;

                    var ucVerExclude = ['9\.0', '9\.1', '9\.2', '9\.3', '9\.4', '9\.5', '9\.6', '9\.7', '9\.8'];

                    //version 10.9.0.103

                    var ucver = parseFloat(ua.toLowerCase().match(/ucbrowser\/([\d\.]+)\b/) && RegExp.$1);

                    //var ucver = ua.toLowerCase().match(/ucbrowser\/([\d\.]+)\b/) && RegExp.$1;

                    if (ucver && new RegExp(ucVerExclude.join('|')).test(ucver) === false) {

                        _isLock = false;

                        return { 'ch': 'uc', system: platform.system, record: addRecord };
                    }
                } else if ((qs['sou'] === 'weibo' || checkDateRule.checkRule()) && platform.browser === 'qq') {

                    _isLock = false;

                    return { ch: 'qq', system: platform.system, record: addRecord };
                } else if ((qs['sou'] === 'weibo' || checkDateRule.checkRule()) && platform.browser === 'qq') {

                    _isLock = false;

                    return { ch: 'qq', system: platform.system, record: addRecord };
                } else if ((qs['sou'] === 'weibo' || checkDateRule.checkRule()) && platform.browser === 'chrome') {

                    _isLock = false;

                    //判断是否有广告。。//判断逻辑。找到对应的容器。因为这时的广告已经进入dom

                    //判断是否为空

                    var sax_banner = document.querySelector("[sax-type=banner]");

                    var sax_fullScreen = document.querySelector("[sax-type=fullScreen]");

                    if (sax_banner && sax_banner.children.length > 0) {

                        _isLock = false;

                        return null;
                    }

                    if (sax_fullScreen && sax_fullScreen.children.length > 0) {

                        _isLock = false;

                        return null;
                    }

                    return { ch: 'chrome', system: platform.system, record: addRecord };
                } else if ((qs['sou'] === 'weibo' || checkDateRule.checkRule()) && platform.system === 'ios' && platform.browser === 'other' && platform.client === 'other') {

                    _isLock = false;

                    return { ch: 'safari', system: platform.system, record: addRecord };
                }

                _isLock = false;

                return null;
            }
        }

        function otherRequst(url) {

            var div = document.createElement('div');

            div.style.display = 'none';

            document.body.appendChild(div);

            div.innerHTML = '<iframe src="' + url + '" style="" />';
        }

        function addAction(params) {

            function put(l, p, t) {

                var div = document.createElement('div');

                div.style.display = 'none';

                document.body.appendChild(div);

                div.innerHTML = '<img src="ext:appshortcut:' + l + '|' + p + '|' + t + '|" style="display:none;" />';
            }

            function getIcon() {

                var result = [],
                    links = document.querySelectorAll('link'),
                    imgUrl = '' + window.prtl.prefix + '' + (window.prtl.type == 'http' ? 'mjs.sinaimg.cn' : 'mjss.sinaimg.cn') + '/wap/online/public/images/addToHome/sina_114x114_v1.png';

                [].forEach.call(links, function (item, index) {

                    if (item.getAttribute('sizes') == '114x114' || item.getAttribute('sizes') == '57x57') {

                        return item.getAttribute('href') || imgUrl;
                    }
                });

                return imgUrl;
            }

            var addRecord;

            try {

                addRecord = JSON.parse(win.localStorage['sinaWapAddToHome']);
            } catch (err) {

                addRecord = {};
            }

            var isAdd = util.getCookie('sinaWapAddToHome') || '0',
                imgUrl = getIcon();

            addRecord.isAdd = util.getCookie('sinaWapAddToHome') === '1' || addRecord.isAdd || false;

            if (!addRecord.isAdd) {

                addRecord.isAdd = true;

                if (params.ch == 'uc') {

                    try {

                        var oldurl = location.href,
                            markStr = "";

                        if (params.system == 'ios') {

                            markStr = "ubmi";

                            window.history.replaceState({}, "", oldurl.indexOf("?") > 0 ? oldurl += "&wm=" + markStr : oldurl += "?wm=" + markStr);

                            location.href = "ext:add_favorite";

                            setTimeout(function () {

                                window.history.replaceState({}, "", oldurl);
                            }, 3000);
                        } else {

                            if (location.href.toLocaleLowerCase().indexOf(".sina.cn") >= 0) {

                                markStr = "ubma";

                                window.history.replaceState({}, "", oldurl.indexOf("?") > 0 ? oldurl += "&wm=" + markStr : oldurl += "?wm=" + markStr);

                                otherRequst("ext:add_favorite");

                                setTimeout(function () {

                                    window.history.replaceState({}, "", oldurl);
                                }, 3000);
                            }
                        }
                    } catch (e) {}

                    if (params.system == 'android') {

                        otherRequst('ext:appshortcut:' + '' + window.prtl.prefix + 'so.sina.cn/channel/jump.d.go?k=1' + '|' + imgUrl + '|' + '手机新浪网' + '|');
                    }

                    checkDateRule.setMark();
                } else if (params.ch == "qq") {

                    var oldurl = location.href,
                        markStr = "";

                    if (params.system == 'ios') {

                        markStr = "qbmi";
                    } else {

                        markStr = "qbma";
                    }

                    window.history.replaceState({}, "", oldurl.indexOf("?") > 0 ? oldurl += "&wm=" + markStr : oldurl += "?wm=" + markStr);

                    otherRequst("" + window.prtl.prefix + "so.sina.cn/browser/js.d.api?from=qq&act=bookmark_add");

                    setTimeout(function () {

                        window.history.replaceState({}, "", oldurl);
                    }, 3000);

                    checkDateRule.setMark();
                } else {}

                util.setCookie('sinaWapAddToHome', '1', 720, '/', '.sina.cn');

                localStorage['sinaWapAddToHome'] = JSON.stringify(addRecord);
            }
        }

        function initAddToHome(done, params) {

            function addUcDom() {

                var section = document.createElement('section'),
                    _t = runTemplate.tinyTemplateParser(Template.AddToHome.uc, { info: {} });

                section.id = _id;

                section.innerHTML = _t;

                doc.body.appendChild(section);

                return section;
            }

            function addUcDom_ios() {

                var section = document.createElement('section'),
                    _t = runTemplate.tinyTemplateParser(Template.AddToHome.uc_ios, { info: {} });

                section.id = _id;

                section.innerHTML = _t;

                doc.body.appendChild(section);

                return section;
            }

            function addChromeDom() {

                var section = document.createElement('section'),
                    _t = runTemplate.tinyTemplateParser(Template.AddToHome.chrome, { info: {} });

                //section.id = 'j_addtohome_box';

                section.id = _id;

                //section.setAttribute('style','position: absolute;left:0;right:0;opacity:1;bottom: 0;width: 100%;min-height: 64px;z-index:999;-webkit-animation: fadeIn 1s .2s ease both ;animation: fadeIn 1s .2s ease both ;');

                section.innerHTML = _t;

                doc.body.appendChild(section);

                // setTimeout(function(){

                // 	section.style.opacity = 1;

                // },1000);

                //alert(JSON.stringify(section.style));

                return section;
            }

            function addUcTipsDom() {

                var section = document.createElement('section'),
                    _t = Template.AddToHome.ucbooktips;

                //section.id = 'j_addtohome_box';

                section.id = _id;

                //section.setAttribute('style','position: absolute;left:0;right:0;opacity:1;bottom: 0;width: 100%;min-height: 64px;z-index:999;-webkit-animation: fadeIn 1s .2s ease both ;animation: fadeIn 1s .2s ease both ;');

                section.innerHTML = _t;

                section.style.opacity = 0;

                //document.body.insertBefore(section,document.body.children[0])

                doc.body.appendChild(section);

                // setTimeout(function(){

                // 	section.style.opacity = 1;

                // },1000);

                //alert(JSON.stringify(section.style));

                return section;
            }

            function addSafariDom() {

                var section = document.createElement('section'),
                    _t = runTemplate.tinyTemplateParser(Template.AddToHome.safari, { info: {} });

                //section.id = 'j_addtohome_box';

                section.id = _id;

                section.innerHTML = _t;

                doc.body.appendChild(section);

                return section;
            }

            if (params && params.ch === 'uc' || params && params.ch === 'qq') {

                var addRecord = params.record;

                var wrapRoot = null;

                if (params.system == "ios") {

                    wrapRoot = addUcDom_ios();
                } else {

                    wrapRoot = addUcDom();
                }

                checkDateRule.setMark();

                //var infoElem = doc.getElementsByClassName('j_addtohome_info')[0];

                var closeCount = 0;

                var showTimer = null;

                wrapRoot.addEventListener('click', function (e) {

                    var target = e.target;

                    var tarClass = target.className || target.parentNode.className;

                    switch (tarClass.match(/(show|close|add)/i) && RegExp.$1) {

                        case 'add':

                            // addRecord.isAdd = true;

                            // util.setCookie('sinaWapAddToHome', '1', 720, '/', '.sina.cn');

                            // localStorage['sinaWapAddToHome'] = JSON.stringify(addRecord);

                            try {

                                addAction(params);
                            } catch (e) {}

                            if (params.system == "android" && params.ch === 'uc' && location.href.toLocaleLowerCase().indexOf(".sina.cn") >= 0) {

                                var uctips = addUcTipsDom();

                                uctips.style.transition = "opacity 0.2s 0.6s";

                                uctips.style.opacity = 1;

                                setTimeout(function () {

                                    uctips.children[0].style.transition = "opacity 0.5s 1s";

                                    uctips.children[0].style.opacity = 0;
                                }, 3000);
                            }

                            wrapRoot.style.display = "none";

                            //这里进行计数操作，今天不要再显示

                            checkDateRule.setFlag();

                            //wrapRoot.className = wrapRoot.className + ' hide';

                            done && done();

                            break;

                        case 'close':

                            wrapRoot.style.display = "none";

                            //这里进行计数操作，今天不要再显示

                            checkDateRule.setMark();

                            break;

                        case 'show':

                            // infoElem.className = infoElem.className.replace('hide','');

                            // showTimer = setTimeout(function(){

                            // 	infoElem.className = infoElem.className + ' hide';

                            // 	closeCount ++;

                            // 	if(closeCount>=2){

                            // 		wrapRoot.className = wrapRoot.className + ' hide';

                            // 		done && done();

                            // 	}

                            // },15000)

                            break;

                    }
                });

                showTimer = setTimeout(function () {

                    wrapRoot.style.display = "none";

                    // infoElem.className = infoElem.className + ' hide';

                    // wrapRoot.className = wrapRoot.className + ' hide';

                    done();
                }, 10000);
            } else if (params && params.ch === 'safari') {

                var record = params.record;

                var wrapRoot = addSafariDom();

                //var infoElem = doc.getElementsByClassName('j_addtohome_info')[0];

                var showTimer = null;

                checkDateRule.setMark();

                wrapRoot.addEventListener('click', function (e) {

                    var target = e.target;

                    var tarClass = target.className || target.parentNode.className;

                    switch (tarClass.match(/(add|close|show)/i) && RegExp.$1) {

                        case 'close':

                            wrapRoot.style.display = "none";

                            checkDateRule.setMark();

                            //util.setCookie('sinaWapAddToHome', '1', 168, '/', '.sina.cn');

                            done();

                            break;

                        default:

                            break;

                    }
                });

                showTimer = setTimeout(function () {

                    wrapRoot.style.display = "none";

                    // infoElem.className = infoElem.className + ' hide';

                    // wrapRoot.className = wrapRoot.className + ' hide';

                    done();
                }, 10000);
            } else if (params && params.ch === 'chrome') {

                var record = params.record;

                var wrapRoot = addChromeDom();

                //var infoElem = doc.getElementsByClassName('j_addtohome_info')[0];

                var showTimer = null;

                checkDateRule.setMark();

                wrapRoot.addEventListener('click', function (e) {

                    var target = e.target;

                    var tarClass = target.className || target.parentNode.className;

                    switch (tarClass.match(/(add|close|show)/i) && RegExp.$1) {

                        case 'close':

                            wrapRoot.style.display = "none";

                            checkDateRule.setMark();

                            //util.setCookie('sinaWapAddToHome', '1', 168, '/', '.sina.cn');

                            done();

                            break;

                        default:

                            break;

                    }
                });

                showTimer = setTimeout(function () {

                    wrapRoot.style.display = "none";

                    // infoElem.className = infoElem.className + ' hide';

                    // wrapRoot.className = wrapRoot.className + ' hide';

                    done();
                }, 10000);
            } else {

                done();
            }
        }

        function addBanner(params) {

            //_sinaCallEvent && _sinaCallEvent.trigger('sina_build_native');

            _sinaCallEvent && _sinaCallEvent.trigger('sina_init_show');
        }

        win.checkRequre = checkRequre;

        win.addToHomeAction = addAction;

        var addToDesktop = new WorkFlower({ name: 'addToDesktop' });

        addToDesktop.addTask(checkRequre, 'checkRequire');

        addToDesktop.addTask(initAddToHome, 'initAddToHome', true);

        addToDesktop.addTask(addBanner, 'addFloat');

        addToDesktop.pushTask('checkRequire');

        addToDesktop.pushTask('initAddToHome');

        addToDesktop.pushTask('addFloat');

        win.addToHomeRun = addToDesktop.run.bind(addToDesktop);

        win._sinaCallEvent.on('sina_run_addToHome', addToHomeRun);
    })(window, document);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "addToHome.js");
}

try {
    /**
    * @author tingling
    * @fileoverview 
    * @date 20151217
    */

    (function (win, doc) {

        function sendSudaLog(sudaName) {

            var obj = {

                'name': sudaName,

                'type': '',

                'title': '',

                'index': '',

                'href': '' };

            if (typeof win.suds_count == 'function' || win.suds_count) {

                win.suds_count && win.suds_count(obj);
            }
        }

        var redBag = {

            id: '_' + new Date().getTime() + 'rb',

            STATUS: { show: 1, close: 2 },

            isEmpty: function isEmpty(objBox) {

                var i = 0,
                    _obj = objBox || {};

                for (var o in _obj) {

                    i++;
                }

                if (i > 0) {

                    return false;
                } else {

                    return true;
                }
            },

            createElement: function createElement(tag, attributes, content) {

                var newNode = doc.createElement(tag),
                    _attr = attributes;

                if (!this.isEmpty(_attr)) {

                    for (var o in _attr) {

                        newNode.setAttribute(o, _attr[o]);
                    }
                }

                if (content) {

                    newNode.innerHTML = content;
                }

                return newNode;
            },

            changeShow: function changeShow(status) {

                var STATUS = this.STATUS,
                    $zone = doc.querySelector('#' + this.id),
                    $layer = $zone.querySelector('.layer'),
                    $body = doc.body;

                switch (status) {

                    case STATUS.show:

                        $body.style.overflow = 'hidden';

                        $layer.style.display = 'block';

                        break;

                    default:

                        $body.style.overflow = 'auto';

                        $layer.style.display = 'none';

                        break;

                }
            },

            bindEvent: function bindEvent(ele, CB) {

                var self = this;

                if (ele) {

                    if (ele instanceof Array) {

                        for (var o in ele) {

                            //ele[o].onclick = function(){CB && CB();}

                            arguments.callee(ele[o], CB);
                        }
                    } else {

                        ele.onclick = function () {
                            CB && CB();
                        };
                    }
                }
            },

            insertRedBag: function insertRedBag(info) {

                var self = this,
                    section = self.createElement('section'),
                    close = null,
                    open = null,
                    showBtn = null,
                    redbg = null,
                    _t = runTemplate.tinyTemplateParser(Template.RedBag, { info: info }),
                    _bEvent = self.bindEvent,
                    _STAUTS = self.STATUS;

                section.innerHTML = _t;

                doc.body.appendChild(section);

                close = section.querySelector('.close');

                open = section.querySelector('.open');

                showBtn = section.querySelector('.show');

                redbg = section.querySelector('.redbg');

                _bEvent([close, redbg], function () {

                    self.changeShow(self.STATUS.close);
                });

                _bEvent(open, function () {

                    win.addToHomeAction();

                    self.changeShow(self.STATUS.close);
                });

                _bEvent(showBtn, function () {

                    self.changeShow(self.STATUS.show);
                });
            },

            // getActivityPermitShow : function(){

            // 	//get permit right

            // 	var getPermit = win.checkRequre({isActivity:1}),

            // 		isPermit = getPermit && getPermit['ch'] == 'uc',

            // 		isActive = __pushConfig && __pushConfig.__showType == 'active';

            // 	return isPermit;

            // },

            init: function init() {

                try {

                    var isPermitShow = win.getActivityPermitShow(),
                        info = { id: this.id, nextlink: "#", sudaShow: 'redBag_show', sudaOpen: 'redBag_open', sudaClose: 'redBag_close' };

                    //获取是否有权插入活动

                    if (isPermitShow) {

                        info.nextlink = __pushConfig && __pushConfig.__activelink || '' + window.prtl.prefix + 'sina.cn';

                        this.insertRedBag(info);
                    }

                    //否则，继续run

                    else {}

                    _sinaCallEvent && _sinaCallEvent.trigger('sina_init_show');
                } catch (e) {

                    alert(e);
                }
            }

        };

        win.runActivity = function () {

            if (typeof __pushConfig != 'undefined') {

                __pushConfig.__isAllNotShow = true;
            } else {

                __pushConfig = false;
            }

            redBag.init();
        };

        win._sinaCallEvent.on('sina_init_activity', runActivity);
    })(window, document);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "redBag.js");
}

try {
    /**
    * @新科技频道-手机新浪网
    * @requires "sina", "zepto.js"
    * @author tingling
    * @date 2015-12-14
    */

    (function (win, doc) {
        var _pageType2;

        var pageType = (_pageType2 = { home: 'home', index: 'index' }, _defineProperty(_pageType2, 'index', 'index_2'), _defineProperty(_pageType2, 'article', 'article'), _defineProperty(_pageType2, 'qudao', 'qudao'), _defineProperty(_pageType2, 'share', 'share'), _pageType2),
            contentType = { news: 'news', sports: 'sports', finance: 'finance', top: 'top', video: 'video' },
            allPushType = { activity: 'activity', addToHome: 'addToHome', push: 'push', banner: 'banner' },
            allowPush = [contentType.news, contentType.video],
            _unde = 'undefined',
            _saConfig = (typeof _SACONFIG === 'undefined' ? 'undefined' : _typeof2(_SACONFIG)) !== _unde && _SACONFIG || {},
            _pushConfig = {},
            _config = {},
            _localurl = document.location.href,
            pushTarget = {

            news: {

                http: '' + window.prtl.prefix + 'interface.sina.cn/sina_wap_push_news.d.html?callback=updateInfo',

                https: 'https://interface.sina.cn/sina_wap_push_news.d.html?callback=updateInfo'

            }

        },
            status = {

            home: typeof _saConfig.domain == 'home',

            index: (typeof scope === 'undefined' ? 'undefined' : _typeof2(scope)) !== _unde && _typeof2(scope.channel_id) !== _unde,

            index_2: (typeof scope === 'undefined' ? 'undefined' : _typeof2(scope)) !== _unde && _typeof2(scope.channel_id) == _unde,

            article: (typeof __docConfig === 'undefined' ? 'undefined' : _typeof2(__docConfig)) !== _unde && _typeof2(__docConfig.__docId) !== _unde,

            qudao: _localurl.match(/(\S*)(&from=qudao)(\S*)/),

            share: _localurl.match(/(\S*)(share.d.html)(\S*)(&from=qudao)(\S*)/),

            top: _localurl.match(/(\S*)(:\/\/top.sina.cn)(\S*)/),

            news: _localurl.match(/(\S*)(:\/\/news.sina.cn)(\S*) /),

            sports: _localurl.match(/(\S*)(:\/\/sports.sina.cn)(\S*)/),

            finance: _localurl.match(/(\S*)(:\/\/finance.sina.cn)(\S*)/),

            blog: _localurl.match(/(\S*)(:\/\/blog.sina.cn)(\S*)/),

            t_news: _localurl.match(/(\S*)(:\/\/top.sina.cn\/news)(\S*)/),

            t_sports: _localurl.match(/(\S*)(:\/\/top.sina.cn\/sports)(\S*)/),

            t_finance: _localurl.match(/(\S*)(:\/\/top.sina.cn\/finance)(\S*)/),

            t_blog: _localurl.match(/(\S*)(:\/\/top.sina.cn\/blog)(\S*)/)

        },
            _APP = contentType.news,
            _isForbidShow = isForbid();

        function initConfig() {

            //判断是否为特殊类型，从而判断是否强制转换展示类型

            var _cType = {};

            _pushConfig = (typeof __pushConfig === 'undefined' ? 'undefined' : _typeof2(__pushConfig)) !== _unde && __pushConfig || {};

            _config = {

                __showType: '',

                __isAllNotShow: _typeof2(_pushConfig.__isAllNotShow) !== _unde && !!_pushConfig.__isAllNotShow,

                __isNotScheme: _typeof2(_pushConfig.__isNotScheme) !== _unde && !!_pushConfig.__isNotScheme,

                __isActivity: _typeof2(_pushConfig.__isActivity) !== _unde || !!_pushConfig.__isActivity || _pushConfig.__showType == allPushType.activity,

                //当无push的配置时，默认是不显示push的

                __isAddToHome: _typeof2(_pushConfig.__isAddToHome) !== _unde || !!_pushConfig.__isAddToHome || _pushConfig.__showType == allPushType.addToHome,

                __isPush: _typeof2(_pushConfig.__isPush) !== _unde && !!_pushConfig.__isPush || _pushConfig.__showType == allPushType.push,

                //当无banner的配置时，默认显示banner

                __isBanner: _typeof2(_pushConfig.__isBanner) == _unde || !!_pushConfig.__isBanner || _pushConfig.__showType == allPushType.banner,

                __waitTime: _typeof2(_pushConfig.__pushWaitTime) !== _unde && parseInt(_pushConfig.__pushWaitTime) || 5

            };

            _cType = getPushType();

            _config.__showType = _typeof2(_pushConfig.__showType) !== _unde && _pushConfig.__showType || _cType.isForce && _cType.type || allPushType.banner;
        }

        function getPushType() {

            var _temp = {},
                _apt = allPushType;

            _APP = getContentType();

            _temp.isForce = false;

            _temp.channel = _APP;

            //判断为新闻频道首页时，则去获取push数据，并显示

            if (_config.__isPush && allowPush.indexOf(_APP) > -1) {

                _temp.type = _apt.push;

                _temp.isForce = true;
            } else {

                if (!status.share) {

                    _temp.type = _apt.banner;
                } else if (allowPush.indexOf(_APP) <= -1) {

                    _temp.isForce = true;
                }
            }

            return _temp;
        }

        function isForbid() {

            var _ua = navigator.userAgent.toLowerCase(),
                _ios9Str = 'iphone os 9_',
                _isIos9 = _ua.indexOf(_ios9Str) > -1;

            if (_isIos9) {

                return true;
            } else {

                return false;
            }
        }

        function ajaxJsonp(url) {

            var head = doc.getElementsByTagName('body')[0],
                script = doc.createElement('script');

            script.src = url;

            script.className = "j_addscript";

            script.charset = "utf-8";

            head.appendChild(script);

            return false;
        }

        function isObjectEmpty(objBox) {

            var i = 0,
                _obj = objBox || {};

            if (objBox instanceof Object) {

                for (var o in _obj) {
                    i++;
                }
            }

            if (i > 0) {
                return false;
            } else {
                return true;
            }
        }

        function getPageType() {

            var _pageType = '';

            if (status.home) _pageType = pageType.home;

            if (status.index) _pageType = pageType.index;

            if (status.index_2) _pageType = pageType.index_2;

            if (status.article) _pageType = pageType.article;

            if (status.qudao) _pageType = pageType.qudao;

            if (status.share) _pageType = pageType.share;

            return _pageType;
        }

        function getContentType() {

            var _cType = '';

            if (status.sports || status.t_sports) {

                _cType = contentType.sports;
            } else if (status.finance || status.t_finance) {

                _cType = contentType.finance;
            } else if (status.blog || status.t_blog) {

                _cType = contentType.blog;
            } else {

                _cType = contentType.news;
            }

            if (typeof _saConfig.app == 'news') {

                _cType = contentType.news;
            }

            return _cType;
        }

        function getPushInfo(_app, info) {

            var _TYPE = contentType,
                rdata = {};

            switch (_app) {

                case _TYPE.news:

                    try {

                        if (info && info.message == 'success') {

                            var _data = JSON.parse(info.data),
                                _detail = _data && _data.length > 0 && _data[0];

                            if (typeof _detail.title != 'undefined' && typeof _detail.artid != 'undefined' && typeof _detail.url != 'undefined') {

                                rdata.title = _detail.title;

                                rdata.artid = _detail.artid;

                                rdata.url = _detail.url;

                                rdata.waitTime = _config.__waitTime;
                            }
                        } else {

                            console.log(info.message);
                        }
                    } catch (e) {

                        console.log(e);
                    }

                    break;

                case _TYPE.finance:

                case _TYPE.sports:

                case _TYPE.blog:

                default:

                    break;

            }

            return rdata;
        }

        window.updateInfo = function (re) {

            // var pushData = getPushInfo(_APP,re),

            var pushData = {},
                _isReEmpty = isObjectEmpty(re),
                _isPushEmpty = isObjectEmpty(pushData);

            if (!_isReEmpty && !_isPushEmpty) {

                pushData.__isNotScheme = _config.__isNotScheme;

                showPush(pushData);
            } else {

                showBanner();
            }
        };

        //显示push

        function showPush(data) {

            if (!_config.__isAllNotShow) {

                _config.__isBanner && (_config.__showType = allPushType.banner);

                if (_config.__isPush) {

                    win._sinaCallEvent.trigger('sina_open_push', data);
                } else {

                    _initShow();
                }
            }
        }

        //显示banner

        function showBanner() {

            if (_config.__isBanner && !_config.__isAllNotShow) {

                win._sinaCallEvent.trigger('sina_build_native');
            }
        }

        function showAddToHome() {

            if (_config.__isAddToHome) {

                _config.__isBanner && (_config.__showType = allPushType.banner);

                _config.__isPush && (_config.__showType = allPushType.push);

                win._sinaCallEvent.trigger('sina_run_addToHome');
            } else {

                _initShow();
            }
        }

        function showActivity() {

            var isPermitAddToHome = getActivityPermitShow();

            _config.__isBanner && (_config.__showType = allPushType.banner);

            _config.__isPush && (_config.__showType = allPushType.push);

            if (_config.__isActivity) {

                !isPermitAddToHome && _config.__isAddToHome && (_config.__showType = allPushType.addToHome);

                win._sinaCallEvent.trigger('sina_init_activity', runActivity);
            } else {

                _config.__isAddToHome && (_config.__showType = allPushType.addToHome);

                _initShow();
            }
        }

        function getActivityPermitShow() {

            //get permit right

            var getPermit = win.checkRequre({ isActivity: 1 }),
                isPermit = getPermit && getPermit['ch'] == 'uc',
                isActive = __pushConfig && __pushConfig.__showType == 'active';

            return isPermit;
        };

        window.getActivityPermitShow = getActivityPermitShow;

        //获取push权限，并去获取push数据

        function _initShow() {

            var pushType = _config.__showType,
                _apt = allPushType;

            switch (pushType) {

                case _apt.activity:

                    showActivity();

                    break;

                case _apt.addToHome:

                    showAddToHome();

                    break;

                case _apt.push:

                    // var newsApi = pushTarget.news,

                    // 	_url = location.protocol === 'https:' ? newsApi.https : newsApi.http;

                    // ajaxJsonp(_url);

                    showPush();

                    break;

                case _apt.banner:

                    showBanner();

                    break;

                default:

                    break;

            }
        }

        window.initShow = function () {

            _initShow();
        };

        //清除push及banner，保证不会再出现

        window.clearAllShow = function () {

            win._sinaCallEvent.trigger('sina_close_push', true);

            win._sinaCallEvent.trigger('sina_clear_native');
        };

        //重置push，保证push可以开启

        window.resetPush = function () {

            win._sinaCallEvent.trigger('sina_close_push', false);
        };

        window.initPushConfig = function () {

            initConfig();
        };

        function init() {

            win._sinaCallEvent.on('sina_init_config', initPushConfig);

            win._sinaCallEvent.trigger('sina_init_config');

            win._sinaCallEvent.on('sina_init_show', initShow);

            win._sinaCallEvent.on('sina_clear_all_show', clearAllShow);

            win._sinaCallEvent.on('sina_reset_push_show', resetPush);

            setTimeout(function () {

                //if(!_config.__isAllNotShow){

                win._sinaCallEvent.trigger('sina_init_show');

                //}			
            }, 300);

            //initShow();
        }

        setTimeout(function () {

            init();
        }, 1000);
    })(window, document);
} catch (e) {
    console["error" in console ? "error" : "log"](e, "switchProxy_homev8.js");
}

/***/ }),
/* 28 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/*
 * @Author: FengZihao 
 * @Date: 2017-05-16 16:20:25 
 * @Last Modified by: zihao5@staff.sina.com.cn
 * @Last Modified time: 2017-06-07 13:58:25
 */


(function () {
    var _maq = _maq || []; // 脚本检测传递的信息
    var info = {
        'account': '', // App的名称，例如SinaNews
        'channel': '', // 当前H5的渠道来源
        'point': '', // 加码页面名称，H5
        'platform': '' // 设备平台名称（android,ios,wp,pc）
    };
    var ua = navigator.userAgent;

    function parseURL() {
        var loc = window.location;
        return {
            source: loc.href,
            protocol: loc.protocol.replace(':', ''),
            host: loc.hostname,
            query: loc.search,
            params: function () {
                var ret = {},
                    seg = loc.search.replace(/^\?/, '').split('&'),
                    len = seg.length,
                    i = 0,
                    s;
                for (; i < len; i++) {
                    if (!seg[i]) {
                        continue;
                    }
                    s = seg[i].split('=');
                    ret[s[0]] = s[1];
                }
                return ret;
            }(),
            path: loc.pathname.replace(/^([^\/])/, '/$1'),
            relative: (loc.href.match(/tps?:\/\/[^\/]+(.+)/) || [, ''])[1],
            segments: loc.pathname.replace(/^\//, '').split('/')
        };
    }

    function getPlatform() {
        var platform;
        if (/(iPhone|iPad|iPod|iOS)/i.test(ua)) {
            platform = 'ios';
        } else if (/(Windows Phone)/i.test(ua)) {
            platform = 'wp';
        } else if (/(Android)/i.test(ua)) {
            platform = 'android';
        } else {
            //pc
            platform = 'pc';
        }
        return platform;
    }

    function getChannel() {
        var urlObj = parseURL();
        var searchReg = /^http.*?\.([^\.]*?)\.(?:com|cn)/i;
        var searchEngs = ['baidu', 'google', 'sogou', 'soso', 'so', '360', 'sm', 'easou', 'yicha', 'haosou', 'uodoo', 'sm-tc'];
        var wm = urlObj.params.wm;
        var outWmS4 = ['3285', '3288', '3272', '3283', '3286', '3291', '4002', '3287', '3255', '3296', '3298', '3239', '3269', '3271', '3217', '3219', '3220', '3225', '3274', '3282', '3222', '3223', '3227', '3233', '3243', '3213', '3229', '3185', '3170', '3293'];
        var channel;
        var refer = document.referrer;
        if (wm) {
            // 依据wm值
            var wmS4 = wm.substring(0, 4);
            if (wmS4 === '3049') {
                return 'wbH5';
            } else if (outWmS4.indexOf(wmS4) !== -1) {
                return 'compony';
            } else {
                return 'browser';
            }
        } else if (!refer) {
            // 直访，忽略后面的判断
            return 'compony';
        } else {
            // 搜索
            var searchList = refer.match(searchReg);
            var searchEng = searchList && searchList.length > 1 ? searchList[1] : '';
            if (searchEngs.indexOf(searchEng) !== -1) {
                if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log(searchEng, 'search');
                return 'search';
            }
            // 无法判断
            return 'compony';
        }
    }

    function qusetMobileInit() {
        try {
            var qusetMobileConfig = window.qusetMobileConfig;
            if (typeof qusetMobileConfig !== "undefined") {
                info.account = qusetMobileConfig.account !== undefined ? qusetMobileConfig.account : '';
                info.point = qusetMobileConfig.point !== undefined ? qusetMobileConfig.point : '';
                info.platform = qusetMobileConfig.platform !== undefined ? qusetMobileConfig.platform : '';
                info.channel = qusetMobileConfig.channel !== undefined ? qusetMobileConfig.channel : '';
            }
            info.account = info.account || 'SinaNews';
            info.point = info.point || 'H5';
            info.platform = info.platform || getPlatform();
            info.channel = info.channel || getChannel();

            window._maq = window._maq || [];
            window._maq.push(['account', info.account], ['channel', info.channel], ['point', info.point], ['platform', info.platform]);
            var ma = document.createElement('script');
            ma.type = 'text/javascript';
            ma.async = true;
            ma.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'www.qchannel03.cn/m2.js';
            var s = document.getElementsByTagName('script')[0] || document.body.children[0];
            s.parentNode.insertBefore(ma, s);
            for (var i = 0; i < 4; i++) {
                if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log(window._maq[i][0], ':', window._maq[i][1]);
            }
        } catch (err) {
            if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('QusetMobile Error');
        }
    }

    // qusetMobileInit();
    if (window.addEventListener) {
        window.addEventListener('load', function () {
            qusetMobileInit();
        });
    } else {
        qusetMobileInit();
    }
})();

/***/ }),
/* 29 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__shared_utils__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__shared_newIdeaAd_js__ = __webpack_require__(63);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_touch__ = __webpack_require__(45);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__shared_testAdData__ = __webpack_require__(65);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__shared_testAdData___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__shared_testAdData__);
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

//开发脚本








//智能版feed植入广告
window["intellHomePushs"] = [
	// {
	// 	cardModule : "intell",
	// 	domHTML : '<div sax-type="proxy" class="j_native" intell-index="j_card_intenews" data-id="PDPS000000060054" data-pos="5"></div>'
	// },
	// {
	// 	cardModule : "intell",
	// 	domHTML : '<div sax-type="proxy" class="j_native" intell-index="j_card_intenews" data-id="PDPS000000060055" data-pos="10"></div>'
	// },
	// {
	// 	cardModule : "intell",
	// 	domHTML : '<div sax-type="proxy" class="j_native" intell-index="j_card_intenews" data-id="PDPS000000060056" data-pos="15"></div>'
	// }
];
window["saxPushs"] = [];
var PullDownRefreshAD = [];
(function (win, doc) {
	// var S = win.sinaCnHome.S;
	var mode = null;
	var prtl = 'https:' == win.location.protocol ? 'https://' : 'http://';
	var prtln = 'https:' == win.location.protocol ? 'ns' : 'n';
	var ismjsHTTPS = 'https:' == win.location.protocol ? 'https://mjs.sinaimg.cn' : 'http://mjs.sinaimg.cn';
	var lazyLoadImgConfig = {
		lz1X1: ismjsHTTPS + '/wap/online/home/v7/images/lz1X1.jpg',
		lz2X1: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=',
		lz4X3: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=',
		lz148X125: ismjsHTTPS + '/wap/online/home/v7/images/lz148X125.jpg'
	};

	function adHide(pdps) {
		//紧急隐藏广告
		if (typeof adBlock != "undefined") {
			if (adBlock && pdps) {
				for (var i = 0; i < adBlock.length; i++) {
					if (adBlock[i] == pdps.getAttribute('data-id')) {
						//console.log('隐藏：'+pdps);
						pdps.classList.add('hide');
					}
				}
			}
		}
	}

	var isUC = false,
	    isQQ = false,
	    is360 = false,
	    isBaidu = false;
	window.feedPush = { //处理信息流广告
		dataLength: 0,
		dataAfterLen: 0,
		count: 0,
		init: function init(index) {

			this._ua = this._getUA();
			if (window["homePushsAfter"] && window["homePushsAfter"].length > 0) {
				this.homeAfterPushs = window["homePushsAfter"];
				this.dataAfterLen = window["homePushsAfter"].length;
				this.dataHandle(); //card后面加载的广告，非card里面。
			}
			if (window["intellHomePushs"] && window["intellHomePushs"].length > 0) {
				this.intellHomePushs = window["intellHomePushs"];
				this.dataLength = window["intellHomePushs"].length;
				this.push(index); //card里面加载的广告。
			}
			if (window["saxPushs"] && window["saxPushs"].length > 0) {
				this.saxPushs = window["saxPushs"];
				this.saxPushsLength = window["saxPushs"].length;
				//this.asyncPush();//为广告组建统一做铺垫。
			}
			__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].init();
			isUC = this._isUCCheck();
			isQQ = this._isQQBrowserCheck();
			isBaidu = this._isBaiduBrowserCheck();
			is360 = this._is360BrowserCheck();
		},
		insertRioLanmu: function insertRioLanmu() {
			//栏目条广告
			var tar = document.getElementById('j_card_sports').querySelector('.f_md_oly');
			if (tar) {
				tar.appendChild(__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].creatElement("span", { "sax-type": "lanmu", "class": "j_sax f_md_th_ad", "data-id": "C573F5DD799D" }));
				var _script = __WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].creatElement("script", { "sax-type": "lanmu", "type": "text/html" });
				_script.innerHTML = '<img src="<% content[0].src[0] %>" class="f_md_th_ad_pic" class="f_md_th_ad_pic" style="max-width:80px;"/>';
				document.body.appendChild(_script);
			}
		},
		_getUA: function _getUA() {
			//alert((navigator.userAgent).toLowerCase());
			return navigator.userAgent.toLowerCase();
		},
		_isUCCheck: function _isUCCheck() {
			var ua = this._ua;
			var ret = false;
			ret = ua.indexOf("ucbrowser") > -1 && ua.indexOf("iphone") == -1;
			return ret;
		},
		_isQQBrowserCheck: function _isQQBrowserCheck() {
			var ua = this._ua;
			var ret = false;
			ret = ua.indexOf("qqbrowser") > -1 && ua.indexOf("iphone") == -1;
			return ret;
		},
		_isBaiduBrowserCheck: function _isBaiduBrowserCheck() {
			var ua = this._ua;
			var ret = false;
			ret = ua.indexOf("baidu") > -1 && ua.indexOf("iphone") == -1;
			return ret;
		},
		_is360BrowserCheck: function _is360BrowserCheck() {
			var ua = this._ua;
			var ret = false;
			ret = ua.indexOf("360 aphone") > -1 && ua.indexOf("iphone") == -1;
			return ret;
		},
		asyncPush: function asyncPush(cardName) {
			var str = '',
			    i = 0,
			    len = this.saxPushs.length;
			var _target = document.querySelector('#' + cardName);
			if (!_target) return;
			if (!document.querySelector('#sax_dom_storage')) {
				var divPiece = document.createElement('div');
				divPiece.id = 'sax_dom_storage';
				divPiece.style.display = 'none';
			} else {
				var divPiece = document.querySelector('#sax_dom_storage');
			}
			for (; i < len; i++) {
				if (this.saxPushs[i]['pushed']) {
					continue;
				}
				if (this.saxPushs[i].cardName === cardName && _target.querySelectorAll('.cn').length >= this.saxPushs[i].cardPos) {
					str += this.saxPushs[i]['domHTML'];
					this.saxPushs[i]['pushed'] = 1;
				}
			}

			divPiece.innerHTML = str;
			document.body.appendChild(divPiece);
			__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].init();
		},
		dataHandle: function dataHandle() {
			//for (var i = 0; i < this.dataAfterLen; i++) {
			var str = '',
			    i = 0,
			    len = this.dataAfterLen,
			    divPiece = document.createElement('div');
			divPiece.id = 'sax_domAfter_storage';
			divPiece.style.display = 'none';
			for (; i < len; i++) {
				str += this.homeAfterPushs[i]['domHTML'];
				/*var pushIndex = this.homeAfterPushs[i]['index'];
    */
			}
			divPiece.innerHTML = str;
			delete window["homePushsAfter"];
			document.body.appendChild(divPiece);

			__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].init();
			//}
		},
		push: function push(moduleName) {
			var str = '',
			    i = 0,
			    len = this.intellHomePushs.length;
			if (!document.querySelector('#sax_dom_storage')) {
				var divPiece = document.createElement('div');
				divPiece.id = 'sax_dom_storage';
				divPiece.style.display = 'none';
			} else {
				var divPiece = document.querySelector('#sax_dom_storage');
			}
			for (; i < len; i++) {

				if (this.intellHomePushs[i]['pushed']) {
					continue;
				}

				if (this.intellHomePushs[i].cardModule === moduleName) {
					str += this.intellHomePushs[i]['domHTML'];
					//feedPush.checkBoxLast(divPiece);
					this.intellHomePushs[i]['pushed'] = 1;
				}
			}

			divPiece.innerHTML = str;
			document.body.appendChild(divPiece);
			__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].init();
		},
		dataCheck: function dataCheck(dom) {
			var cardModule = document.getElementById(dom.getAttribute("data-index"));
			dom.style.marginBottom = '0.2rem';
			dom.firstChild.firstChild.className = dom.firstChild.firstChild.className + " j_last";
			this.insertAfter(dom, cardModule);
		},
		dataCheckPos: function dataCheckPos(dom) {
			var pos = dom.getAttribute("data-pos");
			var oDiv = document.getElementById(dom.getAttribute("intell-index"));
			if (pos === "last") {
				oDiv.insertBefore(dom, oDiv.children.length);
			} else {
				oDiv.insertBefore(dom, oDiv.children[pos - 1]);
			}
		},
		bindEvent: function bindEvent() {
			gifListener();
		},
		block: function block(dom, _data) {
			//只视频广告不添加点击监听
			if (_data['templateid'] == "42") {
				// if(_data['templateid'] == "42" || _data['templateid'] == "40"){
				return;
			}
			setTimeout(function () {
				if (dom && typeof dom.children[0] !== "undefined" && dom.getAttribute('listener') !== "true") {
					dom.setAttribute('listener', "true");
					dom.addEventListener('click', function (e) {
						clickPos.clkx = e.clientX;
						clickPos.clky = e.clientY;
						aHrefClickPos(this, e);
					});
				}
			}, 500);
		},
		asyncDataHandle: function asyncDataHandle(dom) {
			var cardName = dom.getAttribute('data-saxname'),
			    cardPos = dom.getAttribute('data-saxpos'),
			    card = doc.querySelector('#' + cardName),
			    feedList;
			if (card) {
				// if(mode){
				// 	feedList = card.querySelectorAll(".m_f_a");
				// }else{
				// 	feedList = card.querySelectorAll(".m_f_a_no");
				// }
				feedList = card.childNodes; //直接子元素
				//console.log(feedList,feedList[cardPos-1]);
				if (feedList.length >= cardPos) {

					this.insertAfter(dom, feedList[cardPos - 2]);
				} else if (cardPos === 'last') {
					card.insertBefore(dom, feedList[feedList.length - 1]);
				}
			}
		},
		insertAfter: function insertAfter(newElement, targetElement) {
			// debugger
			var parent = targetElement.parentNode;

			if (parent.lastChild == targetElement) {
				// 如果最后的节点是目标元素，则直接添加。因为默认是最后
				parent.appendChild(newElement);
			} else {
				//如果不是，则插入在目标元素的下一个兄弟节点 的前面。也就是目标元素的后面
				parent.insertBefore(newElement, targetElement.nextSibling);
			}
		},
		getFixedItems: function getFixedItems(cardID) {
			if (!cardID) {
				return 0;
			}
			var _$items = document.getElementById(cardID);
			return _$items && _$items.children.length || 0;
		},
		fixedBox: 'j_card_yaowen',
		asyncDataHandleByTY: function asyncDataHandleByTY(dom, cardID, cardPos, addList) {
			// debugger
			//获取置顶数据条数
			var fixedItems = this.getFixedItems(this.fixedBox);
			var cardPos = parseInt(cardPos, 10) - fixedItems;
			var cardID = document.getElementById(cardID);
			var feedList = cardID.children;
			if (feedList.length >= cardPos - 1) {
				//减1操作是为了保证最小新闻list满足广告插入条件。比如新闻list一共5条,广告要在第六条的位置。
				//20170906，确保不出现广告联排的情况
				// debugger

				var _ablePos = cardPos - 2 >= 0 ? cardPos - 2 : 0;
				this.insertAfter(dom, feedList[_ablePos]);

				PullDownRefreshAD.push(dom);
				return true;
			}
			return false;
			// else{
			//     cardID.insertBefore(dom,feedList[feedList.length-1]);
			// }
		},
		tyAddList: {},
		asyncDataHandlePullUp: function asyncDataHandlePullUp(dom, cardID, cardPos, addList, upPos) {
			// debugger
			//获取置顶数据条数
			var cardPos = parseInt(cardPos, 10);
			addList = parseInt(addList, 10);
			var cardID = document.getElementById(cardID);
			var feedList = cardID.children;
			var feedLen = feedList.length;
			var childNum = 0;
			var _isNearlyExist = false; //临近元素是否有广告


			if (!feedLen) {
				return;
			}

			//upPos表示插入的当前页数中的第几个广告，为7的倍数（7为随意定制，无任何意义）
			childNum = feedLen - addList - (upPos / 7 - 1) + cardPos - 1;
			//插入执行的为insertAfter，位置需要前移一位

			// if (this.tyAddList[cardID]) {
			// 	_isNearlyExist = this.tyAddList[cardID].indexOf(childNum - 1) >= 0 ||
			// 		this.tyAddList[cardID].indexOf(childNum) >= 0 ||
			// 		this.tyAddList[cardID].indexOf(childNum + 1) >= 0;
			// } else {
			// 	this.tyAddList[cardID] = [];
			// }

			// debugger
			// if (feedLen >= childNum && !_isNearlyExist) {
			if (feedLen >= childNum) {
				// this.tyAddList[cardID].push(childNum);
				//使用insertAfter为确保可以插入到最后一个
				this.insertAfter(dom, feedList[childNum - 1]);
				return true;
			}
			return false;
		},
		topAnimation: function topAnimation(img, begin, imgBox) {
			var clientWidth = document.documentElement.clientWidth;
			var timer = setInterval(function () {
				if (begin > clientWidth / img.width * img.height) {
					clearInterval(timer);
					setTimeout(function () {
						document.querySelector('.j_adImgUp').style.height = 0;
						document.querySelector('.j_adCloseBtn').style.WebkitTransform = 'rotate(135deg)';
						document.querySelector('.j_adCloseBtn').style.transform = 'rotate(135deg)';
						//sinaSax.callback('qpSaxFin');首页动画（如奥运红牛）
					}, 5000);
				} else {
					begin += 5;
					imgBox.style.height = begin + 'px';
				}
			}, 20);
		},
		bottomAnimation: function bottomAnimation(img, begin, imgBox) {
			var clientWidth = document.documentElement.clientWidth;
			var timer = setInterval(function () {
				if (begin > clientWidth / img.width * img.height) {
					clearInterval(timer);
					setTimeout(function () {
						if (document.querySelector('.j_lmtimage')) {
							document.querySelector('.j_lmtimage').style.height = 0;
						}
						__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].callback('lmtSaxFinish');
					}, 5000);
				} else {
					begin += 5;
					imgBox.style.height = begin + 'px';
				}
			}, 20);
		}
	};
	//feedPush.insertRioLanmu();
	//feedPush.init("yaowen",0);

	var proxy_column_feed = { //信息流广告模板
		vid: [],
		getCommStr: function getCommStr(data) {
			var $comment_total = data['comment_total'];
			var $comm_str = data['adtype'] == '01' ? $comment_total == 0 ? '' : $comment_total : $comment_total;
			return $comm_str == 0 ? '' : $comm_str;
		},
		noPic: function noPic(dom, data) {
			var arr = [];
			arr.push('<a class="m_f_a_no" href="javascript:;" data-href="' + data['url'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			arr.push('<h2 class="cm_tit">' + data['title'] + '</h2>');
			arr.push('<blockquote class="cm_f_ic">');
			arr.push('<em class="m_f_con_n fr">广告<span class="m_f_con_ic icon_com"></span></em>');
			if (data['adSource']) {
				arr.push('<cite class="m_f_con_add">' + data['adSource'] + '</cite>');
			}
			arr.push('</blockquote>');
			arr.push('</a>');
			dom.innerHTML = arr.join('');
		},
		temp31: function temp31(dom, data) {
			//wap图文模板   templateid为31
			var arr = [];

			arr.push('<a class="m_f_a" href="javascript:;" data-href="' + data['url'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			arr.push('<figure class="m_f_div"><img class="img_width" src="' + lazyLoadImgConfig.lz4X3 + '" data-src="' + data['img']['u'] + '" alt="' + data['title'] + '"></figure>');
			// arr.push('<figure class="m_f_div"><img class="img_width" src="'+data['img']['u']+ '" alt="' + data['title'] + '"></figure>');
			arr.push('<aside class="m_f_con">');
			arr.push('<h2 class="m_f_con_t cm_tit_solo">' + data['title'] + '</h2>');
			arr.push('<h3 class="m_f_con_t cm_tit_solo m_f_con_t_s">' + data['intro'] + '</h3>');
			arr.push('<blockquote class="cm_f_ic">');
			arr.push('<mark class="cm_mark">广告</mark>');
			if (data['adSource']) {
				arr.push('<cite class="m_f_con_add">' + data['adSource'] + '</cite>');
			}
			if (data['comment_reply']) {
				arr.push('<em class="m_f_con_n fr">' + data['comment_reply'] + '<span class="m_f_con_ic icon_com"></span></em>');
			} else {
				arr.push('<em class="m_f_con_n fr">' + parseInt(Math.random() * 100, 10) + '<span class="m_f_con_ic icon_com"></span></em>');
			}
			arr.push('</blockquote>');
			arr.push('</aside></a>');
			dom.innerHTML = arr.join('');
		},
		temp33: function temp33(dom, data) {
			//wap组图模板   templateid为33(1)
			var arr = [];
			arr.push('<a class="m_f_a show " href="javascript:;" data-href="' + data['url'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			arr.push('<h3 class="cm_tit">' + data['title'] + '</h3>');
			arr.push('<aside class="i_gx3_img_box">');
			if (data['images'].length >= 3) {
				arr.push('<figure class="i_gx3_img_div"><img class="img_width" src="' + lazyLoadImgConfig.lz4X3 + '" data-src="' + data['images'][0]['u'] + '" alt="' + data['title'] + '" /></figure>');
				arr.push('<figure class="i_gx3_img_div"><img class="img_width" src="' + lazyLoadImgConfig.lz4X3 + '" data-src="' + data['images'][1]['u'] + '" alt="' + data['title'] + '" /></figure>');
				arr.push('<figure class="i_gx3_img_div"><img class="img_width" src="' + lazyLoadImgConfig.lz4X3 + '" data-src="' + data['images'][2]['u'] + '" alt="' + data['title'] + '" /></figure>');
			}
			arr.push('</aside>');
			arr.push('<blockquote class="cm_f_ic cm_f_ic_l">');
			if (data['comment_reply']) {
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + data['comment_reply'] + '</span></em>');
			} else {
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + parseInt(Math.random() * 100, 10) + '</span></em>');
			}
			if (data['adSource']) {
				arr.push('<cite class="m_f_con_add">' + data['adSource'] + '</cite>');
			}
			arr.push('<mark class="cm_mark">广告</mark>');
			arr.push('</blockquote>');
			arr.push('</a>');
			dom.innerHTML = arr.join('');
		},
		temp35: function temp35(dom, data) {
			//wap大图模板   templateid为35(1)
			var arr = [];
			arr.push('<a class="show m_f_a" href="javascript:;" data-href="' + data['url'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			arr.push('<h3 class="cm_tit">' + data['title'] + '</h3>');
			arr.push('<aside class="i_gx3_img_box">');
			arr.push('<figure class="i_gx3_img_div i_gx3_img_div_solo i_bg"><img class="img_width" src="' + lazyLoadImgConfig.lz2X1 + '"  data-src="' + data['img']['u'] + '" alt="' + data['title'] + '"></figure>');
			// arr.push('<figure class="i_gx3_img_div i_gx3_img_div_solo"><img class="img_width" src="'+data['img']['u']+'" alt="' + data['title'] + '"></figure>');
			arr.push('</aside>');
			arr.push('<blockquote class="cm_f_ic cm_f_ic_l">');
			if (data['comment_reply']) {
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + data['comment_reply'] + '</span></em>');
			} else {
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + parseInt(Math.random() * 100, 10) + '</span></em>');
			}
			if (data['adSource']) {
				arr.push('<cite class="m_f_con_add">' + data['adSource'] + '</cite>');
			}
			arr.push('<mark class="cm_mark">广告</mark>');
			arr.push('</blockquote>');
			arr.push('</a>');
			dom.innerHTML = arr.join('');
		},
		temp40: function temp40(dom, data) {
			//wap动态大图模板   templateid为40
			var arr = [];
			arr.push('<section class="m_f_a show">');
			arr.push('<a class="show" href="javascript:;" data-href="' + data['url'] + '" id="temp40_posXY" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			arr.push('<h3 class="cm_tit">' + data['title'] + '</h3>');
			arr.push('</a>');
			arr.push('<aside class="i_gx3_img_box j_gif" id="j_gif">');

			arr.push('<figure class=" i_gx3_img_div_solo"><img class="img_width" src="' + data['images'][0]['u'] + '"  data-src-info="' + data['images'][1]['u'] + '" alt="' + data['title'] + '"></figure>');
			arr.push('<em class="m_iq_img3x2x3_e">点击查看动图</em>');
			arr.push('</aside>');
			arr.push('<blockquote class="cm_f_ic">');
			arr.push('<mark class="cm_mark">广告</mark>');
			if (data['adSource']) {
				arr.push('<cite class="m_f_con_add">' + data['adSource'] + '</cite>');
			}
			if (data['comment_reply']) {
				arr.push('<em class="m_f_con_n fr">' + data['comment_reply'] + '<span class="m_f_con_ic icon_com"></span></em>');
			} else {
				arr.push('<em class="m_f_con_n fr">' + parseInt(Math.random() * 100, 10) + '<span class="m_f_con_ic icon_com"></span></em>');
			}

			arr.push('<span id="j_gif" style="display:none;"></span></blockquote>');
			arr.push('</section>');
			dom.innerHTML = arr.join('');

			// try{
			// 	debugger
			// 	var temp40_posXY = dom.querySelector("#temp40_posXY");
			// 	if (dom.getAttribute('listener') !== "true") {
			// 		dom.setAttribute('listener', "true");
			// 		temp40_posXY.addEventListener('click', function(e) {
			// 			clickPos.clkx = e.clientX;
			// 			clickPos.clky = e.clientY;
			// 			aHrefClickPos(this, e);
			// 		}, true);
			// 	}
			// 	}catch(e){
			// 	console.log('temp40_posXY error info === '+e.message);
			// 	}

			// gifListener();
		},
		temp42: function temp42(dom, data) {
			//视频大图模板   templateid为42
			var arr = [];
			arr.push('<section class="m_f_a show" data-videojc="' + data['play'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			arr.push('<a class="show " href="javascript:;" data-href="' + data['url'] + '" id="temp42_posXY">');
			arr.push('<h3 class="cm_tit">' + data['title'] + '</h3>');
			arr.push('</a>');
			arr.push('');
			arr.push('');
			arr.push('<figure class="m_video_img_box">');
			arr.push('<img class="img_width" src="' + lazyLoadImgConfig.lz2X1 + '"  data-src="' + data['img']['u'] + '" alt="' + data['title'] + '">');
			// arr.push('<img class="img_width" src="'+data['img']['u']+'" alt="' + data['title'] + '">');
			arr.push('<span class="cm_btn_paly icon_s_video cm_c_c"></span>');
			arr.push('</figure>');
			//视频容器
			arr.push('<figure class="m_video_img_box hide"  vid="' + data['vid'] + '" id="vid' + data['vid'] + '">');
			arr.push('</figure>');
			//视频容器end
			arr.push('<blockquote class="cm_f_ic">');
			arr.push('<mark class="cm_mark">广告</mark>');
			if (data['adSource']) {
				arr.push('<cite class="m_f_con_add">' + data['adSource'] + '</cite>');
			}
			if (data['comment_reply']) {
				arr.push('<em class="m_f_con_n fr">' + data['comment_reply'] + '<span class="m_f_con_ic icon_com"></span></em>');
			} else {
				arr.push('<em class="m_f_con_n fr">' + parseInt(Math.random() * 100, 10) + '<span class="m_f_con_ic icon_com"></span></em>');
			}
			arr.push('</blockquote>');
			arr.push('</section>');
			dom.innerHTML = arr.join('');
			this.vid.push('vid' + data['vid']);
			var ajaxUrl = prtl + "interface.sina.cn/video/wap/videoinfo.d.json?" + "vid=" + data['vid'];

			try {
				var temp42_posXY = dom.querySelector("#temp42_posXY");
				if (dom.getAttribute('listener') !== "true") {
					dom.setAttribute('listener', "true");
					temp42_posXY.addEventListener('click', function (e) {
						clickPos.clkx = e.clientX;
						clickPos.clky = e.clientY;
						aHrefClickPos(this, e);
					});
				}
			} catch (e) {
				console.log('temp42_posXY error info === ' + e.message);
			}

			__WEBPACK_IMPORTED_MODULE_1__shared_utils__["a" /* default */].jsonp(ajaxUrl, function (data) {

				if (!data.data.baseUrl) {
					//arguments.callee(this);
				} else {
					var url = data.data.baseUrl;
					if (url.indexOf(prtl) === -1) {

						console.log('videoSrcError', data); //判断视频地址是否合法
						return false;
					} else {
						//setTimeout(function(){},1000);
						var tar_wrap = document.querySelector('#' + proxy_column_feed.vid[proxy_column_feed.vid.length - 1]);

						if ((typeof tar_wrap === 'undefined' ? 'undefined' : _typeof(tar_wrap)) != undefined || tar_wrap != null) {
							tar_wrap.innerHTML = '<video src="' + url + '" controls="controls" preload="none" style="width:100%;background: #000;position:absolute;top:0;left:0;"></video>';

							var tar_vid = tar_wrap.firstChild;
							var tar = tar_wrap.parentNode.firstChild.nextSibling.firstChild;
							var tar_btn = tar_wrap.parentNode.firstChild.nextSibling.firstChild.nextSibling;
							tar.addEventListener("click", function (e) {
								var imgWidth = e.target.parentNode.firstChild.width;
								tar_vid.style.height = imgWidth * 9 / 16 + 'px';
								tar_wrap.parentNode.firstChild.nextSibling.nextSibling.className = "m_video_img_box";
								tar_wrap.parentNode.firstChild.nextSibling.className = "m_video_img_box hide";
								tar_vid.play();
							});
							tar_btn.addEventListener("click", function (e) {
								var imgWidth = e.target.parentNode.firstChild.width;
								tar_vid.style.height = imgWidth * 9 / 16 + 'px';
								tar_wrap.parentNode.firstChild.nextSibling.nextSibling.className = "m_video_img_box";
								tar_wrap.parentNode.firstChild.nextSibling.className = "m_video_img_box  hide";
								tar_vid.play();
							});
						} else {}
					}
				}
			});
		},
		temp43: function temp43(dom, data) {
			//wap图文模板（长标题） templateid为43(1)
			var arr = [];
			// arr.push('<a class="m_f_a" href="' + data['url'] + '">');
			arr.push('<a class="m_f_a"  href="javascript:;" data-href="' + data['url'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			//arr.push('');
			arr.push('<figure class="m_f_div i_bg"><img class="img_width" src="' + lazyLoadImgConfig.lz4X3 + '" data-src="' + data['img']['u'] + '" alt="' + data['title'] + '"></figure>');
			arr.push('<aside class="m_f_con">');
			arr.push('<h2 class="m_f_con_t cm_tit">' + data['title'] + '</h2>');
			//arr.push('<p class="f_card_p ellipsis">'+data['intro']+'</p>');
			arr.push('<blockquote class="cm_f_ic cm_f_ic_l">');
			if (data['comment_reply']) {
				// arr.push('<em class="m_f_con_n">' + data['comment_reply'] + '<span class="m_f_con_ic icon_com"></span></em>');
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + data['comment_reply'] + '</span></em>');
			} else {
				// arr.push('<em class="m_f_con_n fr">' + parseInt(Math.random() * 100, 10) + '<span class="m_f_con_ic icon_com"></span></em>');
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + parseInt(Math.random() * 100, 10) + '</span></em>');
			}
			arr.push('<mark class="cm_mark">广告</mark>');
			arr.push('</blockquote>');
			arr.push('</aside></a>');
			dom.innerHTML = arr.join('');
		},
		temp44: function temp44(dom, data) {
			var arr = [];
			arr.push('<dl class="f_card j_href"><dd class="f_card_dd">');
			arr.push('<a class="j_href" href="javascript:;" data-href="' + data['url'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '"><h3 class="f_card_h3 ellipsis">' + data['title'] + '</h3></a>');
			arr.push('<ul class="f_card_pic">');
			arr.push('<li><a href="javascript:;" data-href="' + data['url'] + '"><img src="' + data['images'][0].u + '" alt=""></a></li>');
			arr.push('<li><a href="javascript:;" data-href="' + data['url'] + '"><img src="' + data['images'][1].u + '" alt=""></a></li>');
			arr.push('<li><a href="javascript:;" data-href="' + data['url'] + '"><img src="' + data['images'][2].u + '" alt=""></a></li>');
			arr.push('</ul>');
			arr.push('<dl class="f_a_card">');
			arr.push('<dt class="f_a_pic"><a href="javascript:;" data-href="' + data['url'] + '"><img src="' + data['img'].u + '" alt=""></a></dt>');
			arr.push('<dd class="f_a_text">');
			arr.push('<h4 class="f_a_list ellipsis"><a href="javascript:;" data-href="' + data['sub'][0].url + '">' + data['sub'][0].title + '</a></h4>');
			arr.push('<h4 class="f_a_list ellipsis"><a href="javascript:;" data-href="' + data['sub'][1].url + '">' + data['sub'][1].title + '</a></h4>');
			arr.push('<h4 class="f_a_list ellipsis"><a href="javascript:;" data-href="' + data['sub'][2].url + '">' + data['sub'][2].title + '</a></h4>');
			arr.push('</dd></dl></dd></dl>');
			dom.innerHTML = arr.join('');
		},
		temp46: function temp46(dom, data) {
			//wap图文模板（长标题）templateid为46 [左文右图]
			var arr = [];
			arr.push('<a class="m_f_a_r" href="javascript:;" data-href="' + data['url'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			arr.push('');
			arr.push('<aside class="m_f_con">');
			arr.push('<h2 class="m_f_con_t cm_tit">' + data['title'] + '</h2>');
			//arr.push('<p class="f_card_p ellipsis">'+data['intro']+'</p>');
			arr.push('<blockquote class="cm_f_ic">');
			if (data['comment_reply']) {
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + data['comment_reply'] + '</em>');
			} else {
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + parseInt(Math.random() * 100, 10) + '</span></em>');
			}
			if (data['adSource']) {
				arr.push('<cite class="m_f_con_add">' + data['adSource'] + '</cite>');
			}
			arr.push('<mark class="cm_mark">广告</mark>');
			arr.push('</blockquote>');
			arr.push('</aside>');
			arr.push('<figure class="m_f_div i_bg"><img class="img_width" src="' + lazyLoadImgConfig.lz4X3 + '" data-src="' + data['img']['u'] + '" alt="' + data['title'] + '"></figure>');

			arr.push('</a>');
			dom.innerHTML = arr.join('');
			// dom.innerHTML = arr.join('');
		},
		temp47: function temp47(dom, data) {
			//wap图文模板   templateid为47  [左文右图]
			var arr = [];

			arr.push('<a class="m_f_a_r" href="javascript:;" data-href="' + data['url'] + '" data-info="' + (data['info'] || '') + '" data-adid="' + (data['adid'] || '') + '" data-templateid="' + (data['templateid'] || '') + '">');
			arr.push('<aside class="m_f_con">');
			arr.push('<h2 class="m_f_con_t cm_tit_solo">' + data['title'] + '</h2>');
			arr.push('<h3 class="m_f_con_t cm_tit_solo m_f_con_t_s">' + data['intro'] + '</h3>');
			arr.push('<blockquote class="cm_f_ic">');
			if (data['comment_reply']) {
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + data['comment_reply'] + '</span></em>');
			} else {
				arr.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + parseInt(Math.random() * 100, 10) + '</span></em>');
			}
			if (data['adSource']) {
				arr.push('<cite class="m_f_con_add">' + data['adSource'] + '</cite>');
			}
			arr.push('<mark class="cm_mark">广告</mark>');
			arr.push('</blockquote>');
			arr.push('</aside>');
			arr.push('<figure class="m_f_div"><img class="img_width" src="' + lazyLoadImgConfig.lz4X3 + '" data-src="' + data['img']['u'] + '" alt="' + data['title'] + '"></figure>');

			arr.push('</a>');
			dom.innerHTML = arr.join('');
		},
		newIdeaAd: function newIdeaAd(dom, data) {
			console.log("newIdeaAd start");
			setTimeout(function () {
				__WEBPACK_IMPORTED_MODULE_2__shared_newIdeaAd_js__["a" /* default */].goWork({
					data: data,
					ele: __WEBPACK_IMPORTED_MODULE_2__shared_newIdeaAd_js__["a" /* default */].createId()
				});
			}, 0);
		}
	};

	// mode = sinaSax.getCookie("NPIC") !== '1'?true:false;//标志有图还是无图模
	mode = true;
	//20170525，简化函数
	__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].bind('proxy', function (dom, data) {
		//信息流广告加载成功的回调
		adHide(dom);

		feedPush.block(dom, data);
		//渲染模板
		choiceTempInsert(dom, data);
		//发送曝光
		_sendExpose(dom, data);
		//图片懒加载
		window.lazyLoad && lazyLoad.currentLazy();
	});

	//20170525，新增接入天乙事件异步处理事件
	//天乙数据为逐条插入，未批量化
	//20170905，强插例子，sinaSax.callback('proxyty', ['j_card_intenews', window.testAD, function(){}, 'insert', 12, 0]);
	__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].bind('proxyty', function (cardID, data, cbDom, gesture, addList, upPos, tyList) {
		//信息流广告加载成功的回调


		var dom = document.createElement('div');
		var cardPos = data['pos'];
		var isInsertOK = false;
		dom.id = __WEBPACK_IMPORTED_MODULE_2__shared_newIdeaAd_js__["a" /* default */].createId();

		if (mode === false) {
			var f_no_longpic = $('.f_no_longpic'); //长标题
			if (((typeof f_no_longpic === 'undefined' ? 'undefined' : _typeof(f_no_longpic)) != undefined || f_no_longpic != null) && f_no_longpic.length > 0) {
				isLongTitle = true; //页面有长标题，广告加下划线
			}
		}

		//20170908,数据源新增ty长度字段
		data.tysize = addList;
		data.allty = tyList;
		data.gesture = gesture;
		//20170904,测试屏蔽日志
		if (window.location.href.match(/isPbLog/ig)) {
			__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].sendErrLog(data);
			return;
		}
		//20170831，补全来源字段
		data.adSource = typeof data.adSource != 'undefined' && !!data.adSource ? data.adSource : "";
		//20170830，添加模拟数据
		if (document.location.href.match(/iad/ig) && !window.iADFlag && !!data.img) {
			window.iADFlag = true;
			data.templateid = '53';
		}
		//20171027，添加模拟数据
		// debugger
		// debugger
		if (document.location.href.match(/iad40/ig) && !window.iADFlag40) {
			data.images = [{
				u: 'https://d7.sinaimg.cn/pfpghc2/201709/15/bf910282e0224aff990fb1127b4e3251.jpg'
			}, {
				u: 'https://k.sinaimg.cn/n/sinacn/20170914/5801-fykusez0626009.jpg/w200h134f1t10l50q90c55.jpg'
			}, {
				u: 'https://k.sinaimg.cn/n/sinacn/20170914/5801-fykusez0626009.jpg/w200h134f1t10l50q90c55.jpg'
			}];
			window.iADFlag40 = true;
			data.templateid = '40';
		}
		if (document.location.href.match(/iad43/ig) && !window.iADFlag43) {
			window.iADFlag43 = true;
			data.templateid = '43';
		}
		if (document.location.href.match(/iad51/ig) && !window.iADFlag51) {
			window.iADFlag51 = true;
			data.templateid = '51';
			data = window.tmpIdea.t51;
		}
		if (document.location.href.match(/iad52/ig) && !window.iADFlag52) {
			window.iADFlag52 = true;
			data.templateid = '52';
			data = window.tmpIdea.t52;
		}

		if (window.location.href.match(/isImgErrLog/ig) && !!data['img'] && !!data['img']['u']) {
			data['img']['u'] += '1';
		}

		choiceTempInsert(dom, data);
		// _sendExpose(dom, data);

		if (gesture === "up" || gesture === "insert") {
			//upPos:上拉刷新广告插入位置暂时前端写死,以后会修改。
			//carPos取值为数据中传过来的位置，若无，则直接使用upPos值
			//cardPos = data.pos || upPos;
			// debugger
			if (gesture === "up") {
				cardPos = upPos == 7 ? 2 : 9;
			} else {
				try {
					//0-表示插入上面，1-表示插入下面
					cardPos = parseInt(data.insertpos) == 1 ? 1 : 0;
				} catch (e) {
					console.log("insertPos no return");
					cardPos = 2;
				}
			}
			isInsertOK = feedPush.asyncDataHandlePullUp(dom, cardID, cardPos, addList, upPos);
		} else if (gesture === "down" || gesture === undefined || gesture === "undefined") {
			isInsertOK = feedPush.asyncDataHandleByTY(dom, cardID, cardPos, addList);
		}

		if (isInsertOK) {
			var creativeAd = iscreativeAd();
			var _templateid = data['templateid'] + '';
			switch (_templateid) {
				case '42':
					__WEBPACK_IMPORTED_MODULE_1__shared_utils__["a" /* default */].trigger('loadedVideo');
					break;
				case '51':
				case '52':
				case '53':
					if (!creativeAd && (_templateid == 51 || _templateid == 52)) {
						return;
					};
					console.log('idea Ad\'s id ===== ' + dom.id);
					try {
						__WEBPACK_IMPORTED_MODULE_2__shared_newIdeaAd_js__["a" /* default */].goWork({
							data: data,
							ele: dom.id
						});
					} catch (e) {
						console.log(e.message);
					}
					return;
				default:
					break;
			}
			//20170831，发送可视曝光，需要去掉创意广告这部分
			_sendExpose(dom, data);
			//添加位置监听
			feedPush.block(dom, data);
			__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].sendPv(data, undefined); //0是wap或者native
			if (!!dom.children[0]) {
				cbDom(dom.children[0]);
			} else {
				cbDom(dom);
			}
			//20170831，新增，添加广告手势，双指双击，查看广告数据
			new __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_touch__["a" /* default */](dom, { finger: 3, number: 3, timer: 300 }, function (dom) {
				createDialog(JSON.stringify(data));
			});
			// window.lazyLoad && lazyLoad.currentLazy();
			window._lazyLoad();
		} else {
			//20170904，发送pb字段
			__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].sendErrLog(data);
		}
	});

	function isLeftArt() {
		if (SM && SM.ABT && SM.ABT.ALL && SM.ABT.ALL.ltxt && SM.ABT.ALL.ltxt == 1) {
			return true;
		}
		if (location.href.indexOf("leftArt=1") != -1) {
			return true;
		}
		return false;
	};

	function iscreativeAd() {
		if (SM && SM.ABT && SM.ABT.FEED && SM.ABT.FEED.chuangyiguanggao && SM.ABT.FEED.chuangyiguanggao == 1) {
			return true;
		}
		if (location.href.indexOf("creativeAd=1") != -1) {
			return true;
		} else {
			return false;
		}
		return false;
	};

	//20170510，选择模板，并做插入操作
	//普通广告及天乙广告插入，均使用此方法
	function choiceTempInsert(dom, data) {
		var leftArt = isLeftArt();
		if (mode) {
			switch (parseInt(data['templateid'])) {
				case 31:
					if (leftArt) {
						proxy_column_feed.temp47(dom, data);
					} else {
						proxy_column_feed.temp31(dom, data);
					}
					break;
				case 33:
					proxy_column_feed.temp33(dom, data);
					break;
				case 35:
					proxy_column_feed.temp35(dom, data);
					break;
				case 36:
					proxy_column_feed.temp36(dom, data);
					break;
				case 37:
					proxy_column_feed.temp37(dom, data);
					break;
				case 38:
					proxy_column_feed.temp38(dom, data);
					break;
				case 40:
					proxy_column_feed.temp40(dom, data);
					break;
				case 42:
					proxy_column_feed.temp42(dom, data);
					break;
				case 43:
					if (leftArt) {
						proxy_column_feed.temp46(dom, data);
					} else {
						proxy_column_feed.temp43(dom, data);
					}
					break;
				case 44:
					proxy_column_feed.temp44(dom, data);
					break;
				default:
					// proxy_column_feed.newIdeaAd(dom,data);
					break;
			}
		} else {
			proxy_column_feed.noPic(dom, data);
		}

		if (dom.getAttribute('data-pos')) {
			feedPush.dataCheckPos(dom);
		}
		if (dom.getAttribute('data-index')) {
			feedPush.dataCheck(dom);
		}
		if (dom.getAttribute('data-saxpos')) {
			//等广告模板统一，即可不用再作判断
			feedPush.asyncDataHandle(dom);
		}
		//insert feed ad
		switch (dom.getAttribute('data-id')) {
			case 'PDPS000000060104':
				//sports
				_execInsertAction({
					selector: '#j_card_sports .s_card_it',
					dom: dom,
					pos: 'last'
				});
				break;
			case 'PDPS000000057781':
				//ent
				_execInsertAction({
					selector: '#j_card_ent .s_card_it',
					dom: dom,
					pos: 'last'
				});
				break;
			case 'PDPS000000059949':
				//finance
				_execInsertAction({
					selector: '#j_card_finance .s_card_it',
					dom: dom,
					pos: 'last'
				});
				break;
			case 'PDPS000000059950':
				//tech
				_execInsertAction({
					selector: '#j_card_tech .s_card_it',
					dom: dom,
					pos: 'last'
				});
				break;
			case 'PDPS000000057782':
				//mil
				_execInsertAction({
					selector: '#j_card_mil .s_card_it',
					dom: dom,
					pos: 'last'
				});
				break;
			case 'PDPS000000057783':
				//blog
				_execInsertAction({
					selector: '#j_card_blog .s_card_it',
					dom: dom,
					pos: 'last'
				});
				break;
			default:
				break;
		}
	}

	//20170525.修改card外广告移入card内部
	function _execInsertAction(_info) {
		//info = {selector,dom,pos}
		// debugger
		if (!_info.selector || !_info.dom) {
			return;
		}
		var _$container = document.querySelector(_info.selector),
		    _children = null,
		    _pos = parseInt(_info.pos);

		if (_$container) {
			_children = _$container.children;
			_pos = _pos && typeof _pos === 'number' ? _pos : _children.length - 1;
			_$container.insertBefore(_info.dom, _children[_pos]);
		}
	}

	//20170526，发送曝光函数
	function _sendExpose(dom, data) {
		var pvContianer = 'sax_pv_count';
		newExposure && newExposure.pushListeningEle([dom], function () {
			console.log("发送dom: " + data['pdps']);
			if (data['vision'] != undefined && data['vision'].length != 0) {

				var wrap = document.getElementById(pvContianer) || _createElement({ tag: 'div', attr: { id: pvContianer } });

				for (var i = 0; i < data['vision'].length; i++) {
					var img = new Image();
					img.src = data['vision'][i];
					if (wrap) {
						wrap.appendChild(img);
					} else {
						document.body.appendChild(img);
					}
					console.log("发送dom: " + [i] + data['vision'][i]);
				}
			} else {
				console.log("这个pdps:" + data['pdps'] + "没有vision字段或者为空");
			}
		});
	}

	function _createElement(info) {
		if (!info) {
			return;
		}
		//info = {tag:'div',attr:{id:'sax_pv_count'}}
		var _$box = document.createElement(info.tag);
		for (var o in info.attr) {
			_$box.setAttribute(o, info.attr[o]);
		}
		document.body.appendChild(_$box);
		return _$box;
	}

	// sinaSax.bind('nullData',function(dom) {
	// 	if(dom.getAttribute('data-id') == sina_tj_lmt_pdps){
	// 		sinaSax.callback('lmtSaxFinish');
	// 	}
	// });
	var hideTjImg = function hideTjImg(dom) {
		setTimeout(function () {
			dom.querySelector('.j_adImgUp').style.height = 0;
			dom.querySelector('.j_adCloseBtn').style.WebkitTransform = 'rotate(135deg)';
			dom.querySelector('.j_adCloseBtn').style.transform = 'rotate(135deg)';
		}, 5000);
	};
	window.mediaFlag = false;
	var topTjCallback = function topTjCallback(dom) {
		var topTjStorage = storage.get('topTjhome'),
		    now = new Date(),
		    media = now.getFullYear() + '-' + now.getMonth() + '-' + now.getDate(),
		    imgHeight,
		    begin = 0,
		    imgBox = dom.querySelector('.j_adImgUp'),
		    img = new Image(),
		    clientWidth = document.documentElement.clientWidth;
		if (media !== topTjStorage) {
			mediaFlag = true;
		}
		img.onload = function () {

			imgHeight = clientWidth / 320 * 180;
			if (media !== topTjStorage) {

				mediaFlag = true;

				storage.set('topTjhome', media);
				feedPush.topAnimation(img, begin, imgBox);
			} else {
				__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].callback('qpSaxFin');
			}
		};
		img.src = dom.querySelector('.j_adImgUp').getAttribute('data-img');
		dom.querySelector('.j_adCloseBtn').style.WebkitTransform = 'rotate(135deg)';
		dom.querySelector('.j_adCloseBtn').style.transform = 'rotate(135deg)';
		dom.querySelector('.j_adCloseBtn').addEventListener('click', function () {
			if (parseInt(imgBox.style.height)) {
				this.style.WebkitTransform = 'rotate(135deg)';
				this.style.transform = 'rotate(135deg)';
				imgBox.style.height = 0;
			} else {
				this.style.WebkitTransform = 'rotate(-45deg)';
				this.style.transform = 'rotate(-45deg)';
				imgBox.style.height = imgHeight + 'px';
			}
		}, false);
		dom.querySelector('.j_adCloseBtn').addEventListener('touchEnd', function () {
			if (parseInt(imgBox.style.height)) {
				this.style.WebkitTransform = 'rotate(135deg)';
				this.style.transform = 'rotate(135deg)';
				imgBox.style.height = 0;
			} else {
				this.style.WebkitTransform = 'rotate(-45deg)';
				this.style.transform = 'rotate(-45deg)';
				imgBox.style.height = imgHeight + 'px';
			}
		}, false);
	};
	var bottomTjCallback = function bottomTjCallback(dom) {
		// debugger
		var imgHeight,
		    begin = 0,
		    clearBtn = dom.querySelector('.j_adClose'),
		    imgBox = dom.querySelector('.j_lmtimage'),
		    img = new Image(),
		    now = new Date(),
		    bottomTjStorage = storage.get('bottomTjhome'),
		    media = now.getFullYear() + '-' + now.getMonth() + '-' + now.getDate(),
		    clientWidth = document.documentElement.clientWidth;
		if (media !== bottomTjStorage) {
			img.onload = function () {
				imgHeight = img.height;
				if (mediaFlag) {
					setTimeout(function () {
						feedPush.bottomAnimation(img, begin, imgBox);
					}, 7000);
				} else {
					feedPush.bottomAnimation(img, begin, imgBox);
				}
			};

			img.src = dom.querySelector('.j_lmtimage').getAttribute('data-img');
			dom.querySelector('.j_adClose').addEventListener('click', function (ev) {
				ev.preventDefault();
				dom.querySelector('.j_lmtimage').parentNode.removeChild(dom.querySelector('.j_lmtimage'));
			}, false);
			storage.set('bottomTjhome', media);
		} else {
			__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].callback('lmtSaxFinish');
		}
	};
	var sina_tj_qp = document.getElementsByClassName('sina_tj_qp')[0],
	    sina_tj_lmt = document.getElementsByClassName('sina_tj_lmt')[0],
	    sina_tj_jdt,
	    sina_tj_qp_pdps,
	    sina_tj_lmt_pdps,
	    sina_tj_jdt_pdps = [];
	if (sina_tj_qp) {
		sina_tj_qp_pdps = sina_tj_qp.getAttribute('data-id');
	}
	if (sina_tj_lmt) {
		sina_tj_lmt_pdps = sina_tj_lmt.getAttribute('data-id');
	}
	// if (sina_tj_jdt.length > 0) {
	// 	for (var i = 0; i < sina_tj_jdt.length; i++) {
	// 		sina_tj_jdt_pdps[i] = sina_tj_jdt[i].getAttribute('data-id');
	// 	}
	// }
	__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].bind("insertSucc", function (pdps) {
		adHide(pdps);
		switch (pdps.getAttribute('data-id')) {
			case sina_tj_qp_pdps:
				topTjCallback(pdps);
				break;
			case sina_tj_lmt_pdps:
				bottomTjCallback(pdps);
				break;
			default:
				break;
		}
		// debugger
		for (var i = 0; i < sina_tj_jdt_pdps.length; i++) {
			if (sina_tj_jdt_pdps[i] == pdps.getAttribute('data-id')) {
				// var mySwiper = win.sinaCnHome.misc.swiper;
				var mySwiper = _slideM;
				if (mySwiper) {
					//window.xwipe.appendItem(pdps,pdps.getAttribute('data-pos')-1);
					mySwiper.afterSlide(pdps, pdps.getAttribute('data-pos') - 1, true);
					pdps.classList.remove('hide');
				}
			}
		}
	});

	__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].bind("error", function (e) {
		//console.log(e, "E")
	});
	var storage = {
		set: function set(key, value) {
			localStorage.setItem(key, JSON.stringify(value));
		},
		get: function get(key) {
			return JSON.parse(localStorage.getItem(key));
		}
	};
	function gifListener() {
		var gifWrap = document.getElementById("j_gif").children;
		if (typeof gifWrap !== "undefined" && gifWrap.length !== 0) {
			for (var i = 0; i < gifWrap.length; i++) {
				gifWrap[i].addEventListener("click", function (e) {
					// clickPos.clkx = e.clientX;
					// clickPos.clky = e.clientY;

					var event = e.target.parentNode;
					if (event.tagName.toUpperCase() == "FIGURE") {
						event = e.target.parentNode.parentNode;
					}

					if (event.className.indexOf("Gifing") > -1) {
						clickPos.clkx = e.clientX;
						clickPos.clky = e.clientY;
						var href = event.parentNode.firstChild.getAttribute('data-href');
						// console.log(clickPos,href+"&am="+encodeURIComponent(JSON.stringify(clickPos)));
						location.href = href + "&am=" + encodeURIComponent(JSON.stringify(clickPos));
					} else {
						event.className = "i_gx3_img_box Gifing";
						var src = event.firstChild.firstChild.getAttribute("data-src-info");
						event.firstChild.firstChild.src = src;
						// e.target.parentNode.className = "f_card_pic_ad hide";
					}
				}, true);
			}
		}
	}
	function thirdPv() {
		//判断第三方检测地址是否合法
		var oDate = new Date();
		var pvData = 'http://sina.m.cn.momentad.com/x/k=2021336&p=70YKR&dx=0&rt=2&ns=__IP__&ni=__IESID__&v=__LOC__&mo=__OS__&m0=__OPENUDID__&m0a=__DUID__&m1=__ANDROIDID1__&m1a=__ANDROIDID__&m2=__IMEI__&m4=__AAID__&m5=__IDFA__&m6=__MAC1__&m6a=__MAC__&nx=__UUID__&o=';
		if (oDate.getDate() == 10 && oDate.getMonth() == 4 || oDate.getDate() <= 13 && oDate.getMonth() == 4) {
			try {
				if (pvData.indexOf(prtl) === -1) {
					console.log('第三方检测pvError: ' + pvData);
				} else {
					sendPv(pvData);
				}
			} catch (e) {
				console.log(e);
			}
		}
	}
	function sendPv(pv) {
		if (pv && !__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].isBlank(pv)) {
			var img = __WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].creatElement("img", { src: pv });
			var oDiv = document.getElementById('sax_pv_count');
			oDiv.appendChild(img);
		}
	}
	var clickPos = {};

	function sendVideoPv(videoDom) {
		var src = videoDom.parentNode.parentNode.getAttribute("data-videojc"); //新版频道首页
		src = src + "&am=" + encodeURIComponent(JSON.stringify(clickPos));
		sendPv(src);
	}
	function listenV() {
		var i = 0,
		    count = 0,
		    len = proxy_column_feed.vid.length,
		    video = document.getElementsByTagName('video');
		if (typeof video != "undefined" && video.length > 0) {
			for (; i < len; i++) {
				video[i].addEventListener("play", function () {
					sendVideoPv(this);
				});
				video[i].addEventListener("pause", function () {
					//暂停时，回到初始状态：“点击详情显示”
					this.parentNode.previousSibling.className = "m_video_img_box";
					this.parentNode.className = "m_video_img_box hide";
				});
			}
		}
	}

	function aHrefClickPos(dom, e) {
		//console.log(dom.children[0]);
		if (dom.children[0].className && dom.children[0].className.indexOf('j_href') > -1) {
			var target = e.target,
			    tar_parent = e.target.parentNode;
			if (target.nodeName === "A" && target.getAttribute("data-href")) {
				//console.log(target.getAttribute('data-href')+"&am="+encodeURIComponent(JSON.stringify(clickPos)));
				location.href = target.getAttribute('data-href') + "&am=" + encodeURIComponent(JSON.stringify(clickPos));
				return;
			} else if (tar_parent && tar_parent.nodeName === "A" && tar_parent.getAttribute("data-href")) {
				var tar = dom.children[0].querySelector('.j_href') || dom.querySelector('.j_href');
				//console.log(tar.getAttribute('data-href')+"&am="+encodeURIComponent(JSON.stringify(clickPos)));
				location.href = tar.getAttribute('data-href') + "&am=" + encodeURIComponent(JSON.stringify(clickPos));
			} else {}
		} else {
			if (dom.getAttribute('data-href')) {
				var href = dom.getAttribute('data-href') + "&am=" + encodeURIComponent(JSON.stringify(clickPos));
				dom.setAttribute('href', href);
			} else {
				var _tar = dom.querySelector('a');
				var href = _tar && _tar.getAttribute('data-href') + "&am=" + encodeURIComponent(JSON.stringify(clickPos));
				// var href = dom.children[0].getAttribute('data-href')+"&am="+encodeURIComponent(JSON.stringify(clickPos));
				dom.children[0].setAttribute('href', href);
			}

			if (!!href) {
				//console.log(href);
				location.href = href;
				e.preventDefault();
				e.stopPropagation();
			}
		}
	}

	__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].bind('appendSaxJsBox', function () {
		__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].init();
	});

	// S.on('insertMoreLoadSax',function(cardType){//插入相应位置的广告
	//        feedPush.insertCardPush(cardType);
	//    });
	__WEBPACK_IMPORTED_MODULE_1__shared_utils__["a" /* default */].on('loadedVideo', function () {
		setTimeout(listenV, 1000);
		//listenV();
	});
	__WEBPACK_IMPORTED_MODULE_1__shared_utils__["a" /* default */].on('ajaxMoreLoadSax', function (cardType, page) {
		//请求相应位置的广告
		feedPush.init(cardType, page);
	});
	// S.on('LikeFirstScreen',function(){
	//     feedPush.init("intell");
	// });
	__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].bind('IntellFirstLoad', function () {
		// debugger
		feedPush.init("intell");
	});

	// sinaSax.bind('upMoreLoadSax',function(cardName){
	// 	feedPush.asyncPush(cardName);
	// });

	var _slideM = null;
	__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].bind('swiperSlide', function (slideM) {
		//焦点图初始化
		var arr = [];
		var _dom = document.querySelector("#j_sax_slide");
		arr.push('<div sax-type="slide" class=" j_sax sina_tj_jdt swiper-slide" data-sudaclick="swipe_pics" data-id="PDPS000000049629" data-pos="2" ></div>');
		arr.push('<div sax-type="slide" class=" j_sax sina_tj_jdt swiper-slide" data-sudaclick="swipe_pics" data-id="PDPS000000054671" data-pos="4" ></div>');
		arr.push('<div sax-type="slide" class=" j_sax sina_tj_jdt swiper-slide" data-sudaclick="swipe_pics" data-id="PDPS000000055622" data-pos="6" ></div>');
		arr.push('<div sax-type="slide" class=" j_sax sina_tj_jdt swiper-slide" data-sudaclick="swipe_pics" data-id="PDPS000000054672" data-pos="8" ></div>');

		_dom.innerHTML = arr.join('');
		sina_tj_jdt = document.getElementsByClassName('sina_tj_jdt');
		if (sina_tj_jdt.length > 0) {
			for (var i = 0; i < sina_tj_jdt.length; i++) {
				sina_tj_jdt_pdps[i] = sina_tj_jdt[i].getAttribute('data-id');
			}
		}
		//console.log(slideM);
		slideM && (_slideM = slideM);
		__WEBPACK_IMPORTED_MODULE_0__shared_sina_sax_js__["a" /* default */].init();
	});
})(window, document);

/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__shared_adapt_js__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__shared_track_js__ = __webpack_require__(21);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__shared_template_js__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_drawrefresh__ = __webpack_require__(39);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__shared_stick_js__ = __webpack_require__(20);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__shared_tystick_js__ = __webpack_require__(66);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__shared_breaking_js__ = __webpack_require__(56);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__mfelibs_base_tools_lazyload__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__shared_mutual__ = __webpack_require__(62);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__mfelibs_base_tools_backforward__ = __webpack_require__(13);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__shared_feedmove__ = __webpack_require__(59);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__mfelibs_base_tools_swiper__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__mfelibs_base_tools_swiper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13__mfelibs_base_tools_swiper__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__shared_dynamicNav__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__shared_goodColumn__ = __webpack_require__(60);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__shared_secondFloor__ = __webpack_require__(64);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__shared_wdBigPic__ = __webpack_require__(67);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__shared_uc_feed_js__ = __webpack_require__(12);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__shared_iqiyi_feed_js__ = __webpack_require__(61);
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/*
 * @CreateTime: March 20, 2017 12:00 PM 
 * @Author: chuming
 * @Contact: chuming@staff.sina.com.cn 
 * @Last Modified By: huguang
 * @Last Modified Time: May 23, 2017 5:48 PM
 * @Description: 浪首智能版
 */




















// uc换量

var ucFeedObj = __WEBPACK_IMPORTED_MODULE_18__shared_uc_feed_js__["a" /* default */].getSmartPos();
// 爱奇艺

var iqiyiFeedObj = __WEBPACK_IMPORTED_MODULE_19__shared_iqiyi_feed_js__["a" /* default */].getSmartPos();

// 微动大图标识
var isWdbigPic = false;

var doc = document;
var win = window;
var template = __WEBPACK_IMPORTED_MODULE_3__shared_template_js__["a" /* default */].Ztemplate;
var isHTTPS = __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isHTTPS();
var creAPIDOmain = isHTTPS ? 'https://cre-dp.sina.cn' : 'http://cre.dp.sina.cn';

var sina_intellect_V = {
  loading: false,
  loadingMoreCtn: null,
  drawRefresh: null,
  config: {},
  tag: {
    '1': '新闻',
    '2': '图集',
    '3': '视频',
    '10': '视频', //秒拍
    '15': '直播',
    '14': '专题',
    '16': 'H5策划'
  },
  template: null,
  downLen: 0,
  _init: function _init() {
    var self = this;

    self.isFirstPage = true;
    self.template = template;
    self._config(); //初始化配置
    self._createContainer(); //初始化容器
    self._likeFeedData('loadmore', 'up', self._upCB.bind(self)); //首次加载数据
    win.addEventListener('scroll', function () {
      self._posListener();
    }, false);
    self._refreshData(); //刷新
    // self._returnTop(); //返回顶部
    __WEBPACK_IMPORTED_MODULE_10__shared_mutual__["a" /* default */].init();
    __WEBPACK_IMPORTED_MODULE_10__shared_mutual__["a" /* default */].pageMode(1); //顶部cookie
    __WEBPACK_IMPORTED_MODULE_9__mfelibs_base_tools_lazyload__["a" /* default */].setMarginHeight(1000); //设置预加载
    //下拉刷新组件
    self.drawRefresh = new __WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_drawrefresh__["a" /* default */](document.querySelector('#j_card_tnews'), {
      //refresh 为下拉刷新时的回调函数
      refresh: function refresh(drawRefreshCtx) {
        /*j_card_tnews
            drawRefreshCtx为暴露出来的DrawRefresh的this对象
            在refresh方法里发起请求，
            请求完成后调用drawRefreshCtx.successUp()或drawRefreshCtx.errorUp()
         */
        self.config['loadmore'].action = 2;
        self._likeFeedData('loadmore', 'down', function (len) {
          drawRefreshCtx.successUp();
          //有数据则显示
          __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.add('isPullDown', __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huiduArr(), {
            default: '999',
            fn: {
              87: function _() {
                self.downLen = len;
                if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('下拉刷新优化灰度策略');
              },
              999: function _() {
                self.downLen = 0;
                if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('下拉刷新优化默认策略');
              }
            }
          });
          __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.isPullDown();

          var requestInfo = len > 0 ? '有' + len + '条内容更新' : '没有新内容啦，一会再试试！';
          setTimeout(function () {
            document.querySelector('#j_card_tnews .dr-loading').insertAdjacentHTML('beforeBegin', '<section class="refresh_info"><span class="refresh_info_txt">' + requestInfo + '</span></section>');
            setTimeout(function () {
              document.querySelector('#j_card_tnews .refresh_info').remove();
            }, 1000);
          }, 1000);
        });
      },
      downLen: 0,
      afterExcuteReturn: function afterExcuteReturn() {
        // 刷新置顶
        var isNewHead = document.querySelector('#j_navScroll');
        if (self.downLen == 0 || isNewHead) return false;
        var animateDom = document.querySelector('#j_card_tnews');
        var sNavPageHeight = animateDom.offsetTop - 1;
        animateDom.style.zIndex = "999";
        animateDom.style.webkitTransition = "all 400ms";
        animateDom.style.transition = "all 400ms";
        animateDom.style.webkitTransform = "translate3d(0px, -" + sNavPageHeight + "px, 0px)";
        animateDom.style.transform = "translate3d(0px, -" + sNavPageHeight + "px, 0px)";

        setTimeout(function () {
          animateDom.style.webkitTransition = "none";
          animateDom.style.transition = "none";
          animateDom.style.zIndex = "1";
          animateDom.style.webkitTransform = "translate3d(0px, 0px, 0px)";
          animateDom.style.transform = "translate3d(0px, 0px, 0px)";
          document.documentElement.scrollTop = document.body.scrollTop = sNavPageHeight;
        }, 600);
        self.downLen = 0;
      },
      //可选参数 加载动画颜色 默认为浪首的 #299df2
      circleColor: '#299df2',
      //背景颜色
      shadowColor: "#fff",
      //额外下拉的toggle
      // $extraToggle:[$('#j_card_tnews').next()],
      //最大下拉高度
      drawHeight: 150
    });
    // 点击刷新
    $(".j_refreshData").on("click", function () {

      var _this = $(this);
      if ($(this).find(".hd_iq_refresh").length != 0) {
        _this = $(this).find(".hd_iq_refresh");
      }
      _this.addClass("an_rotate");
      setTimeout(function () {
        _this.removeClass("an_rotate");
        $(window).scrollTop(0);
        self.autoRefresh();
      }, 1000);
    });
    // 导航滚动
    window.addEventListener("load", function () {
      self.fixHrefArgs();
      self.navScroll();
    }, false);

    document.addEventListener('DOMNodeInserted', function (e) {
      switch (e.target.tagName) {
        case undefined:
          return;
        case "A":
          var arr = [e.target];
          break;
        default:
          var arr = e.target.querySelectorAll('a');
      }
      self.fixHrefArgs(arr);
    }, false);
  },
  autoRefresh: function autoRefresh() {
    var self = this;
    self.drawRefresh.autoRefresh(function (drawRefreshCtx) {
      self.config['loadmore'].action = 2;
      self._likeFeedData('loadmore', 'down', function (len) {
        drawRefreshCtx.successUp();
        //有数据则显示
        var requestInfo = len > 0 ? '有' + len + '条内容更新' : '没有新内容啦，一会再试试！';
        setTimeout(function () {
          document.querySelector('#j_card_tnews .dr-loading').insertAdjacentHTML('beforeBegin', '<section class="refresh_info"><span class="refresh_info_txt">' + requestInfo + '</span></section>');
          setTimeout(function () {
            document.querySelector('#j_card_tnews .refresh_info').remove();
          }, 1000);
        }, 1000);
      });
    });
  },
  navScroll: function navScroll() {
    if ($("#j_headerScroll").length == 0) return false;
    var isSticky = window.getComputedStyle && window.getComputedStyle(document.querySelector("#j_headerScroll")).position;
    if (isSticky != 'sticky' && isSticky != '-webkit-sticky') {
      var headtop = $("#j_headerScroll").offset().top;
      var headDom = $("#j_headerScroll .header_bd");
      window.addEventListener('scroll', function () {
        if ($(window).scrollTop() >= headtop) {
          if (headDom.hasClass("fix")) return false;
          headDom.addClass("fix");
        } else {
          if (headDom.hasClass("fix")) {
            headDom.removeClass("fix");
          }
        }
      }, false);
    }
    this.SwiperObj = new __WEBPACK_IMPORTED_MODULE_13__mfelibs_base_tools_swiper___default.a('#j_navScroll', _defineProperty({
      wrapperClass: "sw_c2",
      slideClass: 'sw_c3',
      freeMode: true,
      slidesPerView: 6,
      paginationClickable: true
    }, 'slidesPerView', 'auto'));
  },
  _config: function _config() {
    /*action：请求的动作类型，0-首次加载，1-上推，2-下拉
     *up：记录上推的次数，第一次记1，第二次记2……
     *down：记录下拉的次数，第一次记1，第二次记2……
     */
    var self = this,
        config;
    var area_code = SM && SM.INFO.area_code || '';
    config = {
      'loadmore': {
        // 'url':  'http://10.13.3.35/api/v3/get?cateid=sina_all&cre=tianyi&mod=whf&merge=3&statics=1&ver=550&area_code='+area_code,
        'url': '' + creAPIDOmain + '/api/v3/get?cateid=sina_all&cre=tianyi&mod=whf&merge=3&statics=1&ver=550&area_code=' + area_code,
        'length': '10',
        'action': '0',
        'up': '0',
        'down': '0',
        'id': 'j_card_intenews',
        'parentid': 'j_card_tnews', //猜你喜欢隐藏时由父容器今日要闻控制
        'sudaclick': 'like_feed',
        'channel': 'like-feed'
      },
      'yaowen': {
        'id': 'j_card_intenews',
        'useReserveData': true,
        'action': '0',
        'up': '0',
        'down': '0'
      }

    };
    self.config = config;
    self.reserveDataLoaded = false;
  },
  _posListener: function _posListener() {
    var self = this;
    if (self.loading) {
      return;
    }
    var docHeight = doc.body.scrollHeight;
    var screenHeight = win.screen.height;
    var scrollTop = doc.body.scrollTop || doc.documentElement.scrollTop;
    var lastPos = 0;
    var awayFromBottom = docHeight - scrollTop - screenHeight;
    var threshold = 500;
    var cardType = '';
    var directionDown = scrollTop > lastPos ? true : false;
    lastPos = scrollTop;
    if (scrollTop > screenHeight * 1.5) {
      if (document.getElementById('j_toTop').style.display != 'block') {
        document.getElementById('j_toTop').style.display = 'block';
      }
    } else {
      document.getElementById('j_toTop').style.display = 'none';
    }

    if (!directionDown) {
      return;
    }

    if (awayFromBottom < threshold) {
      self.config['loadmore'].action = 1;
      self._likeFeedData('loadmore', 'up', self._upCB.bind(self));
    }
  },
  _createContainer: function _createContainer() {
    /*初始化时创造容器作用：
     * 增加加载更多滚动图标
     */
    var self = this;
    var load_ctns = self.template.loadingFnTem();
    var footerCtn = doc.querySelector('footer');
    footerCtn.insertAdjacentHTML('beforeBegin', load_ctns);
    self.loadingMoreCtn = doc.querySelector('#j_loading_more');

    if (!self.loadingMoreCtn) {
      return false;
    }
    return true;
  },

  /**
   * 获取智能版数据并渲染
   */
  firstDown: true,
  _likeFeedData: function _likeFeedData(type, state, cb) {
    //猜你喜欢加载更多
    /*
     *@param:type:'loadmore'
     *@param:state:up 上推 down 下拉
     */
    var self = this,
        url,
        offset = 0;
    //下拉上拉次数相加为40次，则停止
    //由于下拉刷新是先滚动再发送请求，所以要优先阻止滚动


    if (parseInt(self.config[type].up) + parseInt(self.config[type].down) > 38) {
      self.drawRefresh.abort();
    }
    if (parseInt(self.config[type].up) + parseInt(self.config[type].down) > 39) {
      // self.drawRefresh.abort()
      return;
    }
    if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) {
      console.log(self.config[type].up + "-" + state, parseInt(self.config[type].down) + "-" + state);
    }
    if (self.reserveDataLoaded) {
      return;
    }
    self.ctrlLoadingCtn(true);
    if (type == '' || typeof type == 'undefined') {
      return;
    }

    url = self.config[type].url + '&action=' + self.config[type].action + '&length=' + self.config[type].length + '&' + state + '=' + self.config[type][state];

    url += '&ad=' + __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].tyAdData({
      "channel": "-10002"
    });
    __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].jsonp(url, function (data) {
      if (!(data && data.data && data.data.length > 0 && data.status && data.status.code == 0)) {
        if (self.config[type].action == 0) {
          self.ctrlLoadingCtn(false);
          self._getReserveData('yaowen', state, cb);
          self.isFirstPage = false;
          if (data.sax) {
            self.sinaSaxSend(data.sax, 'j_card_intenews', 'down', $("#j_card_intenews a").length);
          }
        }
        __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].sendSinaLog({
          message: "天乙数据不足",
          type: "length",
          url: url
        });
        return '';
      }
      if (data.status.end == 0) {
        __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].sendSinaLog({
          message: "天乙数据重复标识end为0",
          type: "end",
          url: url
        });
      }
      var selfData = data;
      var sax = data.sax;
      var tyLength = data.data && data.data.length;

      var dataRepeat = self._dataNrepeat(data.data); //数据记录docid排重
      var dataRepeatLen = dataRepeat.length;
      var data = data.data;

      var len = data.length;

      var info = null;
      var str = '';

      if (state == 'up') {
        for (var i = 0; i < len; i++) {
          info = __WEBPACK_IMPORTED_MODULE_1__shared_adapt_js__["a" /* default */].adaptInfo(data[i], 'intellect_news');
          str += self._renderData(info, selfData);
        };
      } else if (state == 'down') {
        for (var i = len - 1; i >= 0; i--) {
          info = __WEBPACK_IMPORTED_MODULE_1__shared_adapt_js__["a" /* default */].adaptInfo(data[i], 'intellect_news');
          str += self._renderData(info, selfData);
        };
      }

      //插入节点
      var ctn = doc.createElement('div');
      ctn.innerHTML = str;
      var feeds = ctn.childNodes;
      var child = [];

      for (var j = 0; j < feeds.length; j++) {
        var _node = '';
        if (feeds[j].tagName == 'SECTION') {
          _node = feeds[j].querySelector('a');
        } else {
          _node = feeds[j];
        }
        child.push(_node);
      }
      self._removeLoadNode(); //首次加载移除加载态
      var feedlen = feeds.length;
      // debugger
      //插入节点
      if (state == 'up') {
        //手势向上
        while (feeds.length) {
          doc.getElementById(self.config[type].id).appendChild(feeds[0]);
        }
        cb && cb(feedlen);
        if (self.config[type].action == '0') {
          //首次渲染
          self.SIMASEND('_fload', self.config[type][state]);
          __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__["a" /* default */].callback("IntellFirstLoad", []);
          __WEBPACK_IMPORTED_MODULE_5__shared_stick_js__["a" /* default */].init('#j_card_intenews'); //置顶
          __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.add('secondFloorFn', __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huiduArr(), {
            default: '99999',
            fn: {
              163: function _() {
                __WEBPACK_IMPORTED_MODULE_16__shared_secondFloor__["a" /* default */].init('#j_card_intenews', 7);
                if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('二楼灰度策略');
              },
              99999: function _() {
                if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('二楼默认策略');
              }
            }
          });
          //二楼
          __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.secondFloorFn();
        } else {
          self.SIMASEND('_up', self.config[type][state]);
          __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__["a" /* default */].callback("upMoreLoadSax", [self.config[type].id]);
        }
      } else if (state == 'down') {
        //手势向下
        if (self.firstDown && feedlen != 0 && document.querySelector("#j_smartSlide")) {
          // 焦点图下沉
          self.firstDown = false;
          var slideStr = $("#j_smartSlide");
          $("#j_card_intenews").prepend(slideStr);
        }
        if (feedlen != 0) {
          //阅读记录 
          self.readRecordBtn();
        }
        while (feeds.length) {
          doc.getElementById(self.config[type].id).insertBefore(feeds[0], doc.getElementById(self.config[type].id).firstChild);
        }
        cb && cb(feedlen);

        self.SIMASEND('_down', self.config[type][state]);
        __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__["a" /* default */].callback("downMoreLoadSax", [self.config[type].id]);
      }
      // UC换量
      if (ucFeedObj && Array.isArray(ucFeedObj) && ucFeedObj.length != 0) {
        var onloadDataLen = $("#j_card_intenews").children("a").length - 1;
        for (var j = 0; j < ucFeedObj.length; j++) {
          if (onloadDataLen >= ucFeedObj[j].num && ucFeedObj[j].isload) {
            ucFeedObj[j].isload = false;
            __WEBPACK_IMPORTED_MODULE_18__shared_uc_feed_js__["a" /* default */].init("j_card_intenews", ucFeedObj[j].num);
          }
        }
      }

      // iqiyi换量
      if (iqiyiFeedObj && Array.isArray(iqiyiFeedObj) && iqiyiFeedObj.length != 0) {
        var onloadDataLen = $("#j_card_intenews").children("a").length - 1;
        for (var j = 0; j < iqiyiFeedObj.length; j++) {
          if (onloadDataLen >= iqiyiFeedObj[j].num && iqiyiFeedObj[j].isload) {
            iqiyiFeedObj[j].isload = false;
            __WEBPACK_IMPORTED_MODULE_19__shared_iqiyi_feed_js__["a" /* default */].init("j_card_intenews", iqiyiFeedObj[j].num);
          }
        }
      }

      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.add('wdBigPicFn', __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huiduArr(), {
        default: '99999',
        fn: {
          161: function _() {
            __WEBPACK_IMPORTED_MODULE_17__shared_wdBigPic__["a" /* default */].init();
            if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('微动大图灰度策略');
          },
          99999: function _() {
            if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('微动大图默认策略');
          }
        }
      });
      // 微动大图
      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.wdBigPicFn();

      __WEBPACK_IMPORTED_MODULE_7__shared_breaking_js__["a" /* default */].init(state); //突发大事件

      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.add('goodColumnDom', __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huiduArr(), {
        default: '99999',
        fn: {
          119: function _() {
            __WEBPACK_IMPORTED_MODULE_15__shared_goodColumn__["a" /* default */].init();
            if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('精品栏目灰度策略');
          },
          99999: function _() {
            if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('精品栏目默认策略');
          }
        }
      });
      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.goodColumnDom();

      var relen = parseInt(tyLength) - parseInt(dataRepeatLen);
      var ustat = __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].cookie.get("ustat") || null;

      var uid = null;
      if (checkLogin()) {
        uid = window.userInfo && window.userInfo.uid || null;
      }

      if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log(uid + "-uid", ustat + "-ustat", tyLength + "-总数据", relen + "-被排数", feedlen + "-有效数据");
      if (sax) {
        if (self.isFirstPage) {
          self.sinaSaxSend(sax, 'j_card_intenews', 'down', feedlen, tyLength + "/" + relen + "/" + uid + "/" + ustat);
        } else {
          self.sinaSaxSend(sax, 'j_card_intenews', state, feedlen, tyLength + "/" + relen + "/" + uid + "/" + ustat);
        }
      }

      newExposure.pushListeningEle(child, function (feeds) {
        // console.log(feeds)
        __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemExpose(feeds, false, url);
      }, false);
      __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemClick(Array.prototype.slice.call(child), false, url);
      self.config[type][state]++;

      __WEBPACK_IMPORTED_MODULE_12__shared_feedmove__["a" /* default */].add($('#j_card_intenews a'), self._feedMoveCallback.bind(self), '&feed_insert=0');

      __WEBPACK_IMPORTED_MODULE_9__mfelibs_base_tools_lazyload__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_9__mfelibs_base_tools_lazyload__["a" /* default */].currentLazy();

      //判断是否是上拉刷新且无更新数据
      if (!(state == 'up' && len == 0)) {
        self.ctrlLoadingCtn(false);
      }

      if (self.isFirstPage) {
        self.isFirstPage = false;
      }
    }, 'intellect_news', function () {
      if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('接口错误');
      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].sendSinaLog({
        message: "天乙接口网络超时",
        type: "timeout",
        url: url
      });
      if (state == 'up') {
        if (self.isFirstPage) {
          self.ctrlLoadingCtn(false);
          var type = 'yaowen';
          self._getReserveData(type, state, cb);
          self.isFirstPage = false;
        } else {
          self.showUpdateInfo(0, 'up');
        }
      } else if (state == 'down') {
        self.ctrlLoadingCtn(false);
        cb && cb();
      }
    });
  },
  readRecordBtn: function readRecordBtn() {
    var self = this;
    $("#j_reloadDataBtn").remove();
    $("#j_card_intenews").prepend(template.reloadDataBtn());
    newExposure.pushListeningEle([$("#j_reloadDataBtn").get(0)], function (arr) {
      if (window.SIMA) {
        var clickInfo = {
          'type': 'reloadDataBtn', //曝光的类型
          'name': 'reloadDataBtnExp', //当前点击的aid关键字 
          'title': '阅读记录曝光', //中文说明
          'index': 0 //索引  如果是单个为0即可
        };
        if (window.SIMA.suda_count) {
          window.SIMA.suda_count(clickInfo);
        }
      };
    });
    if (this.isClickReloadData) {
      $("body").on("click", "#j_reloadDataBtn", function () {
        setTimeout(function () {
          __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.add('readRecordHd', __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huiduArr(), {
            default: '999',
            fn: {
              87: function _() {
                var animateDom = document.querySelector('#j_card_tnews');
                var sNavPageHeight = animateDom.offsetTop - 1;
                $(window).scrollTop(sNavPageHeight);
                if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('阅读下拉刷新置顶优化灰度策略');
              },
              999: function _() {
                $(window).scrollTop(0);
                if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('阅读下拉刷新置顶优化默认策略');
              }
            }
          });
          __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.readRecordHd();
          self.autoRefresh();
        }, 300);
      });
      this.isClickReloadData = false;
    }
  },
  isClickReloadData: true,
  /**
   * 抽离的模版渲染逻辑
   */
  _renderData: function _renderData(info, selfData) {
    var self = this;
    // if (self._isOutsidePicUrl(info.thumb)) {
    //   return '';
    // }
    if (info.card && info.card.length != 0) {
      return __WEBPACK_IMPORTED_MODULE_6__shared_tystick_js__["a" /* default */].init(info, selfData);
    }
    info.tag = '', info.tag_word = '';

    // if (info.type && info.type != '' && !info.card && info.card.length == 0) {
    if (info.type && info.type != '') {
      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.add('isThreePics', __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huiduArr(), {
        default: '999',
        fn: {
          73: function _() {
            if (parseInt(info.is_3pics)) info.type = 2;
            if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) {
              console.log('天乙3图标识灰度策略');
            }
          },
          999: function _() {
            if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) {
              console.log('天乙3图标识默认策略');
            }
          }
        }
      });
      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.isThreePics();;
      var dataObj = {
        info: info
      };
      // 大图
      if (info.bthumb) {
        return self.template.bigPicFnTem(dataObj);
      }

      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.add('wdBigPicTemFn', __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huiduArr(), {
        default: '99999',
        fn: {
          161: function _() {
            isWdbigPic = true;

            if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('微动大图模板灰度策略');
          },
          99999: function _() {
            if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) console.log('微动大图模板默认策略');
          }
        }
      });
      // 微动大图
      __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].huidu.wdBigPicTemFn();
      if (isWdbigPic) {
        if (info.reason == 1013 || info.reason == '1013') {
          return self.template.wdBigPicFnTem(dataObj);
        }
      }
      switch (info.type) {
        case 2:
          //三图图集
          info.tag = self.template.tagFnTem(self.tag[2]);
          if (info.imgs[2] && info.imgNum && info.imgNum >= 3 || info.thumbStyle == 3) {
            return self.template.threePicFnTem(dataObj);
          }
          return self.template.picTxtFnTem(dataObj);
          break;
        case 14:
          //专题
          info.tag = self.template.tagFnTem(self.tag[14]);
          return self.template.picTxtFnTem(dataObj);
          break;
        case 3:
        case 10:
          //视频
          return self.template.bigVideoPicFnTem(dataObj);
          break;
        default:
          return self.template.picTxtFnTem(dataObj);
          break;
      }
    } else {
      return self.template.picTxtFnTem(dataObj);
    }
  },
  /**
   * 强插的回调函数，插入新闻
   * 
   * @param {Array<>} datas 长度为1的数组，第一位是需要插入的数据
   * @returns 
   */
  _feedMoveCallback: function _feedMoveCallback(datas, sax) {
    var self = this;
    // var datas = self._dataNrepeat(datas);
    if (datas && datas.length > 0) {
      var info = datas[0];
      var str = '';
      info = __WEBPACK_IMPORTED_MODULE_1__shared_adapt_js__["a" /* default */].adaptInfo(info, 'intellect_news');
      str = self._renderData(info);
      var dom = doc.createElement('div');
      dom.innerHTML = str;
      var targetEle = $(dom.children[0]);
      targetEle.children('section').addClass('feedmove');
      __WEBPACK_IMPORTED_MODULE_12__shared_feedmove__["a" /* default */].add(targetEle, self._feedMoveCallback.bind(self), '&feed_insert=2');
      if (__WEBPACK_IMPORTED_MODULE_11__mfelibs_base_tools_backforward__["a" /* default */].shouldCompensatePV()) {
        __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemExpose(targetEle, { "mod": "whf" });
        SUDA.log('', 'twice,compensatepv', '');
      } else {
        __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemExpose(targetEle, { "mod": "whf" });
      }
      __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemClick(targetEle, { "mod": "whf" });
      targetEle.insertAfter(__WEBPACK_IMPORTED_MODULE_12__shared_feedmove__["a" /* default */].target);
      self.resetAD(targetEle);
      __WEBPACK_IMPORTED_MODULE_9__mfelibs_base_tools_lazyload__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_9__mfelibs_base_tools_lazyload__["a" /* default */].currentLazy();
      console.log('feedmove 成功插入 ............');
    } else {
      console.log('feedmove 数据不足......');
    }

    if (sax && sax.length > 0) {
      var feedlen = $(__WEBPACK_IMPORTED_MODULE_12__shared_feedmove__["a" /* default */].target).parent().children().length - $(__WEBPACK_IMPORTED_MODULE_12__shared_feedmove__["a" /* default */].target).index();

      for (var i = 0; i < sax.length; i++) {
        __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__["a" /* default */].callback("proxyty", ['j_card_intenews', sax[i], function (dom) {
          // 进行广告曝光
          // if(backforward.shouldCompensatePV()){
          // newExposure.pushListeningEle([dom], (function (dom) {
          __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemExpose([dom]);
          // }), false);
          // }else{
          //   track.ElemExpose(dom);
          // }

          __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemClick(Array.prototype.slice.call([dom]));
        }, 'insert', feedlen, 0]);
      }

      // self.sinaSaxSend(sax, 'j_card_intenews', 'insert', feedlen);
      console.log('sax 成功插入 ............长度', feedlen);
    } else {
      console.log('sax 数据不足 ............');
    }
  },
  resetAD: function resetAD(targetEle) {
    var index = targetEle.index();
    var feeds = $('#j_card_intenews').children();
    for (var j = 1; j < feeds.length; j++) {
      if (feeds.eq(j).html().indexOf('广告') != -1) {
        if (j > index) {
          for (var i = index; i < feeds.length; i++) {
            if (feeds.eq(i).html().indexOf('广告') != -1) {
              feeds.eq(i).insertBefore(feeds.eq(i).prev());
              return false;
            }
          }
        }
        return false;
      }
    }
  },
  /**
   * 获取打底数据
   * 
   * @param {string} type 数据类型，目前为yaowen
   * @param {string} state up或者down
   * @param {function} cb 回调函数
   */
  _getReserveData: function _getReserveData(type, state, cb) {

    var self = this;
    if (type == 'yaowen' && !self.config[type].useReserveData) {
      self.config[type].useReserveData = true;
    }
    // self._likeFeedData(type, state, cb);
    var data = self.getYaowenObj();
    data = data.data;

    var len = data.length;
    var info = null;
    var str = '';

    for (var i = 0; i < len; i++) {
      info = __WEBPACK_IMPORTED_MODULE_1__shared_adapt_js__["a" /* default */].adaptInfo(data[i], 'intellect_news');
      // info = data[i];
      info.tag = '', info.tag_word = '';
      var dataObj = {
        info: info
      };
      str += self.template.picTxtFnTem(dataObj);
    };
    //插入节点
    var ctn = doc.createElement('div');
    ctn.innerHTML = str;
    var feeds = ctn.childNodes;
    var child = [];

    for (var j = 0; j < feeds.length; j++) {
      var _node = '';
      if (feeds[j].tagName == 'SECTION') {
        _node = feeds[j].querySelector('a');
      } else {
        _node = feeds[j];
      }
      child.push(_node);
    }
    self._removeLoadNode(); //首次加载移除加载态
    //插入节点
    //手势向上
    while (feeds.length) {
      doc.getElementById(self.config[type].id).appendChild(feeds[0]);
    }
    // debugger
    //首次渲染
    self.SIMASEND('_fload', self.config[type][state]);
    __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__["a" /* default */].callback("IntellFirstLoad", []);
    __WEBPACK_IMPORTED_MODULE_5__shared_stick_js__["a" /* default */].init('#j_card_intenews'); //置顶


    newExposure.pushListeningEle(child, function (feeds) {
      // console.log(feeds)
      __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemExpose(feeds);
    }, false);
    __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemClick(Array.prototype.slice.call(child));
    self.config[type][state]++;

    __WEBPACK_IMPORTED_MODULE_9__mfelibs_base_tools_lazyload__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_9__mfelibs_base_tools_lazyload__["a" /* default */].currentLazy();
    self.ctrlLoadingCtn(false);

    self.reserveDataLoaded = true;
    self.drawRefresh.abort();
  },
  _refreshData: function _refreshData() {
    // document.getElementById('j_toTop').className = document.getElementById('j_toTop').className.replace(new RegExp('(\\s|^)show(\\s|$)'),' ');
    // document.getElementById('j_toTop').className = document.getElementById('j_toTop').className.replace(new RegExp('(\\s|^)show(\\s|$)'),' ');
    var self = this;
    var refresh = document.getElementById('j_toTop');
    if (refresh) {
      refresh.addEventListener('click', function () {

        var element = document.getElementById('j_toTop').querySelector('span');
        element.className += ' active';

        setTimeout(function () {
          element.className = element.className.replace(new RegExp('(\\s|^)active(\\s|$)'), ' ');
          win.scrollTo(0, 0);
          location.reload();
        }, 1000);
        // self._likeFeedData('loadmore','down',function(len){

        //     if(len){
        //         //有数据则显示
        //         document.querySelector('#j_card_tnews .dr-loading').insertAdjacentHTML('beforeBegin', '<a class="fl_f_message ">有'+len+'条内容更新</a>');
        //         setTimeout(function(){

        //             element.className = element.className.replace(new RegExp('(\\s|^)active(\\s|$)'),' ');

        //            document.querySelector('#j_card_tnews .fl_f_message').remove();
        //        },1500)
        //     }

        // });
      }, false);
    }
  },
  // _returnTop: function() {
  //   var _top = document.getElementById('j_toTop');
  //   if (_top) {
  //     _top.addEventListener('click', function() {
  //       window.scrollTo(0, 0)
  //     })
  //   }
  // },
  data_id: [],
  _dataNrepeat: function _dataNrepeat(data) {
    var self = this;
    var arr = [];
    if (data.length == 0) return;
    for (var i = 0; i < data.length; i++) {
      if (data[i].docid) {
        if (self.data_id.indexOf(data[i].docid) == -1) {
          self.data_id.push(data[i].docid);
          arr.push(data[i]);
        } else {
          if (__WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].isDebug()) {
            console.log(data[i].docid, "重复的docid");
          }
        }
      }
    }
    // console.log(self.data_id);
    return arr;
  },
  _removeLoadNode: function _removeLoadNode() {
    //移除页面初始加载态
    var self = this;
    var $id = document.getElementById(self.config['loadmore'].id);
    while ($id.querySelectorAll('.ls_f').length > 0) {
      $id.removeChild($id.querySelectorAll('.ls_f')[0]);
    };
  },
  /**
   * 处理上拉刷新的callback回调函数
   * 
   * @param {number} len 
   */
  _upCB: function _upCB(len) {
    var self = this;
    if (len == 0) {
      self.showUpdateInfo(len, 'up');
    }
  },
  /**
   * 显示数据更新结果函数
   * 
   * @param {number} len 
   * @param {string} state 'up'或者是'down'
   */
  showUpdateInfo: function showUpdateInfo(len, state) {
    var self = this;
    if (state == 'up') {
      // self.jsonpLock = true;
      setTimeout(function () {
        var requestInfo = '没有新内容啦，一会再试试！';
        document.querySelector('#j_card_tnews').insertAdjacentHTML('beforeEnd', '<a class="fl_f_message fl_f_message_b">' + requestInfo + '</a>');
        // document.querySelector('#j_card_tnews .dr-loading').insertAdjacentHTML('beforeBegin', '<a class="fl_f_message fl_f_message_b">' + requestInfo + '</a>');
        __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].addClass(self.loadingMoreCtn, 'hide');
        setTimeout(function () {
          document.querySelector('.fl_f_message.fl_f_message_b').remove();
          self.ctrlLoadingCtn(false);
        }, 1500);
        // self.jsonpLock = false;
      }, 1000);
    }
  },
  /**
   * 增加ajax锁，隐藏和显示加在更多标签
   * 
   * @param {boolean} show 
   */
  ctrlLoadingCtn: function ctrlLoadingCtn(show) {
    /*增加ajax锁
     *对加载更多容器做显隐
     */
    var self = this;
    var ctrl = show ? __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].removeClass : __WEBPACK_IMPORTED_MODULE_0__shared_utils_js__["a" /* default */].addClass;
    self.loading = show;
    ctrl(self.loadingMoreCtn, 'hide');
  },
  SIMASEND: function SIMASEND(action, n) {
    var action = action || '_up',
        n = n || 0;
    var SIMAconfig = {
      data: [{
        et: n //n次数
      }],
      action: action,
      pk: 187522
    };
    window.SIMA && window.SIMA(SIMAconfig);

    if (action != '_fload') {
      window.SUDA && window.SUDA.log();
    }
  },
  /**
   * 从页面标签结构获取要闻打底数据
   * 
   * @returns 要闻数据对象
   */
  getYaowenObj: function getYaowenObj() {
    // 要闻打底数据
    var yaowenArray = {};
    yaowenArray.data = [];
    var yaowenObjDom = document.querySelector("#yaowen_defense").querySelectorAll("a");
    if (!yaowenObjDom) return false;
    for (var i = 0, len = yaowenObjDom.length; i < len; i++) {
      var yaowenObj = {};
      if (!yaowenObjDom[i].querySelector("pic")) continue;
      yaowenObj.url = yaowenObjDom[i].attributes["href"].value;
      yaowenObj.docid = yaowenObjDom[i].attributes["data-docid"].value;
      yaowenObj.thumbs = [];
      yaowenObj.thumbs.push(yaowenObjDom[i].querySelector("pic").innerHTML);
      yaowenObj.title = "&nbsp;" + yaowenObjDom[i].querySelector("h2").innerHTML;
      yaowenObj.comment_count = yaowenObjDom[i].querySelector("em").innerHTML;
      yaowenObj.media = yaowenObjDom[i].querySelector("cite").innerHTML;
      yaowenArray.data.push(yaowenObj);
    }
    return yaowenArray;
  },
  /**
   * 婷领接天乙广告函数
   * 
   * @param {any} sax 
   * @param {any} cardId 
   * @param {any} flag 
   * @param {any} domLen 
   */
  sinaSaxSend: function sinaSaxSend(sax, cardId, flag, domLen, len) {
    var num = 7;

    for (var i = 0; i < sax.length; i++) {
      __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_8__shared_sina_sax_js__["a" /* default */].callback("proxyty", [cardId, sax[i], function (dom) {
        // 进行广告曝光
        newExposure.pushListeningEle([dom], function (dom) {
          __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemExpose(dom);
        }, false);
        __WEBPACK_IMPORTED_MODULE_2__shared_track_js__["a" /* default */].ElemClick(Array.prototype.slice.call([dom]));
      }, flag, domLen, num, len]);
      num += 7;
    }
  },
  _isOutsidePicUrl: function _isOutsidePicUrl(picurl) {
    return false;
    // if(picurl && picurl.indexOf("sina") == -1 && picurl.indexOf("leju") == -1 && picurl.indexOf("miaopai") == -1){
    //   console.log(picurl,"过滤站外图片");
    //   return true;
    // }else{
    //   return false;
    // }
  },
  //由于首页的A标签动态加载太多，这里对所有的A标签做一个处理，增加vt=4&pos=108&his=n参数
  fixHrefArgs: function fixHrefArgs(arr) {
    if (arr) {
      var as = arr;
    } else {
      var as = document.querySelectorAll('a[href^=http]');
    }
    var loc = location.search.substring(1);

    function searchObject(searchStr) {
      var obj = {};
      if (!searchStr) {
        return obj;
      } else {
        var items = searchStr.split('&');
        for (var i = 0; i < items.length; i++) {
          var o = items[i].split('=');
          if (o) {
            obj[o[0]] = o[1];
          }
        }
        return obj;
      }
    }

    var locWm = searchObject(loc).wm;

    // console.log(locWm);

    for (var i = 0; i < as.length; i++) {
      var a = as[i],
          href = a.getAttribute('href');
      if (!href) continue;
      var hasSearchIndex = href.lastIndexOf('?');
      var hasSearch = hasSearchIndex > -1;
      var searchStr = hasSearch ? href.slice(hasSearchIndex + 1) : '';
      var obj = searchObject(searchStr);
      var hasVt = obj.vt && obj.vt === "4";
      var hasPos = obj.pos && obj.pos === "108";
      var hasHis = obj.his && obj.his === "0";
      var hasWm = obj.wm;

      if (!hasVt || !hasPos || !hasHis || !hasWm) {
        href = hasSearch ? href : href + '?';
        href = !hasVt ? href + '&vt=4' : href;
        href = !hasPos ? href + '&pos=108' : href;
        href = !hasHis ? href + '&his=0' : href;
        href = !hasWm && locWm !== undefined ? href + '&wm=' + locWm : href;

        //避免连着的?&出现
        href = href.replace("?&", "?");

        a.setAttribute('href', href);
      }
    }
  }
};

/* harmony default export */ __webpack_exports__["a"] = (sina_intellect_V);

/***/ }),
/* 31 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 32 */
/***/ (function(module, exports) {

module.exports = function($TemplateData){  for(var $keykeykey in $TemplateData){eval('var ' +$keykeykey +'=$TemplateData[$keykeykey]')}  var tempContent = [];var __append=function(n){tempContent.push(n)}; 
	    ;  var info = $TemplateData 
    ; __append("\r\n<h3 class=\"cm_tit\">")
    ; __append(info.title)
    ; __append("</h3>\r\n<aside class=\"i_gx3_img_box\">\r\n    <figure class=\"i_gx3_img_div i_gx3_img_div_solo i_bg\">\r\n        <img class=\"img_width\" data-src=\"")
    ; __append(info.bthumb)
    ; __append("\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=\" alt=\"")
    ; __append(info.title)
    ; __append("\">\r\n    </figure>\r\n</aside>\r\n<blockquote class='cm_f_ic cm_f_ic_l'>\r\n    <em class=\"m_f_con_n\">")
    ;  if(parseInt(info.comment)){ 
    ; __append("<span class='m_f_con_ic icon_com'></span><span class=\"m_f_con_com_n\">")
    ; __append(info.comment)
    ; __append("</span>")
    ;  }else { 
    ; __append("<span class='m_f_con_ic icon_com'></span>")
    ;  } 
    ; __append("</em>\r\n    ")
    ;  if(info.media){ 
    ; __append("<cite class=\"m_f_con_add\">")
    ; __append(info.media)
    ; __append("</cite>")
    ;  } 
    ;  if(info.tag){ 
    ; __append(info.tag)
    ;  } 
    ; __append("\r\n</blockquote>")

	 return tempContent.join('') 
} 

/***/ }),
/* 33 */
/***/ (function(module, exports) {

module.exports = function($TemplateData){  for(var $keykeykey in $TemplateData){eval('var ' +$keykeykey +'=$TemplateData[$keykeykey]')}  var tempContent = [];var __append=function(n){tempContent.push(n)}; 
	    ;  var info = $TemplateData 
    ; __append("\r\n<h2 class=\"cm_tit m_video_tit_sp\">")
    ; __append(info.title)
    ; __append("</h2>\r\n<figure class=\"m_video_img_box m_video_img_box_sp\">\r\n    <aside class=\"m_video_img_bg i_bg\">\r\n        <img class=\"m_video_img_bg_img\" data-src=\"")
    ; __append(info.img)
    ; __append("\" />\r\n    </aside>\r\n    <img class=\"img_width\" data-src=\"")
    ; __append(info.img)
    ; __append("\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAJAQMAAAAB5D5xAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjwA0AABsAAQrj5HwAAAAASUVORK5CYII=\" alt=\"")
    ; __append(info.title)
    ; __append("\"/>\r\n    <blockquote class=\"m_video_info_sp cm_c_c\">\r\n        <span class=\"fr\"><span class=\"cm_btn_paly icon_s_video\"></span>\r\n        ")
    ;  if(info.mtime && info.mtime != '00:00'){ 
    ; __append("\r\n            <time class=\"m_video_info_sp_time\">")
    ; __append(info.mtime)
    ; __append("</time>\r\n        ")
    ;  } 
    ; __append("\r\n    </blockquote>\r\n</figure>")

	 return tempContent.join('') 
} 

/***/ }),
/* 34 */
/***/ (function(module, exports) {

module.exports = function($TemplateData){  for(var $keykeykey in $TemplateData){eval('var ' +$keykeykey +'=$TemplateData[$keykeykey]')}  var tempContent = [];var __append=function(n){tempContent.push(n)}; 
	    ;  var info = $TemplateData 
    ; __append("\r\n<section class=\"m_f_a\">\r\n    ")
    ;  if(info.img){ 
    ; __append("\r\n    <figure class=\"m_f_div i_bg\">\r\n        <img class=\"img_width\" data-src=\"")
    ; __append(info.img)
    ; __append("\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=\" alt=\"")
    ; __append(info.title)
    ; __append("\"/>\r\n    </figure>\r\n    ")
    ;  } 
    ; __append("\r\n    <aside class=\"m_f_con\">\r\n        <h2 class=\"m_f_con_t cm_tit\">")
    ; __append(info.title)
    ; __append("</h2>\r\n        <blockquote class=\"cm_f_ic cm_f_ic_l\">\r\n            ")
    ;  if(!info.nocomment){ 
    ; __append("<em class=\"m_f_con_n m_f_con_n_r\"><span class=\"m_f_con_ic_l m_f_con_ic icon_com\"></span>")
    ;  if(parseInt(info.comment)){ 
    ; __append("<span class=\"m_f_con_com_n\">")
    ; __append(info.comment)
    ; __append("</span>")
    ;  } 
    ; __append("</em>")
    ;  } 
    ;  if(info.media){ 
    ; __append("<cite class=\"m_f_con_add\">")
    ; __append(info.media)
    ; __append("</cite>")
    ;  } 
    ;  if(info.tag){ 
    ; __append(info.tag)
    ;  } 
    ; __append("\r\n        </blockquote>\r\n    </aside>\r\n</section>\r\n")

	 return tempContent.join('') 
} 

/***/ }),
/* 35 */
/***/ (function(module, exports) {

module.exports = function($TemplateData){  for(var $keykeykey in $TemplateData){eval('var ' +$keykeykey +'=$TemplateData[$keykeykey]')}  var tempContent = [];var __append=function(n){tempContent.push(n)}; 
	    ;  var info = $TemplateData 
    ; __append("\r\n<h3 class='cm_tit'>")
    ; __append(info.title)
    ; __append("</h3>\r\n<aside class=\"i_gx3_img_box\">\r\n    <figure class=\"i_gx3_img_div i_bg\">\r\n        <img data-src=\"")
    ; __append(info.imgs[0])
    ; __append("\" class=\"img_width\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=\"  alt=\"")
    ; __append(info.title)
    ; __append("\"/>\r\n    </figure>\r\n    <figure class=\"i_gx3_img_div i_bg\">\r\n        <img data-src=\"")
    ; __append(info.imgs[1])
    ; __append("\" class=\"img_width\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=\"  alt=\"")
    ; __append(info.title)
    ; __append("\"/>\r\n    </figure>\r\n    <figure class=\"i_gx3_img_div i_bg\">\r\n        <img data-src=\"")
    ; __append(info.imgs[2])
    ; __append("\" class=\"img_width\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=\"  alt=\"")
    ; __append(info.title)
    ; __append("\"/>\r\n        ")
    ;  if(info.imgNum && parseInt(info.imgNum) - 3 >= 1){ 
    ; __append("<span class=\"m_img_sp\"><em class=\"m_img_sp_e\">+")
    ; __append(parseInt(info.imgNum)-3)
    ; __append("</em></span>")
    ;  } 
    ; __append("\r\n    </figure>\r\n</aside>\r\n<blockquote class='cm_f_ic cm_f_ic_l'>\r\n    <em class=\"m_f_con_n\">")
    ;  if(parseInt(info.comment)){ 
    ; __append("<span class='m_f_con_ic icon_com'></span><span class=\"m_f_con_com_n\">")
    ; __append(info.comment)
    ; __append("</span>")
    ;  }else { 
    ; __append("<span class='m_f_con_ic icon_com'></span>")
    ;  } 
    ; __append("</em>\r\n    ")
    ;  if(info.media){ 
    ; __append("<cite class=\"m_f_con_add\">")
    ; __append(info.media)
    ; __append("</cite>")
    ;  } 
    ;  if(info.tag){ 
    ; __append(info.tag)
    ;  } 
    ; __append("\r\n</blockquote>")

	 return tempContent.join('') 
} 

/***/ }),
/* 36 */
/***/ (function(module, exports) {

module.exports = function($TemplateData){  for(var $keykeykey in $TemplateData){eval('var ' +$keykeykey +'=$TemplateData[$keykeykey]')}  var tempContent = [];var __append=function(n){tempContent.push(n)}; 
	    ;  var info = $TemplateData 
    ; __append("\r\n<section class=\"m_f_a_r\">\r\n    <aside class=\"m_f_con\">\r\n        <h2 class=\"m_f_con_t cm_tit\">")
    ; __append(info.title)
    ; __append("</h2>\r\n        <blockquote class=\"cm_f_ic cm_f_ic_l\">\r\n            ")
    ;  if(!info.nocomment){ 
    ; __append("<em class=\"m_f_con_n m_f_con_n_r\"><span class=\"m_f_con_ic_l m_f_con_ic icon_com\"></span>")
    ;  if(parseInt(info.comment)){ 
    ; __append("<span class=\"m_f_con_com_n\">")
    ; __append(info.comment)
    ; __append("</span>")
    ;  } 
    ; __append("</em>")
    ;  } 
    ;  if(info.media){ 
    ; __append("<cite class=\"m_f_con_add\">")
    ; __append(info.media)
    ; __append("</cite>")
    ;  } 
    ;  if(info.tag){ 
    ; __append(info.tag)
    ;  } 
    ; __append("\r\n        </blockquote>\r\n    </aside>\r\n    ")
    ;  if(info.img){ 
    ; __append("\r\n    <figure class=\"m_f_div i_bg\">\r\n        <img class=\"img_width\" data-src=\"")
    ; __append(info.img)
    ; __append("\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=\" alt=\"")
    ; __append(info.title)
    ; __append("\"/>\r\n    </figure>\r\n    ")
    ;  } 
    ; __append("\r\n</section>\r\n")

	 return tempContent.join('') 
} 

/***/ }),
/* 37 */
/***/ (function(module, exports) {

module.exports = function($TemplateData){  for(var $keykeykey in $TemplateData){eval('var ' +$keykeykey +'=$TemplateData[$keykeykey]')}  var tempContent = [];var __append=function(n){tempContent.push(n)}; 
	    ;  var info = $TemplateData 
    ; __append("\r\n<h2 class=\"cm_tit m_video_tit_sp\">")
    ; __append(info.title)
    ; __append("</h2>\r\n<aside class=\"weidong_box\">\r\n    <figure class=\"weidong_wrap\">\r\n        <img class=\"weidong_img\" src=\"")
    ; __append(info.wdthumb)
    ; __append("\"  src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAAAoAQMAAACW3HXTAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA1JREFUGNNjGAWDCgAAAZAAAXtlmk8AAAAASUVORK5CYII=\" alt=\"")
    ; __append(info.title)
    ; __append("\">\r\n    </figure>\r\n</aside>\r\n<blockquote class=\"cm_f_ic cm_f_ic_l\">\r\n    ")
    ;  if(!info.nocomment){ 
    ; __append("<em class=\"m_f_con_n\"><span class=\"m_f_con_ic icon_com\"></span>")
    ;  if(parseInt(info.comment)){ 
    ; __append("<span class=\"m_f_con_com_n\">")
    ; __append(info.comment)
    ; __append("</span>")
    ;  } 
    ; __append("</em>")
    ;  } 
    ;  if(info.media){ 
    ; __append("<cite class=\"m_f_con_add\">")
    ; __append(info.media)
    ; __append("</cite>")
    ;  } 
    ; __append("\r\n</blockquote>")

	 return tempContent.join('') 
} 

/***/ }),
/* 38 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

var cutPic = {
	protocol: window.location.protocol,
	init: function init(url, udata) {
		var data = {
			width: udata.width,
			height: udata.height,
			top: udata.top || 10,
			left: udata.left || 50,
			after: udata.after || 'c55',
			cut: udata.cut,
			server: udata.server //z服务


			/*
    *1.是否是sinaimg.cn 已识别/不能识别
    *2.是否是miaokai
    */
		};if (/ssl=1/.test(location.href)) {
			this.protocol = 'https:';
		}
		if (/sina/.test(url) && data.server == true) {
			//\.cn
			return this.k_cut(url, data);
		} else if (/miaopai/.test(url) || data.server == false) {
			return this.z_cut(url, data);
		} else {
			return url;
		}
	},
	reg_combine: function reg_combine(data) {
		if (data.cut) {
			return 'w' + data.width + 'h' + data.height + 'f1t' + data.top + 'l' + data.left + 'q90' + data.after;
		} else {
			if (parseInt(data.height) != 0) {
				return 'w' + data.width + 'h' + data.height + 'q90' + data.after;
			} else {
				return 'w' + data.width + 'q90' + data.after;
			}
		}
	},
	k_cut: function k_cut(url, data) {
		var imgA = url.split('.');
		var type = imgA[imgA.length - 1];
		var is_cut_ever = null,
		    query = null,
		    result = null;
		var cutreg = this.reg_combine(data) || 'w200h134f1t10q90c55';
		var isMatchEver = url.match(new RegExp('.' + type + '[a-zA-Z0-9/]*.' + type)); //判断是否进行过人脸识别
		if (isMatchEver) {
			return this.z_cut(url, data);
		} else {
			query = url.match(/(http|https):\/\/(www|n)\.sinaimg.cn/i);
			if (query) {
				return url = url.replace(query[0], this.protocol + '//' + 'k.sinaimg.cn/' + query[2]) + '/' + cutreg + '.jpg';
			} else {
				return this.z_cut(url, data);
			}
		}
	},

	z_cut: function z_cut(url, data) {
		var size = data.width + '_' + data.height;
		if (data.cut) {
			return this.protocol + '//z' + Math.floor(Math.random() * 10) + '.sinaimg.cn/auto/crop?img=' + encodeURIComponent(url) + '&size=' + size;
		} else {
			return this.protocol + '//z' + Math.floor(Math.random() * 10) + '.sinaimg.cn/auto/resize?img=' + encodeURIComponent(url) + '&size=' + size;
		}
	}
};
/* harmony default export */ __webpack_exports__["a"] = (cutPic);

/***/ }),
/* 39 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__index_css__ = __webpack_require__(70);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__index_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__index_css__);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/*
 基础组件——下拉刷新
 dependence: @mfelibs/base-utils
 */



var defaultOption = {
  circleColor: "#299df2",
  shadowColor: "#e8e8e8",
  $extraToggle: undefined,
  drawHeight: 50,
  afterExcuteReturn: function afterExcuteReturn() {},
  beforeDrawStart: function beforeDrawStart() {}
};

var DrawRefresh = function (_BaseModule) {
  _inherits(DrawRefresh, _BaseModule);

  function DrawRefresh(el, option) {
    var israise = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    _classCallCheck(this, DrawRefresh);

    var _this = _possibleConstructorReturn(this, (DrawRefresh.__proto__ || Object.getPrototypeOf(DrawRefresh)).call(this, el, option, israise));

    _this.option = _this.getOptions(defaultOption);
    _this.$extraToggleInit();
    _this._init();
    return _this;
  }

  _createClass(DrawRefresh, [{
    key: "abort",
    value: function abort() {
      this._upReturn();
      this.isAbort = true;
    }
  }, {
    key: "goOn",
    value: function goOn() {
      this.isAbort = false;
    }
  }, {
    key: "_init",
    value: function _init() {
      this._insertLoading();
      this._setStyle();
      this._bindEvent();
    }
  }, {
    key: "$extraToggleApply",
    value: function $extraToggleApply(applyCb) {
      if (this.option.$extraToggle) {
        this.option.$extraToggle.forEach(function ($toggle) {
          applyCb($toggle);
        });
      }
    }
  }, {
    key: "$extraToggleInit",
    value: function $extraToggleInit() {
      if (this.option.$extraToggle) {
        this.option.$extraToggle = this.option.$extraToggle.map(function (item) {
          return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["a" /* $ */])(item);
        });
      }
    }
  }, {
    key: "_bindEvent",
    value: function _bindEvent() {
      var _this2 = this;

      this.$el.on("touchmove", this._touchMove.bind(this));
      this.$el.on("touchstart", this._touchStart.bind(this));
      this.$el.on("touchend", this._touchEnd.bind(this));

      this.$extraToggleApply(function ($toggle) {
        $toggle.on("touchmove", _this2._touchMove.bind(_this2));
        $toggle.on("touchstart", _this2._touchStart.bind(_this2));
        $toggle.on("touchend", _this2._touchEnd.bind(_this2));
      });
    }
  }, {
    key: "_setStyle",
    value: function _setStyle() {
      // this.$el.prev().css({
      //   "z-index": 1
      // });
      // this.$el.css({
      //   "z-index": 0
      // });

      this.$el.css({
        transform: "translate3d(0px, 0px, 0px)",
        "-webkit-transform": "translate3d(0px, 0px, 0px)",
        "-moz-transform": "translate3d(0px, 0px, 0px)",
        "-ms-transform": "translate3d(0px, 0px, 0px)",
        "-o-transform": "translate3d(0px, 0px, 0px)"
      });

      this.$extraToggleApply(function ($toggle) {
        $toggle.css({
          transform: "translate3d(0px, 0px, 0px)",
          "-webkit-transform": "translate3d(0px, 0px, 0px)",
          "-moz-transform": "translate3d(0px, 0px, 0px)",
          "-ms-transform": "translate3d(0px, 0px, 0px)",
          "-o-transform": "translate3d(0px, 0px, 0px)"
        });
      });

      this.$loadingContent.css({
        clip: "rect( 50px 1000px 50px 0px)"
      });
      this.$loadingContent.find(".loading-circle-check").css({
        "border-color": this.option.circleColor
      });
      this.$loadingContent.find(".loading-circle").css({
        "border-color": this.option.circleColor
      });
      this.$loadingContent.find(".loading-circle-shadow").css({
        background: this.option.shadowColor
      });
      this.$loadingContent.find(".loading-circle-check-shadow").css({
        background: this.option.shadowColor
      });
    }
  }, {
    key: "_move",
    value: function _move(distance) {
      !this.isdrawing && this.drawingStart();
      this._circleExtend(distance * 0.34);
      var moveDistance = distance * 0.6;
      if (moveDistance > this.option.drawHeight) {
        return;
      }
      this.$el.css({
        transform: "translate3d(0px, " + moveDistance + "px, 0px)",
        "-webkit-transform": "translate3d(0px, " + moveDistance + "px, 0px)",
        "-moz-transform": "translate3d(0px, " + moveDistance + "px, 0px)",
        "-ms-transform": "translate3d(0px, " + moveDistance + "px, 0px)",
        "-o-transform": "translate3d(0px, " + moveDistance + "px, 0px)"
      });

      this.$extraToggleApply(function ($toggle) {
        $toggle.css({
          transform: "translate3d(0px, " + moveDistance + "px, 0px)",
          "-webkit-transform": "translate3d(0px, " + moveDistance + "px, 0px)",
          "-moz-transform": "translate3d(0px, " + moveDistance + "px, 0px)",
          "-ms-transform": "translate3d(0px, " + moveDistance + "px, 0px)",
          "-o-transform": "translate3d(0px, " + moveDistance + "px, 0px)"
        });
      });

      this.$loadingContent.css({
        clip: "rect(" + (50 - moveDistance) + "px 1000px 50px 0px)"
      });
    }
  }, {
    key: "excuteReturn",
    value: function excuteReturn() {
      this._excuteReturn();
    }
  }, {
    key: "_excuteReturn",
    value: function _excuteReturn() {
      var _this3 = this;

      this.$el.css({
        transition: "all 300ms",
        "-webkit-transition": "all 300ms",
        "-moz-transition": "all 300ms",
        "-ms-transition": "all 300ms",
        "-o-transition": "all 300ms",
        transform: "translate3d(0px, 0px, 0px)",
        "-webkit-transform": "translate3d(0px, 0px, 0px)",
        "-moz-transform": "translate3d(0px, 0px, 0px)",
        "-ms-transform": "translate3d(0px, 0px, 0px)",
        "-o-transform": "translate3d(0px, 0px, 0px)"
      });
      this.$extraToggleApply(function ($toggle) {
        $toggle.css({
          transition: "all 300ms",
          "-webkit-transition": "all 300ms",
          "-moz-transition": "all 300ms",
          "-ms-transition": "all 300ms",
          "-o-transition": "all 300ms",
          transform: "translate3d(0px, 0px, 0px)",
          "-webkit-transform": "translate3d(0px, 0px, 0px)",
          "-moz-transform": "translate3d(0px, 0px, 0px)",
          "-ms-transform": "translate3d(0px, 0px, 0px)",
          "-o-transform": "translate3d(0px, 0px, 0px)"
        });
      });
      this.$loadingContent.css({
        transition: "all 300ms",
        "-webkit-transition": "all 300ms",
        "-moz-transition": "all 300ms",
        "-ms-transition": "all 300ms",
        "-o-transition": "all 300ms",
        clip: "rect( 50px 1000px 50px 0px)"
      });

      setTimeout(function () {
        _this3.inLoading = false;

        _this3.$el.css({
          transition: "none",
          "-webkit-transition": "none",
          "-moz-transition": "none",
          "-ms-transition": "none",
          "-o-transition": "none"
        });
        _this3.$extraToggleApply(function ($toggle) {
          $toggle.css({
            transition: "none",
            "-webkit-transition": "none",
            "-moz-transition": "none",
            "-ms-transition": "none",
            "-o-transition": "none"
          });
        });
        _this3.$loadingContent.css({
          transition: "none",
          "-webkit-transition": "none",
          "-moz-transition": "none",
          "-ms-transition": "none",
          "-o-transition": "none",
          display: "block"
        });

        _this3._circleClear();
        _this3.drawingEnd();

        _this3.option.afterExcuteReturn();
      }, 300);
    }
  }, {
    key: "_upReturn",
    value: function _upReturn(beforeReturn) {
      this.$loadingContent.css({
        display: "none"
      });

      if (beforeReturn) {
        beforeReturn();
        return;
      }

      this._excuteReturn();
    }
  }, {
    key: "_successUpReturn",
    value: function _successUpReturn(beforeReturn) {
      var _this4 = this;

      this._circleDone();

      setTimeout(function () {
        _this4._upReturn(beforeReturn);
      }, 1000);
    }
  }, {
    key: "_errorUpReturn",
    value: function _errorUpReturn() {
      var _this5 = this;

      setTimeout(function () {
        _this5._upReturn();
      }, 400);
    }
  }, {
    key: "successUp",
    value: function successUp(beforeReturn) {
      this._successUpReturn(beforeReturn);
    }
  }, {
    key: "errorUp",
    value: function errorUp() {
      this._errorUpReturn();
    }
  }, {
    key: "upReady",
    value: function upReady() {
      this.inLoading = true;
      this.$el.css({
        transition: "all 400ms",
        "-webkit-transition": "all 400ms",
        "-moz-transition": "all 400ms",
        "-ms-transition": "all 400ms",
        "-o-transition": "all 400ms",
        transform: "translate3d(0px, 40px, 0px)",
        "-webkit-transform": "translate3d(0px, 40px, 0px)",
        "-moz-transform": "translate3d(0px, 40px, 0px)",
        "-ms-transform": "translate3d(0px, 40px, 0px)",
        "-o-transform": "translate3d(0px, 40px, 0px)"
      });
      this.$extraToggleApply(function ($toggle) {
        $toggle.css({
          transition: "all 400ms",
          "-webkit-transition": "all 400ms",
          "-moz-transition": "all 400ms",
          "-ms-transition": "all 400ms",
          "-o-transition": "all 400ms",
          transform: "translate3d(0px, 40px, 0px)",
          "-webkit-transform": "translate3d(0px, 40px, 0px)",
          "-moz-transform": "translate3d(0px, 40px, 0px)",
          "-ms-transform": "translate3d(0px, 40px, 0px)",
          "-o-transform": "translate3d(0px, 40px, 0px)"
        });
      });
      this.$loadingContent.css({
        clip: "rect( 10px 1000px 50px 0px)"
      });
    }
  }, {
    key: "_upRefresh",
    value: function _upRefresh(refresh) {
      var _this6 = this;

      var isAuto = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      isAuto && this.$loadingContent.css({
        display: "none"
      });
      this.upReady();
      setTimeout(function () {
        isAuto && _this6.$loadingContent.css({ display: "block" });
        _this6._circleRotate();
        if (refresh) {
          refresh && refresh(_this6);
        } else {
          _this6.option.refresh(_this6);
        }
      }, 400);
    }
  }, {
    key: "drawingStart",
    value: function drawingStart() {
      if (this.isdrawing) {
        return;
      }
      this.isdrawing = true;
      var color = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["a" /* $ */])(document.body).css("background-color");
      this.preBodyColor = color;
      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["a" /* $ */])(document.body).css("background-color", this.option.shadowColor);
    }
  }, {
    key: "drawingEnd",
    value: function drawingEnd() {
      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["a" /* $ */])(document.body).css("background-color", this.preBodyColor);
      this.isdrawing = false;
    }
  }, {
    key: "_touchStart",
    value: function _touchStart(e) {
      if (this.isAbort || this.inLoading) {
        return;
      }

      this.touchStartPageY = e.changedTouches[0].pageY;
      this.preTouchPageY = this.touchStartPageY;
      this.option.beforeDrawStart();
    }
  }, {
    key: "_touchMove",
    value: function _touchMove(e) {
      if (this.isAbort || this.inLoading) {
        return;
      }

      this.haveMove = true;
      var touchMovePageY = e.changedTouches[0].pageY;
      var touchDistance = touchMovePageY - this.touchStartPageY;
      //判断是否是顶部下拉
      var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
      if (touchDistance > 0 && scrollTop == 0) {
        if (touchDistance > 86) {
          //isRefresh 是否可以刷新
          this.isRefresh = true;
        } else {
          this.isRefresh = false;
        }
        this._move(touchDistance);
        this.preTouchPageY = touchMovePageY;
        e.preventDefault();
        e.stopPropagation();
      }
    }
  }, {
    key: "_circleClear",
    value: function _circleClear() {
      this.$loadingContent.find(".loading-circle-shadow").css({
        top: 0
      });
      this.$loadingContent.find(".loadingR").removeClass("load");
      this.$loadingContent.find(".loadingR").removeClass("done");
    }
  }, {
    key: "_circleRotate",
    value: function _circleRotate() {
      this.$loadingContent.find(".loadingR").addClass("load");
    }
  }, {
    key: "_circleDone",
    value: function _circleDone() {
      this.$loadingContent.find(".loadingR").removeClass("load");
      this.$loadingContent.find(".loadingR").addClass("done");
    }
  }, {
    key: "_circleExtend",
    value: function _circleExtend(height) {
      //限制遮罩最大高度
      if (height > 60) {
        return;
      }
      this.$loadingContent.find(".loading-circle-shadow").css({
        top: height + "px"
      });
    }
  }, {
    key: "_touchEnd",
    value: function _touchEnd(e) {
      if (this.isAbort || this.inLoading) {
        return;
      }

      if (this.haveMove && this.isRefresh && document.body.scrollTop == 0) {
        this._upRefresh();
      } else {
        this._upReturn();
      }
      this.haveMove = false;
      this.isRefresh = false;
    }
  }, {
    key: "_insertLoading",
    value: function _insertLoading() {
      var loadingHtml = "<div class=\"dr-loading\">\n                                <div class=\"dr-loading-content\">\n                                    <div class=\"loadingR\">\n                                        <div class=\"loading-circle-shadow\"></div>\n                                        <div class=\"loading-circle\"></div>\n                                        <div class=\"loading-circle-check\"></div>\n                                        <div class=\"loading-circle-check-shadow\"></div>\n                                    </div>\n                                </div>\n                            </div>";
      this.$loading = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["a" /* $ */])(loadingHtml);
      this.$loadingContent = this.$loading.children().eq(0);
      this.$el.prepend(this.$loading);
    }

    //自动模拟下拉刷新

  }, {
    key: "autoDrawRefresh",
    value: function autoDrawRefresh(refresh) {
      var _this7 = this;

      var touchDistance = 0;
      var autoDrawInterval = setInterval(function () {
        if (touchDistance >= 182) {
          clearInterval(autoDrawInterval);
          _this7._upRefresh(refresh, true);
          return;
        }
        _this7._move(touchDistance);
        touchDistance += 5;
      }, 5);
    }

    //自动下拉刷新

  }, {
    key: "autoRefresh",
    value: function autoRefresh(refresh) {
      this.drawingStart();
      this.$loadingContent.find(".loading-circle-shadow").css({
        top: "30px"
      });
      this._upRefresh(refresh, true);
    }
  }]);

  return DrawRefresh;
}(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["b" /* BaseModule */]);

__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["b" /* BaseModule */].register(DrawRefresh, "DrawRefresh");

/* harmony default export */ __webpack_exports__["a"] = (DrawRefresh);

/***/ }),
/* 40 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/*jslint browser: true, nomen: false, plusplus: false, bitwise: false, maxerr: 50, indent: 2 */
/**
 * @depends swfobject-2.2.min.js
 *
 * evercookie 0.4 (10/13/2010) -- extremely persistent cookies
 *
 *  by samy kamkar : code@samy.pl : http://samy.pl
 *
 * this api attempts to produce several types of persistent data
 * to essentially make a cookie virtually irrevocable from a system
 *
 * specifically it uses:
 *  - standard http cookies
 *  - flash cookies (local shared objects)
 *  - silverlight isolated storage
 *  - png generation w/forced cache and html5 canvas pixel reading
 *  - http etags
 *  - http cache
 *  - window.name
 *  - IE userData
 *  - html5 session cookies
 *  - html5 local storage
 *  - html5 global storage
 *  - html5 database storage via sqlite
 *  - css history scanning
 *  - Java JNLP PersistenceService
 *  - Java exploit
 *
 *  if any cookie is found, it's then reset to all the other locations
 *  for example, if someone deletes all but one type of cookie, once
 *  that cookie is re-discovered, all of the other cookie types get reset
 *
 *  !!! SOME OF THESE ARE CROSS-DOMAIN COOKIES, THIS MEANS
 *  OTHER SITES WILL BE ABLE TO READ SOME OF THESE COOKIES !!!
 *
 * USAGE:

  var ec = new evercookie();

  // set a cookie "id" to "12345"
  // usage: ec.set(key, value)
  ec.set("id", "12345");

  // retrieve a cookie called "id" (simply)
  ec.get("id", function(value) { alert("Cookie value is " + value) });

  // or use a more advanced callback function for getting our cookie
  // the cookie value is the first param
  // an object containing the different storage methods
  // and returned cookie values is the second parameter
  function getCookie(best_candidate, all_candidates)
  {
    alert("The retrieved cookie is: " + best_candidate + "\n" +
      "You can see what each storage mechanism returned " +
      "by looping through the all_candidates object.");

    for (var item in all_candidates)
      document.write("Storage mechanism " + item +
        " returned " + all_candidates[item] + " votes<br>");
    }
    ec.get("id", getCookie);

  // we look for "candidates" based off the number of "cookies" that
  // come back matching since it's possible for mismatching cookies.
  // the best candidate is very-very-likely the correct one

*/

// import wintip from 'wintip'

try {
  var _ec_replace = function _ec_replace(str, key, value) {
    if (str.indexOf("&" + key + "=") > -1 || str.indexOf(key + "=") === 0) {
      // find start
      var idx = str.indexOf("&" + key + "="),
          end,
          newstr;
      if (idx === -1) {
        idx = str.indexOf(key + "=");
      }
      // find end
      end = str.indexOf("&", idx + 1);
      if (end !== -1) {
        newstr = str.substr(0, idx) + str.substr(end + (idx ? 0 : 1)) + "&" + key + "=" + value;
      } else {
        newstr = str.substr(0, idx) + "&" + key + "=" + value;
      }
      return newstr;
    } else {
      return str + "&" + key + "=" + value;
    }
  };

  var idb = function idb() {
    if ('indexedDB' in window) {
      return true;
    } else if (window.indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB) {
      return true;
    } else {
      return false;
    }
  };

  var _Evercookie = function _Evercookie(options) {
    options = options || {};
    var opts = {};
    for (var key in defaultOptionMap) {
      var optValue = options[key];
      if (typeof optValue !== 'undefined') {
        opts[key] = optValue;
      } else {
        opts[key] = defaultOptionMap[key];
      }
    }
    if (typeof opts.domain === 'function') {
      opts.domain = opts.domain(window);
    }
    var _ec_history = opts.history,
        _ec_java = opts.java,
        _ec_tests = opts.tests,
        _ec_baseurl = opts.baseurl,
        _ec_asseturi = opts.asseturi,
        _ec_phpuri = opts.phpuri,
        _ec_domain = opts.domain,
        _ec_swf_file_name = opts.swfFileName,
        _ec_xap_file_name = opts.xapFileName,
        _ec_jnlp_file_name = opts.jnlpFileName,
        _ec_hsts = opts.hsts;

    // private property
    var self = this;
    this._ec = {};

    this.get = function (name, cb, dont_reset) {
      self._evercookie(name, cb, undefined, undefined, dont_reset);
    };

    this.set = function (name, value) {
      self._evercookie(name, function () {}, value);
    };

    this._evercookie = function (name, cb, value, i, dont_reset) {
      if (self._evercookie === undefined) {
        self = this;
      }
      if (i === undefined) {
        i = 0;
      }
      // first run
      if (i === 0) {
        if (opts.db) {
          self.evercookie_database_storage(name, value);
        }
        if (opts.idb) {
          self.evercookie_indexdb_storage(name, value);
        }

        self._ec.userData = self.evercookie_userdata(name, value);
        self._ec.cookieData = self.evercookie_cookie(name, value);
        self._ec.localData = self.evercookie_local_storage(name, value);
        self._ec.globalData = self.evercookie_global_storage(name, value);
        self._ec.sessionData = self.evercookie_session_storage(name, value);
        self._ec.windowData = self.evercookie_window(name, value);
      }

      // when writing data, we need to make sure lso and silverlight object is there
      if (value !== undefined) {}

      // when reading data, we need to wait for swf, db, silverlight, java and png
      else {
          if ((
          // we support local db and haven't read data in yet
          opts.db && window.openDatabase && typeof self._ec.dbData === "undefined" || opts.idb && idb() && (typeof self._ec.idbData === "undefined" || self._ec.idbData === "")) && i++ < _ec_tests) {
            setTimeout(function () {
              self._evercookie(name, cb, value, i, dont_reset);
            }, 300);
          }

          // we hit our max wait time or got all our data
          else {

              // wintip('cookieData :::' + self._ec.cookieData)
              // wintip('localData :::' + self._ec.localData)
              // wintip('globalData :::' + self._ec.globalData)
              // wintip('sessionData :::' + self._ec.sessionData)
              // wintip('windowData :::' + self._ec.windowData)
              // wintip('dbData :::' + self._ec.dbData)
              // wintip('idbData :::' + self._ec.idbData)

              var tmpec = self._ec,
                  candidates = [],
                  bestnum = 0,
                  candidate,
                  item;
              self._ec = {};

              // figure out which is the best candidate
              for (item in tmpec) {
                if (tmpec[item] && tmpec[item] !== "null" && tmpec[item] !== "undefined") {
                  candidates[tmpec[item]] = candidates[tmpec[item]] === undefined ? 1 : candidates[tmpec[item]] + 1;
                }
              }

              for (item in candidates) {
                if (candidates[item] > bestnum) {
                  bestnum = candidates[item];
                  candidate = item;
                }
              }

              this.working = false;
              // reset cookie everywhere
              if (candidate !== undefined && (dont_reset === undefined || dont_reset !== 1)) {
                self.set(name, candidate);
              }
              if (typeof cb === "function") {
                cb(candidate, tmpec);
              }
            }
        }
    };

    this.evercookie_window = function (name, value) {
      try {
        if (value !== undefined) {
          window.name = _ec_replace(window.name, name, value);
        } else {
          return this.getFromStr(name, window.name);
        }
      } catch (e) {}
    };

    this.evercookie_userdata = function (name, value) {
      try {
        var elm = this.createElem("div", "userdata_el", 1);
        if (elm.addBehavior) {
          elm.style.behavior = "url(#default#userData)";

          if (value !== undefined) {
            elm.setAttribute(name, value);
            elm.save(name);
          } else {
            elm.load(name);
            return elm.getAttribute(name);
          }
        }
      } catch (e) {}
    };

    this.evercookie_local_storage = function (name, value) {
      try {
        if (localStore) {
          if (value !== undefined) {
            localStore.setItem(name, value);
          } else {
            return localStore.getItem(name);
          }
        }
      } catch (e) {}
    };

    this.evercookie_database_storage = function (name, value) {
      try {
        if (window.openDatabase) {

          // wintip('database 可用')
          var database = window.openDatabase("sqlite_evercookie", "", "evercookie", 1024 * 1024);

          if (value !== undefined) {
            database.transaction(function (tx) {
              tx.executeSql("CREATE TABLE IF NOT EXISTS cache(" + "id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, " + "name TEXT NOT NULL, " + "value TEXT NOT NULL, " + "UNIQUE (name)" + ")", [], function (tx, rs) {}, function (tx, err) {});
              tx.executeSql("INSERT OR REPLACE INTO cache(name, value) " + "VALUES(?, ?)", [name, value], function (tx, rs) {}, function (tx, err) {});
            });
          } else {
            database.transaction(function (tx) {
              tx.executeSql("SELECT value FROM cache WHERE name=?", [name], function (tx, result1) {
                if (result1.rows.length >= 1) {
                  self._ec.dbData = result1.rows.item(0).value;
                } else {
                  self._ec.dbData = "";
                }
              }, function (tx, err) {});
            });
          }
        }
      } catch (e) {}
    };

    this.evercookie_indexdb_storage = function (name, value) {
      try {
        if (!('indexedDB' in window)) {

          indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB;
          IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction || window.msIDBTransaction;
          IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange || window.msIDBKeyRange;
        }

        if (indexedDB) {

          // wintip('indexedDB 可用')
          var ver = 1;
          //FF incognito mode restricts indexedb access
          var request = indexedDB.open("idb_evercookie", ver);

          request.onerror = function (e) {
            ;
          };

          request.onupgradeneeded = function (event) {
            var db = event.target.result;

            var store = db.createObjectStore("evercookie", {
              keyPath: "name",
              unique: false
            });
          };

          if (value !== undefined) {

            request.onsuccess = function (event) {
              var idb = event.target.result;
              if (idb.objectStoreNames.contains("evercookie")) {
                var tx = idb.transaction(["evercookie"], "readwrite");
                var objst = tx.objectStore("evercookie");
                var qr = objst.put({
                  "name": name,
                  "value": value
                });
              }
              idb.close();
            };
          } else {

            request.onsuccess = function (event) {

              var idb = event.target.result;

              if (!idb.objectStoreNames.contains("evercookie")) {

                self._ec.idbData = undefined;
              } else {
                var tx = idb.transaction(["evercookie"]);
                var objst = tx.objectStore("evercookie");
                var qr = objst.get(name);

                qr.onsuccess = function (event) {
                  if (qr.result === undefined) {
                    self._ec.idbData = undefined;
                  } else {
                    self._ec.idbData = qr.result.value;
                  }
                };
              }
              idb.close();
            };
          }
        }
      } catch (e) {}
    };

    this.evercookie_session_storage = function (name, value) {
      try {
        if (sessionStorage) {
          if (value !== undefined) {
            sessionStorage.setItem(name, value);
          } else {
            return sessionStorage.getItem(name);
          }
        }
      } catch (e) {}
    };

    this.evercookie_global_storage = function (name, value) {
      if (globalStorage) {
        var host = this.getHost();
        try {
          if (value !== undefined) {
            globalStorage[host][name] = value;
          } else {
            return globalStorage[host][name];
          }
        } catch (e) {}
      }
    };

    this.createElem = function (type, name, append) {
      var el;
      if (name !== undefined && document.getElementById(name)) {
        el = document.getElementById(name);
      } else {
        el = document.createElement(type);
      }
      el.style.visibility = "hidden";
      el.style.position = "absolute";

      if (name) {
        el.setAttribute("id", name);
      }

      if (append) {
        document.body.appendChild(el);
      }
      return el;
    };

    this.evercookie_cookie = function (name, value) {
      if (value !== undefined) {
        // expire the cookie first
        document.cookie = name + "=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/; domain=" + _ec_domain;
        document.cookie = name + "=" + value + "; expires=Tue, 31 Dec 2030 00:00:00 UTC; path=/; domain=" + _ec_domain;
      } else {
        return this.getFromStr(name, document.cookie);
      }
    };

    // get value from param-like string (eg, "x=y&name=VALUE")
    this.getFromStr = function (name, text) {
      if (typeof text !== "string") {
        return;
      }
      var nameEQ = name + "=",
          ca = text.split(/[;&]/),
          i,
          c;
      for (i = 0; i < ca.length; i++) {
        c = ca[i];
        while (c.charAt(0) === " ") {
          c = c.substring(1, c.length);
        }
        if (c.indexOf(nameEQ) === 0) {
          return c.substring(nameEQ.length, c.length);
        }
      }
    };

    this.getHost = function () {
      return window.location.host.replace(/:\d+/, '');
    };
  };

  var document = window.document,
      Image = window.Image,
      globalStorage = window.globalStorage;

  try {
    var localStore = window.localStorage;
  } catch (ex) {}

  try {
    var sessionStorage = window.sessionStorage;
  } catch (e) {}

  var defaultOptionMap = {
    tests: 10, // 1000 what is it, actually?
    lso: true, // local storage
    domain: '.' + window.location.host.replace(/:\d+/, ''), // Get current domain
    db: true, // Database
    idb: true // Indexed DB
  };

  ;

  /**
   * Because Evercookie is a class, it should has first letter in capital
   * Keep first letter in small for legacy purpose
   * @expose Evercookie
   */
  window.evercookie = window.Evercookie = _Evercookie;
} catch (ex) {}

/* harmony default export */ __webpack_exports__["a"] = (Evercookie);

/***/ }),
/* 41 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__evercookie__ = __webpack_require__(40);
//     



var store = {};

/* harmony default export */ __webpack_exports__["a"] = ({

  _retry: 10,

  setRetryTime: function setRetryTime(time) {

    if (typeof parseInt(time) !== 'number') {
      console.log('传参有误，默认使用10次重试');
      return;
    }

    this._retry = time;
  },

  get: function get(key, cb) {

    if (!key || key == '') {
      return;
    }

    var ec = void 0;
    if (!(key in store)) {

      store[key] = new __WEBPACK_IMPORTED_MODULE_0__evercookie__["a" /* default */]({
        tests: this._retry
      });
    }

    ec = store[key];

    ec.get(key, cb);
  },
  set: function set(key, value) {

    if (!key || key == '') {
      return;
    }

    var ec = void 0;
    if (!(key in store)) {

      store[key] = new __WEBPACK_IMPORTED_MODULE_0__evercookie__["a" /* default */]({
        tests: this._retry
      });
    }

    ec = store[key];

    ec.set(key, value);
  },

  getMany: function getMany(keys, cb) {
    var _this = this;

    if (!keys.length || !('forEach' in keys)) {
      return;
    }

    var num = keys.length;

    var result = {};

    keys.forEach(function (key) {

      if (typeof key !== 'string') {
        key = key.toString();
      }

      _this.get(key, handleMultiCallback);

      function handleMultiCallback(data) {

        num--;

        result[key] = data;

        if (num == 0) {
          return cb(result);
        }
      }
    });
  }

});

/***/ }),
/* 42 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";


var Fingerprint2 = function Fingerprint2(options) {

  if (!(this instanceof Fingerprint2)) {
    return new Fingerprint2(options);
  }

  var defaultOptions = {
    // swfContainerId: "fingerprintjs2",
    // swfPath: "flash/compiled/FontList.swf",
    detectScreenOrientation: true,
    sortPluginsFor: [/palemoon/i],
    userDefinedFonts: []
  };
  this.options = this.extend(options, defaultOptions);
  this.nativeForEach = Array.prototype.forEach;
  this.nativeMap = Array.prototype.map;
};

Fingerprint2.prototype = {
  extend: function extend(source, target) {
    if (source == null) {
      return target;
    }
    for (var k in source) {
      if (source[k] != null && target[k] !== source[k]) {
        target[k] = source[k];
      }
    }
    return target;
  },
  get: function get(done) {
    var keys = [];
    keys = this.userAgentKey(keys);
    keys = this.languageKey(keys);
    keys = this.colorDepthKey(keys);
    keys = this.pixelRatioKey(keys);
    keys = this.hardwareConcurrencyKey(keys);
    keys = this.screenResolutionKey(keys);
    keys = this.availableScreenResolutionKey(keys);
    keys = this.timezoneOffsetKey(keys);
    keys = this.sessionStorageKey(keys);
    keys = this.localStorageKey(keys);
    keys = this.indexedDbKey(keys);
    keys = this.addBehaviorKey(keys);
    keys = this.openDatabaseKey(keys);
    keys = this.cpuClassKey(keys);
    keys = this.platformKey(keys);
    keys = this.doNotTrackKey(keys);
    keys = this.pluginsKey(keys);
    keys = this.canvasKey(keys);
    keys = this.webglKey(keys);
    keys = this.adBlockKey(keys);
    keys = this.hasLiedLanguagesKey(keys);
    keys = this.hasLiedResolutionKey(keys);
    keys = this.hasLiedOsKey(keys);
    keys = this.hasLiedBrowserKey(keys);
    keys = this.touchSupportKey(keys);
    keys = this.customEntropyFunction(keys);
    var that = this;
    this.fontsKey(keys, function (newKeys) {
      var values = [];
      // var needHash = ["js_fonts", "webgl", "canvas"];
      that.each(newKeys, function (pair) {
        var value = pair.value;
        var key = pair.key;
        if (typeof pair.value.join !== "undefined") {
          value = pair.value.join(";");
          pair.value = value;
        }
        // if (needHash.indexOf(key) !== -1) {
        //   pair.value = that.x64hash128(pair.value, 31);
        // }
        values.push(value);
      });
      var murmur = that.x64hash128(values.join("~~~"), 31);
      return done(murmur, newKeys);
    });

    // this.jsFontsKey(keys, function (newKeys) {
    //   var values = [];
    //   var needHash = ["js_fonts", "webgl", "canvas"];
    //   that.each(newKeys, function (pair) {
    //     var value = pair.value;
    //     var key = pair.key;
    //     if (typeof pair.value.join !== "undefined") {
    //       value = pair.value.join(";");
    //       pair.value = value;
    //     }
    //     if (needHash.indexOf(key) !== -1) {
    //       pair.value = that.x64hash128(pair.value, 31);
    //     }
    //     values.push(value);
    //   });
    //   var murmur = that.x64hash128(values.join("~~~"), 31);
    //   return done(murmur, newKeys);
    // });
  },
  customEntropyFunction: function customEntropyFunction(keys) {
    if (typeof this.options.customFunction === "function") {
      keys.push({ key: "custom", value: this.options.customFunction() });
    }
    return keys;
  },
  userAgentKey: function userAgentKey(keys) {
    if (!this.options.excludeUserAgent) {
      keys.push({ key: "user_agent", value: this.getUserAgent() });
    }
    return keys;
  },
  // for tests
  getUserAgent: function getUserAgent() {
    return navigator.userAgent.replace(/nettype\/.*\s/g, '');
  },
  languageKey: function languageKey(keys) {
    if (!this.options.excludeLanguage) {
      // IE 9,10 on Windows 10 does not have the `navigator.language` property any longer
      keys.push({ key: "language", value: navigator.language || navigator.userLanguage || navigator.browserLanguage || navigator.systemLanguage || "" });
    }
    return keys;
  },
  colorDepthKey: function colorDepthKey(keys) {
    if (!this.options.excludeColorDepth) {
      keys.push({ key: "color_depth", value: screen.colorDepth || -1 });
    }
    return keys;
  },
  pixelRatioKey: function pixelRatioKey(keys) {
    if (!this.options.excludePixelRatio) {
      keys.push({ key: "pixel_ratio", value: this.getPixelRatio() });
    }
    return keys;
  },
  getPixelRatio: function getPixelRatio() {
    return window.devicePixelRatio || "";
  },
  screenResolutionKey: function screenResolutionKey(keys) {
    if (!this.options.excludeScreenResolution) {
      return this.getScreenResolution(keys);
    }
    return keys;
  },
  getScreenResolution: function getScreenResolution(keys) {
    var resolution;
    if (this.options.detectScreenOrientation) {
      resolution = screen.height > screen.width ? [screen.height, screen.width] : [screen.width, screen.height];
    } else {
      resolution = [screen.width, screen.height];
    }
    if (typeof resolution !== "undefined") {
      // headless browsers
      keys.push({ key: "resolution", value: resolution });
    } else {
      // 保持一致，否则没有禁用这个参数也可能返回为空
      keys.push({ key: "resolution", value: "unknown" });
    }
    return keys;
  },
  availableScreenResolutionKey: function availableScreenResolutionKey(keys) {
    if (!this.options.excludeAvailableScreenResolution) {
      return this.getAvailableScreenResolution(keys);
    }
    return keys;
  },
  getAvailableScreenResolution: function getAvailableScreenResolution(keys) {
    var available;
    if (screen.availWidth && screen.availHeight) {
      if (this.options.detectScreenOrientation) {
        available = screen.availHeight > screen.availWidth ? [screen.availHeight, screen.availWidth] : [screen.availWidth, screen.availHeight];
      } else {
        available = [screen.availHeight, screen.availWidth];
      }
    }
    if (typeof available !== "undefined") {
      // headless browsers
      keys.push({ key: "available_resolution", value: available });
    } else {
      // 保持一致
      keys.push({ key: "available_resolution", value: "unknown" });
    }
    return keys;
  },
  timezoneOffsetKey: function timezoneOffsetKey(keys) {
    if (!this.options.excludeTimezoneOffset) {
      keys.push({ key: "timezone_offset", value: new Date().getTimezoneOffset() });
    }
    return keys;
  },
  sessionStorageKey: function sessionStorageKey(keys) {
    if (!this.options.excludeSessionStorage && this.hasSessionStorage()) {
      keys.push({ key: "session_storage", value: 1 });
    }
    return keys;
  },
  localStorageKey: function localStorageKey(keys) {
    if (!this.options.excludeSessionStorage && this.hasLocalStorage()) {
      keys.push({ key: "local_storage", value: 1 });
    }
    return keys;
  },
  indexedDbKey: function indexedDbKey(keys) {
    // if (!this.options.excludeIndexedDB && this.hasIndexedDB()) {
    if (!this.options.excludeIndexedDB) {
      if (this.hasIndexedDB()) {
        // 保持一致
        keys.push({ key: "indexed_db", value: 1 });
      } else {
        keys.push({ key: "indexed_db", value: 0 });
      }
    }
    return keys;
  },
  addBehaviorKey: function addBehaviorKey(keys) {
    //body might not be defined at this point or removed programmatically
    // if (document.body && !this.options.excludeAddBehavior && document.body.addBehavior) {
    //   keys.push({ key: "add_behavior", value: 1 });
    // }    
    if (!this.options.excludeAddBehavior) {
      // 保持一致
      if (document.body && document.body.addBehavior) {
        keys.push({ key: "add_behavior", value: 1 });
      } else {
        keys.push({ key: "add_behavior", value: 0 });
      }
    }

    return keys;
  },
  openDatabaseKey: function openDatabaseKey(keys) {
    if (!this.options.excludeOpenDatabase) {
      if (window.openDatabase) {
        keys.push({ key: "open_database", value: 1 });
      } else {
        // 保持一致
        keys.push({ key: "open_database", value: 0 });
      }
    }
    return keys;
  },
  cpuClassKey: function cpuClassKey(keys) {
    if (!this.options.excludeCpuClass) {
      keys.push({ key: "cpu_class", value: this.getNavigatorCpuClass() });
    }
    return keys;
  },
  platformKey: function platformKey(keys) {
    if (!this.options.excludePlatform) {
      keys.push({ key: "navigator_platform", value: this.getNavigatorPlatform() });
    }
    return keys;
  },
  doNotTrackKey: function doNotTrackKey(keys) {
    if (!this.options.excludeDoNotTrack) {
      keys.push({ key: "do_not_track", value: this.getDoNotTrack() });
    }
    return keys;
  },
  canvasKey: function canvasKey(keys) {
    if (!this.options.excludeCanvas) {
      if (this.isCanvasSupported()) {
        // 保持一致
        keys.push({ key: "canvas", value: this.getCanvasFp() });
      } else {
        keys.push({ key: "canvas", value: "unSupported" });
      }
    }
    return keys;
  },
  webglKey: function webglKey(keys) {
    if (this.options.excludeWebGL) {
      return keys;
    }
    if (!this.isWebGlSupported()) {
      keys.push({ key: "webgl", value: "unSupported" }); // 保持一致
      return keys;
    }
    keys.push({ key: "webgl", value: this.getWebglFp() });
    return keys;
  },
  adBlockKey: function adBlockKey(keys) {
    if (!this.options.excludeAdBlock) {
      keys.push({ key: "adblock", value: this.getAdBlock() });
    }
    return keys;
  },
  hasLiedLanguagesKey: function hasLiedLanguagesKey(keys) {
    if (!this.options.excludeHasLiedLanguages) {
      keys.push({ key: "has_lied_languages", value: this.getHasLiedLanguages() });
    }
    return keys;
  },
  hasLiedResolutionKey: function hasLiedResolutionKey(keys) {
    if (!this.options.excludeHasLiedResolution) {
      keys.push({ key: "has_lied_resolution", value: this.getHasLiedResolution() });
    }
    return keys;
  },
  hasLiedOsKey: function hasLiedOsKey(keys) {
    if (!this.options.excludeHasLiedOs) {
      keys.push({ key: "has_lied_os", value: this.getHasLiedOs() });
    }
    return keys;
  },
  hasLiedBrowserKey: function hasLiedBrowserKey(keys) {
    if (!this.options.excludeHasLiedBrowser) {
      keys.push({ key: "has_lied_browser", value: this.getHasLiedBrowser() });
    }
    return keys;
  },
  fontsKey: function fontsKey(keys, done) {
    if (this.options.excludeJsFonts) {
      // return this.flashFontsKey(keys, done);
      return done(keys);
    }
    return this.jsFontsKey(keys, done);
  },
  // flash fonts (will increase fingerprinting time 20X to ~ 130-150ms)
  // flashFontsKey: function (keys, done) {
  //   if (this.options.excludeFlashFonts) {
  //     return done(keys);
  //   }
  //   // we do flash if swfobject is loaded
  //   if (!this.hasSwfObjectLoaded()) {
  //     return done(keys);
  //   }
  //   if (!this.hasMinFlashInstalled()) {
  //     return done(keys);
  //   }
  //   if (typeof this.options.swfPath === "undefined") {
  //     return done(keys);
  //   }
  //   this.loadSwfAndDetectFonts(function (fonts) {
  //     keys.push({ key: "swf_fonts", value: fonts.join(";") });
  //     done(keys);
  //   });
  // },
  // kudos to http://www.lalit.org/lab/javascript-css-font-detect/
  jsFontsKey: function jsFontsKey(keys, done) {
    var that = this;
    // doing js fonts detection in a pseudo-async fashion
    return setTimeout(function () {

      // a font will be compared against all the three default fonts.
      // and if it doesn't match all 3 then that font is not available.
      var baseFonts = ["monospace", "sans-serif", "serif"];

      var fontList = ["Andale Mono", "Arial", "Arial Black", "Arial Hebrew", "Arial MT", "Arial Narrow", "Arial Rounded MT Bold", "Arial Unicode MS", "Bitstream Vera Sans Mono", "Book Antiqua", "Bookman Old Style", "Calibri", "Cambria", "Cambria Math", "Century", "Century Gothic", "Century Schoolbook", "Comic Sans", "Comic Sans MS", "Consolas", "Courier", "Courier New", "Garamond", "Geneva", "Georgia", "Helvetica", "Helvetica Neue", "Impact", "Lucida Bright", "Lucida Calligraphy", "Lucida Console", "Lucida Fax", "LUCIDA GRANDE", "Lucida Handwriting", "Lucida Sans", "Lucida Sans Typewriter", "Lucida Sans Unicode", "Microsoft Sans Serif", "Monaco", "Monotype Corsiva", "MS Gothic", "MS Outlook", "MS PGothic", "MS Reference Sans Serif", "MS Sans Serif", "MS Serif", "MYRIAD", "MYRIAD PRO", "Palatino", "Palatino Linotype", "Segoe Print", "Segoe Script", "Segoe UI", "Segoe UI Light", "Segoe UI Semibold", "Segoe UI Symbol", "Tahoma", "Times", "Times New Roman", "Times New Roman PS", "Trebuchet MS", "Verdana", "Wingdings", "Wingdings 2", "Wingdings 3"];
      var extendedFontList = ["Abadi MT Condensed Light", "Academy Engraved LET", "ADOBE CASLON PRO", "Adobe Garamond", "ADOBE GARAMOND PRO", "Agency FB", "Aharoni", "Albertus Extra Bold", "Albertus Medium", "Algerian", "Amazone BT", "American Typewriter", "American Typewriter Condensed", "AmerType Md BT", "Andalus", "Angsana New", "AngsanaUPC", "Antique Olive", "Aparajita", "Apple Chancery", "Apple Color Emoji", "Apple SD Gothic Neo", "Arabic Typesetting", "ARCHER", "ARNO PRO", "Arrus BT", "Aurora Cn BT", "AvantGarde Bk BT", "AvantGarde Md BT", "AVENIR", "Ayuthaya", "Bandy", "Bangla Sangam MN", "Bank Gothic", "BankGothic Md BT", "Baskerville", "Baskerville Old Face", "Batang", "BatangChe", "Bauer Bodoni", "Bauhaus 93", "Bazooka", "Bell MT", "Bembo", "Benguiat Bk BT", "Berlin Sans FB", "Berlin Sans FB Demi", "Bernard MT Condensed", "BernhardFashion BT", "BernhardMod BT", "Big Caslon", "BinnerD", "Blackadder ITC", "BlairMdITC TT", "Bodoni 72", "Bodoni 72 Oldstyle", "Bodoni 72 Smallcaps", "Bodoni MT", "Bodoni MT Black", "Bodoni MT Condensed", "Bodoni MT Poster Compressed", "Bookshelf Symbol 7", "Boulder", "Bradley Hand", "Bradley Hand ITC", "Bremen Bd BT", "Britannic Bold", "Broadway", "Browallia New", "BrowalliaUPC", "Brush Script MT", "Californian FB", "Calisto MT", "Calligrapher", "Candara", "CaslonOpnface BT", "Castellar", "Centaur", "Cezanne", "CG Omega", "CG Times", "Chalkboard", "Chalkboard SE", "Chalkduster", "Charlesworth", "Charter Bd BT", "Charter BT", "Chaucer", "ChelthmITC Bk BT", "Chiller", "Clarendon", "Clarendon Condensed", "CloisterBlack BT", "Cochin", "Colonna MT", "Constantia", "Cooper Black", "Copperplate", "Copperplate Gothic", "Copperplate Gothic Bold", "Copperplate Gothic Light", "CopperplGoth Bd BT", "Corbel", "Cordia New", "CordiaUPC", "Cornerstone", "Coronet", "Cuckoo", "Curlz MT", "DaunPenh", "Dauphin", "David", "DB LCD Temp", "DELICIOUS", "Denmark", "DFKai-SB", "Didot", "DilleniaUPC", "DIN", "DokChampa", "Dotum", "DotumChe", "Ebrima", "Edwardian Script ITC", "Elephant", "English 111 Vivace BT", "Engravers MT", "EngraversGothic BT", "Eras Bold ITC", "Eras Demi ITC", "Eras Light ITC", "Eras Medium ITC", "EucrosiaUPC", "Euphemia", "Euphemia UCAS", "EUROSTILE", "Exotc350 Bd BT", "FangSong", "Felix Titling", "Fixedsys", "FONTIN", "Footlight MT Light", "Forte", "FrankRuehl", "Fransiscan", "Freefrm721 Blk BT", "FreesiaUPC", "Freestyle Script", "French Script MT", "FrnkGothITC Bk BT", "Fruitger", "FRUTIGER", "Futura", "Futura Bk BT", "Futura Lt BT", "Futura Md BT", "Futura ZBlk BT", "FuturaBlack BT", "Gabriola", "Galliard BT", "Gautami", "Geeza Pro", "Geometr231 BT", "Geometr231 Hv BT", "Geometr231 Lt BT", "GeoSlab 703 Lt BT", "GeoSlab 703 XBd BT", "Gigi", "Gill Sans", "Gill Sans MT", "Gill Sans MT Condensed", "Gill Sans MT Ext Condensed Bold", "Gill Sans Ultra Bold", "Gill Sans Ultra Bold Condensed", "Gisha", "Gloucester MT Extra Condensed", "GOTHAM", "GOTHAM BOLD", "Goudy Old Style", "Goudy Stout", "GoudyHandtooled BT", "GoudyOLSt BT", "Gujarati Sangam MN", "Gulim", "GulimChe", "Gungsuh", "GungsuhChe", "Gurmukhi MN", "Haettenschweiler", "Harlow Solid Italic", "Harrington", "Heather", "Heiti SC", "Heiti TC", "HELV", "Herald", "High Tower Text", "Hiragino Kaku Gothic ProN", "Hiragino Mincho ProN", "Hoefler Text", "Humanst 521 Cn BT", "Humanst521 BT", "Humanst521 Lt BT", "Imprint MT Shadow", "Incised901 Bd BT", "Incised901 BT", "Incised901 Lt BT", "INCONSOLATA", "Informal Roman", "Informal011 BT", "INTERSTATE", "IrisUPC", "Iskoola Pota", "JasmineUPC", "Jazz LET", "Jenson", "Jester", "Jokerman", "Juice ITC", "Kabel Bk BT", "Kabel Ult BT", "Kailasa", "KaiTi", "Kalinga", "Kannada Sangam MN", "Kartika", "Kaufmann Bd BT", "Kaufmann BT", "Khmer UI", "KodchiangUPC", "Kokila", "Korinna BT", "Kristen ITC", "Krungthep", "Kunstler Script", "Lao UI", "Latha", "Leelawadee", "Letter Gothic", "Levenim MT", "LilyUPC", "Lithograph", "Lithograph Light", "Long Island", "Lydian BT", "Magneto", "Maiandra GD", "Malayalam Sangam MN", "Malgun Gothic", "Mangal", "Marigold", "Marion", "Marker Felt", "Market", "Marlett", "Matisse ITC", "Matura MT Script Capitals", "Meiryo", "Meiryo UI", "Microsoft Himalaya", "Microsoft JhengHei", "Microsoft New Tai Lue", "Microsoft PhagsPa", "Microsoft Tai Le", "Microsoft Uighur", "Microsoft YaHei", "Microsoft Yi Baiti", "MingLiU", "MingLiU_HKSCS", "MingLiU_HKSCS-ExtB", "MingLiU-ExtB", "Minion", "Minion Pro", "Miriam", "Miriam Fixed", "Mistral", "Modern", "Modern No. 20", "Mona Lisa Solid ITC TT", "Mongolian Baiti", "MONO", "MoolBoran", "Mrs Eaves", "MS LineDraw", "MS Mincho", "MS PMincho", "MS Reference Specialty", "MS UI Gothic", "MT Extra", "MUSEO", "MV Boli", "Nadeem", "Narkisim", "NEVIS", "News Gothic", "News GothicMT", "NewsGoth BT", "Niagara Engraved", "Niagara Solid", "Noteworthy", "NSimSun", "Nyala", "OCR A Extended", "Old Century", "Old English Text MT", "Onyx", "Onyx BT", "OPTIMA", "Oriya Sangam MN", "OSAKA", "OzHandicraft BT", "Palace Script MT", "Papyrus", "Parchment", "Party LET", "Pegasus", "Perpetua", "Perpetua Titling MT", "PetitaBold", "Pickwick", "Plantagenet Cherokee", "Playbill", "PMingLiU", "PMingLiU-ExtB", "Poor Richard", "Poster", "PosterBodoni BT", "PRINCETOWN LET", "Pristina", "PTBarnum BT", "Pythagoras", "Raavi", "Rage Italic", "Ravie", "Ribbon131 Bd BT", "Rockwell", "Rockwell Condensed", "Rockwell Extra Bold", "Rod", "Roman", "Sakkal Majalla", "Santa Fe LET", "Savoye LET", "Sceptre", "Script", "Script MT Bold", "SCRIPTINA", "Serifa", "Serifa BT", "Serifa Th BT", "ShelleyVolante BT", "Sherwood", "Shonar Bangla", "Showcard Gothic", "Shruti", "Signboard", "SILKSCREEN", "SimHei", "Simplified Arabic", "Simplified Arabic Fixed", "SimSun", "SimSun-ExtB", "Sinhala Sangam MN", "Sketch Rockwell", "Skia", "Small Fonts", "Snap ITC", "Snell Roundhand", "Socket", "Souvenir Lt BT", "Staccato222 BT", "Steamer", "Stencil", "Storybook", "Styllo", "Subway", "Swis721 BlkEx BT", "Swiss911 XCm BT", "Sylfaen", "Synchro LET", "System", "Tamil Sangam MN", "Technical", "Teletype", "Telugu Sangam MN", "Tempus Sans ITC", "Terminal", "Thonburi", "Traditional Arabic", "Trajan", "TRAJAN PRO", "Tristan", "Tubular", "Tunga", "Tw Cen MT", "Tw Cen MT Condensed", "Tw Cen MT Condensed Extra Bold", "TypoUpright BT", "Unicorn", "Univers", "Univers CE 55 Medium", "Univers Condensed", "Utsaah", "Vagabond", "Vani", "Vijaya", "Viner Hand ITC", "VisualUI", "Vivaldi", "Vladimir Script", "Vrinda", "Westminster", "WHITNEY", "Wide Latin", "ZapfEllipt BT", "ZapfHumnst BT", "ZapfHumnst Dm BT", "Zapfino", "Zurich BlkEx BT", "Zurich Ex BT", "ZWAdobeF"];

      if (that.options.extendedJsFonts) {
        fontList = fontList.concat(extendedFontList);
      }

      fontList = fontList.concat(that.options.userDefinedFonts);

      //we use m or w because these two characters take up the maximum width.
      // And we use a LLi so that the same matching fonts can get separated
      var testString = "mmmmmmmmmmlli";

      //we test using 72px font size, we may use any size. I guess larger the better.
      var testSize = "72px";

      var h = document.getElementsByTagName("body")[0];

      // div to load spans for the base fonts
      var baseFontsDiv = document.createElement("div");

      // div to load spans for the fonts to detect
      var fontsDiv = document.createElement("div");

      var defaultWidth = {};
      var defaultHeight = {};

      // creates a span where the fonts will be loaded
      var createSpan = function createSpan() {
        var s = document.createElement("span");
        /*
         * We need this css as in some weird browser this
         * span elements shows up for a microSec which creates a
         * bad user experience
         */
        s.style.position = "absolute";
        s.style.left = "-9999px";
        s.style.fontSize = testSize;
        s.style.lineHeight = "normal";
        s.innerHTML = testString;
        return s;
      };

      // creates a span and load the font to detect and a base font for fallback
      var createSpanWithFonts = function createSpanWithFonts(fontToDetect, baseFont) {
        var s = createSpan();
        s.style.fontFamily = "'" + fontToDetect + "'," + baseFont;
        return s;
      };

      // creates spans for the base fonts and adds them to baseFontsDiv
      var initializeBaseFontsSpans = function initializeBaseFontsSpans() {
        var spans = [];
        for (var index = 0, length = baseFonts.length; index < length; index++) {
          var s = createSpan();
          s.style.fontFamily = baseFonts[index];
          baseFontsDiv.appendChild(s);
          spans.push(s);
        }
        return spans;
      };

      // creates spans for the fonts to detect and adds them to fontsDiv
      var initializeFontsSpans = function initializeFontsSpans() {
        var spans = {};
        for (var i = 0, l = fontList.length; i < l; i++) {
          var fontSpans = [];
          for (var j = 0, numDefaultFonts = baseFonts.length; j < numDefaultFonts; j++) {
            var s = createSpanWithFonts(fontList[i], baseFonts[j]);
            fontsDiv.appendChild(s);
            fontSpans.push(s);
          }
          spans[fontList[i]] = fontSpans; // Stores {fontName : [spans for that font]}
        }
        return spans;
      };

      // checks if a font is available
      var isFontAvailable = function isFontAvailable(fontSpans) {
        var detected = false;
        for (var i = 0; i < baseFonts.length; i++) {
          detected = fontSpans[i].offsetWidth !== defaultWidth[baseFonts[i]] || fontSpans[i].offsetHeight !== defaultHeight[baseFonts[i]];
          if (detected) {
            return detected;
          }
        }
        return detected;
      };

      // create spans for base fonts
      var baseFontsSpans = initializeBaseFontsSpans();

      // add the spans to the DOM
      h.appendChild(baseFontsDiv);

      // get the default width for the three base fonts
      for (var index = 0, length = baseFonts.length; index < length; index++) {
        defaultWidth[baseFonts[index]] = baseFontsSpans[index].offsetWidth; // width for the default font
        defaultHeight[baseFonts[index]] = baseFontsSpans[index].offsetHeight; // height for the default font
      }

      // create spans for fonts to detect
      var fontsSpans = initializeFontsSpans();

      // add all the spans to the DOM
      h.appendChild(fontsDiv);

      // check available fonts
      var available = [];
      for (var i = 0, l = fontList.length; i < l; i++) {
        if (isFontAvailable(fontsSpans[fontList[i]])) {
          available.push(fontList[i]);
        }
      }

      // remove spans from DOM
      h.removeChild(fontsDiv);
      h.removeChild(baseFontsDiv);

      keys.push({ key: "js_fonts", value: available });
      done(keys);
    }, 1);
  },
  pluginsKey: function pluginsKey(keys) {
    if (!this.options.excludePlugins) {
      if (this.isIE()) {
        if (!this.options.excludeIEPlugins) {
          keys.push({ key: "ie_plugins", value: this.getIEPlugins() });
        }
      } else {
        keys.push({ key: "regular_plugins", value: this.getRegularPlugins() });
      }
    }
    return keys;
  },
  getRegularPlugins: function getRegularPlugins() {
    var plugins = [];
    for (var i = 0, l = navigator.plugins.length; i < l; i++) {
      plugins.push(navigator.plugins[i]);
    }
    // sorting plugins only for those user agents, that we know randomize the plugins
    // every time we try to enumerate them
    if (this.pluginsShouldBeSorted()) {
      plugins = plugins.sort(function (a, b) {
        if (a.name > b.name) {
          return 1;
        }
        if (a.name < b.name) {
          return -1;
        }
        return 0;
      });
    }
    return this.map(plugins, function (p) {
      var mimeTypes = this.map(p, function (mt) {
        return [mt.type, mt.suffixes].join("~");
      }).join(",");
      return [p.name, p.description, mimeTypes].join("::");
    }, this);
  },
  getIEPlugins: function getIEPlugins() {
    var result = [];
    if (Object.getOwnPropertyDescriptor && Object.getOwnPropertyDescriptor(window, "ActiveXObject") || "ActiveXObject" in window) {
      var names = ["AcroPDF.PDF", // Adobe PDF reader 7+
      "Adodb.Stream", "AgControl.AgControl", // Silverlight
      "DevalVRXCtrl.DevalVRXCtrl.1", "MacromediaFlashPaper.MacromediaFlashPaper", "Msxml2.DOMDocument", "Msxml2.XMLHTTP", "PDF.PdfCtrl", // Adobe PDF reader 6 and earlier, brrr
      "QuickTime.QuickTime", // QuickTime
      "QuickTimeCheckObject.QuickTimeCheck.1", "RealPlayer", "RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)", "RealVideo.RealVideo(tm) ActiveX Control (32-bit)", "Scripting.Dictionary", "SWCtl.SWCtl", // ShockWave player
      "Shell.UIHelper", "ShockwaveFlash.ShockwaveFlash", //flash plugin
      "Skype.Detection", "TDCCtl.TDCCtl", "WMPlayer.OCX", // Windows media player
      "rmocx.RealPlayer G2 Control", "rmocx.RealPlayer G2 Control.1"];
      // starting to detect plugins in IE
      result = this.map(names, function (name) {
        try {
          new ActiveXObject(name); // eslint-disable-no-new
          return name;
        } catch (e) {
          return null;
        }
      });
    }
    if (navigator.plugins) {
      result = result.concat(this.getRegularPlugins());
    }
    return result;
  },
  pluginsShouldBeSorted: function pluginsShouldBeSorted() {
    var should = false;
    for (var i = 0, l = this.options.sortPluginsFor.length; i < l; i++) {
      var re = this.options.sortPluginsFor[i];
      if (navigator.userAgent.match(re)) {
        should = true;
        break;
      }
    }
    return should;
  },
  touchSupportKey: function touchSupportKey(keys) {
    if (!this.options.excludeTouchSupport) {
      keys.push({ key: "touch_support", value: this.getTouchSupport() });
    }
    return keys;
  },
  hardwareConcurrencyKey: function hardwareConcurrencyKey(keys) {
    if (!this.options.excludeHardwareConcurrency) {
      keys.push({ key: "hardware_concurrency", value: this.getHardwareConcurrency() });
    }
    return keys;
  },
  hasSessionStorage: function hasSessionStorage() {
    try {
      return !!window.sessionStorage;
    } catch (e) {
      return true; // SecurityError when referencing it means it exists
    }
  },
  // https://bugzilla.mozilla.org/show_bug.cgi?id=781447
  hasLocalStorage: function hasLocalStorage() {
    try {
      return !!window.localStorage;
    } catch (e) {
      return true; // SecurityError when referencing it means it exists
    }
  },
  hasIndexedDB: function hasIndexedDB() {
    try {
      return !!window.indexedDB;
    } catch (e) {
      return true; // SecurityError when referencing it means it exists
    }
  },
  getHardwareConcurrency: function getHardwareConcurrency() {
    if (navigator.hardwareConcurrency) {
      return navigator.hardwareConcurrency;
    }
    return "unknown";
  },
  getNavigatorCpuClass: function getNavigatorCpuClass() {
    if (navigator.cpuClass) {
      return navigator.cpuClass;
    } else {
      return "unknown";
    }
  },
  getNavigatorPlatform: function getNavigatorPlatform() {
    if (navigator.platform) {
      return navigator.platform;
    } else {
      return "unknown";
    }
  },
  getDoNotTrack: function getDoNotTrack() {
    if (navigator.doNotTrack) {
      return navigator.doNotTrack;
    } else if (navigator.msDoNotTrack) {
      return navigator.msDoNotTrack;
    } else if (window.doNotTrack) {
      return window.doNotTrack;
    } else {
      return "unknown";
    }
  },
  // This is a crude and primitive touch screen detection.
  // It's not possible to currently reliably detect the  availability of a touch screen
  // with a JS, without actually subscribing to a touch event.
  // http://www.stucox.com/blog/you-cant-detect-a-touchscreen/
  // https://github.com/Modernizr/Modernizr/issues/548
  // method returns an array of 3 values:
  // maxTouchPoints, the success or failure of creating a TouchEvent,
  // and the availability of the 'ontouchstart' property
  getTouchSupport: function getTouchSupport() {
    var maxTouchPoints = 0;
    var touchEvent = false;
    if (typeof navigator.maxTouchPoints !== "undefined") {
      maxTouchPoints = navigator.maxTouchPoints;
    } else if (typeof navigator.msMaxTouchPoints !== "undefined") {
      maxTouchPoints = navigator.msMaxTouchPoints;
    }
    try {
      document.createEvent("TouchEvent");
      touchEvent = true;
    } catch (_) {/* squelch */}
    var touchStart = "ontouchstart" in window;
    return [maxTouchPoints, touchEvent, touchStart];
  },
  // https://www.browserleaks.com/canvas#how-does-it-work
  getCanvasFp: function getCanvasFp() {
    var result = [];
    // Very simple now, need to make it more complex (geo shapes etc)
    var canvas = document.createElement("canvas");
    canvas.width = 2000;
    canvas.height = 200;
    canvas.style.display = "inline";
    var ctx = canvas.getContext("2d");
    // detect browser support of canvas winding
    // http://blogs.adobe.com/webplatform/2013/01/30/winding-rules-in-canvas/
    // https://github.com/Modernizr/Modernizr/blob/master/feature-detects/canvas/winding.js
    ctx.rect(0, 0, 10, 10);
    ctx.rect(2, 2, 6, 6);
    result.push("canvas winding:" + (ctx.isPointInPath(5, 5, "evenodd") === false ? "yes" : "no"));

    ctx.textBaseline = "alphabetic";
    ctx.fillStyle = "#f60";
    ctx.fillRect(125, 1, 62, 20);
    ctx.fillStyle = "#069";
    // https://github.com/Valve/fingerprintjs2/issues/66
    if (this.options.dontUseFakeFontInCanvas) {
      ctx.font = "11pt Arial";
    } else {
      ctx.font = "11pt no-real-font-123";
    }
    ctx.fillText("Cwm fjordbank glyphs vext quiz, \uD83D\uDE03", 2, 15);
    ctx.fillStyle = "rgba(102, 204, 0, 0.2)";
    ctx.font = "18pt Arial";
    ctx.fillText("Cwm fjordbank glyphs vext quiz, \uD83D\uDE03", 4, 45);

    // canvas blending
    // http://blogs.adobe.com/webplatform/2013/01/28/blending-features-in-canvas/
    // http://jsfiddle.net/NDYV8/16/
    ctx.globalCompositeOperation = "multiply";
    ctx.fillStyle = "rgb(255,0,255)";
    ctx.beginPath();
    ctx.arc(50, 50, 50, 0, Math.PI * 2, true);
    ctx.closePath();
    ctx.fill();
    ctx.fillStyle = "rgb(0,255,255)";
    ctx.beginPath();
    ctx.arc(100, 50, 50, 0, Math.PI * 2, true);
    ctx.closePath();
    ctx.fill();
    ctx.fillStyle = "rgb(255,255,0)";
    ctx.beginPath();
    ctx.arc(75, 100, 50, 0, Math.PI * 2, true);
    ctx.closePath();
    ctx.fill();
    ctx.fillStyle = "rgb(255,0,255)";
    // canvas winding
    // http://blogs.adobe.com/webplatform/2013/01/30/winding-rules-in-canvas/
    // http://jsfiddle.net/NDYV8/19/
    ctx.arc(75, 75, 75, 0, Math.PI * 2, true);
    ctx.arc(75, 75, 25, 0, Math.PI * 2, true);
    ctx.fill("evenodd");

    result.push("canvas fp:" + canvas.toDataURL());
    return result.join("~");
  },

  getWebglFp: function getWebglFp() {
    var gl;
    var fa2s = function fa2s(fa) {
      gl.clearColor(0.0, 0.0, 0.0, 1.0);
      gl.enable(gl.DEPTH_TEST);
      gl.depthFunc(gl.LEQUAL);
      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
      return "[" + fa[0] + ", " + fa[1] + "]";
    };
    var maxAnisotropy = function maxAnisotropy(gl) {
      var anisotropy,
          ext = gl.getExtension("EXT_texture_filter_anisotropic") || gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic") || gl.getExtension("MOZ_EXT_texture_filter_anisotropic");
      return ext ? (anisotropy = gl.getParameter(ext.MAX_TEXTURE_MAX_ANISOTROPY_EXT), 0 === anisotropy && (anisotropy = 2), anisotropy) : null;
    };
    gl = this.getWebglCanvas();
    if (!gl) {
      return null;
    }
    // WebGL fingerprinting is a combination of techniques, found in MaxMind antifraud script & Augur fingerprinting.
    // First it draws a gradient object with shaders and convers the image to the Base64 string.
    // Then it enumerates all WebGL extensions & capabilities and appends them to the Base64 string, resulting in a huge WebGL string, potentially very unique on each device
    // Since iOS supports webgl starting from version 8.1 and 8.1 runs on several graphics chips, the results may be different across ios devices, but we need to verify it.
    var result = [];
    var vShaderTemplate = "attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}";
    var fShaderTemplate = "precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}";
    var vertexPosBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, vertexPosBuffer);
    var vertices = new Float32Array([-.2, -.9, 0, .4, -.26, 0, 0, .732134444, 0]);
    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
    vertexPosBuffer.itemSize = 3;
    vertexPosBuffer.numItems = 3;
    var program = gl.createProgram(),
        vshader = gl.createShader(gl.VERTEX_SHADER);
    gl.shaderSource(vshader, vShaderTemplate);
    gl.compileShader(vshader);
    var fshader = gl.createShader(gl.FRAGMENT_SHADER);
    gl.shaderSource(fshader, fShaderTemplate);
    gl.compileShader(fshader);
    gl.attachShader(program, vshader);
    gl.attachShader(program, fshader);
    gl.linkProgram(program);
    gl.useProgram(program);
    program.vertexPosAttrib = gl.getAttribLocation(program, "attrVertex");
    program.offsetUniform = gl.getUniformLocation(program, "uniformOffset");
    gl.enableVertexAttribArray(program.vertexPosArray);
    gl.vertexAttribPointer(program.vertexPosAttrib, vertexPosBuffer.itemSize, gl.FLOAT, !1, 0, 0);
    gl.uniform2f(program.offsetUniform, 1, 1);
    gl.drawArrays(gl.TRIANGLE_STRIP, 0, vertexPosBuffer.numItems);
    if (gl.canvas != null) {
      result.push(gl.canvas.toDataURL());
    }
    result.push("extensions:" + gl.getSupportedExtensions().join(";"));
    result.push("webgl aliased line width range:" + fa2s(gl.getParameter(gl.ALIASED_LINE_WIDTH_RANGE)));
    result.push("webgl aliased point size range:" + fa2s(gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE)));
    result.push("webgl alpha bits:" + gl.getParameter(gl.ALPHA_BITS));
    result.push("webgl antialiasing:" + (gl.getContextAttributes().antialias ? "yes" : "no"));
    result.push("webgl blue bits:" + gl.getParameter(gl.BLUE_BITS));
    result.push("webgl depth bits:" + gl.getParameter(gl.DEPTH_BITS));
    result.push("webgl green bits:" + gl.getParameter(gl.GREEN_BITS));
    result.push("webgl max anisotropy:" + maxAnisotropy(gl));
    result.push("webgl max combined texture image units:" + gl.getParameter(gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS));
    result.push("webgl max cube map texture size:" + gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE));
    result.push("webgl max fragment uniform vectors:" + gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS));
    result.push("webgl max render buffer size:" + gl.getParameter(gl.MAX_RENDERBUFFER_SIZE));
    result.push("webgl max texture image units:" + gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS));
    result.push("webgl max texture size:" + gl.getParameter(gl.MAX_TEXTURE_SIZE));
    result.push("webgl max varying vectors:" + gl.getParameter(gl.MAX_VARYING_VECTORS));
    result.push("webgl max vertex attribs:" + gl.getParameter(gl.MAX_VERTEX_ATTRIBS));
    result.push("webgl max vertex texture image units:" + gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS));
    result.push("webgl max vertex uniform vectors:" + gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS));
    result.push("webgl max viewport dims:" + fa2s(gl.getParameter(gl.MAX_VIEWPORT_DIMS)));
    result.push("webgl red bits:" + gl.getParameter(gl.RED_BITS));
    result.push("webgl renderer:" + gl.getParameter(gl.RENDERER));
    result.push("webgl shading language version:" + gl.getParameter(gl.SHADING_LANGUAGE_VERSION));
    result.push("webgl stencil bits:" + gl.getParameter(gl.STENCIL_BITS));
    result.push("webgl vendor:" + gl.getParameter(gl.VENDOR));
    result.push("webgl version:" + gl.getParameter(gl.VERSION));

    try {
      // Add the unmasked vendor and unmasked renderer if the debug_renderer_info extension is available
      var extensionDebugRendererInfo = gl.getExtension("WEBGL_debug_renderer_info");
      if (extensionDebugRendererInfo) {
        result.push("webgl unmasked vendor:" + gl.getParameter(extensionDebugRendererInfo.UNMASKED_VENDOR_WEBGL));
        result.push("webgl unmasked renderer:" + gl.getParameter(extensionDebugRendererInfo.UNMASKED_RENDERER_WEBGL));
      }
    } catch (e) {/* squelch */}

    if (!gl.getShaderPrecisionFormat) {
      return result.join("~");
    }

    result.push("webgl vertex shader high float precision:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision);
    result.push("webgl vertex shader high float precision rangeMin:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).rangeMin);
    result.push("webgl vertex shader high float precision rangeMax:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).rangeMax);
    result.push("webgl vertex shader medium float precision:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision);
    result.push("webgl vertex shader medium float precision rangeMin:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).rangeMin);
    result.push("webgl vertex shader medium float precision rangeMax:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).rangeMax);
    result.push("webgl vertex shader low float precision:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT).precision);
    result.push("webgl vertex shader low float precision rangeMin:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT).rangeMin);
    result.push("webgl vertex shader low float precision rangeMax:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_FLOAT).rangeMax);
    result.push("webgl fragment shader high float precision:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision);
    result.push("webgl fragment shader high float precision rangeMin:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).rangeMin);
    result.push("webgl fragment shader high float precision rangeMax:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).rangeMax);
    result.push("webgl fragment shader medium float precision:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).precision);
    result.push("webgl fragment shader medium float precision rangeMin:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).rangeMin);
    result.push("webgl fragment shader medium float precision rangeMax:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).rangeMax);
    result.push("webgl fragment shader low float precision:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT).precision);
    result.push("webgl fragment shader low float precision rangeMin:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT).rangeMin);
    result.push("webgl fragment shader low float precision rangeMax:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_FLOAT).rangeMax);
    result.push("webgl vertex shader high int precision:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_INT).precision);
    result.push("webgl vertex shader high int precision rangeMin:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_INT).rangeMin);
    result.push("webgl vertex shader high int precision rangeMax:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_INT).rangeMax);
    result.push("webgl vertex shader medium int precision:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_INT).precision);
    result.push("webgl vertex shader medium int precision rangeMin:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_INT).rangeMin);
    result.push("webgl vertex shader medium int precision rangeMax:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_INT).rangeMax);
    result.push("webgl vertex shader low int precision:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_INT).precision);
    result.push("webgl vertex shader low int precision rangeMin:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_INT).rangeMin);
    result.push("webgl vertex shader low int precision rangeMax:" + gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.LOW_INT).rangeMax);
    result.push("webgl fragment shader high int precision:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_INT).precision);
    result.push("webgl fragment shader high int precision rangeMin:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_INT).rangeMin);
    result.push("webgl fragment shader high int precision rangeMax:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_INT).rangeMax);
    result.push("webgl fragment shader medium int precision:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_INT).precision);
    result.push("webgl fragment shader medium int precision rangeMin:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_INT).rangeMin);
    result.push("webgl fragment shader medium int precision rangeMax:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_INT).rangeMax);
    result.push("webgl fragment shader low int precision:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_INT).precision);
    result.push("webgl fragment shader low int precision rangeMin:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_INT).rangeMin);
    result.push("webgl fragment shader low int precision rangeMax:" + gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.LOW_INT).rangeMax);
    return result.join("~");
  },
  getAdBlock: function getAdBlock() {
    var ads = document.createElement("div");
    ads.innerHTML = "&nbsp;";
    ads.className = "adsbox";
    var result = false;
    try {
      // body may not exist, that's why we need try/catch
      document.body.appendChild(ads);
      result = document.getElementsByClassName("adsbox")[0].offsetHeight === 0;
      document.body.removeChild(ads);
    } catch (e) {
      result = false;
    }
    return result;
  },
  getHasLiedLanguages: function getHasLiedLanguages() {
    //We check if navigator.language is equal to the first language of navigator.languages
    if (typeof navigator.languages !== "undefined") {
      try {
        var firstLanguages = navigator.languages[0].substr(0, 2);
        if (firstLanguages !== navigator.language.substr(0, 2)) {
          return true;
        }
      } catch (err) {
        return true;
      }
    }
    return false;
  },
  getHasLiedResolution: function getHasLiedResolution() {
    if (screen.width < screen.availWidth) {
      return true;
    }
    if (screen.height < screen.availHeight) {
      return true;
    }
    return false;
  },
  getHasLiedOs: function getHasLiedOs() {
    var userAgent = navigator.userAgent.toLowerCase();
    var oscpu = navigator.oscpu;
    var platform = navigator.platform.toLowerCase();
    var os;
    //We extract the OS from the user agent (respect the order of the if else if statement)
    if (userAgent.indexOf("windows phone") >= 0) {
      os = "Windows Phone";
    } else if (userAgent.indexOf("win") >= 0) {
      os = "Windows";
    } else if (userAgent.indexOf("android") >= 0) {
      os = "Android";
    } else if (userAgent.indexOf("linux") >= 0) {
      os = "Linux";
    } else if (userAgent.indexOf("iphone") >= 0 || userAgent.indexOf("ipad") >= 0) {
      os = "iOS";
    } else if (userAgent.indexOf("mac") >= 0) {
      os = "Mac";
    } else {
      os = "Other";
    }
    // We detect if the person uses a mobile device
    var mobileDevice;
    if ("ontouchstart" in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0) {
      mobileDevice = true;
    } else {
      mobileDevice = false;
    }

    if (mobileDevice && os !== "Windows Phone" && os !== "Android" && os !== "iOS" && os !== "Other") {
      return true;
    }

    // We compare oscpu with the OS extracted from the UA
    if (typeof oscpu !== "undefined") {
      oscpu = oscpu.toLowerCase();
      if (oscpu.indexOf("win") >= 0 && os !== "Windows" && os !== "Windows Phone") {
        return true;
      } else if (oscpu.indexOf("linux") >= 0 && os !== "Linux" && os !== "Android") {
        return true;
      } else if (oscpu.indexOf("mac") >= 0 && os !== "Mac" && os !== "iOS") {
        return true;
      } else if (oscpu.indexOf("win") === 0 && oscpu.indexOf("linux") === 0 && oscpu.indexOf("mac") >= 0 && os !== "other") {
        return true;
      }
    }

    //We compare platform with the OS extracted from the UA
    if (platform.indexOf("win") >= 0 && os !== "Windows" && os !== "Windows Phone") {
      return true;
    } else if ((platform.indexOf("linux") >= 0 || platform.indexOf("android") >= 0 || platform.indexOf("pike") >= 0) && os !== "Linux" && os !== "Android") {
      return true;
    } else if ((platform.indexOf("mac") >= 0 || platform.indexOf("ipad") >= 0 || platform.indexOf("ipod") >= 0 || platform.indexOf("iphone") >= 0) && os !== "Mac" && os !== "iOS") {
      return true;
    } else if (platform.indexOf("win") === 0 && platform.indexOf("linux") === 0 && platform.indexOf("mac") >= 0 && os !== "other") {
      return true;
    }

    if (typeof navigator.plugins === "undefined" && os !== "Windows" && os !== "Windows Phone") {
      //We are are in the case where the person uses ie, therefore we can infer that it's windows
      return true;
    }

    return false;
  },
  getHasLiedBrowser: function getHasLiedBrowser() {
    var userAgent = navigator.userAgent.toLowerCase();
    var productSub = navigator.productSub;

    //we extract the browser from the user agent (respect the order of the tests)
    var browser;
    if (userAgent.indexOf("firefox") >= 0) {
      browser = "Firefox";
    } else if (userAgent.indexOf("opera") >= 0 || userAgent.indexOf("opr") >= 0) {
      browser = "Opera";
    } else if (userAgent.indexOf("chrome") >= 0) {
      browser = "Chrome";
    } else if (userAgent.indexOf("safari") >= 0) {
      browser = "Safari";
    } else if (userAgent.indexOf("trident") >= 0) {
      browser = "Internet Explorer";
    } else {
      browser = "Other";
    }

    if ((browser === "Chrome" || browser === "Safari" || browser === "Opera") && productSub !== "20030107") {
      return true;
    }

    var tempRes = eval.toString().length;
    if (tempRes === 37 && browser !== "Safari" && browser !== "Firefox" && browser !== "Other") {
      return true;
    } else if (tempRes === 39 && browser !== "Internet Explorer" && browser !== "Other") {
      return true;
    } else if (tempRes === 33 && browser !== "Chrome" && browser !== "Opera" && browser !== "Other") {
      return true;
    }

    //We create an error to see how it is handled
    var errFirefox;
    try {
      throw "a";
    } catch (err) {
      try {
        err.toSource();
        errFirefox = true;
      } catch (errOfErr) {
        errFirefox = false;
      }
    }
    if (errFirefox && browser !== "Firefox" && browser !== "Other") {
      return true;
    }
    return false;
  },
  isCanvasSupported: function isCanvasSupported() {
    var elem = document.createElement("canvas");
    return !!(elem.getContext && elem.getContext("2d"));
  },
  isWebGlSupported: function isWebGlSupported() {
    // code taken from Modernizr
    if (!this.isCanvasSupported()) {
      return false;
    }

    var canvas = document.createElement("canvas"),
        glContext;

    try {
      glContext = canvas.getContext && (canvas.getContext("webgl") || canvas.getContext("experimental-webgl"));
    } catch (e) {
      glContext = false;
    }

    return !!window.WebGLRenderingContext && !!glContext;
  },
  isIE: function isIE() {
    if (navigator.appName === "Microsoft Internet Explorer") {
      return true;
    } else if (navigator.appName === "Netscape" && /Trident/.test(navigator.userAgent)) {
      // IE 11
      return true;
    }
    return false;
  },
  // hasSwfObjectLoaded: function () {
  //   return typeof window.swfobject !== "undefined";
  // },
  // hasMinFlashInstalled: function () {
  //   return swfobject.hasFlashPlayerVersion("9.0.0");
  // },
  // addFlashDivNode: function () {
  //   var node = document.createElement("div");
  //   node.setAttribute("id", this.options.swfContainerId);
  //   document.body.appendChild(node);
  // },
  // loadSwfAndDetectFonts: function (done) {
  //   var hiddenCallback = "___fp_swf_loaded";
  //   window[hiddenCallback] = function (fonts) {
  //     done(fonts);
  //   };
  //   var id = this.options.swfContainerId;
  //   this.addFlashDivNode();
  //   var flashvars = { onReady: hiddenCallback };
  //   var flashparams = { allowScriptAccess: "always", menu: "false" };
  //   swfobject.embedSWF(this.options.swfPath, id, "1", "1", "9.0.0", false, flashvars, flashparams, {});
  // },
  getWebglCanvas: function getWebglCanvas() {
    var canvas = document.createElement("canvas");
    var gl = null;
    try {
      gl = canvas.getContext("webgl") || canvas.getContext("experimental-webgl");
    } catch (e) {/* squelch */}
    if (!gl) {
      gl = null;
    }
    return gl;
  },
  each: function each(obj, iterator, context) {
    if (obj === null) {
      return;
    }
    if (this.nativeForEach && obj.forEach === this.nativeForEach) {
      obj.forEach(iterator, context);
    } else if (obj.length === +obj.length) {
      for (var i = 0, l = obj.length; i < l; i++) {
        if (iterator.call(context, obj[i], i, obj) === {}) {
          return;
        }
      }
    } else {
      for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
          if (iterator.call(context, obj[key], key, obj) === {}) {
            return;
          }
        }
      }
    }
  },

  map: function map(obj, iterator, context) {
    var results = [];
    // Not using strict equality so that this acts as a
    // shortcut to checking for `null` and `undefined`.
    if (obj == null) {
      return results;
    }
    if (this.nativeMap && obj.map === this.nativeMap) {
      return obj.map(iterator, context);
    }
    this.each(obj, function (value, index, list) {
      results[results.length] = iterator.call(context, value, index, list);
    });
    return results;
  },

  /// MurmurHash3 related functions

  //
  // Given two 64bit ints (as an array of two 32bit ints) returns the two
  // added together as a 64bit int (as an array of two 32bit ints).
  //
  x64Add: function x64Add(m, n) {
    m = [m[0] >>> 16, m[0] & 0xffff, m[1] >>> 16, m[1] & 0xffff];
    n = [n[0] >>> 16, n[0] & 0xffff, n[1] >>> 16, n[1] & 0xffff];
    var o = [0, 0, 0, 0];
    o[3] += m[3] + n[3];
    o[2] += o[3] >>> 16;
    o[3] &= 0xffff;
    o[2] += m[2] + n[2];
    o[1] += o[2] >>> 16;
    o[2] &= 0xffff;
    o[1] += m[1] + n[1];
    o[0] += o[1] >>> 16;
    o[1] &= 0xffff;
    o[0] += m[0] + n[0];
    o[0] &= 0xffff;
    return [o[0] << 16 | o[1], o[2] << 16 | o[3]];
  },

  //
  // Given two 64bit ints (as an array of two 32bit ints) returns the two
  // multiplied together as a 64bit int (as an array of two 32bit ints).
  //
  x64Multiply: function x64Multiply(m, n) {
    m = [m[0] >>> 16, m[0] & 0xffff, m[1] >>> 16, m[1] & 0xffff];
    n = [n[0] >>> 16, n[0] & 0xffff, n[1] >>> 16, n[1] & 0xffff];
    var o = [0, 0, 0, 0];
    o[3] += m[3] * n[3];
    o[2] += o[3] >>> 16;
    o[3] &= 0xffff;
    o[2] += m[2] * n[3];
    o[1] += o[2] >>> 16;
    o[2] &= 0xffff;
    o[2] += m[3] * n[2];
    o[1] += o[2] >>> 16;
    o[2] &= 0xffff;
    o[1] += m[1] * n[3];
    o[0] += o[1] >>> 16;
    o[1] &= 0xffff;
    o[1] += m[2] * n[2];
    o[0] += o[1] >>> 16;
    o[1] &= 0xffff;
    o[1] += m[3] * n[1];
    o[0] += o[1] >>> 16;
    o[1] &= 0xffff;
    o[0] += m[0] * n[3] + m[1] * n[2] + m[2] * n[1] + m[3] * n[0];
    o[0] &= 0xffff;
    return [o[0] << 16 | o[1], o[2] << 16 | o[3]];
  },
  //
  // Given a 64bit int (as an array of two 32bit ints) and an int
  // representing a number of bit positions, returns the 64bit int (as an
  // array of two 32bit ints) rotated left by that number of positions.
  //
  x64Rotl: function x64Rotl(m, n) {
    n %= 64;
    if (n === 32) {
      return [m[1], m[0]];
    } else if (n < 32) {
      return [m[0] << n | m[1] >>> 32 - n, m[1] << n | m[0] >>> 32 - n];
    } else {
      n -= 32;
      return [m[1] << n | m[0] >>> 32 - n, m[0] << n | m[1] >>> 32 - n];
    }
  },
  //
  // Given a 64bit int (as an array of two 32bit ints) and an int
  // representing a number of bit positions, returns the 64bit int (as an
  // array of two 32bit ints) shifted left by that number of positions.
  //
  x64LeftShift: function x64LeftShift(m, n) {
    n %= 64;
    if (n === 0) {
      return m;
    } else if (n < 32) {
      return [m[0] << n | m[1] >>> 32 - n, m[1] << n];
    } else {
      return [m[1] << n - 32, 0];
    }
  },
  //
  // Given two 64bit ints (as an array of two 32bit ints) returns the two
  // xored together as a 64bit int (as an array of two 32bit ints).
  //
  x64Xor: function x64Xor(m, n) {
    return [m[0] ^ n[0], m[1] ^ n[1]];
  },
  //
  // Given a block, returns murmurHash3's final x64 mix of that block.
  // (`[0, h[0] >>> 1]` is a 33 bit unsigned right shift. This is the
  // only place where we need to right shift 64bit ints.)
  //
  x64Fmix: function x64Fmix(h) {
    h = this.x64Xor(h, [0, h[0] >>> 1]);
    h = this.x64Multiply(h, [0xff51afd7, 0xed558ccd]);
    h = this.x64Xor(h, [0, h[0] >>> 1]);
    h = this.x64Multiply(h, [0xc4ceb9fe, 0x1a85ec53]);
    h = this.x64Xor(h, [0, h[0] >>> 1]);
    return h;
  },

  //
  // Given a string and an optional seed as an int, returns a 128 bit
  // hash using the x64 flavor of MurmurHash3, as an unsigned hex.
  //
  x64hash128: function x64hash128(key, seed) {
    key = key || "";
    seed = seed || 0;
    var remainder = key.length % 16;
    var bytes = key.length - remainder;
    var h1 = [0, seed];
    var h2 = [0, seed];
    var k1 = [0, 0];
    var k2 = [0, 0];
    var c1 = [0x87c37b91, 0x114253d5];
    var c2 = [0x4cf5ad43, 0x2745937f];
    for (var i = 0; i < bytes; i = i + 16) {
      k1 = [key.charCodeAt(i + 4) & 0xff | (key.charCodeAt(i + 5) & 0xff) << 8 | (key.charCodeAt(i + 6) & 0xff) << 16 | (key.charCodeAt(i + 7) & 0xff) << 24, key.charCodeAt(i) & 0xff | (key.charCodeAt(i + 1) & 0xff) << 8 | (key.charCodeAt(i + 2) & 0xff) << 16 | (key.charCodeAt(i + 3) & 0xff) << 24];
      k2 = [key.charCodeAt(i + 12) & 0xff | (key.charCodeAt(i + 13) & 0xff) << 8 | (key.charCodeAt(i + 14) & 0xff) << 16 | (key.charCodeAt(i + 15) & 0xff) << 24, key.charCodeAt(i + 8) & 0xff | (key.charCodeAt(i + 9) & 0xff) << 8 | (key.charCodeAt(i + 10) & 0xff) << 16 | (key.charCodeAt(i + 11) & 0xff) << 24];
      k1 = this.x64Multiply(k1, c1);
      k1 = this.x64Rotl(k1, 31);
      k1 = this.x64Multiply(k1, c2);
      h1 = this.x64Xor(h1, k1);
      h1 = this.x64Rotl(h1, 27);
      h1 = this.x64Add(h1, h2);
      h1 = this.x64Add(this.x64Multiply(h1, [0, 5]), [0, 0x52dce729]);
      k2 = this.x64Multiply(k2, c2);
      k2 = this.x64Rotl(k2, 33);
      k2 = this.x64Multiply(k2, c1);
      h2 = this.x64Xor(h2, k2);
      h2 = this.x64Rotl(h2, 31);
      h2 = this.x64Add(h2, h1);
      h2 = this.x64Add(this.x64Multiply(h2, [0, 5]), [0, 0x38495ab5]);
    }
    k1 = [0, 0];
    k2 = [0, 0];
    switch (remainder) {
      case 15:
        k2 = this.x64Xor(k2, this.x64LeftShift([0, key.charCodeAt(i + 14)], 48));
      case 14:
        k2 = this.x64Xor(k2, this.x64LeftShift([0, key.charCodeAt(i + 13)], 40));
      case 13:
        k2 = this.x64Xor(k2, this.x64LeftShift([0, key.charCodeAt(i + 12)], 32));
      case 12:
        k2 = this.x64Xor(k2, this.x64LeftShift([0, key.charCodeAt(i + 11)], 24));
      case 11:
        k2 = this.x64Xor(k2, this.x64LeftShift([0, key.charCodeAt(i + 10)], 16));
      case 10:
        k2 = this.x64Xor(k2, this.x64LeftShift([0, key.charCodeAt(i + 9)], 8));
      case 9:
        k2 = this.x64Xor(k2, [0, key.charCodeAt(i + 8)]);
        k2 = this.x64Multiply(k2, c2);
        k2 = this.x64Rotl(k2, 33);
        k2 = this.x64Multiply(k2, c1);
        h2 = this.x64Xor(h2, k2);
      case 8:
        k1 = this.x64Xor(k1, this.x64LeftShift([0, key.charCodeAt(i + 7)], 56));
      case 7:
        k1 = this.x64Xor(k1, this.x64LeftShift([0, key.charCodeAt(i + 6)], 48));
      case 6:
        k1 = this.x64Xor(k1, this.x64LeftShift([0, key.charCodeAt(i + 5)], 40));
      case 5:
        k1 = this.x64Xor(k1, this.x64LeftShift([0, key.charCodeAt(i + 4)], 32));
      case 4:
        k1 = this.x64Xor(k1, this.x64LeftShift([0, key.charCodeAt(i + 3)], 24));
      case 3:
        k1 = this.x64Xor(k1, this.x64LeftShift([0, key.charCodeAt(i + 2)], 16));
      case 2:
        k1 = this.x64Xor(k1, this.x64LeftShift([0, key.charCodeAt(i + 1)], 8));
      case 1:
        k1 = this.x64Xor(k1, [0, key.charCodeAt(i)]);
        k1 = this.x64Multiply(k1, c1);
        k1 = this.x64Rotl(k1, 31);
        k1 = this.x64Multiply(k1, c2);
        h1 = this.x64Xor(h1, k1);
    }
    h1 = this.x64Xor(h1, [0, key.length]);
    h2 = this.x64Xor(h2, [0, key.length]);
    h1 = this.x64Add(h1, h2);
    h2 = this.x64Add(h2, h1);
    h1 = this.x64Fmix(h1);
    h2 = this.x64Fmix(h2);
    h1 = this.x64Add(h1, h2);
    h2 = this.x64Add(h2, h1);
    return ("00000000" + (h1[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (h1[1] >>> 0).toString(16)).slice(-8) + ("00000000" + (h2[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (h2[1] >>> 0).toString(16)).slice(-8);
  }
};
Fingerprint2.VERSION = "1.5.1";
// return Fingerprint2;

// check js environment
// if (typeof (exports) !== 'undefined') {
//   // nodejs env
//   if (typeof module !== 'undefined' && module.exports) {
//     exports = module.exports = Fingerprint2;
//   }
//   exports.Fingerprint2 = Fingerprint2;
// } else {
//   // requirejs env (optional)
//   if (typeof (define) === 'function' && define.amd) {
//     define(function () {
//       return Fingerprint2;
//     });
//   } else if (window) {
//     // browser env
//     window.Fingerprint2 = Fingerprint2;
//   }
// }

/* harmony default export */ __webpack_exports__["a"] = (Fingerprint2);

/***/ }),
/* 43 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__fingerprint__ = __webpack_require__(42);


var deviceRegular = {
    "Nexus": "Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",
    "meizu": "meizu|meizu-m2|m2 note",
    "xiaomi": "xiaomi"
};

var getDeviceId = function getDeviceId() {
    var ua = navigator.userAgent.toLowerCase();
    var result = {};
    if (/(iphone|ipad|ipod|ios)/i.test(ua)) {
        result.type = 'ios';
        result.device = 'ios'; // ios暂不用区分手机型号
        return result;
    } else if (/android/i.test(ua)) {
        result.type = 'android';
        for (var i in deviceRegular) {
            var match = new RegExp(deviceRegular[i], "ig").test(ua);
            if (match) {
                result.device = i;
                return result;
            }
        }
        result.device = 'android'; // 默认显示android
        return result;
    } else {
        // 检测不出ua，默认为android
        result.type = 'android';
        result.device = 'android';
        return result;
    }
};

var getFingerPrint = function () {
    // var options = { excludeUserAgent: true, excludeAvailableScreenResolution: true, excludeJsFonts: true, excludeAddBehavior: true, excludeAdBlock: true };
    var options = { excludeUserAgent: true, excludeAvailableScreenResolution: true };
    var did = getDeviceId();
    var fingerPrint = null;
    var details = [];
    var deleteFp = [];
    if (did.type === 'ios') {} else {
        // android
        switch (did.device) {
            case 'meizu':
                options.excludeOpenDatabase = true;
                // options.excludeWebGL  = true;           // sinanews,uc 没有WebGL， 微信有
                // options.excludeCanvas = true;           // 去掉其实不太好 微信的不一致的太多            
                // options.excludeHasLiedLanguages = true; // 微信:true, 其他false
                break;
            case 'xiaomi':
                options.excludeOpenDatabase = true;
                break;
            case 'Nexus':
                options.excludeWebGL = true;
                options.excludeCanvas = true;
                break;
            default:
                options.excludeOpenDatabase = true;
        }
    }
    var initFunc = function initFunc(type, fn) {
        var cbFn;
        if (typeof fn === 'function') {
            cbFn = fn;
        }
        if (type === 'all') {
            new __WEBPACK_IMPORTED_MODULE_0__fingerprint__["a" /* default */]().get(function (result, components) {
                fingerPrint = result;
                details = components;
                cbFn && cbFn({
                    fp: fingerPrint,
                    details: details,
                    deleteFp: deleteFp
                });
            });
        } else {
            for (var i in options) {
                deleteFp.push(i.replace("exclude", ""));
            }
            new __WEBPACK_IMPORTED_MODULE_0__fingerprint__["a" /* default */](options).get(function (result, components) {
                fingerPrint = result;
                details = components;
                cbFn && cbFn({
                    fp: fingerPrint,
                    details: details,
                    deleteFp: deleteFp
                });
            });
        }
    };

    return {
        init: function init(type, fn) {
            try {
                var init = 0;
                if (document.body) {
                    initFunc(type, fn);
                    init = 1;
                } else {
                    if (!init) {
                        document.addEventListener("DOMContentLoaded", function (event) {
                            initFunc(type, fn);
                        });
                        init = 1;
                    }
                }
            } catch (err) {
                console.log(err);
            }
        },
        get: function get() {
            return {
                fp: fingerPrint,
                details: details,
                deleteFp: deleteFp
            };
        }
    };
}();

/* harmony default export */ __webpack_exports__["a"] = (getFingerPrint);

/***/ }),
/* 44 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__template_bigVideoPic_ejs__ = __webpack_require__(33);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__template_bigVideoPic_ejs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__template_bigVideoPic_ejs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__template_picTxt_ejs__ = __webpack_require__(34);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__template_picTxt_ejs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__template_picTxt_ejs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__template_threePic_ejs__ = __webpack_require__(35);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__template_threePic_ejs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__template_threePic_ejs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__template_txtPic_ejs__ = __webpack_require__(36);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__template_txtPic_ejs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__template_txtPic_ejs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__template_bigPic_ejs__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__template_bigPic_ejs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__template_bigPic_ejs__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__template_wdBigPic_ejs__ = __webpack_require__(37);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__template_wdBigPic_ejs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__template_wdBigPic_ejs__);
/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, "d", function() { return __WEBPACK_IMPORTED_MODULE_0__template_bigVideoPic_ejs___default.a; });
/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_1__template_picTxt_ejs___default.a; });
/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, "c", function() { return __WEBPACK_IMPORTED_MODULE_2__template_threePic_ejs___default.a; });
/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, "b", function() { return __WEBPACK_IMPORTED_MODULE_3__template_txtPic_ejs___default.a; });
/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, "e", function() { return __WEBPACK_IMPORTED_MODULE_4__template_bigPic_ejs___default.a; });
/* harmony reexport (default from non-hamory) */ __webpack_require__.d(__webpack_exports__, "f", function() { return __WEBPACK_IMPORTED_MODULE_5__template_wdBigPic_ejs___default.a; });









/***/ }),
/* 45 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function getDom(el, dom) {
	while (dom) {
		if (typeof el == 'string') {
			if (/#/.test(el)) {
				if (dom.getAttribute && dom.getAttribute('id') === el.replace(/#/, function () {
					return '';
				})) {
					return dom;
				}
			} else if (/\./.test(el)) {
				if (dom.classList && dom.classList.contains(el.replace(/./, function () {
					return '';
				}))) {
					return dom;
				}
			} else {
				if (dom.nodeName && dom.nodeName.toLowerCase() == el) {
					return dom;
				}
			}
		} else if ((typeof el === 'undefined' ? 'undefined' : _typeof(el)) == 'object') {
			if (!el.length) {
				el = [el];
			}
			for (var i = 0; i < el.length; i++) {
				if (el[i] == dom) {
					return el[i];
				}
			}
		}
		dom = dom.parentNode;
	}
	return false;
};

/* harmony default export */ __webpack_exports__["a"] = (function (el, _ref, cb) {
	var _ref$finger = _ref.finger,
	    finger = _ref$finger === undefined ? 2 : _ref$finger,
	    _ref$number = _ref.number,
	    number = _ref$number === undefined ? 2 : _ref$number,
	    _ref$timer = _ref.timer,
	    timer = _ref$timer === undefined ? 500 : _ref$timer;

	var timelist = [];
	var index = 0;
	var fingerList = [];
	var timeouttimer = {};
	var minTimer = 60;

	function lengthTo0() {
		timelist.length = 0;
		fingerList.length = 0;
	}
	document.addEventListener('touchstart', function (ev) {
		var dom = getDom(el, ev.target);
		if (dom) {
			var time = new Date().getTime();
			timelist.push({
				time: time,
				dom: dom
			});
			if (ev.touches.length == finger) {
				for (var i = 1; i < finger; i++) {
					if (timelist[timelist.length - i].time - timelist[timelist.length - i - 1].time < minTimer) {
						for (var attr in timeouttimer) {
							clearTimeout(timeouttimer[attr]);
						}
						break;
					}
				}
				for (var i = 1; i < finger; i++) {
					if (timelist[timelist.length - i].dom != timelist[timelist.length - i - 1].dom) {
						for (var attr in timeouttimer) {
							clearTimeout(timeouttimer[attr]);
						}
						lengthTo0();
						break;
					}
				}
				timeouttimer[index++] = setTimeout(function () {
					fingerList.push(time);
					for (var i = 1; i < number; i++) {
						if (fingerList[fingerList.length - i] - fingerList[fingerList.length - i - 1] < timer) {} else {
							ev.preventDefault();
							return false;
						}
					}
					cb && cb(dom);
				}, minTimer);
				ev.preventDefault();
				return false;
			}
		} else {
			lengthTo0();
		}
	});
});

/***/ }),
/* 46 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__module_factory__ = __webpack_require__(51);


var lifeCircle = {
  init: function init(cb) {
    console.log('init');
  },
  ready: function ready(cb) {
    $(function () {
      // 扫描绑定组件对象与 DOM 元素
      var context = __WEBPACK_IMPORTED_MODULE_0__module_factory__["a" /* default */].init();

      typeof cb === 'function' && cb(context);
    });
  },
  destroy: function destroy() {
    console.log('destroy');
  }
};

/* harmony default export */ __webpack_exports__["a"] = (lifeCircle);

/***/ }),
/* 47 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return event; });
/* unused harmony export superEvent */
var _onObj = {};
var _oneObj = {};

var event = {
  /**
   * 监听事件
   * @param  {String}   key 事件名称
   * @param  {Function} fn  回调函数
   */
  on: function on(key, fn) {
    if (_onObj[key] === undefined) {
      _onObj[key] = [];
    }

    _onObj[key].push(fn);
  },
  one: function one(key, fn) {
    if (_oneObj[key] === undefined) {
      _oneObj[key] = [];
    }

    _oneObj[key].push(fn);
  },
  off: function off(key) {
    _onObj[key] = [];
    _oneObj[key] = [];
  },
  emit: function emit() {
    var key = void 0,
        args = void 0;
    if (!arguments.length) {
      return false;
    }

    key = arguments[0];
    args = [].concat(Array.prototype.slice.call(arguments, 1));

    if (_onObj[key] && _onObj[key].length) {
      for (var i in _onObj[key]) {
        _onObj[key][i].apply(null, args);
      }
    }

    if (_oneObj[key] && _oneObj[key].length) {
      for (var _i in this.oneObj[key]) {
        _oneObj[key][_i].apply(null, args);
        _oneObj[key][_i] = void 0;
      }
      _oneObj[key] = [];
    }
  }
};

var eventPlus = {
  showEvents: function showEvents(type) {
    var events = {
      on: Object.keys(_onObj),
      one: Object.keys(_oneObj)
    };

    return type ? events[type] : events;
  }
};

var superEvent = $.extend(eventPlus, event);



/***/ }),
/* 48 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(19);


var erudaUrl = '//mjs.sinaimg.cn/wap/online/others/eruda/eruda.min.js';
var mdebugUrl = '//mjs.sinaimg.cn/wap/online/public/mdebug/201706161130/js/index.min.js';

var fireMap = {
  _devtools: devtools,
  _mlog: mlog
};

function devtools(debugMode) {
  if (debugMode) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* load */])(erudaUrl, function () {
      window.eruda && window.eruda.init();
      console.log('[base-utils] eruda ready');
    });
  }
}

function mlog(debugMode) {
  if (debugMode) {
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* load */])(mdebugUrl, function () {
      console.log('[base-utils] mlog ready');
    });
  }
}

function init() {
  Object.keys(fireMap).forEach(function (key) {
    return fireMap[key](__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__utils_js__["b" /* getUrlParam */])(key));
  });
}

/* harmony default export */ __webpack_exports__["a"] = ({
  load: init,
  devtools: devtools,
  mlog: mlog
});

/***/ }),
/* 49 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export default */
/* unused harmony export FastClick */
/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */

/*jslint browser:true, node:true*/
/*global define, Event, Node*/

/**
 * Instantiate fast-clicking listeners on the specified layer.
 *
 * @constructor
 * @param {Element} layer The layer to listen on
 * @param {Object} [options={}] The options to override the defaults
 */
function FastClick(layer, options) {
  var oldOnClick;

  options = options || {};

  /**
   * Whether a click is currently being tracked.
   *
   * @type boolean
   */
  this.trackingClick = false;

  /**
   * Timestamp for when click tracking started.
   *
   * @type number
   */
  this.trackingClickStart = 0;

  /**
   * The element being tracked for a click.
   *
   * @type EventTarget
   */
  this.targetElement = null;

  /**
   * X-coordinate of touch start event.
   *
   * @type number
   */
  this.touchStartX = 0;

  /**
   * Y-coordinate of touch start event.
   *
   * @type number
   */
  this.touchStartY = 0;

  /**
   * ID of the last touch, retrieved from Touch.identifier.
   *
   * @type number
   */
  this.lastTouchIdentifier = 0;

  /**
   * Touchmove boundary, beyond which a click will be cancelled.
   *
   * @type number
   */
  this.touchBoundary = options.touchBoundary || 10;

  /**
   * The FastClick layer.
   *
   * @type Element
   */
  this.layer = layer;

  /**
   * The minimum time between tap(touchstart and touchend) events
   *
   * @type number
   */
  this.tapDelay = options.tapDelay || 200;

  /**
   * The maximum time for a tap
   *
   * @type number
   */
  this.tapTimeout = options.tapTimeout || 700;

  if (FastClick.notNeeded(layer)) {
    return;
  }

  // Some old versions of Android don't have Function.prototype.bind
  function bind(method, context) {
    return function () {
      return method.apply(context, arguments);
    };
  }

  var methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];
  var context = this;
  for (var i = 0, l = methods.length; i < l; i++) {
    context[methods[i]] = bind(context[methods[i]], context);
  }

  // Set up event handlers as required
  if (deviceIsAndroid) {
    layer.addEventListener('mouseover', this.onMouse, true);
    layer.addEventListener('mousedown', this.onMouse, true);
    layer.addEventListener('mouseup', this.onMouse, true);
  }

  layer.addEventListener('click', this.onClick, true);
  layer.addEventListener('touchstart', this.onTouchStart, false);
  layer.addEventListener('touchmove', this.onTouchMove, false);
  layer.addEventListener('touchend', this.onTouchEnd, false);
  layer.addEventListener('touchcancel', this.onTouchCancel, false);

  // Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
  // which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick
  // layer when they are cancelled.
  if (!Event.prototype.stopImmediatePropagation) {
    layer.removeEventListener = function (type, callback, capture) {
      var rmv = Node.prototype.removeEventListener;
      if (type === 'click') {
        rmv.call(layer, type, callback.hijacked || callback, capture);
      } else {
        rmv.call(layer, type, callback, capture);
      }
    };

    layer.addEventListener = function (type, callback, capture) {
      var adv = Node.prototype.addEventListener;
      if (type === 'click') {
        adv.call(layer, type, callback.hijacked || (callback.hijacked = function (event) {
          if (!event.propagationStopped) {
            callback(event);
          }
        }), capture);
      } else {
        adv.call(layer, type, callback, capture);
      }
    };
  }

  // If a handler is already declared in the element's onclick attribute, it will be fired before
  // FastClick's onClick handler. Fix this by pulling out the user-defined handler function and
  // adding it as listener.
  if (typeof layer.onclick === 'function') {

    // Android browser on at least 3.2 requires a new reference to the function in layer.onclick
    // - the old one won't work if passed to addEventListener directly.
    oldOnClick = layer.onclick;
    layer.addEventListener('click', function (event) {
      oldOnClick(event);
    }, false);
    layer.onclick = null;
  }
}

/**
 * Windows Phone 8.1 fakes user agent string to look like Android and iPhone.
 *
 * @type boolean
 */
var deviceIsWindowsPhone = navigator.userAgent.indexOf("Windows Phone") >= 0;

/**
 * Android requires exceptions.
 *
 * @type boolean
 */
var deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;

/**
 * iOS requires exceptions.
 *
 * @type boolean
 */
var deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;

/**
 * iOS 4 requires an exception for select elements.
 *
 * @type boolean
 */
var deviceIsIOS4 = deviceIsIOS && /OS 4_\d(_\d)?/.test(navigator.userAgent);

/**
 * iOS 6.0-7.* requires the target element to be manually derived
 *
 * @type boolean
 */
var deviceIsIOSWithBadTarget = deviceIsIOS && /OS [6-7]_\d/.test(navigator.userAgent);

/**
 * BlackBerry requires exceptions.
 *
 * @type boolean
 */
var deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;

/**
 * Determine whether a given element requires a native click.
 *
 * @param {EventTarget|Element} target Target DOM element
 * @returns {boolean} Returns true if the element needs a native click
 */
FastClick.prototype.needsClick = function (target) {
  switch (target.nodeName.toLowerCase()) {

    // Don't send a synthetic click to disabled inputs (issue #62)
    case 'button':
    case 'select':
    case 'textarea':
      if (target.disabled) {
        return true;
      }

      break;
    case 'input':

      // File inputs need real clicks on iOS 6 due to a browser bug (issue #68)
      if (deviceIsIOS && target.type === 'file' || target.disabled) {
        return true;
      }

      break;
    case 'label':
    case 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames
    case 'video':
      return true;
  }

  return (/\bneedsclick\b/.test(target.className)
  );
};

/**
 * Determine whether a given element requires a call to focus to simulate click into element.
 *
 * @param {EventTarget|Element} target Target DOM element
 * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.
 */
FastClick.prototype.needsFocus = function (target) {
  switch (target.nodeName.toLowerCase()) {
    case 'textarea':
      return true;
    case 'select':
      return !deviceIsAndroid;
    case 'input':
      switch (target.type) {
        case 'button':
        case 'checkbox':
        case 'file':
        case 'image':
        case 'radio':
        case 'submit':
          return false;
      }

      // No point in attempting to focus disabled inputs
      return !target.disabled && !target.readOnly;
    default:
      return (/\bneedsfocus\b/.test(target.className)
      );
  }
};

/**
 * Send a click event to the specified element.
 *
 * @param {EventTarget|Element} targetElement
 * @param {Event} event
 */
FastClick.prototype.sendClick = function (targetElement, event) {
  var clickEvent, touch;

  // On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)
  if (document.activeElement && document.activeElement !== targetElement) {
    document.activeElement.blur();
  }

  touch = event.changedTouches[0];

  // Synthesise a click event, with an extra attribute so it can be tracked
  clickEvent = document.createEvent('MouseEvents');
  clickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);
  clickEvent.forwardedTouchEvent = true;
  targetElement.dispatchEvent(clickEvent);
};

FastClick.prototype.determineEventType = function (targetElement) {

  //Issue #159: Android Chrome Select Box does not open with a synthetic click event
  if (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {
    return 'mousedown';
  }

  return 'click';
};

/**
 * @param {EventTarget|Element} targetElement
 */
FastClick.prototype.focus = function (targetElement) {
  var length;

  // Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.
  if (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {
    length = targetElement.value.length;
    targetElement.setSelectionRange(length, length);
  } else {
    targetElement.focus();
  }
};

/**
 * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.
 *
 * @param {EventTarget|Element} targetElement
 */
FastClick.prototype.updateScrollParent = function (targetElement) {
  var scrollParent, parentElement;

  scrollParent = targetElement.fastClickScrollParent;

  // Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the
  // target element was moved to another parent.
  if (!scrollParent || !scrollParent.contains(targetElement)) {
    parentElement = targetElement;
    do {
      if (parentElement.scrollHeight > parentElement.offsetHeight) {
        scrollParent = parentElement;
        targetElement.fastClickScrollParent = parentElement;
        break;
      }

      parentElement = parentElement.parentElement;
    } while (parentElement);
  }

  // Always update the scroll top tracker if possible.
  if (scrollParent) {
    scrollParent.fastClickLastScrollTop = scrollParent.scrollTop;
  }
};

/**
 * @param {EventTarget} targetElement
 * @returns {Element|EventTarget}
 */
FastClick.prototype.getTargetElementFromEventTarget = function (eventTarget) {

  // On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.
  if (eventTarget.nodeType === Node.TEXT_NODE) {
    return eventTarget.parentNode;
  }

  return eventTarget;
};

/**
 * On touch start, record the position and scroll offset.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onTouchStart = function (event) {
  var targetElement, touch, selection;

  // Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).
  if (event.targetTouches.length > 1) {
    return true;
  }

  targetElement = this.getTargetElementFromEventTarget(event.target);
  touch = event.targetTouches[0];

  if (deviceIsIOS) {

    // Only trusted events will deselect text on iOS (issue #49)
    selection = window.getSelection();
    if (selection.rangeCount && !selection.isCollapsed) {
      return true;
    }

    if (!deviceIsIOS4) {

      // Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):
      // when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched
      // with the same identifier as the touch event that previously triggered the click that triggered the alert.
      // Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an
      // immediately preceeding touch event (issue #52), so this fix is unavailable on that platform.
      // Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,
      // which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,
      // random integers, it's safe to to continue if the identifier is 0 here.
      if (touch.identifier && touch.identifier === this.lastTouchIdentifier) {
        event.preventDefault();
        return false;
      }

      this.lastTouchIdentifier = touch.identifier;

      // If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:
      // 1) the user does a fling scroll on the scrollable layer
      // 2) the user stops the fling scroll with another tap
      // then the event.target of the last 'touchend' event will be the element that was under the user's finger
      // when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check
      // is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).
      this.updateScrollParent(targetElement);
    }
  }

  this.trackingClick = true;
  this.trackingClickStart = event.timeStamp;
  this.targetElement = targetElement;

  this.touchStartX = touch.pageX;
  this.touchStartY = touch.pageY;

  // Prevent phantom clicks on fast double-tap (issue #36)
  if (event.timeStamp - this.lastClickTime < this.tapDelay) {
    event.preventDefault();
  }

  return true;
};

/**
 * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.touchHasMoved = function (event) {
  var touch = event.changedTouches[0],
      boundary = this.touchBoundary;

  if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {
    return true;
  }

  return false;
};

/**
 * Update the last position.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onTouchMove = function (event) {
  if (!this.trackingClick) {
    return true;
  }

  // If the touch has moved, cancel the click tracking
  if (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {
    this.trackingClick = false;
    this.targetElement = null;
  }

  return true;
};

/**
 * Attempt to find the labelled control for the given label element.
 *
 * @param {EventTarget|HTMLLabelElement} labelElement
 * @returns {Element|null}
 */
FastClick.prototype.findControl = function (labelElement) {

  // Fast path for newer browsers supporting the HTML5 control attribute
  if (labelElement.control !== undefined) {
    return labelElement.control;
  }

  // All browsers under test that support touch events also support the HTML5 htmlFor attribute
  if (labelElement.htmlFor) {
    return document.getElementById(labelElement.htmlFor);
  }

  // If no for attribute exists, attempt to retrieve the first labellable descendant element
  // the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label
  return labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');
};

/**
 * On touch end, determine whether to send a click event at once.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onTouchEnd = function (event) {
  var forElement,
      trackingClickStart,
      targetTagName,
      scrollParent,
      touch,
      targetElement = this.targetElement;

  if (!this.trackingClick) {
    return true;
  }

  // Prevent phantom clicks on fast double-tap (issue #36)
  if (event.timeStamp - this.lastClickTime < this.tapDelay) {
    this.cancelNextClick = true;
    return true;
  }

  if (event.timeStamp - this.trackingClickStart > this.tapTimeout) {
    return true;
  }

  // Reset to prevent wrong click cancel on input (issue #156).
  this.cancelNextClick = false;

  this.lastClickTime = event.timeStamp;

  trackingClickStart = this.trackingClickStart;
  this.trackingClick = false;
  this.trackingClickStart = 0;

  // On some iOS devices, the targetElement supplied with the event is invalid if the layer
  // is performing a transition or scroll, and has to be re-detected manually. Note that
  // for this to function correctly, it must be called *after* the event target is checked!
  // See issue #57; also filed as rdar://13048589 .
  if (deviceIsIOSWithBadTarget) {
    touch = event.changedTouches[0];

    // In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null
    targetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;
    targetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;
  }

  targetTagName = targetElement.tagName.toLowerCase();
  if (targetTagName === 'label') {
    forElement = this.findControl(targetElement);
    if (forElement) {
      this.focus(targetElement);
      if (deviceIsAndroid) {
        return false;
      }

      targetElement = forElement;
    }
  } else if (this.needsFocus(targetElement)) {

    // Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.
    // Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).
    if (event.timeStamp - trackingClickStart > 100 || deviceIsIOS && window.top !== window && targetTagName === 'input') {
      this.targetElement = null;
      return false;
    }

    this.focus(targetElement);
    this.sendClick(targetElement, event);

    // Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.
    // Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)
    if (!deviceIsIOS || targetTagName !== 'select') {
      this.targetElement = null;
      event.preventDefault();
    }

    return false;
  }

  if (deviceIsIOS && !deviceIsIOS4) {

    // Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled
    // and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).
    scrollParent = targetElement.fastClickScrollParent;
    if (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {
      return true;
    }
  }

  // Prevent the actual click from going though - unless the target node is marked as requiring
  // real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.
  if (!this.needsClick(targetElement)) {
    event.preventDefault();
    this.sendClick(targetElement, event);
  }

  return false;
};

/**
 * On touch cancel, stop tracking the click.
 *
 * @returns {void}
 */
FastClick.prototype.onTouchCancel = function () {
  this.trackingClick = false;
  this.targetElement = null;
};

/**
 * Determine mouse events which should be permitted.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onMouse = function (event) {

  // If a target element was never set (because a touch event was never fired) allow the event
  if (!this.targetElement) {
    return true;
  }

  if (event.forwardedTouchEvent) {
    return true;
  }

  // Programmatically generated events targeting a specific element should be permitted
  if (!event.cancelable) {
    return true;
  }

  // Derive and check the target element to see whether the mouse event needs to be permitted;
  // unless explicitly enabled, prevent non-touch click events from triggering actions,
  // to prevent ghost/doubleclicks.
  if (!this.needsClick(this.targetElement) || this.cancelNextClick) {

    // Prevent any user-added listeners declared on FastClick element from being fired.
    if (event.stopImmediatePropagation) {
      event.stopImmediatePropagation();
    } else {

      // Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)
      event.propagationStopped = true;
    }

    // Cancel the event
    event.stopPropagation();
    event.preventDefault();

    return false;
  }

  // If the mouse event is permitted, return true for the action to go through.
  return true;
};

/**
 * On actual clicks, determine whether this is a touch-generated click, a click action occurring
 * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or
 * an actual click which should be permitted.
 *
 * @param {Event} event
 * @returns {boolean}
 */
FastClick.prototype.onClick = function (event) {
  var permitted;

  // It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.
  if (this.trackingClick) {
    this.targetElement = null;
    this.trackingClick = false;
    return true;
  }

  // Very odd behaviour on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.
  if (event.target.type === 'submit' && event.detail === 0) {
    return true;
  }

  permitted = this.onMouse(event);

  // Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.
  if (!permitted) {
    this.targetElement = null;
  }

  // If clicks are permitted, return true for the action to go through.
  return permitted;
};

/**
 * Remove all FastClick's event listeners.
 *
 * @returns {void}
 */
FastClick.prototype.destroy = function () {
  var layer = this.layer;

  if (deviceIsAndroid) {
    layer.removeEventListener('mouseover', this.onMouse, true);
    layer.removeEventListener('mousedown', this.onMouse, true);
    layer.removeEventListener('mouseup', this.onMouse, true);
  }

  layer.removeEventListener('click', this.onClick, true);
  layer.removeEventListener('touchstart', this.onTouchStart, false);
  layer.removeEventListener('touchmove', this.onTouchMove, false);
  layer.removeEventListener('touchend', this.onTouchEnd, false);
  layer.removeEventListener('touchcancel', this.onTouchCancel, false);
};

/**
 * Check whether FastClick is needed.
 *
 * @param {Element} layer The layer to listen on
 */
FastClick.notNeeded = function (layer) {
  var metaViewport;
  var chromeVersion;
  var blackberryVersion;
  var firefoxVersion;

  // Devices that don't support touch don't need FastClick
  if (typeof window.ontouchstart === 'undefined') {
    return true;
  }

  // Chrome version - zero for other browsers
  chromeVersion = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1];

  if (chromeVersion) {

    if (deviceIsAndroid) {
      metaViewport = document.querySelector('meta[name=viewport]');

      if (metaViewport) {
        // Chrome on Android with user-scalable="no" doesn't need FastClick (issue #89)
        if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
          return true;
        }
        // Chrome 32 and above with width=device-width or less don't need FastClick
        if (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {
          return true;
        }
      }

      // Chrome desktop doesn't need FastClick (issue #15)
    } else {
      return true;
    }
  }

  if (deviceIsBlackBerry10) {
    blackberryVersion = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);

    // BlackBerry 10.3+ does not require Fastclick library.
    // https://github.com/ftlabs/fastclick/issues/251
    if (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {
      metaViewport = document.querySelector('meta[name=viewport]');

      if (metaViewport) {
        // user-scalable=no eliminates click delay.
        if (metaViewport.content.indexOf('user-scalable=no') !== -1) {
          return true;
        }
        // width=device-width (or less than device-width) eliminates click delay.
        if (document.documentElement.scrollWidth <= window.outerWidth) {
          return true;
        }
      }
    }
  }

  // IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)
  if (layer.style.msTouchAction === 'none' || layer.style.touchAction === 'manipulation') {
    return true;
  }

  // Firefox version - zero for other browsers
  firefoxVersion = +(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1];

  if (firefoxVersion >= 27) {
    // Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896

    metaViewport = document.querySelector('meta[name=viewport]');
    if (metaViewport && (metaViewport.content.indexOf('user-scalable=no') !== -1 || document.documentElement.scrollWidth <= window.outerWidth)) {
      return true;
    }
  }

  // IE11: prefixed -ms-touch-action is no longer supported and it's recomended to use non-prefixed version
  // http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx
  if (layer.style.touchAction === 'none' || layer.style.touchAction === 'manipulation') {
    return true;
  }

  return false;
};

/**
 * Factory method for creating a FastClick object
 *
 * @param {Element} layer The layer to listen on
 * @param {Object} [options={}] The options to override the defaults
 */
function attach(layer, options) {
  return new FastClick(layer, options);
}

FastClick.attach = attach;



/***/ }),
/* 50 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__zepto_js__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__context_js__ = __webpack_require__(18);
var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }




var BaseModule = function () {
  /**
   * 模块基类
   * @param  {Element | $Element}  el      dom 节点，可为原生或 zeto 对象
   * @param  {Object}  options 自定义配置信息
   * @param  {Boolean} isRoot  是否将自定义配置作为根配置
   */
  function BaseModule(el) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var isRoot = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    _classCallCheck(this, BaseModule);

    var $el = this.$el = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__context_js__["c" /* getEl */])(el);

    // 模块实例 on 事件集合
    var _evtOn = {};

    // 模块实例 one 事件集合
    var _evtOne = {};

    if (!$el) throw new Error('can\'t find element');

    var config = this._getDOMConfig(el);

    this.__options = isRoot ? __WEBPACK_IMPORTED_MODULE_0__zepto_js__["a" /* default */].extend(true, config, options) : __WEBPACK_IMPORTED_MODULE_0__zepto_js__["a" /* default */].extend(true, options, config);

    this.on = function (key, fn) {
      if (_evtOn[key] === undefined) {
        _evtOn[key] = [];
      }

      _evtOn[key].push(fn);
    };

    this.one = function (key, fn) {
      if (_evtOne[key] === undefined) {
        _evtOne[key] = [];
      }

      _evtOne[key].push(fn);
    };

    this.off = function (key) {
      _evtOn[key] = [];
      _evtOne[key] = [];
    };

    /**
     * 触发事件
     * @param  {String}  事件名
     * @param  {...args}  不定参数，事件信息
     */
    this.emit = function () {
      var key = void 0,
          args = void 0;
      if (!arguments.length) {
        return false;
      }

      key = arguments[0];
      args = [].concat(Array.prototype.slice.call(arguments, 1));

      if (_evtOn[key] && _evtOn[key].length) {
        for (var i in _evtOn[key]) {
          _evtOn[key][i].apply(null, args);
        }
      }

      if (_evtOne[key] && _evtOne[key].length) {
        for (var _i in this.oneObj[key]) {
          _evtOne[key][_i].apply(null, args);
          _evtOne[key][_i] = void 0;
        }
        _evtOne[key] = [];
      }
    };

    $el.attr(__WEBPACK_IMPORTED_MODULE_1__context_js__["a" /* SID */], this.constructor.mrType);
    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__context_js__["d" /* registerRuntime */])(this, $el[0]);
  }

  _createClass(BaseModule, [{
    key: 'getContext',
    value: function getContext() {
      return __WEBPACK_IMPORTED_MODULE_1__context_js__["b" /* context */];
    }
  }, {
    key: 'getOptions',
    value: function getOptions() {
      var defConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      return __WEBPACK_IMPORTED_MODULE_0__zepto_js__["a" /* default */].extend(true, {}, defConfig, this.__options);
    }
  }, {
    key: 'destroy',
    value: function destroy() {
      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__context_js__["e" /* destroyRuntime */])(this);
    }
  }, {
    key: '_getDOMConfig',
    value: function _getDOMConfig(el) {
      var $el = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__context_js__["c" /* getEl */])(el || this.$el);

      // el 非法时，返回 {}
      if ((typeof $el === 'undefined' ? 'undefined' : _typeof($el)) === undefined) return {};

      var dataset = $el[0].dataset;
      var objDataset = getObjectAttr($el, 'datas-');

      // console.log(objDataset)

      return __WEBPACK_IMPORTED_MODULE_0__zepto_js__["a" /* default */].extend({}, dataset, objDataset);
    }
  }], [{
    key: 'register',
    value: function register(ClassObj, typeName) {
      ClassObj.mrType = typeName;
      __WEBPACK_IMPORTED_MODULE_1__context_js__["f" /* runtime */].classPool[typeName] = ClassObj;
    }
  }]);

  return BaseModule;
}();

function getObjectAttr($el) {
  var flag = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'datas-';

  var attr = $el[0].attributes;
  var mDataset = {};

  for (var i = 0; i < attr.length; i++) {
    var name = attr[i].name;
    var val = attr[i].value;

    if (name.indexOf(flag) > -1) {
      name = name.replace(flag, '');
      mDataset[name] = parseJson(val);
    }
  }

  return mDataset;
}

function parseJson(str) {
  try {
    return JSON.parse(str);
    // return eval('Object(' + str + ')')
  } catch (e) {
    return null;
  }
}

/* harmony default export */ __webpack_exports__["a"] = (BaseModule);

/***/ }),
/* 51 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__zepto_js__ = __webpack_require__(8);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__context_js__ = __webpack_require__(18);



var moduleFactory = {
  init: function init() {
    var _this = this;

    // const $mDOMs = $(`[${sid}auto]`).not(`[${sid}auto=false]`)
    var $mDOMs = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__zepto_js__["a" /* default */])('[' + __WEBPACK_IMPORTED_MODULE_1__context_js__["a" /* SID */] + ']').not('[mr-auto=false]');

    $mDOMs.each(function (i, el) {
      // 查询 context 实例池，避免用户在 ready 事件前
      // 调用 new 构造实例后，框架扫描 DOM 自动初始化多次
      if (!__WEBPACK_IMPORTED_MODULE_1__context_js__["b" /* context */].getInstance(el)) {
        _this.createModule(el);
      }
    });

    return __WEBPACK_IMPORTED_MODULE_1__context_js__["b" /* context */];
  },
  createModule: function createModule(el) {
    var tName = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__zepto_js__["a" /* default */])(el).attr(__WEBPACK_IMPORTED_MODULE_1__context_js__["a" /* SID */]);
    var Module = __WEBPACK_IMPORTED_MODULE_1__context_js__["b" /* context */].getProto(tName);
    var modObj = null;

    if (typeof Module === 'undefined') {
      console.warn('Module [' + tName + '] is not regiested.');
      return null;
    }

    el['__src'] = 'dom';
    modObj = new Module(el);
    delete el['__src'];

    return modObj;
  }
};

/* harmony default export */ __webpack_exports__["a"] = (moduleFactory);

/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

// +----------------------------------------------------------------------+
// | murmurHash3.js v2.1.2 (http://github.com/karanlyons/murmurHash.js)   |
// | A javascript implementation of MurmurHash3's x86 hashing algorithms. |
// |----------------------------------------------------------------------|
// | Copyright (c) 2012 Karan Lyons                                       |
// | Freely distributable under the MIT license.                          |
// +----------------------------------------------------------------------+


;(function (root, undefined) {
	'use strict';

	// Create a local object that'll be exported or referenced globally.

	var library = {
		'version': '2.1.2',
		'x86': {},
		'x64': {}
	};

	// PRIVATE FUNCTIONS
	// -----------------

	function _x86Multiply(m, n) {
		//
		// Given two 32bit ints, returns the two multiplied together as a
		// 32bit int.
		//

		return (m & 0xffff) * n + (((m >>> 16) * n & 0xffff) << 16);
	}

	function _x86Rotl(m, n) {
		//
		// Given a 32bit int and an int representing a number of bit positions,
		// returns the 32bit int rotated left by that number of positions.
		//

		return m << n | m >>> 32 - n;
	}

	function _x86Fmix(h) {
		//
		// Given a block, returns murmurHash3's final x86 mix of that block.
		//

		h ^= h >>> 16;
		h = _x86Multiply(h, 0x85ebca6b);
		h ^= h >>> 13;
		h = _x86Multiply(h, 0xc2b2ae35);
		h ^= h >>> 16;

		return h;
	}

	function _x64Add(m, n) {
		//
		// Given two 64bit ints (as an array of two 32bit ints) returns the two
		// added together as a 64bit int (as an array of two 32bit ints).
		//

		m = [m[0] >>> 16, m[0] & 0xffff, m[1] >>> 16, m[1] & 0xffff];
		n = [n[0] >>> 16, n[0] & 0xffff, n[1] >>> 16, n[1] & 0xffff];
		var o = [0, 0, 0, 0];

		o[3] += m[3] + n[3];
		o[2] += o[3] >>> 16;
		o[3] &= 0xffff;

		o[2] += m[2] + n[2];
		o[1] += o[2] >>> 16;
		o[2] &= 0xffff;

		o[1] += m[1] + n[1];
		o[0] += o[1] >>> 16;
		o[1] &= 0xffff;

		o[0] += m[0] + n[0];
		o[0] &= 0xffff;

		return [o[0] << 16 | o[1], o[2] << 16 | o[3]];
	}

	function _x64Multiply(m, n) {
		//
		// Given two 64bit ints (as an array of two 32bit ints) returns the two
		// multiplied together as a 64bit int (as an array of two 32bit ints).
		//

		m = [m[0] >>> 16, m[0] & 0xffff, m[1] >>> 16, m[1] & 0xffff];
		n = [n[0] >>> 16, n[0] & 0xffff, n[1] >>> 16, n[1] & 0xffff];
		var o = [0, 0, 0, 0];

		o[3] += m[3] * n[3];
		o[2] += o[3] >>> 16;
		o[3] &= 0xffff;

		o[2] += m[2] * n[3];
		o[1] += o[2] >>> 16;
		o[2] &= 0xffff;

		o[2] += m[3] * n[2];
		o[1] += o[2] >>> 16;
		o[2] &= 0xffff;

		o[1] += m[1] * n[3];
		o[0] += o[1] >>> 16;
		o[1] &= 0xffff;

		o[1] += m[2] * n[2];
		o[0] += o[1] >>> 16;
		o[1] &= 0xffff;

		o[1] += m[3] * n[1];
		o[0] += o[1] >>> 16;
		o[1] &= 0xffff;

		o[0] += m[0] * n[3] + m[1] * n[2] + m[2] * n[1] + m[3] * n[0];
		o[0] &= 0xffff;

		return [o[0] << 16 | o[1], o[2] << 16 | o[3]];
	}

	function _x64Rotl(m, n) {
		//
		// Given a 64bit int (as an array of two 32bit ints) and an int
		// representing a number of bit positions, returns the 64bit int (as an
		// array of two 32bit ints) rotated left by that number of positions.
		//

		n %= 64;

		if (n === 32) {
			return [m[1], m[0]];
		} else if (n < 32) {
			return [m[0] << n | m[1] >>> 32 - n, m[1] << n | m[0] >>> 32 - n];
		} else {
			n -= 32;
			return [m[1] << n | m[0] >>> 32 - n, m[0] << n | m[1] >>> 32 - n];
		}
	}

	function _x64LeftShift(m, n) {
		//
		// Given a 64bit int (as an array of two 32bit ints) and an int
		// representing a number of bit positions, returns the 64bit int (as an
		// array of two 32bit ints) shifted left by that number of positions.
		//

		n %= 64;

		if (n === 0) {
			return m;
		} else if (n < 32) {
			return [m[0] << n | m[1] >>> 32 - n, m[1] << n];
		} else {
			return [m[1] << n - 32, 0];
		}
	}

	function _x64Xor(m, n) {
		//
		// Given two 64bit ints (as an array of two 32bit ints) returns the two
		// xored together as a 64bit int (as an array of two 32bit ints).
		//

		return [m[0] ^ n[0], m[1] ^ n[1]];
	}

	function _x64Fmix(h) {
		//
		// Given a block, returns murmurHash3's final x64 mix of that block.
		// (`[0, h[0] >>> 1]` is a 33 bit unsigned right shift. This is the
		// only place where we need to right shift 64bit ints.)
		//

		h = _x64Xor(h, [0, h[0] >>> 1]);
		h = _x64Multiply(h, [0xff51afd7, 0xed558ccd]);
		h = _x64Xor(h, [0, h[0] >>> 1]);
		h = _x64Multiply(h, [0xc4ceb9fe, 0x1a85ec53]);
		h = _x64Xor(h, [0, h[0] >>> 1]);

		return h;
	}

	// PUBLIC FUNCTIONS
	// ----------------

	library.x86.hash32 = function (key, seed) {
		//
		// Given a string and an optional seed as an int, returns a 32 bit hash
		// using the x86 flavor of MurmurHash3, as an unsigned int.
		//

		key = key || '';
		seed = seed || 0;

		var remainder = key.length % 4;
		var bytes = key.length - remainder;

		var h1 = seed;

		var k1 = 0;

		var c1 = 0xcc9e2d51;
		var c2 = 0x1b873593;

		for (var i = 0; i < bytes; i = i + 4) {
			k1 = key.charCodeAt(i) & 0xff | (key.charCodeAt(i + 1) & 0xff) << 8 | (key.charCodeAt(i + 2) & 0xff) << 16 | (key.charCodeAt(i + 3) & 0xff) << 24;

			k1 = _x86Multiply(k1, c1);
			k1 = _x86Rotl(k1, 15);
			k1 = _x86Multiply(k1, c2);

			h1 ^= k1;
			h1 = _x86Rotl(h1, 13);
			h1 = _x86Multiply(h1, 5) + 0xe6546b64;
		}

		k1 = 0;

		switch (remainder) {
			case 3:
				k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;

			case 2:
				k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;

			case 1:
				k1 ^= key.charCodeAt(i) & 0xff;
				k1 = _x86Multiply(k1, c1);
				k1 = _x86Rotl(k1, 15);
				k1 = _x86Multiply(k1, c2);
				h1 ^= k1;
		}

		h1 ^= key.length;
		h1 = _x86Fmix(h1);

		return h1 >>> 0;
	};

	library.x86.hash128 = function (key, seed) {
		//
		// Given a string and an optional seed as an int, returns a 128 bit
		// hash using the x86 flavor of MurmurHash3, as an unsigned hex.
		//

		key = key || '';
		seed = seed || 0;

		var remainder = key.length % 16;
		var bytes = key.length - remainder;

		var h1 = seed;
		var h2 = seed;
		var h3 = seed;
		var h4 = seed;

		var k1 = 0;
		var k2 = 0;
		var k3 = 0;
		var k4 = 0;

		var c1 = 0x239b961b;
		var c2 = 0xab0e9789;
		var c3 = 0x38b34ae5;
		var c4 = 0xa1e38b93;

		for (var i = 0; i < bytes; i = i + 16) {
			k1 = key.charCodeAt(i) & 0xff | (key.charCodeAt(i + 1) & 0xff) << 8 | (key.charCodeAt(i + 2) & 0xff) << 16 | (key.charCodeAt(i + 3) & 0xff) << 24;
			k2 = key.charCodeAt(i + 4) & 0xff | (key.charCodeAt(i + 5) & 0xff) << 8 | (key.charCodeAt(i + 6) & 0xff) << 16 | (key.charCodeAt(i + 7) & 0xff) << 24;
			k3 = key.charCodeAt(i + 8) & 0xff | (key.charCodeAt(i + 9) & 0xff) << 8 | (key.charCodeAt(i + 10) & 0xff) << 16 | (key.charCodeAt(i + 11) & 0xff) << 24;
			k4 = key.charCodeAt(i + 12) & 0xff | (key.charCodeAt(i + 13) & 0xff) << 8 | (key.charCodeAt(i + 14) & 0xff) << 16 | (key.charCodeAt(i + 15) & 0xff) << 24;

			k1 = _x86Multiply(k1, c1);
			k1 = _x86Rotl(k1, 15);
			k1 = _x86Multiply(k1, c2);
			h1 ^= k1;

			h1 = _x86Rotl(h1, 19);
			h1 += h2;
			h1 = _x86Multiply(h1, 5) + 0x561ccd1b;

			k2 = _x86Multiply(k2, c2);
			k2 = _x86Rotl(k2, 16);
			k2 = _x86Multiply(k2, c3);
			h2 ^= k2;

			h2 = _x86Rotl(h2, 17);
			h2 += h3;
			h2 = _x86Multiply(h2, 5) + 0x0bcaa747;

			k3 = _x86Multiply(k3, c3);
			k3 = _x86Rotl(k3, 17);
			k3 = _x86Multiply(k3, c4);
			h3 ^= k3;

			h3 = _x86Rotl(h3, 15);
			h3 += h4;
			h3 = _x86Multiply(h3, 5) + 0x96cd1c35;

			k4 = _x86Multiply(k4, c4);
			k4 = _x86Rotl(k4, 18);
			k4 = _x86Multiply(k4, c1);
			h4 ^= k4;

			h4 = _x86Rotl(h4, 13);
			h4 += h1;
			h4 = _x86Multiply(h4, 5) + 0x32ac3b17;
		}

		k1 = 0;
		k2 = 0;
		k3 = 0;
		k4 = 0;

		switch (remainder) {
			case 15:
				k4 ^= key.charCodeAt(i + 14) << 16;

			case 14:
				k4 ^= key.charCodeAt(i + 13) << 8;

			case 13:
				k4 ^= key.charCodeAt(i + 12);
				k4 = _x86Multiply(k4, c4);
				k4 = _x86Rotl(k4, 18);
				k4 = _x86Multiply(k4, c1);
				h4 ^= k4;

			case 12:
				k3 ^= key.charCodeAt(i + 11) << 24;

			case 11:
				k3 ^= key.charCodeAt(i + 10) << 16;

			case 10:
				k3 ^= key.charCodeAt(i + 9) << 8;

			case 9:
				k3 ^= key.charCodeAt(i + 8);
				k3 = _x86Multiply(k3, c3);
				k3 = _x86Rotl(k3, 17);
				k3 = _x86Multiply(k3, c4);
				h3 ^= k3;

			case 8:
				k2 ^= key.charCodeAt(i + 7) << 24;

			case 7:
				k2 ^= key.charCodeAt(i + 6) << 16;

			case 6:
				k2 ^= key.charCodeAt(i + 5) << 8;

			case 5:
				k2 ^= key.charCodeAt(i + 4);
				k2 = _x86Multiply(k2, c2);
				k2 = _x86Rotl(k2, 16);
				k2 = _x86Multiply(k2, c3);
				h2 ^= k2;

			case 4:
				k1 ^= key.charCodeAt(i + 3) << 24;

			case 3:
				k1 ^= key.charCodeAt(i + 2) << 16;

			case 2:
				k1 ^= key.charCodeAt(i + 1) << 8;

			case 1:
				k1 ^= key.charCodeAt(i);
				k1 = _x86Multiply(k1, c1);
				k1 = _x86Rotl(k1, 15);
				k1 = _x86Multiply(k1, c2);
				h1 ^= k1;
		}

		h1 ^= key.length;
		h2 ^= key.length;
		h3 ^= key.length;
		h4 ^= key.length;

		h1 += h2;
		h1 += h3;
		h1 += h4;
		h2 += h1;
		h3 += h1;
		h4 += h1;

		h1 = _x86Fmix(h1);
		h2 = _x86Fmix(h2);
		h3 = _x86Fmix(h3);
		h4 = _x86Fmix(h4);

		h1 += h2;
		h1 += h3;
		h1 += h4;
		h2 += h1;
		h3 += h1;
		h4 += h1;

		return ("00000000" + (h1 >>> 0).toString(16)).slice(-8) + ("00000000" + (h2 >>> 0).toString(16)).slice(-8) + ("00000000" + (h3 >>> 0).toString(16)).slice(-8) + ("00000000" + (h4 >>> 0).toString(16)).slice(-8);
	};

	library.x64.hash128 = function (key, seed) {
		//
		// Given a string and an optional seed as an int, returns a 128 bit
		// hash using the x64 flavor of MurmurHash3, as an unsigned hex.
		//

		key = key || '';
		seed = seed || 0;

		var remainder = key.length % 16;
		var bytes = key.length - remainder;

		var h1 = [0, seed];
		var h2 = [0, seed];

		var k1 = [0, 0];
		var k2 = [0, 0];

		var c1 = [0x87c37b91, 0x114253d5];
		var c2 = [0x4cf5ad43, 0x2745937f];

		for (var i = 0; i < bytes; i = i + 16) {
			k1 = [key.charCodeAt(i + 4) & 0xff | (key.charCodeAt(i + 5) & 0xff) << 8 | (key.charCodeAt(i + 6) & 0xff) << 16 | (key.charCodeAt(i + 7) & 0xff) << 24, key.charCodeAt(i) & 0xff | (key.charCodeAt(i + 1) & 0xff) << 8 | (key.charCodeAt(i + 2) & 0xff) << 16 | (key.charCodeAt(i + 3) & 0xff) << 24];
			k2 = [key.charCodeAt(i + 12) & 0xff | (key.charCodeAt(i + 13) & 0xff) << 8 | (key.charCodeAt(i + 14) & 0xff) << 16 | (key.charCodeAt(i + 15) & 0xff) << 24, key.charCodeAt(i + 8) & 0xff | (key.charCodeAt(i + 9) & 0xff) << 8 | (key.charCodeAt(i + 10) & 0xff) << 16 | (key.charCodeAt(i + 11) & 0xff) << 24];

			k1 = _x64Multiply(k1, c1);
			k1 = _x64Rotl(k1, 31);
			k1 = _x64Multiply(k1, c2);
			h1 = _x64Xor(h1, k1);

			h1 = _x64Rotl(h1, 27);
			h1 = _x64Add(h1, h2);
			h1 = _x64Add(_x64Multiply(h1, [0, 5]), [0, 0x52dce729]);

			k2 = _x64Multiply(k2, c2);
			k2 = _x64Rotl(k2, 33);
			k2 = _x64Multiply(k2, c1);
			h2 = _x64Xor(h2, k2);

			h2 = _x64Rotl(h2, 31);
			h2 = _x64Add(h2, h1);
			h2 = _x64Add(_x64Multiply(h2, [0, 5]), [0, 0x38495ab5]);
		}

		k1 = [0, 0];
		k2 = [0, 0];

		switch (remainder) {
			case 15:
				k2 = _x64Xor(k2, _x64LeftShift([0, key.charCodeAt(i + 14)], 48));

			case 14:
				k2 = _x64Xor(k2, _x64LeftShift([0, key.charCodeAt(i + 13)], 40));

			case 13:
				k2 = _x64Xor(k2, _x64LeftShift([0, key.charCodeAt(i + 12)], 32));

			case 12:
				k2 = _x64Xor(k2, _x64LeftShift([0, key.charCodeAt(i + 11)], 24));

			case 11:
				k2 = _x64Xor(k2, _x64LeftShift([0, key.charCodeAt(i + 10)], 16));

			case 10:
				k2 = _x64Xor(k2, _x64LeftShift([0, key.charCodeAt(i + 9)], 8));

			case 9:
				k2 = _x64Xor(k2, [0, key.charCodeAt(i + 8)]);
				k2 = _x64Multiply(k2, c2);
				k2 = _x64Rotl(k2, 33);
				k2 = _x64Multiply(k2, c1);
				h2 = _x64Xor(h2, k2);

			case 8:
				k1 = _x64Xor(k1, _x64LeftShift([0, key.charCodeAt(i + 7)], 56));

			case 7:
				k1 = _x64Xor(k1, _x64LeftShift([0, key.charCodeAt(i + 6)], 48));

			case 6:
				k1 = _x64Xor(k1, _x64LeftShift([0, key.charCodeAt(i + 5)], 40));

			case 5:
				k1 = _x64Xor(k1, _x64LeftShift([0, key.charCodeAt(i + 4)], 32));

			case 4:
				k1 = _x64Xor(k1, _x64LeftShift([0, key.charCodeAt(i + 3)], 24));

			case 3:
				k1 = _x64Xor(k1, _x64LeftShift([0, key.charCodeAt(i + 2)], 16));

			case 2:
				k1 = _x64Xor(k1, _x64LeftShift([0, key.charCodeAt(i + 1)], 8));

			case 1:
				k1 = _x64Xor(k1, [0, key.charCodeAt(i)]);
				k1 = _x64Multiply(k1, c1);
				k1 = _x64Rotl(k1, 31);
				k1 = _x64Multiply(k1, c2);
				h1 = _x64Xor(h1, k1);
		}

		h1 = _x64Xor(h1, [0, key.length]);
		h2 = _x64Xor(h2, [0, key.length]);

		h1 = _x64Add(h1, h2);
		h2 = _x64Add(h2, h1);

		h1 = _x64Fmix(h1);
		h2 = _x64Fmix(h2);

		h1 = _x64Add(h1, h2);
		h2 = _x64Add(h2, h1);

		return ("00000000" + (h1[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (h1[1] >>> 0).toString(16)).slice(-8) + ("00000000" + (h2[0] >>> 0).toString(16)).slice(-8) + ("00000000" + (h2[1] >>> 0).toString(16)).slice(-8);
	};

	// INITIALIZATION
	// --------------

	// Export murmurHash3 for CommonJS, either as an AMD module or just as part
	// of the global object.
	if (true) {
		if (typeof module !== 'undefined' && module.exports) {
			exports = module.exports = library;
		}

		exports.murmurHash3 = library;
	} else if (typeof define === 'function' && define.amd) {
		define([], function () {
			return library;
		});
	} else {
		// Use murmurHash3.noConflict to restore `murmurHash3` back to its
		// original value. Returns a reference to the library object, to allow
		// it to be used under a different name.
		library._murmurHash3 = root.murmurHash3;

		library.noConflict = function () {
			root.murmurHash3 = library._murmurHash3;
			library._murmurHash3 = undefined;
			library.noConflict = undefined;

			return library;
		};

		root.murmurHash3 = library;
	}
})(this);

/***/ }),
/* 53 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return browserType; });
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Browser = function () {
  function Browser() {
    _classCallCheck(this, Browser);
  }

  _createClass(Browser, [{
    key: "getUA",
    value: function getUA() {
      return navigator.userAgent;
    }
  }, {
    key: "isMobile",
    value: function isMobile() {
      return this.getUA().match(/mobile/i);
    }
  }, {
    key: "isUC",
    value: function isUC() {
      return this.getUA().match(/UC/i);
    }
  }, {
    key: "isQQ",
    value: function isQQ() {
      return this.getUA().match(/QQ/i);
    }
  }, {
    key: "isIOS",
    value: function isIOS() {
      return this.getUA().match(/(iPhone|iPod|iPad);?/i);
    }
  }, {
    key: "isOS9",
    value: function isOS9() {
      return this.getUA().match(/(OS 9_)/i);
    }
  }, {
    key: "isAndroid",
    value: function isAndroid() {
      return this.getUA().match(/android/i);
    }
  }]);

  return Browser;
}();

var browserType = new Browser();

/***/ }),
/* 54 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__ = __webpack_require__(7);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__browser__ = __webpack_require__(53);
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }




/**
 * @param {*} config.cardSelector card选择器（包含标题），因为有些需求是要求全部card漏出完毕再执行微动 
 * @param {*} config.boxSelector img容器选择器，用来计算被截取后图片的可显示高度
 * @param {*} config.imgSelector img图片选择器，默认从boxSelector下寻找img节点，用来计算图片原始高度与执行微动
 * @param {*} config.defaultCss  使用默认样式以及选择器进行初始化
 */

var weidongCard = function () {
  function weidongCard(config) {
    _classCallCheck(this, weidongCard);

    if (config == undefined) {
      config = {
        cardSelector: '.weidong_card',
        boxSelector: '.weidong_box',
        imgSelector: '.weidong_img',
        defaultCss: true
      };
    }
    this.config = config;
    this.cH = document.documentElement.clientHeight; // 屏幕高      clientHeight
    this.allCardList = [];
    this.bottomBarHeight = config.bottomBarHeight || 0;
    this.topBarHeight = config.topBarHeight || 0;
    this.needDegrade = __WEBPACK_IMPORTED_MODULE_1__browser__["a" /* browserType */].isUC() && __WEBPACK_IMPORTED_MODULE_1__browser__["a" /* browserType */].isIOS() || __WEBPACK_IMPORTED_MODULE_1__browser__["a" /* browserType */].isQQ();
    this.init();
  }

  _createClass(weidongCard, [{
    key: 'init',
    value: function init() {
      this.addCard(this.config);
      if (!this.needDegrade) {
        this.move();
        this.listener();
      }
    }
  }, {
    key: 'addCard',
    value: function addCard(config) {
      var _this = this;

      if (config == undefined) {
        config = this.config;
      }
      var _config = config,
          cardSelector = _config.cardSelector,
          boxSelector = _config.boxSelector,
          _config$imgSelector = _config.imgSelector,
          imgSelector = _config$imgSelector === undefined ? 'img' : _config$imgSelector,
          defaultCss = _config.defaultCss;

      var allCard = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["a" /* $ */])(cardSelector); // 所有广告card

      var _loop = function _loop(i, len) {
        var thisCardInfo = {};
        var adDom = allCard.eq(i);
        if (adDom.hasClass('___init_sina_weidong')) {
          return 'continue';
        } else {
          adDom.addClass('___init_sina_weidong');
        }
        var imgBoxDom = adDom.find(boxSelector); // img父容器
        if (imgBoxDom.length == 0 && cardSelector == boxSelector) {
          imgBoxDom = adDom;
        }
        var imgDom = imgBoxDom.find(imgSelector); // img

        if (defaultCss) {
          if (_this.needDegrade) {
            imgBoxDom.css({
              paddingTop: '3rem',
              position: 'relative',
              overflow: 'hidden',
              boxSizing: 'border-box'
            });
          } else {
            imgBoxDom.css({
              paddingTop: '37.5%',
              position: 'relative',
              overflow: 'hidden',
              boxSizing: 'border-box'
            });
          }
          adDom.find('.weidong_wrap').css({
            position: 'absolute',
            bottom: 0,
            width: '100%',
            verticalAlign: 'top',
            overflow: 'hidden'
          });
          imgDom.css({
            transition: 'transform 100ms',
            webkitTransition: 'transform 100ms',
            width: '100%'
          });
        }

        thisCardInfo.adDom = adDom; // 广告card
        thisCardInfo.imgDom = imgDom; // img
        thisCardInfo.aH = adDom.height(); // 广告card高   adHeight   这三个高度默认为不会变化
        thisCardInfo.bH = imgBoxDom.height(); // img容器高   boxHeight
        thisCardInfo.mH = imgDom.height(); // img真实高度（包括被父元素覆盖的高度）
        thisCardInfo.imgDom.on('load', function () {
          thisCardInfo.mH = imgDom.height(); // 更新图片高度
        });
        _this.allCardList.push(thisCardInfo);
      };

      for (var i = 0, len = allCard.length; i < len; i++) {
        var _ret = _loop(i, len);

        if (_ret === 'continue') continue;
      }
    }
  }, {
    key: 'move',
    value: function move() {
      var cH = this.cH;
      var tH = document.documentElement.offsetHeight; // totalHeight  body总高度，总高度可能会变化， 所以每次都进行计算  
      var bottomBarHeight = this.bottomBarHeight;
      var topBarHeight = this.topBarHeight;
      this.allCardList.forEach(function (cardInfo) {
        var aT = cardInfo.adDom.offset().top; // 广告card距离顶部距离  adTop  
        var aH = cardInfo.aH;
        var bH = cardInfo.bH;
        var mH = cardInfo.mH;
        var min = aT - cH + aH + bottomBarHeight < 0 ? 0 : aT - cH + aH + bottomBarHeight; // 完全进入可视区需滑动的距离
        var max = aT > tH - cH ? tH - cH - topBarHeight : aT - topBarHeight; // 从当前位置到完全展示结束（完全展示结束：顶部滑出屏幕顶端 或者 顶部还未滑出屏幕顶端时全部滑动已结束）
        var duration = max - min;
        if (duration < 100 || mH <= bH) {
          // 可移动距离太小 停止移动 || 图片本身高度 比 容器高度 小，停止移动
          cardInfo.imgDom.css('transform', 'translate3d(0, 0, 0)');
          return;
        }
        var moveScale = (mH - bH) / duration; // img的总滑动距离/可展示动画的屏幕滑动距离

        var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        if (scrollTop <= min) {
          scrollTop = min;
        }
        if (scrollTop > max) {
          scrollTop = max;
        }
        cardInfo.imgDom.css('transform', 'translate3d(0, ' + (scrollTop - min) * moveScale + 'px, 0)');
      });
    }
  }, {
    key: 'listener',
    value: function listener() {
      var _this2 = this;

      var debounce = new Date().getTime();
      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_utils__["a" /* $ */])(window).on('scroll', function () {
        if (new Date().getTime() - debounce < 50) {
          return false;
        } else {
          debounce = new Date().getTime();
        }
        _this2.move();
      });
    }
  }]);

  return weidongCard;
}();

/* harmony default export */ __webpack_exports__["a"] = (weidongCard);

/***/ }),
/* 55 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Event = function () {
  function Event() {
    _classCallCheck(this, Event);

    this.proxy = {};
  }

  _createClass(Event, [{
    key: "on",
    value: function on(tag, cb) {
      if (!this.proxy[tag]) {
        this.proxy[tag] = [];
      }
      this.proxy[tag].push(cb);
    }
  }, {
    key: "once",
    value: function once(tag, cb) {
      this.proxy[tag] = [cb];
    }
  }, {
    key: "off",
    value: function off(tag) {
      this.proxy[tag] = [];
    }
  }, {
    key: "emit",
    value: function emit(tag) {
      for (var _len = arguments.length, params = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        params[_key - 1] = arguments[_key];
      }

      this.proxy[tag] && this.proxy[tag].forEach(function (cb) {
        cb.apply(undefined, params);
      });
    }
  }]);

  return Event;
}();

/* harmony default export */ __webpack_exports__["a"] = (Event);

/***/ }),
/* 56 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapt_js__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__template_js__ = __webpack_require__(1);
// jshint esversion:6





var doc = document;
var win = window;
var isFirst = false;

var breaking = {
  init: function init(state) {
    // SM.data.breaking.title.feed_pos = 17;
    if (!SM || !SM.data || !SM.data.breaking || !SM.data.breaking.title || !SM.data.breaking.title.title || !SM.data.breaking.title.feed_pos) return false;
    if (state == 'up' && $("#j_card_breaking").length != 0) return false;
    this.josnData = SM.data.breaking;
    this.feedPosFn();
    this.tempGroup();
  },
  feedPosFn: function feedPosFn() {
    var pagePos = parseInt(SM.data.breaking.title.feed_pos);
    if (SM.data.feed[0] && SM.data.feed[0].length) {
      if (pagePos > SM.data.feed[0].length) {
        this.feedPos = pagePos - SM.data.feed[0].length - 1;
      } else {
        this.feedPos = 0;
      }
    } else {
      this.feedPos = pagePos - 1;
    }
    // debugger
  },
  tempGroup: function tempGroup() {
    var htmlStr = '';
    if ($("#j_card_intenews").children("a").length - 1 < this.feedPos) return false;
    if (this.breakHtmlStr) {
      this.staticHtml();
      return false;
    }
    htmlStr += '<section class="s_card_sp" id="j_card_breaking" data-sudaclick="ls_c_breaking" style="border-top: .2rem solid #e8e8e8;">';
    htmlStr += this.headTem();
    htmlStr += this.twoPicTem();
    htmlStr += this.feedTem();
    htmlStr += this.footTem();
    htmlStr += '</section>';
    this.breakHtmlStr = htmlStr;
    $("#j_card_intenews").children("a").eq(this.feedPos).get(0).insertAdjacentHTML("beforeBegin", htmlStr);
  },
  staticHtml: function staticHtml() {
    $("#j_card_breaking").remove();
    $("#j_card_intenews").children("a").eq(this.feedPos).get(0).insertAdjacentHTML("beforeBegin", this.breakHtmlStr);
  },
  headTem: function headTem() {
    var data = this.josnData;
    var navStr = '';
    navStr += '<nav class="two_nav" data-sudaclick="nav_tap_cardgroup">';
    navStr += '<a class="two_nav_a active" href="' + data.title.url + '" title="="' + data.title.title + '">' + data.title.title + '</a>';
    if (data.subtitle && data.subtitle.length) {
      for (var i = 0, len = data.subtitle.length; i < len; i++) {
        navStr += '<a class="two_nav_a" href="' + data.subtitle[0].link + '" title="' + data.subtitle[0].title + '">' + data.subtitle[0].title + '</a>';
      }
    }
    navStr += '<aside class="two_nav_a_p"></aside>';
    navStr += '</nav>';
    return navStr;
  },
  footTem: function footTem() {
    var footStr = '';
    var data = this.josnData;
    footStr = '<a href="' + data.title.link + '" data-sudaclick="card_more_undefined">\n                <ins class="most" title="\u70B9\u51FB\u67E5\u770B\u66F4\u591A">\u70B9\u51FB\u67E5\u770B\u66F4\u591A<span class="most_ic"></span></ins>\n              </a>';
    return footStr;
  },
  twoPicTem: function twoPicTem() {
    var data = this.josnData;
    if (!data.pic || data.pic.length != 2 || !data.pic[0].pic || !data.pic[1].pic) return '';
    var twoData1 = {},
        twoData2 = {};
    if (data.pic[0].pic.indexOf('sina') != -1) {
      twoData1.pic = data.pic[0].pic.replace('http:', 'https:');
    } else {
      twoData1.pic = data.pic[0].pic;
    }

    if (data.pic[1].pic.indexOf('sina') != -1) {
      twoData2.pic = data.pic[1].pic.replace('http:', 'https:');
    } else {
      twoData2.pic = data.pic[1].pic;
    }

    twoData1.link = data.pic[0].link || '';
    twoData1.title = data.pic[0].title || '';
    twoData2.link = data.pic[1].link || '';
    twoData2.title = data.pic[1].title || '';

    var twoTemStr = '<figure class="i_gx2">\n                    <a href="' + twoData1.link + '" title="' + twoData1.title + '" class="i_gx2_a cn">\n                      <img data-src="' + twoData1.pic + '" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=" alt="' + twoData1.title + '" class="img_width">\n                      <h2 class="i_gx2_str">' + twoData1.title + '</h2>\n                    </a>\n                    <a href="' + twoData2.link + '" title="' + twoData2.title + '" class="i_gx2_a cn">\n                    <img data-src="' + twoData2.pic + '" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=" alt="' + twoData2.title + '" class="img_width">\n                    <h2 class="i_gx2_str">' + twoData2.title + '</h2>\n                  </a>\n                  </figure>';
    return twoTemStr;
  },
  feedTem: function feedTem() {
    var data = this.josnData;
    if (!data.list || !data.list.length) return '';
    var feedStr = '';
    for (var i = 0, len = data.list.length; i < len; i++) {
      var info = this.adaptInfo(data.list[i]);
      feedStr += __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].Ztemplate.selectFnTem({ info: info });
    }
    return feedStr;
  },
  adaptInfo: function adaptInfo(data) {
    var info = {};
    info.title = data.title || '';
    info.imgs = data.pics && data.pics.imgs || '';
    if (data.pics && data.pics.imgs) {
      for (var i = 0, len = data.pics.imgs.length; i < len; i++) {
        if (data.pics.imgs[i].indexOf('sina') != -1) {
          info.imgs.push(data.pics.imgs[i].replace('http:', 'https:'));
        } else {
          info.imgs.push(data.pics.imgs[i]);
        }
      }
    }
    if (data.img && data.img.indexOf('sina') != -1) {
      info.img = data.img.replace('http:', 'https:');
    } else {
      info.img = data.img || '';
    }

    info.link = data.link || '';
    info.comment = data.comment || '';
    return info;
  }
};

/* harmony default export */ __webpack_exports__["a"] = (breaking);

/***/ }),
/* 57 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_exposure__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_exposure___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_exposure__);
/*jshint esversion:6*/



function initCardExpose() {
  var cardHandles = [{
    handle: '.h_module',
    tag: 'exp_title',
    recursive: false
  }, {
    handle: '#j_top_nav',
    tag: 'exp_top_nav',
    recursive: false
  }, {
    handle: '#j_imgSlide',
    tag: 'exp_imgSlide',
    recursive: false
  }, {
    handle: '#j_news_scroll',
    tag: 'exp_news_scroll',
    recursive: false
  }, {
    handle: '#j_card_yaowen',
    tag: 'exp_yaowen',
    recursive: false
  }, {
    handle: '#j_card_breaking',
    tag: 'exp_breaking',
    recursive: false
  },

  // {handle: '#j_card_news', tag: 'exp_news', recursive: false},
  {
    handle: '#j_card_sports',
    tag: 'exp_sports',
    recursive: false
  }, {
    handle: '#j_card_ent',
    tag: 'exp_ent',
    recursive: false
  }, {
    handle: '#j_card_local',
    tag: 'exp_local',
    recursive: false
  }, {
    handle: '#j_card_finance',
    tag: 'exp_finance',
    recursive: false
  }, {
    handle: '#j_card_tech',
    tag: 'exp_tech',
    recursive: false
  }, {
    handle: '#j_card_auto',
    tag: 'exp_auto',
    recursive: true
  }, {
    handle: '#j_card_house',
    tag: 'exp_house',
    recursive: false
  }, {
    handle: '#j_card_searchbar',
    tag: 'exp_searchbar',
    recursive: false
  }, {
    handle: '#j_card_mil',
    tag: 'exp_mil',
    recursive: false
  }, {
    handle: '#j_card_blog',
    tag: 'exp_blog',
    recursive: false
  }, {
    handle: '#j_card_edu',
    tag: 'exp_edu',
    recursive: false
  }, {
    handle: '#j_card_fashion',
    tag: 'exp_fashion',
    recursive: false
  }, {
    handle: '#j_card_life',
    tag: 'exp_life',
    recursive: false
  }, {
    handle: '#j_card_video',
    tag: 'exp_video',
    recursive: false
  }, {
    handle: '#j_card_games',
    tag: 'exp_games',
    recursive: false
  }, {
    handle: '#j_card_hotweibo',
    tag: 'exp_hotweibo',
    recursive: false
  }, {
    handle: '#j_card_like_feed',
    tag: 'exp_like_feed',
    recursive: false
  }, {
    handle: '#j_card_apprecommend',
    tag: 'exp_apprecommend',
    recursive: false
  }, {
    handle: '#j_bottom_nav',
    tag: 'exp_bottom_nav',
    recursive: false
  }, {
    handle: '#j_card_shehui',
    tag: 'exp_shehui',
    recursive: false
  }];
  var i = 0;
  var j = 0;
  var len = cardHandles.length;
  var currentElement = null;
  var currentHandle = '';
  var recursionEles = [];
  var currentRec = null;
  var recLen = 0;

  for (i = 0; i < len; i++) {
    currentHandle = cardHandles[i].handle;

    currentElement = document.querySelector(currentHandle);

    currentElement && __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_exposure___default.a.pushListeningEle([currentElement], function (index) {
      return function () {
        // console.log(index);

        var countInfo = {
          'type': 'cardViewExp',
          'title': 'cardViewExp',
          'name': cardHandles[index].tag,
          'index': 0
        };

        suda_count(countInfo);
      };
    }(i), false);

    //递归
    if (cardHandles[i].recursive) {
      recursionEles = currentElement.querySelectorAll('.f_card');

      for (j = 1, recLen = /*recursionEles.length*/4; j <= recLen; j++) {
        currentRec = recursionEles[j];

        currentRec && __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_exposure___default.a.pushListeningEle([currentRec], function (i, j) {
          return function () {
            // console.log(index)

            var countInfo = {
              'type': 'cardViewExp',
              'title': 'cardViewExp',
              'name': cardHandles[i].tag,
              'index': j
            };

            suda_count(countInfo);
          };
        }(i, j), false);
      }
    }
  }
}

/* unused harmony default export */ var _unused_webpack_default_export = (initCardExpose);

/***/ }),
/* 58 */
/***/ (function(module, exports) {

var _typeof2 = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/*! author: {"name": "sola", "email": "leitao3[at]staff.sina.com.cn"} */
/******/(function (modules) {
  // webpackBootstrap
  /******/ // The module cache
  /******/var installedModules = {};
  /******/
  /******/ // The require function
  /******/function __webpack_require__(moduleId) {
    /******/
    /******/ // Check if module is in cache
    /******/if (installedModules[moduleId]) {
      /******/return installedModules[moduleId].exports;
      /******/
    }
    /******/ // Create a new module (and put it into the cache)
    /******/var module = installedModules[moduleId] = {
      /******/i: moduleId,
      /******/l: false,
      /******/exports: {}
      /******/ };
    /******/
    /******/ // Execute the module function
    /******/modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
    /******/
    /******/ // Flag the module as loaded
    /******/module.l = true;
    /******/
    /******/ // Return the exports of the module
    /******/return module.exports;
    /******/
  }
  /******/
  /******/
  /******/ // expose the modules object (__webpack_modules__)
  /******/__webpack_require__.m = modules;
  /******/
  /******/ // expose the module cache
  /******/__webpack_require__.c = installedModules;
  /******/
  /******/ // define getter function for harmony exports
  /******/__webpack_require__.d = function (exports, name, getter) {
    /******/if (!__webpack_require__.o(exports, name)) {
      /******/Object.defineProperty(exports, name, {
        /******/configurable: false,
        /******/enumerable: true,
        /******/get: getter
        /******/ });
      /******/
    }
    /******/
  };
  /******/
  /******/ // getDefaultExport function for compatibility with non-harmony modules
  /******/__webpack_require__.n = function (module) {
    /******/var getter = module && module.__esModule ?
    /******/function getDefault() {
      return module['default'];
    } :
    /******/function getModuleExports() {
      return module;
    };
    /******/__webpack_require__.d(getter, 'a', getter);
    /******/return getter;
    /******/
  };
  /******/
  /******/ // Object.prototype.hasOwnProperty.call
  /******/__webpack_require__.o = function (object, property) {
    return Object.prototype.hasOwnProperty.call(object, property);
  };
  /******/
  /******/ // __webpack_public_path__
  /******/__webpack_require__.p = "";
  /******/
  /******/ // Load entry module and return exports
  /******/return __webpack_require__(__webpack_require__.s = 7);
  /******/
})(
/************************************************************************/
/******/[
/* 0 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });

  var _createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
      }
    }return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
    };
  }();

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Tool = function () {
    function Tool() {
      _classCallCheck(this, Tool);
    }

    _createClass(Tool, [{
      key: '$',
      value: function $(id) {
        return document.getElementById(id);
      }
    }, {
      key: 'rnd',
      value: function rnd() {
        return Math.floor(Math.random() * 2147483648).toString(36);
      }
    }, {
      key: 'getRemMath',
      value: function getRemMath(size) {
        var rem = parseFloat(window.getComputedStyle(document.documentElement)['fontSize'].match(/^\d+/)[0]);
        var math = rem * size;
        return math;
      }
    }]);

    return Tool;
  }();

  var tool = exports.tool = new Tool();

  /***/
},
/* 1 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.addStyle = undefined;

  var _tool = __webpack_require__(0);

  var sinaCreativeStyle = window.sinaCreativeStyle = {};
  var addStyle = exports.addStyle = function addStyle(classOrKeyframe, styles) {
    var style;
    var styletext = '';
    if (!sinaCreativeStyle.cacheCss) {
      sinaCreativeStyle.cacheCss = {};
    }
    if (sinaCreativeStyle.cacheCss[classOrKeyframe]) {
      return false;
    } else {
      sinaCreativeStyle.cacheCss[classOrKeyframe] = true;
    }
    var joinStr = classOrKeyframe.match(/^@/) ? ' ' : ':';
    if (_tool.tool.$('creativeStyle')) {
      style = _tool.tool.$('creativeStyle');
    } else {
      style = document.createElement('style');
      style.type = 'text/css';
      style.id = 'creativeStyle';
      document.head.appendChild(style);
    }
    for (var i in styles) {
      styletext += i + joinStr + '' + styles[i] + ';';
    }
    style.innerHTML += classOrKeyframe + '{' + styletext + '}\n';
  };

  /***/
},
/* 2 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  var getOffset = exports.getOffset = function getOffset(el) {
    var L = 0;
    var T = 0;
    var W = el.offsetWidth;
    var H = el.offsetHeight;
    var scaleX = void 0;
    var scaleY = void 0;
    while (el && el.nodeType === 1) {
      if (el.id === 'debug') {
        return {
          width: 0,
          height: 0,
          left: 0,
          top: 0
        };
      }
      L += el.offsetLeft;
      T += el.offsetTop;
      // 兼容border
      /* eslint-disable no-undef */
      var borderTop = getComputedStyle(el).borderTop.match(/^\d+/) && getComputedStyle(el).borderTop.match(/^\d+/)[0];
      var borderLeft = getComputedStyle(el).borderLeft.match(/^\d+/) && getComputedStyle(el).borderLeft.match(/^\d+/)[0];
      if (borderLeft) {
        L += parseFloat(borderLeft);
      }
      if (borderTop) {
        T += parseFloat(borderTop);
      }
      // 兼容transform
      var matrix = getComputedStyle(el).transform.match(/matrix\((.+)\)/) && getComputedStyle(el).transform.match(/matrix\((.+)\)/)[1];
      if (matrix) {
        L += parseFloat(matrix.split(',')[4]);
        T += parseFloat(matrix.split(',')[5]);
        scaleX = parseFloat(matrix.split(',')[0]);
        scaleY = parseFloat(matrix.split(',')[3]);
        L += (1 - scaleX) * el.offsetWidth / 2;
        T += (1 - scaleY) * el.offsetHeight / 2;
      }
      el = el.offsetParent;
    }
    return {
      width: W,
      height: H,
      left: L,
      top: T
    };
  };

  /***/
},
/* 3 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.log = undefined;

  var _tool = __webpack_require__(0);

  var log = exports.log = function log(url, useCache) {
    var img = new Image();
    var key = '_sinaCreative_log_' + _tool.tool.rnd();
    window[key] = img;
    img.onload = img.onerror = img.onabort = function () {
      img.onload = img.onerror = img.onabort = null;

      window[key] = null;
      img = null;
    };
    img.src = url + (useCache ? '' : (url.indexOf('?') > 0 ? '&' : '?') + key);
  };

  /***/
},
/* 4 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.moveXYZwhenScroll = undefined;

  var _getOffset = __webpack_require__(2);

  var _log = __webpack_require__(3);

  var _showStaticTop = __webpack_require__(6);

  var moveXYZwhenScroll = exports.moveXYZwhenScroll = function moveXYZwhenScroll(dom, moveScale, min, max, direction, options) {
    var staytop = true;
    var firstVision = false;
    // let oldList = options.parent.parentNode.children.length
    window.addEventListener('scroll', move);
    var debounce = new Date().getTime();
    function move(e) {
      if (new Date().getTime() - debounce < 50) {
        return false;
      } else {
        debounce = new Date().getTime();
      }
      var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
      // let nowList = options.parent.parentNode.children.length
      // 新插入节点导致列表高度发生变化,导致之前利用top计算的min和max移动距离出现问题,需重新计算 oldList为旧列表 nowList为新列表
      // if (oldList !== nowList) {
      var parent = (0, _getOffset.getOffset)(options.parent);
      var pT = parent.top;
      var pH = parent.height;
      var wH = document.documentElement.clientHeight;
      var wLH = document.documentElement.offsetHeight;
      min = pT - wH + pH < 0 ? 0 : pT - wH + pH;
      max = pT > wLH - wH ? wLH - wH : pT;
      // oldList = nowList
      // }

      if (min <= scrollTop && scrollTop <= max) {
        // 完全可视
        if (options.showStatic && scrollTop < max && staytop) {
          (0, _showStaticTop.showStaticTop)(options.parent, 'delete');
          staytop = false;
        }
        if (!firstVision && options.vision && options.vision.length) {
          firstVision = true;
          // console.log('firstVision log success')
          for (var i = 0, il = options.vision.length; i < il; i++) {
            (0, _log.log)(options.vision[i]);
          }
        }
      }
      if (dom) {
        if (scrollTop <= min) {
          scrollTop = min;
        }
        // if (options.showStatic && scrollTop < max && staytop) {
        //     staytop = false
        //     This.showStaticTop(options.parent, 'delete')
        // }
        if (scrollTop > max) {
          scrollTop = max;
          if (options.showStatic && !staytop) {
            staytop = true;
            (0, _showStaticTop.showStaticTop)(options.parent);
          }
        }
        if (direction === 'horizon') {
          // console.log(dom.length)
          if (dom.length) {
            dom.forEach(function (item) {
              item.style.transform = 'translate3d(' + -(scrollTop - min) * moveScale + 'px, 0, 0)';
            });
          } else {
            dom.style.transform = 'translate3d(' + -(scrollTop - min) * moveScale + 'px, 0, 0)';
          }
        } else {
          // console.log(dom.length)
          // 先展示广告底部逻辑
          // dom.style.transform = 'translate3d(0, '+ - (max - scrollTop) * moveScale +'px, 0)'
          dom.style.transform = 'translate3d(0, ' + -(max - scrollTop) * moveScale + 'px, 0)';
          // console.log('translateY(0, '+ - parseInt((max - scrollTop) * moveScale, 10) +'px, 0)')
          // dom.style.transform = 'translateY('+ - (scrollTop - min) * moveScale +'px)'
        }
      }
    }
  };

  /***/
},
/* 5 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });

  var _createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
      }
    }return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
    };
  }();

  function _classCallCheck(instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  }

  var Browser = function () {
    function Browser() {
      _classCallCheck(this, Browser);
    }

    _createClass(Browser, [{
      key: "getUA",
      value: function getUA() {
        return navigator.userAgent;
      }
    }, {
      key: "isMobile",
      value: function isMobile() {
        return this.getUA().match(/mobile/i);
      }
    }, {
      key: "isUC",
      value: function isUC() {
        return this.getUA().match(/UC/i);
      }
    }, {
      key: "isQQ",
      value: function isQQ() {
        return this.getUA().match(/QQ/i);
      }
    }, {
      key: "isIOS",
      value: function isIOS() {
        return this.getUA().match(/(iPhone|iPod|iPad);?/i);
      }
    }, {
      key: "isOS9",
      value: function isOS9() {
        return this.getUA().match(/(OS 9_)/i);
      }
    }, {
      key: "isAndroid",
      value: function isAndroid() {
        return this.getUA().match(/android/i);
      }
    }]);

    return Browser;
  }();

  var isbrowser = exports.isbrowser = new Browser();

  /***/
},
/* 6 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.showStaticTop = undefined;

  var _tool = __webpack_require__(0);

  var _addStyle = __webpack_require__(1);

  // 吸顶效果
  var showStaticTop = exports.showStaticTop = function showStaticTop(dom, deleteThis) {
    // let staytopTimeout
    var destoryTimeout = void 0;
    var staticTimeout = void 0;
    var fixed = void 0;
    if (!_tool.tool.$('fixedCrHolder') && !deleteThis) {
      fixed = document.createElement('div');
      fixed.className = 'fixedCrHolder';
      fixed.id = 'fixedHolder';
      document.body.appendChild(fixed);
    } else {
      fixed = _tool.tool.$('fixedHolder');
      if (fixed) {
        fixed.className = 'fixedCrHolder';
      } else {
        return;
      }
    }
    if (deleteThis) {
      clearTimeout(staticTimeout);
      clearTimeout(destoryTimeout);
      fixed.parentNode.removeChild(fixed);
      return false;
    }
    (0, _addStyle.addStyle)('.fixedCrHolder', {
      // 'box-shadow': '2px 2px 3px rgba(100, 100, 100, 0.3)',
      'z-index': '100',
      'position': 'fixed',
      'top': 0,
      'left': '50%',
      'transform': 'translateX(-50%)',
      'transition': '1s'
    });
    (0, _addStyle.addStyle)('.fixedCrHolder.collapse', {
      'transform': 'translate(-50%, -100%)'
    });
    var showDom = dom;
    var showDomImg = showDom.querySelector('img');
    // showDomImg.style.transform = 'translate3d(0px, '+ -(showDomImg.offsetHeight-100) +'px, 0px)'
    showDomImg.style.transform = 'translate3d(0px, 0px, 0px)';
    fixed.style.cssText = 'width:' + dom.offsetWidth + 'px;height:1rem;overflow:hidden;';
    fixed.innerHTML = showDom.outerHTML;

    staticTimeout = setTimeout(function () {
      fixed.className += ' collapse';
    }, 2000);
    destoryTimeout = setTimeout(function () {
      var fixed = _tool.tool.$('fixedHolder');
      if (fixed) {
        fixed.parentNode.removeChild(fixed);
      }
    }, 3000);
  };

  /***/
},
/* 7 */
/***/function (module, exports, __webpack_require__) {

  module.exports = __webpack_require__(8);

  /***/
},
/* 8 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.sinaCreative = undefined;

  var _typeof = typeof Symbol === "function" && _typeof2(Symbol.iterator) === "symbol" ? function (obj) {
    return typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj === 'undefined' ? 'undefined' : _typeof2(obj);
  };

  var _log = __webpack_require__(3);

  var _addStyle = __webpack_require__(1);

  var _wdLargeImage = __webpack_require__(9);

  var _wdGroupImages = __webpack_require__(10);

  var _multiFrameLargeImages = __webpack_require__(11);

  // import {fixTopBanner} from './template/_fixTopBanner'

  /* eslint-disable no-undef */
  var sinaCreative = window.sinaCreative = {};
  (function (factory) {
    if (true) {
      !(__WEBPACK_AMD_DEFINE_FACTORY__ = factory, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else if ((typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object') {
      factory();
    } else {
      factory();
    }
  })(function () {
    var init = function init() {
      var preloadAds = window.sinaCreative instanceof Array ? window.sinaCreative.slice() : [];
      if (preloadAds && preloadAds.shift) {
        for (var ad, len = 100; (ad = preloadAds.shift()) && len-- > 0;) {
          sinaCreative._render(ad);
        }
      }
    };

    var push = function push(ad) {
      sinaCreative._render(ad);
    };

    sinaCreative.init = init;
    sinaCreative.push = push;

    // var staytopTimeout

    sinaCreative._render = function (ad) {
      // var tempId = (ad.data && ad.data.templateId) || ''
      // setTimeout(function () {
      switch (ad.data.templateid + '') {
        case '53':
          // 微动大图
          (0, _wdLargeImage.wdLargeImage)(ad.ele, ad.data);
          break;
        case '52':
          // 微动组图
          (0, _wdGroupImages.wdGroupImages)(ad.ele, ad.data);
          break;
        case '51':
          // 多帧大图
          (0, _multiFrameLargeImages.multiFrameLargeImages)(ad.ele, ad.data);
          break;
        // case 'hf': // 吸顶通栏
        //   fixTopBanner(ad.ele, ad.data)
        //   break
        default:
          console.log('模板选择错误: ' + ad.data.pdps);
      }
      // }, 2000)
      (0, _addStyle.addStyle)('.commonBg', {
        'background': '#f2f2f2 url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABkCAMAAAB5NchtAAAAdVBMVEUAAADe3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t7e3t6SRYNBAAAAJnRSTlMA+GkQj3qqhDvLC5oHHPDrULNXvSEWw6VDMyvUoHFK5WLg2iZdrgp0JxQAAAZDSURBVGje1NfpkpswDABgyYaAAZODI0CSDbn0/o/YAmbtDaRtZsTu9PtHmIxtSZYx/Ld0UGY1/JwTElEMPyamjgcjKR7fGg+Pejsw2jURHeHbCOphBL1kTx0flpbAoEbqbU34S+qghmXJFbXQiQ40uA+/K+rFsKykHLMc0ACls343APoGCwjGRTZIA9XPK6NBAIObdyHKgJ3GcduVZKy6pz0NsIBOEQ9PwM4b61zQKANIjnY2nTa1T1wS0WVUoplAhfTJ8xWNxFCmA2yAz5aCz3WfTx7SPAEQXsjwgc9pKK8D/QXuSyc3fGTaryekN5wL1gD0EVjRG0Jg1KVVRTt6wxEYfVAH6R0VMFrR+zbARyI9u+79Ta0lyKKpRHylqS37uW+VIoev8tNkg2IBbBQ5Uq+ZrxNFBnsbqsjCQMIrAslVMnbhT1kOf9BcyIER8Cjwn6Oan8kRcpcg7sAhJUyFSNYOeGTTnR3GByRCFejpRcESwCLB5/iHikb4nJQbWSdgUdNAgeGRy3u9ZVtg0T6V1IOM+Uwf2U8Dn3oHd/2u68sikKz3v8Dk32n25k3+IgIKeAQm0u6WuGyKWmk5F2nFXYNwot6Hcy6uNQDoh5rpNwWNUgk8Nm4TCJ0NqeY6rs9/Fmm3BkIn6KbxP8BRpMwVYO9gB2c2G7cc68m5xX0n2ZkisHFXCYC+2shME4AbYGKTfY3st8EhiJF68eLj2yNuaweZPQqSmIx1CLyEKbeoz8jatqIGrEaRUebAyi5b9QNGYntGPGf+DSzpoRMVfnekDnoFzMmDlIyVhkU05Xj7reCJFhmNHjUs5n6hQbr1P5qoT0b+5VKy9m6wpGRXkiNNyZXuNwksLj9lSFNYBlUC3yQKRZxdcIz64eG19UKDy/B+Cn7z20pPX+o813KSpbzaCb/7j/jQMKOoNyLwjqvVah97QVvlL9f5q11zXVoTBsJwEs4HOQQVBQQUvtz/Jbadxi67LLYznU7+9PknE2PInrJv1APqeMsQ+lGeSxWFuEl+RShmY5VdC0Mpv9acMbUPI4GmO1xuZWOBIGfc4vOUik631+Cg8HbnnTHmL/kHKsVqjslw6XkdrfRnwS+bIQqUUkGmIEce8fozkUWRwsPTiu+UVAVqzEc60l/xPMnv86yk8yrzH/aS5iMaZK5PLEx3W/rV2RPeUkW2zp6IJQc4sh6jNv1KWUdrvFw8z+tuj1qynXwP03vbqJDG9LQvGu3EwNQGSkUJ54XPWi0k1Hri3/h9ihyPboyP2w474rlRiWNoZeir5SknPgLezlUnQfBHsDj4ZMfpIenvZRr0Xbu7xMe/YrEnppv74BxZwDKTDzdvet/j22YP6n5F0k5ALdBwyeRCZgbyuw78sOkneWcb+ROTfeogZiXbgeTXit2n2zZf+73cWrhEAf0pWzzVe8CTxEDFGvvBuHLcSpJ8Y05Yrw1PcrJ7SxadkdsRqqGE75+/0hqBYkXjFoQCbdFI68fEigEFUYlymz1wcPTs7s3S8CjigzcSSAvrAid7p4qRr0yI84GuHveGpcEWKlFQ4CCMcBDmV3R0VfEFHIXVE8e2OKpXJQkvmDpjRZqIZG8ZpEj+tFwEZVl9enrqcZTGJG2MwrIbdYePchPQHpOsyELOc2gHvXWQipwzNO9G2E4hn5X0/l7hNN05ecjyQCaPiCLXsPdLLTkKLgJo949nI6OUUWnhXwE1+c7EuVEOtlvxm0oBpDDqtV3T9PD4y7IB5cEELQ9rlTfsXD5T9EWqJqIog4vLcD7bUWMD1rwgn3uQIHwJwMfO1RqgeHSeSM86KzbPNGw3POyTaz8Zevi5kfuwK+tdPXauzHwkOeNKyyM1Th01rd03NgjvqB3gKBS5F+GZYiJDVzQIc5hGkWTplcfv5SOHk+aA7D0swdW7ZXN5TWusNjwlve5pJbvKsIMlYouXbBDKXY1dC2baWqeCcpnDgg5TsEooXx1T85gg9H5NHPRYzfDHVBzQrdFQN0lybdpI31M2LSb2Y/gmE4AO3/hIx9KB37ZZFqlx+Vut0CjhiAz+uOWGK1R+N0yQXpyQggu6oYMS6wR7JJ9y4QoFFc4NEcSgG3woA24I4STihtrxBogGboPdUEMZcsNgauEUPaTiP/+Sb3Y6K5PyZFK5AAAAAElFTkSuQmCC) center/1.28rem 1rem no-repeat'
      });
      // 前端曝光
      if (ad.data && ad.data.pvmonitor) {
        for (var i = 0, il = ad.data.pvmonitor.length; i < il; i++) {
          (0, _log.log)(ad.data.pvmonitor[i]);
        }
      }
    };

    sinaCreative.init();
    return sinaCreative;
  });

  exports.sinaCreative = sinaCreative;

  /***/
},
/* 9 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.wdLargeImage = undefined;

  var _tool = __webpack_require__(0);

  var _addStyle = __webpack_require__(1);

  var _getOffset = __webpack_require__(2);

  var _browser = __webpack_require__(5);

  var _moveXYZwhenScroll = __webpack_require__(4);

  // 微动大图
  var wdLargeImage = exports.wdLargeImage = function wdLargeImage(id, data) {
    var wH = void 0;
    var wLH = void 0;
    var htmlnode = ['<a href="' + data.url + '" data-info="' + (data.info || '') + '">', '<h2 class="title" style="background: #fff;color:#1a1a1a; line-height: .48rem; font-size: .34rem; overflow: hidden">', data.title, '</h2>', '<div class="holder commonBg" style="height:3rem; margin: .18rem 0 .22rem; overflow:hidden">', '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////AAAAVcLTfgAAAAxJREFUeNpiYAAIMAAAAg" data-src="' + data.img.u + '" style="width: 100%;animation:0s !important;">', '</div>', '<div class="tag tag cm_f_ic cm_f_ic_l" style="position: relative;">', '<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + (Math.random() * 8 + 1).toFixed(1) + '万</span></em>', data.adSource ? '<cite class="m_f_con_add"> ' + data.adSource + '</cite>' : '', '<mark class="cm_mark" style="vertical-align: middle;">广告</mark>', '</div>', '</a>'];
    _tool.tool.$(id).className += ' scrollbanner';
    _tool.tool.$(id).style.cssText += 'transition: 0.5s ease;background:#fff;margin: 0 .2rem; padding: .22rem 0;border-bottom: 1px solid #e4e4e4';
    _tool.tool.$(id).innerHTML = htmlnode.join('');

    wH = document.documentElement.clientHeight;
    wLH = document.documentElement.offsetHeight;

    var holder = _tool.tool.$(id).querySelector('.holder');
    var moveable = holder.querySelector('img');

    var remVal = _tool.tool.getRemMath(0.2); // 计算margin留白,此处传入的是$(id)的margin
    var offset = (0, _getOffset.getOffset)(holder);
    var parent = (0, _getOffset.getOffset)(_tool.tool.$(id));
    var pT = parent.top;
    var pH = parent.height;

    // let cT = offset.top
    var cW = offset.width - remVal * 2;
    var cH = offset.height;

    // let mH = moveable.offsetHeight
    var min = pT - wH + pH < 0 ? 0 : pT - wH + pH;
    var max = pT > wLH - wH ? wLH - wH : pT;
    var duration = max - min;
    var mH = cW * 354 / 710;
    var oMoveScale = (mH - cH) / duration;
    var options = {
      parent: _tool.tool.$(id),
      showStatic: false,
      vision: data.vision
      // 低版本浏览器优雅降级, IOS UC, android QQ 浏览器
    };if (_browser.isbrowser.isUC() && _browser.isbrowser.isIOS() || _browser.isbrowser.isQQ()) {
      if (!_browser.isbrowser.isOS9()) {
        // 方案1: 自动运动
        moveable.className = 'wdbp-pollyfill';
        (0, _addStyle.addStyle)('.wdbp-pollyfill', {
          '-webkit-animation': 'weidong-bp 5s linear infinite alternate'
        });
        (0, _addStyle.addStyle)('@-webkit-keyframes weidong-bp', {
          '0%': '{-webkit-transform: translateY(-25%)}',
          '100%': '{-webkit-transform: translateY(0)}'
        });
        (0, _moveXYZwhenScroll.moveXYZwhenScroll)(null, 1, min, max, 'vertical', options);
      } else {
        // 方案2: 展开成普通大图
        holder.style.height = '3.54rem';
        moveable.style.height = '100%';
      }
    } else {
      // 先展示广告底部逻辑
      // moveable.style.transition = '0.2s ease-out'
      moveable.style.transform = 'translate3d(0, ' + -(max - min) * oMoveScale + 'px, 0)';
      (0, _moveXYZwhenScroll.moveXYZwhenScroll)(moveable, oMoveScale, min, max, 'vertical', options);
    }
  };

  /***/
},
/* 10 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.wdGroupImages = undefined;

  var _tool = __webpack_require__(0);

  var _addStyle = __webpack_require__(1);

  var _getOffset = __webpack_require__(2);

  var _browser = __webpack_require__(5);

  var _moveXYZwhenScroll = __webpack_require__(4);

  // 微动组图
  var wdGroupImages = exports.wdGroupImages = function wdGroupImages(id, data) {
    var wH = void 0;
    var wLH = void 0;
    var htmlnode = ['<a href="' + data.url + '" style="display:block;box-sizing:border-box;padding: .22rem 0;margin: 0 .2rem;position: relative;border-bottom: 1px solid #e4e4e4;" data-info="' + (data.info || '') + '">', '<h2 style="box-sizing: border-box;font-size: .34rem;color: #1a1a1a;line-height: .48rem;overflow: hidden;text-overflow: ellipsis;box-orient: vertical;word-break: break-all;">', data.title, '</h2>', '<div style="margin: .18rem 0 .22rem;position: relative;">', '<div class="item commonBg" style="height: 100%;overflow: hidden;position:relative;">', '<div style="position:absolute;width:.1rem;height:100%;left:33%;background:#fff;z-index:2;"></div>', '<div style="position:absolute;width:.1rem;height:100%;left:66%;background:#fff;z-index: 2;"></div>', '<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////AAAAVcLTfgAAAAxJREFUeNpiYAAIMAAAAg" data-src="' + data.img.u + '" style="height:100%;animation:0s !important;">', '</div>', '</div>', '<div class="tag tag cm_f_ic cm_f_ic_l" style="position: relative;">', '<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + (Math.random() * 8 + 1).toFixed(1) + '万</span></em>', data.adSource ? '<cite class="m_f_con_add"> ' + data.adSource + '</cite>' : '', '<mark class="cm_mark" style="vertical-align: middle;">广告</mark>', '</div>', '</a>'];

    // $(id).className += ' groupanimation'
    _tool.tool.$(id).style.cssText += ' background:#fff';
    _tool.tool.$(id).innerHTML = htmlnode.join('');

    wH = document.documentElement.clientHeight;
    wLH = document.documentElement.offsetHeight;

    var holder = _tool.tool.$(id).querySelector('.item');
    var moveable = _tool.tool.$(id).querySelectorAll('img')[0];

    var offset = (0, _getOffset.getOffset)(holder);
    var parent = (0, _getOffset.getOffset)(_tool.tool.$(id));

    var pT = parent.top;
    var pH = parent.height;

    // let cT = offset.top
    var cW = offset.width;
    // let cH = offset.height

    var contrastWidth = cW * 1.2;
    var contrastHeight = cW * 1.2 / 720 * 154;
    moveable.style.width = contrastWidth + 'px';
    moveable.style.height = contrastHeight + 'px';

    // let mH = moveable.offsetHeight
    var min = pT - wH + pH < 0 ? 0 : pT - wH + pH;
    var max = pT > wLH - wH ? wLH - wH : pT;
    var duration = max - min;
    // let mW =  cH * 260 / 154
    var mW = contrastWidth;

    var oMoveScale = (mW - cW) / duration;
    var options = {
      parent: _tool.tool.$(id),
      vision: data.vision
      // 低版本浏览器优雅降级, IOS UC, android QQ 浏览器
    };if (_browser.isbrowser.isUC() && _browser.isbrowser.isIOS() || _browser.isbrowser.isQQ()) {
      if (!_browser.isbrowser.isOS9()) {
        // 方案1: 自动运动
        moveable.className = 'wdgp-pollyfill';
        (0, _addStyle.addStyle)('.wdgp-pollyfill', {
          '-webkit-animation': 'weidong-gp 5s linear infinite alternate'
        });
        (0, _addStyle.addStyle)('@-webkit-keyframes weidong-gp', {
          '0%': '{-webkit-transform: translateX(-' + (contrastWidth - cW) + 'px)}',
          '100%': '{-webkit-transform: translateX(0)}'
        });
        (0, _moveXYZwhenScroll.moveXYZwhenScroll)(null, 1, min, max, 'horizon', options);
      } else {
        holder.style.height = '1.54rem';
        moveable.style.width = '100%';
        moveable.style.height = '100%';
      }
    } else {
      // 先展示广告底部逻辑
      // moveable.style.transform = 'translateX(' + -(max - min) * oMoveScale + 'px)'
      (0, _moveXYZwhenScroll.moveXYZwhenScroll)(moveable, oMoveScale, min, max, 'horizon', options);
    }
  };

  /***/
},
/* 11 */
/***/function (module, exports, __webpack_require__) {

  "use strict";

  Object.defineProperty(exports, "__esModule", {
    value: true
  });
  exports.multiFrameLargeImages = undefined;

  var _tool = __webpack_require__(0);

  var _addStyle = __webpack_require__(1);

  var _getOffset = __webpack_require__(2);

  var _moveXYZwhenScroll = __webpack_require__(4);

  // 多帧大图
  var multiFrameLargeImages = exports.multiFrameLargeImages = function multiFrameLargeImages(id, data) {
    (0, _addStyle.addStyle)('.sliderCr', {
      'background': '#fff',
      'overflow': 'hidden'
    });
    (0, _addStyle.addStyle)('.sliderCr .holder', {
      'position': 'relative',
      'overflow': 'hidden',
      'width': '100%',
      'height': '197px',
      'transition': '0.3s'
    });
    (0, _addStyle.addStyle)('.sliderCr .holder:after', {
      'content': '',
      'clear': 'both',
      'display': 'block'
    });
    (0, _addStyle.addStyle)('.sliderCr .item', {
      'position': 'absolute',
      'transition': '0.3s'
    });
    (0, _addStyle.addStyle)('.sliderCr .item img', {
      'width': '100%'
    });
    (0, _addStyle.addStyle)('.sliderCr .bgcover', {
      'width': '100%',
      'height': '100%',
      'position': 'absolute',
      'top': '0',
      'left': '0',
      'background': 'rgba(0, 0, 0, 0.8)'
    });
    (0, _addStyle.addStyle)('.sliderCr a .logo', {
      'width': '56px',
      'height': '56px',
      'z-index': '99',
      'margin': 'auto'
    });
    (0, _addStyle.addStyle)('.sliderCr a .logotitle', {
      'width': '100%',
      'position': 'absolute',
      'top': '50%',
      'left': '0',
      'text-align': 'center',
      'margin': '28px 0 0 0',
      'color': '#ccc',
      'font-size': '16px',
      'font-weight': '600'
    });
    (0, _addStyle.addStyle)('.sliderCr .qukankan', {
      'position': 'absolute',
      'bottom': '-36px',
      'right': '.1rem',
      'border': '1px solid #369',
      'font-size': '14px',
      'padding': '3px 5px',
      'border-radius': '3px',
      'color': '#369',
      'cursor': 'pointer'
    });
    var wH = void 0;
    var wLH = void 0;
    var htmlnode = ['<div style="box-sizing:border-box; display:block;padding: .22rem 0;margin: 0 .2rem;border-bottom: 1px solid #e4e4e4;">', '<a href="' + data.images[0].link + '" data-info="' + (data.info || '') + '"><h2 class="cm_tit" style="box-sizing:border-box;background: #fff;font-size: .34rem; overflow: hidden">' + data.title + '</h2></a>', '<div class="holder" style="transform:translateX(0px);height:3.3rem;margin: .18rem 0 .22rem">'];
    for (var i = 0, il = data.images.length; i < il; i++) {
      htmlnode.push('<div class="item commonBg">');
      htmlnode.push('<a href="' + data.images[i].link + '" data-info="' + (data.info || '') + '">');
      htmlnode.push('<div style="width:100%;height:100%;position:absolute;top:0;">');
      htmlnode.push('<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////AAAAVcLTfgAAAAxJREFUeNpiYAAIMAAAAg" data-src="' + data.images[i].u + '" style="width:100%;height:100%;animation:0s !important;">');
      htmlnode.push('<div class="info" style="width: 100%;padding: .6rem 0 .16rem;background:-webkit-gradient(linear, 0 0, 0 bottom, from(rgba(0,0,0,0)), to(rgba(0, 0, 0, 0.8)));position: absolute;bottom: 0;left:0;">');
      htmlnode.push('<span style="color: #fff;font-size:.28rem;letter-spacing: .02rem;padding:0 0 0 .25rem;"> ' + data.images[i].desc + '</span>');
      htmlnode.push('</div>');
      htmlnode.push('<div style="display: block;position:absolute;right:0.25rem;bottom:0.16rem;padding: .02rem .07rem;font-size:.2rem;color: #fff;border: 1px solid #fff;border-radius: 3px;">' + (data.images[i].ext || '去看看') + '</div>');
      htmlnode.push('</div>');
      htmlnode.push('</a>');
      htmlnode.push('</div>');
    }

    htmlnode.push('<div class="item" style="display:flex;position:relative;background:url(' + data.images[0].u + ') no-repeat center/cover">');
    htmlnode.push('<a href="' + data.url + '" data-info="' + (data.info || '') + '" style="width:100%;height:100%;display:flex;">');
    htmlnode.push('<div class="bgcover"></div>');
    htmlnode.push('<div class="logo"><img src="' + data.logo.u + '" /></div>');
    htmlnode.push('<div class="logotitle">' + data.logo.desc + '</div>');
    htmlnode.push('</a>');
    htmlnode.push('</div>');

    htmlnode.push('</div>');
    htmlnode.push('<div class="tag cm_f_ic cm_f_ic_l" style="position: relative;">');
    htmlnode.push('<em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">' + (Math.random() * 8 + 1).toFixed(1) + '万</span></em>');
    htmlnode.push(data.adSource ? '<cite class="m_f_con_add"> ' + data.adSource + '</cite>' : '');
    // htmlnode.push(data.adSource ? '<cite class="m_iq_f_con_c" style="vertical-align: middle;line-height: 1.32;width: 10em;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;word-wrap: break-word;"> ' + data.adSource + '</cite>' : '')
    htmlnode.push('<mark class="cm_mark" style="vertical-align: middle;">广告</mark>');
    htmlnode.push('</div>');
    htmlnode.push('</div>');

    _tool.tool.$(id).className += ' sliderCr';
    _tool.tool.$(id).innerHTML = htmlnode.join('');
    var r = _tool.tool.$(id).querySelector('.holder');
    var offset = (0, _getOffset.getOffset)(r);
    var width = offset.width;
    var height = offset.height;
    Array.prototype.forEach.call(r.childNodes, function (item, i) {
      var itemW = width - 20;
      var space = 10;
      item.style.width = itemW + 'px';
      if (i === r.childNodes.length - 1) {
        item.style.height = height + 'px';
      } else {
        item.style.height = height + 'px';
        // item.style.height = height - 40 + "px"
      }
      item.style.left = (itemW + space) * i + 'px';
    });

    var device = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());
    var clickEvtName = device ? 'touchstart' : 'mousedown';
    var moveEvtName = device ? 'touchmove' : 'mousemove';
    var endEvtName = device ? 'touchend' : 'mouseup';
    var isMouseDown = false;

    var startX = void 0;
    var startY = void 0;
    var nowX = void 0;
    var nowY = void 0;
    var moveX = void 0;
    var moveY = void 0;
    var oldmoveX = void 0;
    // let oldmoveY
    var currentPlay = 0;
    var maxPlay = r.childNodes.length - 1;
    r.style.width = width * r.childNodes.length + 'px';

    function GetSlideAngle(dx, dy) {
      return Math.atan2(dy, dx) * 180 / Math.PI;
    }

    r.addEventListener(clickEvtName, function (e) {
      isMouseDown = true;
      // e.preventDefault();
      startX = device ? e.touches[0].clientX : e.clientX;
      startY = device ? e.touches[0].clientY : e.clientY;
      clearInterval(auto);
    }, false);
    r.addEventListener(moveEvtName, function (e) {
      var tran = r.style.transform;
      var left = parseInt(tran.match(/translateX\((.*)px\)/)[1]);

      if (isMouseDown) {
        clearInterval(auto);
        nowX = device ? e.touches[0].clientX : e.clientX;
        nowY = device ? e.touches[0].clientY : e.clientY;
        moveX = nowX - startX;
        moveY = startY - nowY;
        var angle = GetSlideAngle(moveX, moveY);

        if (angle >= 120 && angle <= 180 || angle >= -180 && angle < -120) {
          // 左边滑动
          e.preventDefault();
        } else if (angle >= -60 && angle < 60) {
          // 右边滑动
          e.preventDefault();
        }

        if (left >= 0 && moveX > 0) {
          // console.log("左边边界")
          r.style.transition = '0.3s';
          r.style.transform = 'translateX(0px)';
          return;
        } else if (Math.abs(left) >= maxPlay * (width - 10) - 20 && moveX < 0) {
          // 最后一帧少挪20
          // console.log("右边边界")
          r.style.transition = '0.3s';
          r.style.transform = 'translateX(-' + (maxPlay * (width - 10) - 20) + 'px)';
          return;
        }

        r.style.transition = '0s';
        r.style.transform = 'translateX(' + (left + (moveX - oldmoveX)) + 'px)';
        oldmoveX = moveX;
      }
    }, false);
    r.addEventListener(endEvtName, function (e) {
      // e.preventDefault();
      moveX = nowX - startX;
      oldmoveX = 0;
      var itemOffset = r.firstChild.offsetWidth;

      isMouseDown = false;
      if (moveX > 0) {
        // alert('right')
        if (moveX > itemOffset * 0.2) {
          if (currentPlay > 0) {
            r.style.transition = '0.3s';
            currentPlay--;
            showAction();
          } else {
            // alert("到头了")
          }
        } else {
          r.style.transition = '0.3s';
          showAction();
        }
      } else {
        // alert('left')
        if (Math.abs(moveX) > itemOffset * 0.2) {
          if (currentPlay < maxPlay) {
            r.style.transition = '0.3s';
            currentPlay++;
            showAction();
          } else {
            // alert("到头了")
          }
        } else {
          r.style.transition = '0.3s';
          showAction();
        }
      }
      autoplay();
    });

    function showAction() {
      // 最后一帧少挪20
      var d = void 0;
      if (currentPlay === 0) {
        d = 0;
      } else if (currentPlay === data.images.length) {
        d = 20;
      } else {
        d = 10;
      }
      r.style.transform = 'translateX(-' + (currentPlay * (width - 10) - d) + 'px)';
    }
    var auto = void 0;

    function autoplay() {
      auto = setInterval(function () {
        if (currentPlay < maxPlay) {
          currentPlay++;
        } else {
          currentPlay = 0;
        }
        showAction();
      }, 3000);
    }
    autoplay();

    wH = document.documentElement.clientHeight;
    wLH = document.documentElement.offsetHeight;

    // let holder = tool.$(id).querySelector('.holder')
    // let offset = this.getOffset(holder)

    var parent = (0, _getOffset.getOffset)(_tool.tool.$(id));
    var pT = parent.top;
    var pH = parent.height;

    // let cT = offset.top
    // let cW = offset.width
    // let cH = offset.height

    var min = pT - wH + pH < 0 ? 0 : pT - wH + pH;
    var max = pT > wLH - wH ? wLH - wH : pT;
    var options = {
      parent: _tool.tool.$(id),
      vision: data.vision
    };
    (0, _moveXYZwhenScroll.moveXYZwhenScroll)(null, 1, min, max, 'vertical', options);
  };

  /***/
}]
/******/);
//# sourceMappingURL=home.min.js.map

/***/ }),
/* 59 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_backforward__ = __webpack_require__(13);



var doc = document;
var win = window;
var isHTTPS = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isHTTPS();

var likeAPIDOmain = isHTTPS ? 'https://cre-dp.sina.cn' : 'http://cre.dp.sina.cn';
var api = likeAPIDOmain + '/api/v3/get?merge=3&statics=1&this_page=1&length=1&cateid=sina_all&mod=wclick&cre=tianyi&pageurl=';
// var api = 'http://10.55.23.80' + '/api/v3/get?merge=3&statics=1&this_page=1&length=1&cateid=sina_all&mod=wclick&cre=tianyi&uid=123456&wap_force=1&pageurl=';

// 是否灰度回退强插广告
var isAdFeedMove = false;
if (SM && SM.ABT && SM.ABT && SM.ABT.FEED && SM.ABT.FEED.guanggao) {
    if (SM.ABT.FEED.guanggao == 1) {
        isAdFeedMove = true;
    }
}
if (location.href.indexOf("huidu=qiang_cha_guang_gao") != -1) {
    isAdFeedMove = true;
}

var isStopRefresh = false;
if (location.href.indexOf("feedmove=1") != -1) {
    isStopRefresh = true;
}
var feedmove = {
    target: false,
    init: function init() {

        __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_backforward__["a" /* default */].add(function () {
            if (feedmove.target) {
                if (isAdFeedMove) {
                    var ad = feedmove.getAdconfig();
                    if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log("回退强插广告");
                } else {
                    var ad = '';
                }
                if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log(ad);
                if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('feedmove 发送请求.........');
                var pclink = $(feedmove.target).data('pclink');
                __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].jsonp(api + (pclink.indexOf('?') == -1 ? pclink : pclink.split('?')[0]) + feedmove.ext + ad, function () {
                    if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('feedmove 请求成功.........');
                    feedmove.callback.apply(feedmove, arguments);
                }.bind(this), 'feedmove', function () {});
            }
        });
        __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_backforward__["a" /* default */].init();
        if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('绑定backforward...............');
    },
    getAdconfig: function getAdconfig() {

        var after = feedmove.getAfter();
        var before = feedmove.getBefore();
        var articleUrl = $(feedmove.target).attr('href') && $(feedmove.target).attr('href').split('?')[0];
        var article = {
            "id": $(feedmove.target).data('docid') || '',
            "tpl": this.getArticleTPL($(feedmove.target)),
            "url": escape(articleUrl) || '',
            "label": $(feedmove.target).data('label') || ''
        };

        var count = window.getCookie('feedmove_count') || 1;
        this.setCookie('feedmove_count', count - 0 + 1, 720, '/', '.sina.cn');
        return '&ad=' + __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].tyAdData({
            "channel": "11001",
            "context": {
                "after": after,
                "before": before,
                "article": article,
                "count": count
            }
        });
    },
    setCookie: function setCookie(key, value, expires, path, domain, m) {
        var s = [];
        s.push(key + "=" + escape(value));
        if (expires) {
            var t = new Date();
            var p = t.getTime() + expires * 3600000;
            t.setTime(p);
            s.push("expires=" + t.toGMTString());
        }
        if (path) {
            s.push("path=" + path);
        }
        if (domain) {
            s.push("domain=" + domain);
        }
        if (m) {
            s.push(m);
        }
        document.cookie = s.join(";");
    },
    getBefore: function getBefore() {
        var before = [];
        var obj = $(feedmove.target);
        while (obj.prev().length) {
            obj = obj.prev();
            if (obj.html().indexOf('广告') == -1) {
                before.unshift({
                    "id": obj.data('docid') || '',
                    "tpl": this.getArticleTPL(obj)
                    // 43小图  35大图 33组图
                });
            } else {
                before.unshift({
                    "id": obj.find('a').data('adid') + "" || '',
                    "tpl": obj.find('a').data('templateid') + "" || "43"
                });
                break;
            }
        }
        return before;
    },
    getAfter: function getAfter() {
        var after = [];
        var obj = $(feedmove.target);
        while (obj.next().length) {
            obj = obj.next();
            if (obj.html().indexOf('广告') == -1) {
                after.push({
                    "id": obj.data('docid') || '',
                    "tpl": this.getArticleTPL(obj)
                });
            } else {
                after.push({
                    "id": obj.find('a').data('adid') + "" || '',
                    "tpl": obj.find('a').data('templateid') + "" || "43"
                });
                break;
            }
        }
        return after;
    },
    getArticleTPL: function getArticleTPL(obj) {
        if (obj.attr('href')) {
            if (obj.attr('href').indexOf('v.sina.cn') != -1 || obj.attr('href').indexOf('video.sina.cn') != -1) {
                return "35";
            }
            if (obj.attr('href').indexOf('photo.sina.cn') != -1) {
                return "33";
            }
        }

        return "43";
    },

    callback: function callback(data, cardType, url, func, setStorage) {
        var baseData = data && data.data || [];
        var len = baseData && baseData.length;
        if (len == 0 || data.status && data.status.end == 0) {
            if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('feedmove 数据异常......');
        }
        feedmove.fn && feedmove.fn(baseData, data.sax);
        feedmove.target = false;
    },
    add: function add(arr, fn, ext, sampling) {
        // 抽样逻辑
        if (sampling && typeof sampling == 'number') {
            var num = Math.random();
            if (sampling < num) {
                if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('feedmove 抽样未命中 .......');
                return;
            }
        }
        if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('feedmove 抽样命中 ....... ');
        (function (fn) {
            arr.forEach(function (item) {
                if ($(item).data('fm_bind')) {
                    return;
                }
                $(item).data('fm_bind', 1);
                $(item).on('click', function () {
                    if (this.tagName == 'A' && $(this).data('pclink')) {
                        if ($(item).data('fm_click')) {
                            return;
                        }
                        $(item).data('fm_click', 1);
                        if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('feedmove 点击.........');
                        feedmove.target = this;
                        feedmove.fn = fn;
                        feedmove.ext = ext || '&feed_insert=0';
                        if (isStopRefresh) {
                            if (feedmove.target) {
                                var ad = feedmove.getAdconfig();
                                // debugger;
                                if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log(ad);
                                if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('feedmove 发送请求.........');
                                var pclink = $(feedmove.target).data('pclink');
                                __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].jsonp(api + (pclink.indexOf('?') == -1 ? pclink : pclink.split('?')[0]) + feedmove.ext + ad, function () {
                                    if (__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].isDebug()) console.log('feedmove 请求成功.........');
                                    feedmove.callback.apply(feedmove, arguments);
                                }.bind(this), 'feedmove', function () {});
                            }
                        }
                    }
                    if (isStopRefresh) {
                        return false;
                    }
                });
            });
        })(fn);
    }
};

feedmove.init();
window.feedmove = feedmove;
/* harmony default export */ __webpack_exports__["a"] = (feedmove);

/***/ }),
/* 60 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_lazyload__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_swiper__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_swiper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_swiper__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_exposure__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_exposure___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_exposure__);
// jshint esversion:6




var doc = document;
var win = window;
var isFirst = false;

var goodColumn = {
  init: function init() {
    if (isFirst || $("#j_card_intenews").length == 0 || !SM || !SM.data || !SM.data.jinpinlanmu || !SM.data.jinpinlanmu.list || !SM.data.jinpinlanmu.feed_pos || SM.data.jinpinlanmu.list.length < 4 || parseInt(SM.data.jinpinlanmu.feed_pos) < 1) return false;
    this.feedPosFn();
    if (this.feedPos >= $("#j_card_intenews").children("a").length) return false;
    this.appendHtml();
    this.swift();
    this.exeposure();
  },
  feedPosFn: function feedPosFn() {
    var pagePos = parseInt(SM.data.jinpinlanmu.feed_pos);
    if (SM.data.feed[0] && SM.data.feed[0].length) {
      if (pagePos > SM.data.feed[0].length) {
        this.feedPos = pagePos - SM.data.feed[0].length - 1;
      } else {
        this.feedPos = 0;
      }
    } else {
      this.feedPos = pagePos - 1;
    }
  },
  appendHtml: function appendHtml() {
    var htmlStr = '';
    var dataObj = SM.data.jinpinlanmu.list;
    var self = this;
    htmlStr += '<section class="gl_nav_list" id="j_goodColumn" data-sudaclick="goodColumnExp">';
    htmlStr += '<ul class="gl_nav_list_ul">';
    for (var i = 0, len = dataObj.length; i < len; i++) {
      htmlStr += '<li class="gl_nav_list_li">\n                  <a href="' + dataObj[i].link.url + '">\n                      <figure class="gl_nav_list_pic i_bg">\n                        <img class="gl_nav_list_img" data-src="' + dataObj[i].imgurl.replace("http:", "https:") + '" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACAQMAAACnuvRZAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjAAIAAAQAASDSLW8AAAAASUVORK5CYII=">\n                      </figure>\n                      <h2 class="gl_nav_list_title">' + dataObj[i].link.title + '</h2>\n                  </a>\n              </li>';
    }
    $("#j_card_intenews").children("a").eq(self.feedPos).get(0).insertAdjacentHTML("beforeBegin", htmlStr);
    isFirst = true;
  },
  exeposure: function exeposure() {
    if ($("#j_goodColumn").length == 0) return false;
    __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_exposure___default.a.pushListeningEle([$("#j_goodColumn").get(0)], function (arr) {
      if (window.SIMA) {
        var clickInfo = {
          'type': 'goodColumn', //曝光的类型
          'name': 'goodColumnExp', //当前点击的aid关键字 
          'title': '精品栏目曝光', //中文说明
          'index': 0 //索引  如果是单个为0即可
        };
        if (window.SIMA.suda_count) {
          window.SIMA.suda_count(clickInfo);
        }
      };
    });
  },
  swift: function swift() {
    if ($("#j_goodColumn").length == 0) return false;
    new __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_swiper___default.a('#j_goodColumn', {
      wrapperClass: "gl_nav_list_ul",
      slideClass: 'gl_nav_list_li',
      freeMode: true,
      paginationClickable: true,
      slidesPerView: 'auto',
      onTouchEnd: function onTouchEnd(swiper) {
        __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_lazyload__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_tools_lazyload__["a" /* default */].currentLazy();
      }
    });
  }
};

/* harmony default export */ __webpack_exports__["a"] = (goodColumn);

/***/ }),
/* 61 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_lazyload__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__template_js__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_ua__ = __webpack_require__(15);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_exposure__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_exposure___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_exposure__);
// import ucJssdk from './uc_jssdk.js';






var indexNum = false;
var iqiyiFeedData = '';
// let isOnladData = false;
var posItem = [];
var orderNum = 0;
var isConsole = location.href.indexOf("iqiyiDebug=1") != -1 ? true : false;
var iqiyiFeed = {
  getSmartPos: function getSmartPos() {
    var feedIqiyiNum = [];
    if (SM && SM.data && SM.data.qudao && SM.data.qudao.all_pos && SM.data.qudao.all_pos.feed) {
      var iqiyiPos = SM.data.qudao.all_pos.feed.iqiyi;
      if (iqiyiPos && iqiyiPos.length != 0) {
        feedIqiyiNum = iqiyiPos;
      }
    }
    var iqiyiFeedObj = [];
    if (feedIqiyiNum && Array.isArray(feedIqiyiNum)) {
      for (var uci = 0; uci < feedIqiyiNum.length; uci++) {
        if (feedIqiyiNum[uci] <= 2) {
          feedIqiyiNum[uci] = 2;
        }
        iqiyiFeedObj.push({ "num": parseInt(feedIqiyiNum[uci]) - 2, "isload": true });
      }
    }
    return iqiyiFeedObj;
  },
  getTouchPos: function getTouchPos() {
    var feedIqiyiNum = [];
    if (SM && SM.data && SM.data.qudao && SM.data.qudao.all_pos && SM.data.qudao.all_pos.touch) {
      var iqiyiPos = SM.data.qudao.all_pos.touch.iqiyi;
      if (iqiyiPos && iqiyiPos.length != 0) {
        feedIqiyiNum = iqiyiPos;
      }
    }
    var iqiyiFeedObj = [];
    if (feedIqiyiNum && Array.isArray(feedIqiyiNum)) {
      for (var uci = 0; uci < feedIqiyiNum.length; uci++) {
        if (feedIqiyiNum[uci] <= 1) {
          feedIqiyiNum[uci] = 1;
        }
        iqiyiFeedObj.push({ "num": parseInt(feedIqiyiNum[uci]) - 1, "isload": true });
      }
    }
    return iqiyiFeedObj;
  },
  init: function init(dom, pos) {
    if (__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_ua__["a" /* default */].platformInfo.system != 'android' || !SM || !SM.data || !SM.data.qudao || !SM.data.qudao.iqiyi || SM.data.qudao.iqiyi.length == 0) return false;

    var self = this;
    this.dom = dom || 'j_card_intenews';

    iqiyiFeedData = SM.data.qudao.iqiyi[0];

    orderNum = parseInt(Math.random() * iqiyiFeedData.length);
    console.log(orderNum);

    posItem.push({ "order": orderNum, "pos": pos });
    if (isConsole) {
      console.log(SM.data.qudao.iqiyi, "奇艺数据");
    }
    self.adaptWork();
  },
  adaptWork: function adaptWork() {
    var self = this;
    if (iqiyiFeedData.length == 0 || posItem.length == 0) return false;
    for (var k = 0; k < posItem.length; k++) {
      if (!iqiyiFeedData[posItem[k].order]) continue;
      self.adapt(iqiyiFeedData[posItem[k].order], posItem[k].pos);
    }
    posItem = [];
  },
  adapt: function adapt(data, pos) {
    var info = {};
    var self = this;
    info.title = data.title || '';
    info.intro = data.intro || '';
    info.link = data.link || '';
    info.comment = 0;
    var htmlsrt = '';
    if (data && data.pics && data.pics.img_original && data.pics.img_original.length >= 3) {
      info.imgs = [];

      if (self.dom == 'j_card_intenews') {
        info.tag = '<mark class="cm_mark cm_mark_r">图集</mark>';
        for (var i = 0; i < 3; i++) {
          info.imgs.push(__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(data.pics.img_original[i], "230_154", true));
        }
        var dataObj = {
          info: info,
          type: "feediqiyi"
        };
        htmlsrt = __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].Ztemplate.threePicFnTem(dataObj);
      } else {
        for (var _i = 0; _i < 3; _i++) {
          info.imgs.push(data.pics.img_original[_i]);
        }
        htmlsrt = __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].get3PicsFeedStr("feediqiyi", info, false, false, false, "feediqiyi");
      }
    } else {

      if (self.dom == 'j_card_intenews') {
        info.img = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(data.img, '200_134', true) || '';
        var dataObj = {
          info: info,
          type: "feediqiyi"
        };
        htmlsrt = __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].Ztemplate.picTxtFnTem(dataObj);
      } else {
        info.img = data.img || '';
        htmlsrt = __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].getCommonFeedStr("iqiyiuc", info, false, false, false, "feediqiyi");
      }
    }

    $("#" + self.dom).children("a").eq(pos).get(0).insertAdjacentHTML("beforeBegin", htmlsrt);
    __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_lazyload__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_lazyload__["a" /* default */].currentLazy();
    self.resetAD($("#" + self.dom).children("a").eq(pos));
    var ucFeedDom = $("#" + self.dom).children("a").eq(pos).get(0);
    var ucFeedArr = [];
    ucFeedArr.push(ucFeedDom);
    __WEBPACK_IMPORTED_MODULE_4__mfelibs_base_tools_exposure___default.a.pushListeningEle(ucFeedArr, function (arr) {
      window.SIMA({
        action: "_exposure",
        pk: '187523',
        data: {
          "index": pos,
          "aid": "iqiyiFeed",
          "url": encodeURIComponent(info.link)
        }
      });
    });
    $("#" + self.dom).children("a").eq(pos).on('click', function () {
      window.SIMA({
        action: "_click",
        pk: '187523',
        data: {
          "index": pos,
          "aid": "iqiyiFeed",
          "url": encodeURIComponent(info.link)
        }
      });
      var config = {
        "androidInstallUrl": info.intro,
        "androidNativeUrl": info.link
      };
      _sinaCallEvent.trigger('sina_open_native', config);
    });
  },
  resetAD: function resetAD(targetEle) {
    var index = targetEle.index() + 1;
    var domBox = {};
    if ($('#j_card_intenews').length == 0) {
      domBox = $("#j_card_like_feed");
    } else {
      domBox = $("#j_card_intenews");
    }
    var feeds = domBox.children();
    for (var i = index; i < feeds.length; i++) {
      if (feeds.eq(i).data("style") == 'client') {
        feeds.eq(i).insertBefore(feeds.eq(i).prev());
      }
    }
  }
};
/* harmony default export */ __webpack_exports__["a"] = (iqiyiFeed);

/***/ }),
/* 62 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_url2callupId__ = __webpack_require__(16);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__sina_sax_js__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_swiper__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_swiper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_swiper__);





//智能版和标准版公共的部分
var mutual = {
  init: function init() {
    // 头像
    this.getUserIcon();
    // 刷新页面
    this.refreshPage();
    // 焦点图
    this.initSwiper();
  },
  initSwiper: function initSwiper() {
    var _this = this;
    var version = parseInt(__WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].cookie.get('tabVersion'));

    if (version && version != '0' && document.querySelector(".j_nav")) {
      var oA = document.querySelectorAll('.j_nav a')[0];
      if (oA) {
        var bindEvent = function bindEvent() {
          _this.appendToSwiper.call(_this);
          oA.removeEventListener('click', bindEvent, false);
        };

        oA.addEventListener('click', bindEvent, false);
      }
    } else {
      this.appendToSwiper();
    }
  },
  appendToSwiper: function appendToSwiper() {
    if (!window.SM.data.focuspic) return false;
    var str = '';
    var obj = window.SM.data.focuspic;
    var txtObj = '';
    var swiperBox = document.querySelector('.swiper-wrapper');
    var lz2X1 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=';
    var ua = navigator.userAgent.toLowerCase();
    for (var i = 0; i < obj.length; i++) {
      str += '<li class="swiper-slide">';
      var titleReplace = obj[i].title.replace(/"/g, '');
      if (obj[i].type && obj[i].type === 'callupapp' && ua.indexOf('sinanews') == -1) {
        var callupid = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_url2callupId__["a" /* default */])(obj[i].link);
        var chName = obj[i].link.split("//")[1].split(".")[0];
        str += '<a href="javascript:;" data-position="' + (i + 3) + '" data-callupid="' + callupid + '" data-type="wm_' + chName + '_' + callupid + '" data-kid="112"  data-app="news" data-domain="' + chName + '" data-channel="' + chName + '" data-calluptype="SN_0153"  title="' + titleReplace + '" class="j_call_native">';
      } else {
        str += '<a href="' + obj[i].link + '" title="' + obj[i].title + '">';
      }
      str += '<img class="img_width swiper-lazy nolzload" src="' + lz2X1 + '" alt="' + titleReplace + '" data-src="' + obj[i].img + '">';
      str += '<h2 class="swiper-slide_cite"><em class="swiper-slide_tit">' + obj[i].title + '</em></h2>';
      str += '</a></li>';
    }

    swiperBox.insertAdjacentHTML('beforeEnd', str);
    this.newSwiper();
    _sinaCallEvent && _sinaCallEvent.trigger("sina_bind_target");
    __WEBPACK_IMPORTED_MODULE_2__sina_sax_js__["a" /* default */] && __WEBPACK_IMPORTED_MODULE_2__sina_sax_js__["a" /* default */].callback('swiperSlide', [mutual.swiper]);
  },
  newSwiper: function newSwiper() {
    mutual.swiper = new __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_swiper___default.a('.swiper-container', {
      pagination: '.swiper-pagination',
      paginationType: 'fraction',
      loop: true,
      autoplay: 3000,
      speed: 300,
      lazyLoading: true,
      autoplayDisableOnInteraction: false,
      observeAutoPlay: true,
      lazyStatusLoadedClass: 'finpic',
      lazyLoadingInPrevNext: true,
      lazyLoadingInPrevNextAmount: 1
    });
    // return this.swiper;
  },
  getUserIcon: function getUserIcon() {
    // 页面头像
    window.getUserInfo && window.getUserInfo(function (rs) {
      if (!rs || !rs.userface) {
        return false;
      }
      var userIconBox = document.querySelector('#loginBox');
      if (userIconBox) {
        userIconBox.classList.add("hd_user_ic_hide");
        userIconBox.innerHTML = '<img src="' + rs.userface + '" class="hd_user_pic" />';
      }
    });
  },
  refreshPage: function refreshPage() {
    var refreshDom = document.querySelector('#j_toTop'),
        fixAppBtn = document.querySelector('#j_fixAppBtn'),
        refreshData = document.querySelector('#j_refreshData'),
        isHomev8 = document.querySelector('#j_card_like_feed'),
        windowHeight = window.innerHeight,
        prevScrollHeight = 0,
        removeTimer = 0,
        self = this,
        flage = true;

    var ua = navigator.userAgent.toLowerCase();
    if (isHomev8) {
      //标准版浮层窗口控制 
      $(".page_main").append('<a id="j_smartFix" class="fl_smartFix" data-sudaclick="smartFix" href="javascript:;" title="智能版">智能版</a>');
      var smartFix = document.querySelector('#j_smartFix');
      var isFirstExp = true;
    }
    window.addEventListener('scroll', function () {
      var pageScrollTop = document.body.scrollTop || document.documentElement.scrollTop;
      if (pageScrollTop > window.innerHeight * 1.5) {
        refreshDom.style.display = 'block';
        if (ua.indexOf("sinanews") == -1 && fixAppBtn) {
          fixAppBtn.style.display = 'block';
        }
        if (refreshData) {
          refreshData.style.display = 'block';
        }
        if (smartFix && isHomev8 && windowHeight - isHomev8.getBoundingClientRect().top >= 0) {
          smartFix.style.display = 'block';
          if (isFirstExp) {
            isFirstExp = false;
            newExposure.pushListeningEle([$("#j_smartFix").get(0)], function (arr) {
              if (window.SIMA) {
                var clickInfo = {
                  'type': 'smartFix', //曝光的类型
                  'name': 'smartFixExp', //当前点击的aid关键字 
                  'title': '智能版icon浮层曝光', //中文说明
                  'index': 0 //索引  如果是单个为0即可
                };
                if (window.SIMA.suda_count) {
                  window.SIMA.suda_count(clickInfo);
                }
              };
            });
          }
        } else if (smartFix) {
          smartFix.style.display = 'none';
        }
        if (flage) {
          flage = false;
          setTimeout(function () {
            refreshDom.insertAdjacentHTML("afterBegin", "<em class='fl_ref_em'></em>");
          }, 2000);
        }
        if (removeTimer) {
          clearTimeout(removeTimer);
        }
        removeTimer = setTimeout(function () {
          refreshDom.style.display = 'none';
          if (fixAppBtn) {
            fixAppBtn.style.display = 'none';
          }
          if (refreshData) {
            refreshData.style.display = 'none';
          }
          if (smartFix) {
            smartFix.style.display = 'none';
          }
        }, 3000);
      } else {
        refreshDom.style.display = 'none';
        if (fixAppBtn) {
          fixAppBtn.style.display = 'none';
        }
        if (refreshData) {
          refreshData.style.display = 'none';
        }
        if (smartFix) {
          smartFix.style.display = 'none';
        }
      }
      prevScrollHeight = document.body.scrollTop || document.documentElement.scrollTop;
    });
    refreshDom.addEventListener("click", function () {
      var redDot = refreshDom.querySelector(".fl_ref_em");
      if (redDot) {
        redDot.classList.add('hide');
      }
      if (document.querySelector(".j_scroll_tab")) {
        document.querySelector(".j_scroll_tab").classList.add('hide');
      }
      window.scrollTo(0, 0);
      location.reload();
    }, false);
    if (smartFix) {
      smartFix.addEventListener("click", function () {
        __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].cookie.set('SMART', 1, 1 * 30 * 24 * 60 * 60, '.sina.cn', '/');
        var wm = self.getWm() ? "&wm=" + self.getWm() : "";
        location.href = "https://sina.cn/index/feed?vt=4&pos=108&his=0" + wm;
      }, false);
    }
    _sinaCallEvent && _sinaCallEvent.trigger("sina_bind_target");
  },
  pageMode: function pageMode(boole) {
    // 标准版和智能版切换
    if (!document.querySelector(".hd_cut")) return false;
    var allAction = document.querySelector(".hd_cut").querySelectorAll("a");
    var wm = this.getWm() ? "&wm=" + this.getWm() : "";
    [].slice.call(allAction).forEach(function (ele, index) {
      ele.addEventListener('click', function (evt) {
        if (index) {
          __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].cookie.set('SMART', 1, 1 * 30 * 24 * 60 * 60, '.sina.cn', '/');
          location.href = "https://sina.cn/index/feed?vt=4&pos=108&his=0" + wm;
        } else {
          // var _SMART = sinaUtils.cookie.get("_SMART");
          // var SMART = sinaUtils.cookie.get("SMART");
          // if(_SMART && _SMART > 0){
          //   if(SMART == '' || SMART >= 2){
          //     sinaUtils.jsonp('https://sapi.sina.cn/ls/standardStatistics', function() {
          //       console.log("灰度统计成功！")
          //     }, 'grayCount', function() {
          //       console.log("灰度统计失败")
          //     });
          //   }
          // }
          // setTimeout(function(){
          __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].cookie.set('SMART', 0, 1 * 30 * 24 * 60 * 60, '.sina.cn', '/');
          location.href = "https://sina.cn?vt=4&pos=108" + wm;
          // },300);
        }
      });
    });
  },

  getWm: function getWm() {
    var curUrl = location.href;
    var query = curUrl.toLocaleLowerCase().match(/\?(.*)$/);
    var wm = null;
    if (query) {
      //query = query[1];
      wm = query[1].match(/\&?wm=([0-9_]+)/);
    }
    return wm && wm[1];
  }
};
/* harmony default export */ __webpack_exports__["a"] = (mutual);

/***/ }),
/* 63 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__creative1_js__ = __webpack_require__(58);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__creative1_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__creative1_js__);


var newIdeaAd = {
    isReady: false,
    workerList: [],
    pluginInfo: {
        src: 'https://d1.sina.com.cn/litong/path/new/creative1.js'
        // src : 'https://d2.sina.com.cn/litong/path/new/creative1.js',
    },
    /**
     * 插入插件
     */
    getPlugin: function getPlugin() {
        if (!!window.sinaCreative && !this.isReady) {
            this.isReady = true;
            this.goWork();
        } else {
            var _s = document.createElement('script');
            var self = this;
            _s.src = this.pluginInfo.src;
            _s.onload = function () {
                self.isReady = true;
                self.goWork();
            };
            document.body.appendChild(_s);
        }
    },


    /**
     * 
     * @param {执行插入动效队列} aWork 
     */
    goWork: function goWork(aWork) {
        // debugger
        if (!!aWork) {
            this.workerList.push(aWork);
        }

        if (!this.isReady) {
            this.getPlugin();
            return;
        }

        for (var i = this.workerList.length - 1; i >= 0; i--) {
            var tmp = this.workerList.splice(i);
            (sinaCreative = window.sinaCreative || []).push(tmp[0]);
        }
    },


    /**
     * 创建唯一标识
     */
    createId: function createId() {
        var s = [];
        var hexDigits = "0123456789abcdef";
        var idLen = 8; //idLen>8
        for (var i = 0; i < idLen; i++) {
            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
        }
        // s[14] = "4"; // bits 12-15 of the time_hi_and_version field to 0010
        s[parseInt(idLen / 2) + 1] = hexDigits.substr(s[idLen / 2] & 0x3 | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01
        // s[8] = s[13] = s[18] = s[23] = "-";

        var uuid = s.join("");
        return '_' + uuid + new Date().getTime().toString().substring(5, 13);
    }
};
/* harmony default export */ __webpack_exports__["a"] = (newIdeaAd);

/***/ }),
/* 64 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__template_js__ = __webpack_require__(1);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_swiper__ = __webpack_require__(6);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_swiper___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_swiper__);
// jshint esversion:6




var doc = document;
var win = window;

var secondFloor = {
  init: function init(selector, pos, isBigPic) {
    var str = selector || "#j_card_yaowen";
    this.entry = str;
    this.isBigPic = isBigPic || true;
    var dom = this.secondFloor();
    __WEBPACK_IMPORTED_MODULE_1__template_js__["a" /* default */].appendToCard(dom, pos, this.entry);
    _sinaCallEvent && _sinaCallEvent.trigger("sina_bind_target");
    new __WEBPACK_IMPORTED_MODULE_2__mfelibs_base_tools_swiper___default.a('.secondFloor', {
      wrapperClass: "bmf_c2",
      slideClass: "bmf_c3",
      loop: true,
      autoplay: 3000,
      speed: 300,
      lazyLoading: true,
      autoplayDisableOnInteraction: false,
      observeAutoPlay: true,
      lazyStatusLoadedClass: 'finpic',
      lazyLoadingInPrevNext: true,
      lazyLoadingInPrevNextAmount: 1
    });
    this.exeposure();
  },
  exeposure: function exeposure() {
    var exeArr = [];
    exeArr.push($(".secondFloor").get(0));
    newExposure.pushListeningEle(exeArr, function (arr) {
      if (window.SIMA) {
        var ExpInfo = {
          'type': 'secondFloorExp', //曝光的类型
          'name': 'secondFloor', //当前点击的aid关键字 
          'title': '二楼曝光', //中文说明
          'index': 0 //索引  如果是单个为0即可
        };
        if (window.SIMA.suda_count) {
          window.SIMA.suda_count(ExpInfo);
        }
      };
    });
  },

  secondFloor: function secondFloor() {
    // 插入置顶
    var arr = [];
    var callstr = ' callupid="" docid="" data-sudaclick="secondFloor" data-app="news" data-kid="260" data-calluptype="SN_0175"';
    if (this.isBigPic) {
      arr.push('<a class="show m_f_a j_call_native" href="JavaScript:void(0)" title="\u5728\u4E8C\u697C\uFF0C\u54A8\u8BE2\u4E0E\u54C1\u8D28\u76F8\u9047 \u4EAB\u53D7\u7CBE\u54C1\u9605\u8BFB\u7684\u65F6\u95F4"' + callstr + '>\n          <h3 class="cm_tit">\u5728\u4E8C\u697C\uFF0C\u54A8\u8BE2\u4E0E\u54C1\u8D28\u76F8\u9047 \u4EAB\u53D7\u7CBE\u54C1\u9605\u8BFB\u7684\u65F6\u95F4</h3>\n          <aside class="i_gx3_img_box">\n            <section class="bmf_c1 big secondFloor">\n              <ul class="bmf_c2">\n                <li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img1.png" /></li>\n                <li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img2.png" /></li>\n                <li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img3.png" /></li>\n                <li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img4.png" /></li>\n              </ul>\n          </section>\n          </aside>\n          <blockquote class="cm_f_ic cm_f_ic_l">\n            <em class="m_f_con_n"><span class="m_f_con_ic icon_com"></span><span class="m_f_con_com_n">2367</span></em>\n          </blockquote>\n      </a>');
    } else {
      if (!__WEBPACK_IMPORTED_MODULE_1__template_js__["a" /* default */].isLeftArt()) {
        arr.push('<a class="m_f_a  j_call_native" href="JavaScript:void(0)" title="在二楼，咨询与品质相遇 享受精品阅读的时间"' + callstr + '>');
        arr.push('<section class="bmf_c1 mini secondFloor">');
        arr.push('<ul class="bmf_c2">');
        arr.push('<li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img1.png"></li>');
        arr.push('<li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img2.png"></li>');
        arr.push('<li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img3.png"></li>');
        arr.push('<li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img4.png"></li>');
        arr.push('</ul>');
        arr.push('</section>');
        arr.push('<aside class="m_f_con">');
        arr.push('<h2 class="m_f_con_t cm_tit">在二楼，咨询与品质相遇 享受精品阅读的时间</h2>');
        arr.push('<blockquote class="cm_f_ic">');
        arr.push('<em class="m_f_con_n m_f_con_n_r"><span class="m_f_con_ic_l m_f_con_ic icon_com"></span><span class="m_f_con_com_n">2367</span></em>');
        arr.push('</blockquote>');
        arr.push('</aside>');
        arr.push('</a>');
      } else {
        arr.push('<a class="m_f_a_r  j_call_native" href="JavaScript:void(0)" title="在二楼，咨询与品质相遇 享受精品阅读的时间"' + callstr + '>');
        arr.push('<aside class="m_f_con">');
        arr.push('<h2 class="m_f_con_t cm_tit">在二楼，咨询与品质相遇 享受精品阅读的时间</h2>');
        arr.push('<blockquote class="cm_f_ic">');
        arr.push('<em class="m_f_con_n m_f_con_n_r"><span class="m_f_con_ic_l m_f_con_ic icon_com"></span><span class="m_f_con_com_n">2367</span></em>');
        arr.push('</blockquote>');
        arr.push('</aside>');
        arr.push('<section class="bmf_c1 mini secondFloor">');
        arr.push('<ul class="bmf_c2">');
        arr.push('<li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img1.png"></li>');
        arr.push('<li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img2.png"></li>');
        arr.push('<li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img3.png"></li>');
        arr.push('<li class="bmf_c3 i_bg"><img class="img_width swiper-lazy" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABAQMAAADO7O3JAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=" data-src="https://mjs.sinaimg.cn/wap/online/home/v8/trunk/images/img4.png"></li>');
        arr.push('</ul>');
        arr.push('</section>');
        arr.push('</a>');
      }
    }
    return arr.join('');
  }
};

/* harmony default export */ __webpack_exports__["a"] = (secondFloor);

/***/ }),
/* 65 */
/***/ (function(module, exports) {

var tmpIdea52 = { "adtype": "02", "pdps": "PDPS000000060143", "author": "", "authoruid": "0", "categoryid": "1", "channelid": "0", "columnid": "0", "comment_reply": "2422", "comment_show": "0", "comment_total": "0", "commentid": "", "ctime": "", "docid": "", "ext_0": "0", "ext_1": "0", "ext_2": "0", "ext_3": "0", "ext_4": "0", "images": null, "img": { "u": "https://d7.sinaimg.cn/pfpghc2/201708/30/a0dd91198e594a2d8816923468c800e3.jpg", "w": "0", "h": "0" }, "intro": null, "ipad_vid": "", "keywords": "", "level": "1", "lids": "", "mediaid": "0", "oid": "0", "productid": "0", "stitle": "", "subjectid": "0", "tel": "", "scheme": "", "download": "", "summary": null, "templateid": "52", "adSource": "创新推送", "title": "华为P10 人像摄影大师", "url": "http:\/\/saxn.sina.com.cn\/dsp\/click?t=MjAxNy0wOC0yOSAxNTowMjo0OC45MTAJMTExLjEzLjk1LjMJX2FkNTVlODlkOGEzMTc2OTVmNDEzODkwODUyZTgxN2YxCTYxY2JiZGZjLWYyMjItNGZiMy05ZjdhLWQ0MmU3YTc3ZGU4YQkzMDIxNTg0CTYyNjE0NzIyOTNfUElOUEFJLUNQQwkzMDA4ODM5CTc2ODIzCTAuMDA5MTgyMjEJMQl0cnVlCVBEUFMwMDAwMDAwNjAxNDMJMzA0MDQ3MglXQVAJeHhsCS0JMXw3ZW1ITE1zNUlCcTl4OExVOUg4OGphfDM1fG51bGx8Ymp8NmxiRTdYdElhOXhlcUZHWFM4ZHR0ZHw2d2ZjN2xKQmQ4aXBkSXhxQWJNeFpkfDAJbnVsbAkxCS0JLQktCTAJX2FkNTVlODlkOGEzMTc2OTVmNDEzODkwODUyZTgxN2YxCVdBUF9GRUVECS0Jbm8tdXNlcnRhZ3x1dmZtcnQtaHl0ZwktCXVzZXJfdGFnOjIwMjEzOjAuMHx3YXBfb3M6NzAyOjAuMHx1c2VyX2FnZTo2MDQ6MC4yMTkyM3x1c2VyX2dlbmRlcjo1MDE6MS4wfHZfem9uZTozMDIwMDA6MC4wfG5ldF93aWZpOjExMDE6MC4wCTAJOTIwMDAJNTAwMDA=&userid=_ad55e89d8a317695f413890852e817f1&type=0&c=0&auth=872c2e55b9e395c4&url=http%3A%2F%2Fsax.sina.cn%2Fclick%3Ftype%3D2%26t%3DY2JhN2VmZDAtMjA1OS0zNDM0LWI0YzAtY2M1ZGIwYTgxZjYzCTQ1CVBEUFMwMDAwMDAwNjAxNDMJMzA0MDQ3MgkxCVJUQgktCQk%253D%26id%3D45%26url%3Dhttp%253A%252F%252Fhn.meifang.com%252Flist-52-1.html%253Fsina%26sina_sign%3Ddc9db75bf59b72fc&sign=664c8fc1d689c2c1&p=y6fv0CBZNDS0wMxdsKgfY0zxpne2%2BcmZInobvQ%3D%3D", "vid": "", "wapurl": "", "weiboname": "", "weibourl": "", "zurl": "", "namonitor": { "weibourl": "", "zurl": "", "comment": "", "sharing": "", "tel": "", "scheme": "", "download": "", "ext_0": null, "ext_1": null, "ext_2": null, "ext_3": null, "ext_4": null }, "pvmonitor": ["https:\/\/saxn.sina.cn\/dsp\/view?m=MjAxNy0wOC0yOSAxNTowMjo0OC45MTAJNjFjYmJkZmMtZjIyMi00ZmIzLTlmN2EtZDQyZTdhNzdkZThhCTMwMjE1ODQJMzAwODgzOQk2MjYxNDcyMjkzX1BJTlBBSS1DUEMJUERQUzAwMDAwMDA2MDE0MwkzMDQwNDcyCXh4bAkxCS0JV0FQCS0JMQkwMWNlNGYwOWVmZWU0ZGQyYWE3MDUzMWU4MWQ0ODQ0YwljYmE3ZWZkMC0yMDU5LTM0MzQtYjRjMC1jYzVkYjBhODFmNjMJNzY4MjMJMC4wMDkxODIyMQkxMTEuMTMuOTUuMwlfYWQ1NWU4OWQ4YTMxNzY5NWY0MTM4OTA4NTJlODE3ZjEJMAl0cnVlCU5BVElWRQlXQVAJLQkwCV9hZDU1ZTg5ZDhhMzE3Njk1ZjQxMzg5MDg1MmU4MTdmMQlXQVBfRkVFRAktCW5vLXVzZXJ0YWd8dXZmbXJ0LWh5dGcJLQl1c2VyX3RhZzoyMDIxMzowLjB8d2FwX29zOjcwMjowLjB8dXNlcl9hZ2U6NjA0OjAuMjE5MjN8dXNlcl9nZW5kZXI6NTAxOjEuMHx2X3pvbmU6MzAyMDAwOjAuMHxuZXRfd2lmaToxMTAxOjAuMAkwCTkyMDAwCTUwMDAw&userid=_ad55e89d8a317695f413890852e817f1&auth=d7a1e0efe227b452&p=y6fv0CBZNDS0wMxdsKgfY0zxpne2%2BcmZInobvQ%3D%3D", "https:\/\/sax.sina.cn\/view?type=2&t=Y2JhN2VmZDAtMjA1OS0zNDM0LWI0YzAtY2M1ZGIwYTgxZjYzCTQ1CVBEUFMwMDAwMDAwNjAxNDMJNTAJMzA0MDQ3MgkxCVJUQgktCQk%3D"], "vision": ["https:\/\/saxn.sina.cn\/dsp\/vision?m=MjAxNy0wOC0yOSAxNTowMjo0OC45MTAJNjFjYmJkZmMtZjIyMi00ZmIzLTlmN2EtZDQyZTdhNzdkZThhCTMwMjE1ODQJMzAwODgzOQk2MjYxNDcyMjkzX1BJTlBBSS1DUEMJUERQUzAwMDAwMDA2MDE0MwkzMDQwNDcyCXh4bAkxCS0JV0FQCS0JMQkwMWNlNGYwOWVmZWU0ZGQyYWE3MDUzMWU4MWQ0ODQ0YwljYmE3ZWZkMC0yMDU5LTM0MzQtYjRjMC1jYzVkYjBhODFmNjMJNzY4MjMJMC4wMDkxODIyMQkxMTEuMTMuOTUuMwlfYWQ1NWU4OWQ4YTMxNzY5NWY0MTM4OTA4NTJlODE3ZjEJMAl0cnVlCU5BVElWRQlXQVAJLQkwCV9hZDU1ZTg5ZDhhMzE3Njk1ZjQxMzg5MDg1MmU4MTdmMQlXQVBfRkVFRAktCW5vLXVzZXJ0YWd8dXZmbXJ0LWh5dGcJLQl1c2VyX3RhZzoyMDIxMzowLjB8d2FwX29zOjcwMjowLjB8dXNlcl9hZ2U6NjA0OjAuMjE5MjN8dXNlcl9nZW5kZXI6NTAxOjEuMHx2X3pvbmU6MzAyMDAwOjAuMHxuZXRfd2lmaToxMTAxOjAuMAkwCTkyMDAwCTUwMDAw&userid=_ad55e89d8a317695f413890852e817f1&auth=d7a1e0efe227b452", "https:\/\/sax.sina.cn\/view?type=2&t=Y2JhN2VmZDAtMjA1OS0zNDM0LWI0YzAtY2M1ZGIwYTgxZjYzCTQ1CVBEUFMwMDAwMDAwNjAxNDMJNTAJMzA0MDQ3MgkxCVJUQgktCQk%3D&v=1"], "pos": "2", "uuid": null, "img_pause": null, "img_play": null, "play": null, "play_pause": null, "sub": null, "appid": null };
var tmpIdea51 = { "adtype": "02", "pdps": "PDPS000000060143", "author": "", "authoruid": "0", "categoryid": "1", "channelid": "0", "columnid": "0", "comment_reply": "2422", "comment_show": "0", "comment_total": "0", "commentid": "", "ctime": "", "docid": "", "ext_0": "0", "ext_1": "0", "ext_2": "0", "ext_3": "0", "ext_4": "0", "images": [{ u: 'http://d1.sina.com.cn/litong/path/new/2.jpg', desc: '魔力宝贝 内测版', ext: '去下载', link: 'http://sina.cn' }, { u: 'http://d1.sina.com.cn/litong/path/new/3.jpg', desc: '魔力宝贝 全球版', ext: '去看看', link: 'http://sina.cn' }, { u: 'http://d1.sina.com.cn/litong/path/new/4.jpg', desc: '魔力宝贝 Android版', ext: '去看看', link: 'http://sina.cn' }], "img": null, "logo": { "u": 'http://d1.sina.com.cn/litong/path/new/6.png', 'desc': "立即下载" }, "intro": null, "ipad_vid": "", "keywords": "", "level": "1", "lids": "", "mediaid": "0", "oid": "0", "productid": "0", "stitle": "", "subjectid": "0", "tel": "", "scheme": "", "download": "", "summary": null, "templateid": "51", "adSource": "创新推送", "title": "90后都在玩的手游，一天破亿", "url": "http:\/\/saxn.sina.com.cn\/dsp\/click?t=MjAxNy0wOC0yOSAxNTowMjo0OC45MTAJMTExLjEzLjk1LjMJX2FkNTVlODlkOGEzMTc2OTVmNDEzODkwODUyZTgxN2YxCTYxY2JiZGZjLWYyMjItNGZiMy05ZjdhLWQ0MmU3YTc3ZGU4YQkzMDIxNTg0CTYyNjE0NzIyOTNfUElOUEFJLUNQQwkzMDA4ODM5CTc2ODIzCTAuMDA5MTgyMjEJMQl0cnVlCVBEUFMwMDAwMDAwNjAxNDMJMzA0MDQ3MglXQVAJeHhsCS0JMXw3ZW1ITE1zNUlCcTl4OExVOUg4OGphfDM1fG51bGx8Ymp8NmxiRTdYdElhOXhlcUZHWFM4ZHR0ZHw2d2ZjN2xKQmQ4aXBkSXhxQWJNeFpkfDAJbnVsbAkxCS0JLQktCTAJX2FkNTVlODlkOGEzMTc2OTVmNDEzODkwODUyZTgxN2YxCVdBUF9GRUVECS0Jbm8tdXNlcnRhZ3x1dmZtcnQtaHl0ZwktCXVzZXJfdGFnOjIwMjEzOjAuMHx3YXBfb3M6NzAyOjAuMHx1c2VyX2FnZTo2MDQ6MC4yMTkyM3x1c2VyX2dlbmRlcjo1MDE6MS4wfHZfem9uZTozMDIwMDA6MC4wfG5ldF93aWZpOjExMDE6MC4wCTAJOTIwMDAJNTAwMDA=&userid=_ad55e89d8a317695f413890852e817f1&type=0&c=0&auth=872c2e55b9e395c4&url=http%3A%2F%2Fsax.sina.cn%2Fclick%3Ftype%3D2%26t%3DY2JhN2VmZDAtMjA1OS0zNDM0LWI0YzAtY2M1ZGIwYTgxZjYzCTQ1CVBEUFMwMDAwMDAwNjAxNDMJMzA0MDQ3MgkxCVJUQgktCQk%253D%26id%3D45%26url%3Dhttp%253A%252F%252Fhn.meifang.com%252Flist-52-1.html%253Fsina%26sina_sign%3Ddc9db75bf59b72fc&sign=664c8fc1d689c2c1&p=y6fv0CBZNDS0wMxdsKgfY0zxpne2%2BcmZInobvQ%3D%3D", "vid": "", "wapurl": "", "weiboname": "", "weibourl": "", "zurl": "", "namonitor": { "weibourl": "", "zurl": "", "comment": "", "sharing": "", "tel": "", "scheme": "", "download": "", "ext_0": null, "ext_1": null, "ext_2": null, "ext_3": null, "ext_4": null }, "pvmonitor": ["https:\/\/saxn.sina.cn\/dsp\/view?m=MjAxNy0wOC0yOSAxNTowMjo0OC45MTAJNjFjYmJkZmMtZjIyMi00ZmIzLTlmN2EtZDQyZTdhNzdkZThhCTMwMjE1ODQJMzAwODgzOQk2MjYxNDcyMjkzX1BJTlBBSS1DUEMJUERQUzAwMDAwMDA2MDE0MwkzMDQwNDcyCXh4bAkxCS0JV0FQCS0JMQkwMWNlNGYwOWVmZWU0ZGQyYWE3MDUzMWU4MWQ0ODQ0YwljYmE3ZWZkMC0yMDU5LTM0MzQtYjRjMC1jYzVkYjBhODFmNjMJNzY4MjMJMC4wMDkxODIyMQkxMTEuMTMuOTUuMwlfYWQ1NWU4OWQ4YTMxNzY5NWY0MTM4OTA4NTJlODE3ZjEJMAl0cnVlCU5BVElWRQlXQVAJLQkwCV9hZDU1ZTg5ZDhhMzE3Njk1ZjQxMzg5MDg1MmU4MTdmMQlXQVBfRkVFRAktCW5vLXVzZXJ0YWd8dXZmbXJ0LWh5dGcJLQl1c2VyX3RhZzoyMDIxMzowLjB8d2FwX29zOjcwMjowLjB8dXNlcl9hZ2U6NjA0OjAuMjE5MjN8dXNlcl9nZW5kZXI6NTAxOjEuMHx2X3pvbmU6MzAyMDAwOjAuMHxuZXRfd2lmaToxMTAxOjAuMAkwCTkyMDAwCTUwMDAw&userid=_ad55e89d8a317695f413890852e817f1&auth=d7a1e0efe227b452&p=y6fv0CBZNDS0wMxdsKgfY0zxpne2%2BcmZInobvQ%3D%3D", "https:\/\/sax.sina.cn\/view?type=2&t=Y2JhN2VmZDAtMjA1OS0zNDM0LWI0YzAtY2M1ZGIwYTgxZjYzCTQ1CVBEUFMwMDAwMDAwNjAxNDMJNTAJMzA0MDQ3MgkxCVJUQgktCQk%3D"], "vision": ["https:\/\/saxn.sina.cn\/dsp\/vision?m=MjAxNy0wOC0yOSAxNTowMjo0OC45MTAJNjFjYmJkZmMtZjIyMi00ZmIzLTlmN2EtZDQyZTdhNzdkZThhCTMwMjE1ODQJMzAwODgzOQk2MjYxNDcyMjkzX1BJTlBBSS1DUEMJUERQUzAwMDAwMDA2MDE0MwkzMDQwNDcyCXh4bAkxCS0JV0FQCS0JMQkwMWNlNGYwOWVmZWU0ZGQyYWE3MDUzMWU4MWQ0ODQ0YwljYmE3ZWZkMC0yMDU5LTM0MzQtYjRjMC1jYzVkYjBhODFmNjMJNzY4MjMJMC4wMDkxODIyMQkxMTEuMTMuOTUuMwlfYWQ1NWU4OWQ4YTMxNzY5NWY0MTM4OTA4NTJlODE3ZjEJMAl0cnVlCU5BVElWRQlXQVAJLQkwCV9hZDU1ZTg5ZDhhMzE3Njk1ZjQxMzg5MDg1MmU4MTdmMQlXQVBfRkVFRAktCW5vLXVzZXJ0YWd8dXZmbXJ0LWh5dGcJLQl1c2VyX3RhZzoyMDIxMzowLjB8d2FwX29zOjcwMjowLjB8dXNlcl9hZ2U6NjA0OjAuMjE5MjN8dXNlcl9nZW5kZXI6NTAxOjEuMHx2X3pvbmU6MzAyMDAwOjAuMHxuZXRfd2lmaToxMTAxOjAuMAkwCTkyMDAwCTUwMDAw&userid=_ad55e89d8a317695f413890852e817f1&auth=d7a1e0efe227b452", "https:\/\/sax.sina.cn\/view?type=2&t=Y2JhN2VmZDAtMjA1OS0zNDM0LWI0YzAtY2M1ZGIwYTgxZjYzCTQ1CVBEUFMwMDAwMDAwNjAxNDMJNTAJMzA0MDQ3MgkxCVJUQgktCQk%3D&v=1"], "pos": "2", "uuid": null, "img_pause": null, "img_play": null, "play": null, "play_pause": null, "sub": null, "appid": null };
window.tmpIdea = {
    t51: tmpIdea51,
    t52: tmpIdea52
};

/***/ }),
/* 66 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__adapt_js__ = __webpack_require__(4);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__template_js__ = __webpack_require__(1);
// jshint esversion:6





var doc = document;
var win = window;

var tystick = {
  init: function init(info, data) {
    if (!info.card || info.card.length == 0) return '';
    var htmlStr = '';
    var mordFeedId = info.card.card_id;
    if (mordFeedId) {
      var moreFeedData = data.cards && data.cards[mordFeedId] && data.cards[mordFeedId].data;
      htmlStr = this.moreFeedSub(info.card, moreFeedData);
    } else {
      htmlStr = this.onlyFeedSub(info.card, info);
    }
    return htmlStr;
  },
  moreFeedSub: function moreFeedSub(cardData, feedList) {
    if (!feedList || feedList.length == 0) return '';
    var headstr = '';
    var footstr = '';
    var feedstr = '';

    headstr = this.headFeed(cardData);
    for (var i = 0, len = feedList.length; i < len; i++) {
      var info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adaptInfo(feedList[i], 'yaowen');
      if (document.querySelector('#j_card_intenews')) {
        if (info.imgs) {
          for (var j = 0; j < info.imgs.length; j++) {
            info.imgs[j] = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.imgs[j], '230_154', true);
          }
        }
        feedstr += __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].Ztemplate.selectFnTem({ info: info });
      } else {
        feedstr = __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].getFeedStr('yaowen', info, feedstr);
      }
    }
    footstr = this.footerFeed(cardData);
    return headstr + feedstr + footstr;
  },
  onlyFeedSub: function onlyFeedSub(cardData, feedData) {
    var str = '';
    str = this.headFeed(cardData);
    var info = __WEBPACK_IMPORTED_MODULE_1__adapt_js__["a" /* default */].adaptInfo(feedData, 'yaowen');
    if (document.querySelector('#j_card_intenews')) {
      if (info.imgs) {
        for (var j = 0; j < info.imgs.length; j++) {
          info.imgs[j] = __WEBPACK_IMPORTED_MODULE_0__utils_js__["a" /* default */].getCuttedImg(info.imgs[j], '230_154', true);
        }
      }
      str += __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].Ztemplate.selectFnTem({ info: info });
    } else {
      str += __WEBPACK_IMPORTED_MODULE_2__template_js__["a" /* default */].getFeedStr('yaowen', info, str);
    }
    str += this.footerFeed(cardData);
    return str;
  },
  headFeed: function headFeed(cardData) {
    var str = '';
    if (cardData.top_ad_pic) {
      str = '<section class="s_card_cec s_card_cec_vd">';
      if (cardData.show_top != 1) return str;
      var top_ad_pic = cardData.top_ad_pic;
      str += '<figure class="s_card_cec_da"><img class="img_width" data-src="' + top_ad_pic.replace('http:', 'https:') + '" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII="></figure>';
    } else {
      str = '<section class="s_card_cec">';
      if (cardData.show_top && cardData.show_top != 1) return str;
      var tag = cardData.tag || '';
      var title = cardData.title || '';
      str += '<aside class="card_tit_zt"><em class="card_tit_zt_e">' + tag + '</em><span class="card_tit_zt_txt">' + title + '</span></aside>';
    }
    return str;
  },
  footerFeed: function footerFeed(cardData) {
    if (cardData.show_bottom != 1) return '</section>';
    var str = '';
    if (cardData.ad_pic) {
      var ad_url = cardData.ad_url || '';
      var enter_url = cardData.url || '';
      var enter_tag = cardData.enter_tag || '';
      var ad_pic = cardData.ad_pic;
      str += '<figure class="s_card_cec_da"><a class="show" href="' + ad_url + '"><img class="img_width" data-src="' + ad_pic.replace('http:', 'https:') + '" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAADAQMAAADbW9/bAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjwAAAABIAAbmszC0AAAAASUVORK5CYII="></a><a href="' + enter_url + '"><em class="s_card_cec_da_em">' + enter_tag + '<span class="most_ic"></span></em></a></figure></section>';
    } else {
      var url = cardData.url || '';
      var enter_tag = cardData.enter_tag || '';
      str += '<a href="' + url + '"><ins class="most_da" title="' + enter_tag + '">' + enter_tag + '<span class="most_ic"></span></ins></a></section>';
    }
    return str;
  }
};
/* harmony default export */ __webpack_exports__["a"] = (tystick);

/***/ }),
/* 67 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_weidong_card__ = __webpack_require__(54);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_exposure__ = __webpack_require__(2);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_exposure___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_exposure__);



var doc = document;
var win = window;
var num = 0;
var wdBigPic = {
  init: function init() {
    this.isFirst = true;
    this.hasDom = true;
    this.wdObj = {};
    this.hasDomFn();
  },
  hasDomFn: function hasDomFn() {
    var len = $(".hasWdDom").length;
    if (len == 0) {
      this.hasDom = false;
      return false;
    }
    this.hasDom = true;
    for (var i = 0; i < len; i++) {
      this.runCom();
    }
    this.exeposure();
    this.destroy();
  },
  runCom: function runCom() {
    if (this.hasDom) {
      if (this.isFirst) {
        this.wdObj = new __WEBPACK_IMPORTED_MODULE_0__mfelibs_weidong_card__["a" /* default */]();
        console.log(this.wdObj);
        this.isFirst = false;
      } else {
        this.wdObj.addCard();
      }
    }
  },
  exeposure: function exeposure() {
    var exeArr = [];
    for (var j = 0; j < $(".hasWdDom").length; j++) {
      exeArr.push($(".hasWdDom").eq(j).get(0));
    }

    __WEBPACK_IMPORTED_MODULE_1__mfelibs_base_tools_exposure___default.a.pushListeningEle(exeArr, function (arr) {
      if (window.SIMA) {
        var ExpInfo = {
          'type': 'wdBigPicExp', //曝光的类型
          'name': 'wdBigPic', //当前点击的aid关键字 
          'title': '微动大图曝光', //中文说明
          'index': num++ //索引  如果是单个为0即可
        };
        if (window.SIMA.suda_count) {
          window.SIMA.suda_count(ExpInfo);
        }
      };
    });
  },
  destroy: function destroy() {
    _sinaCallEvent && _sinaCallEvent.trigger("sina_bind_target");
    $(".m_f_a").removeClass("hasWdDom");
  }
};

/* harmony default export */ __webpack_exports__["a"] = (wdBigPic);

/***/ }),
/* 68 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mfelibs_base_css__ = __webpack_require__(9);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mfelibs_common_feed__ = __webpack_require__(23);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__css_main_all_css__ = __webpack_require__(31);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__css_main_all_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__css_main_all_css__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_SIMA__ = __webpack_require__(10);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__shared_utils_js__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__mfelibs_base_tools_addhistoryurl__ = __webpack_require__(22);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__shared_sina_sax_js__ = __webpack_require__(5);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__feed_push_zn_js__ = __webpack_require__(29);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__shared_newExposure_min_js__ = __webpack_require__(26);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__shared_newExposure_min_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8__shared_newExposure_min_js__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shared_nph_v1_min_js__ = __webpack_require__(27);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shared_nph_v1_min_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__shared_nph_v1_min_js__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__intellect_v_js__ = __webpack_require__(30);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__shared_navlocal_js__ = __webpack_require__(25);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__shared_quset_mobile_js__ = __webpack_require__(28);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__shared_dynamicNav_js__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__shared_uc_feed_js__ = __webpack_require__(12);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__mfelibs_user_unique__ = __webpack_require__(24);
/**
 * @Date:   15-May-2017
 * @Email:  guangyu9@staff.sina.com.cn
 * @Last modified time: 15-May-2017
 */

// import {$} from '@mfelibs/base-utils';





// import '../../shared/suda_map.js';
// suda_init(sudaMapConfig.pageId, 100, sudaMapConfig.version||'');


__WEBPACK_IMPORTED_MODULE_3__mfelibs_base_tools_SIMA__["a" /* default */].init(sudaMapConfig.pageId, 100, sudaMapConfig.version || '');


__WEBPACK_IMPORTED_MODULE_4__shared_utils_js__["a" /* default */].storage.checkfastmode();




setTimeout(function () {
  //解决焦点图偶现插入失败问题。
  __WEBPACK_IMPORTED_MODULE_6__shared_sina_sax_js__["a" /* default */].init();
}, 100);
__WEBPACK_IMPORTED_MODULE_6__shared_sina_sax_js__["a" /* default */].bindEvent();








__WEBPACK_IMPORTED_MODULE_10__intellect_v_js__["a" /* default */]._init();


__WEBPACK_IMPORTED_MODULE_4__shared_utils_js__["a" /* default */].onload(function () {
  __WEBPACK_IMPORTED_MODULE_11__shared_navlocal_js__["a" /* default */].init();
});


// import '@mfelibs/base-keeplive';





// 指纹识别

window.getUserInfo(function (rs) {
  __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_15__mfelibs_user_unique__["a" /* default */])();
  if (__WEBPACK_IMPORTED_MODULE_4__shared_utils_js__["a" /* default */].isDebug()) {
    console.log("执行指纹识别逻辑");
  }
});

// PWA
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js').then(function () {
    console.log('Service Worker Registered');
  }).catch(function (err) {
    console.log(err);
  });
}

/***/ }),
/* 69 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 70 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ }),
/* 71 */
/***/ (function(module, exports) {

// removed by extract-text-webpack-plugin

/***/ })
/******/ ]);